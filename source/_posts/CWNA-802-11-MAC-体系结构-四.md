---
title: 'CWNA:802.11 MAC 体系结构(四)'
date: 2022-02-18 18:08:19
tags: 'Wi-Fi'
---

### 控制帧
控制帧协助传输数据帧，以某个基本速率发送。仅由MAC帧头和帧尾构成，没有帧体。

12种控制帧子类型：
> 波束成形报告轮询帧
> VHT NDP 通告帧
> 控制帧扩展
> 控制帧封装
> 块确认请求帧(BAR)
> 请求发送帧（RTS)
> 允许发送帧(CTS)
> 确认帧(ACK)
> CF-End 帧
> CF-End + CF-ACK 帧

**确认帧(ACK)**
由于802.11通信使用无线介质无法确保数据传输成功，发送端只能依靠接收端的通知来判断传输的帧是否已正确接收。

格式：共14字节
帧控制|持续时间|接收机地址|FCS
2|2|6|4

**块确认帧（BAR）**
802.11e定义的块确认机制，它将多个确认帧聚合为一个确认帧以提高信道利用率。分为两类：
1.即时块确认（immediate BA): 适用于延迟容忍度较低的流量。
2.延迟块确认(delayed BA): 适用于容忍度较高的流量。

块确认帧中的位图(bitmap)字段用于标识所有的接收数据帧的状态。如果只有一个数据帧损坏，那么只需要重传该帧。

**节电轮询帧（PS-Poll）**
采用遗留电源管理机制的客户端通过节电轮询帧请求接入点发送缓冲流量。
节电轮询帧中的持续时间/ID字段作为AID，用AID标识自己向接入点请求缓冲的单播帧。
仅有节电轮询帧使用持续时间/ID字段作为AID。

**RTS/CTS**
存在客户端无法侦听到其他客户端的情况。
请求发送/允许发送机制通过实施NAV分发以帮助避免冲突。

使用RTS/CTS机制的终端每次准备发送帧时，必须在正常的数据传输前执行（RTS/CTS）

**CTS-to-Self**
相较于RTS/CTS，CTS-to-self作为保护机制的优点是发送帧数更少，吞吐量因此而提高。

**保护机制**
802.11标准定义了ERP保护机制，以便两个802.11g无线接口的OFDM传输不会受到DSSS或HR-DSSS传输的干扰。
802.11g ERP终端使用所有终端都能理解的语言通知它们重置NAV计数器。利用RTS/CTS或CTS-to-self帧保留介质后，802.11g终端就能采用OFDM技术调制传输数据帧，
不必担心与802.11bHR-DSSS或遗留的802.11DSSS终端发生冲突。

在ERP基本服务集中触发保护机制的3种情况：
1.如果非ERP客户端关联到ERP接入点，ERP接入点将其信标帧的NonERP_Present 位设置1，从而在基本服务集种启用保护机制。
2.如果侦听到802.11DSSS或802.11b HR-DSSS接入点发送信标帧，会启用保护机制
3.如果侦听到802.11DSSS或802.11b HR-DSSS速率的管理帧，会启用保护机制。

ERP保护机制利用RTS/CTS或CTS-to-Self帧确保802.11终端和遗留的802.11b终端能共存于同一基本服务集。

