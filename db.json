{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/yilia/source/main.0cf68a.css","path":"main.0cf68a.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.0cf68a.js","path":"main.0cf68a.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/mobile.992cbe.js","path":"mobile.992cbe.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/slider.e37972.js","path":"slider.e37972.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","path":"fonts/iconfont.16acc2.ttf","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","path":"fonts/iconfont.45d7ee.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","path":"fonts/iconfont.8c627f.woff","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","path":"fonts/iconfont.b322fa.eot","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/CODE-ANALYSIS-4-scan-process.md","hash":"18ab984af55df3bb5725260d25825ebae153d5a4","modified":1655014753748},{"_id":"source/_posts/CODE-ANALYSIS-5-connect-process-hostmlme.md","hash":"8cd8420ccb8eb0019f395a6fdcbcba5e807c8085","modified":1655014846333},{"_id":"source/_posts/CODE-ANALYSIS-5-connect-process.md","hash":"991e285f1a3b92dc36f892af36c1fe3b6c239fb5","modified":1655014925577},{"_id":"source/_posts/CODE-ANALYSIS-6-disconnect-process.md","hash":"37ed431bfd1a1cb4b15868e389aafc4518abc898","modified":1655014990234},{"_id":"source/_posts/CODE-ANALYSIS-7-get-connection-info.md","hash":"794fbbfc3c38c52f42ef727b34283151894fd3eb","modified":1655015085372},{"_id":"source/_posts/CODE-ANALYSIS-8-data-rx-process.md","hash":"4b0ff3e66bea553640f26bd389c5d580ccf4043a","modified":1655015142864},{"_id":"source/_posts/CODE-ANALYSIS-9-data-tx-process.md","hash":"d2b0b2112f769979d77cb1cca4a3f728aa54d2e2","modified":1655015204151},{"_id":"source/_posts/CODE-ANALYSIS-1-module-init-process.md","hash":"09bc4265a945c7f4d28c0575c46883e4c8754024","modified":1654964216058},{"_id":"source/_posts/CODE-ANALYSIS-3-fw-init.md","hash":"7b912fb5ebb556f0c124ada33496da5b5e0b623b","modified":1654964890249},{"_id":"source/_posts/CODE-ANALYSIS-2-bus-driver-register.md","hash":"fdb90d3abdd8d9cf76d6fe730a133788ec5389b9","modified":1654963631823},{"_id":"source/_posts/CWNA-802-11-MAC-体系结构-三.md","hash":"31af6d3a1d3788257662b24e576964a4489ca9f9","modified":1645169048000},{"_id":"source/_posts/CWNA-802-11-MAC-体系结构-五.md","hash":"15d6f6a7bcdddda952e5f33897d395bacce09b30","modified":1645414744000},{"_id":"source/_posts/CWNA-802-11ax技术-高效无线局域网-二.md","hash":"4a02c08aa065c8f40a1b8816c763b399e36e3fc4","modified":1646121071000},{"_id":"source/_posts/CWNA-802-11-MAC-体系结构-二.md","hash":"87c9a7d1a8524033aede0add332a37e7276bb6ed","modified":1644917719000},{"_id":"source/_posts/CWNA-802-11-MAC-体系结构.md","hash":"866ab5dc7f4c4208ffedb5cc630015443aa5c208","modified":1644829625000},{"_id":"source/_posts/CWNA-802-11-MAC-体系结构-四.md","hash":"339cb20ff72ea2ea009c406e8f2e167d08632338","modified":1645408863000},{"_id":"source/_posts/CWNA-802-11ax技术-高效无线局域网.md","hash":"06c27b07b36694832de161a1c104610d99578009","modified":1646113976000},{"_id":"source/_posts/CWNA-802-11介质访问（二）.md","hash":"5d516e8bedd69127e9cdafc0d7ec493c454c80c4","modified":1644823269000},{"_id":"source/_posts/CWNA-802-11介质访问.md","hash":"b5e6435552611d063bd84d3ed6324d62e187698b","modified":1644573260000},{"_id":"source/_posts/CWNA-IEEE-802-11标准与修正案-3.md","hash":"7e47d561804674cc26bd344ade81f402a8d8796b","modified":1641816929000},{"_id":"source/_posts/CWNA-IEEE-802-11标准与修正案-2.md","hash":"849d4a6efc45ff7ab59c486ec1b026bb3945070e","modified":1641816918000},{"_id":"source/_posts/CWNA-MIMO技术：高吞吐量与甚高吞吐量-三.md","hash":"f5610a21b40948f1d987eacd9b2fc148286a52d0","modified":1645524464000},{"_id":"source/_posts/CWNA-IEEE-802-11标准与修正案.md","hash":"da3821d98698b95980b79e59fb10769fadd7ec07","modified":1641816924000},{"_id":"source/_posts/CWNA-MIMO技术：高吞吐量与甚高吞吐量.md","hash":"2f6c3e9e854f0b45c42f94f46a394425753b5c8b","modified":1645435292000},{"_id":"source/_posts/CWNA-MIMO技术：高吞吐量与甚高吞吐量-二.md","hash":"09e8c0c0409de1c6d819b342b1e57ef6cc9133e1","modified":1645517889000},{"_id":"source/_posts/CWNA-射频基础知识-5.md","hash":"2e9cf5c904ff5e4628e8d5e00f8244bccbf823c5","modified":1641957086000},{"_id":"source/_posts/CWNA-射频信号与天线概念.md","hash":"2cc4d99acfaf9920c0f50f0eab8bd5fab1f8579d","modified":1642408496000},{"_id":"source/_posts/CWNA-射频数学计算.md","hash":"6771c8106863fe50162d51438ee19e5655146967","modified":1641952560000},{"_id":"source/_posts/CWNA-射频基础知识.md","hash":"d3c4bba8571e6316a1c483a9708edc1735e71151","modified":1641865358000},{"_id":"source/_posts/CWNA-射频基础知识（2）.md","hash":"ec183517823207cb45c94d240ce397a20cc50903","modified":1641882373000},{"_id":"source/_posts/CWNA-无线局域网安全体系结构-二.md","hash":"6a425caf209a71e52197ba6808b97a2da00478c0","modified":1646044527000},{"_id":"source/_posts/CWNA-无线局域网拓扑.md","hash":"eed288d2b0bacc676c4e752758d8d9130304c769","modified":1644382713000},{"_id":"source/_posts/CWNA-无线局域网拓扑-二.md","hash":"c8d6e3ab550d715a020e7e598881ec8de26dc170","modified":1644404183000},{"_id":"source/_posts/CWNA-无线局域网故障排除-一.md","hash":"3dab042448f966c77a670108d4359c8ffa7f9c17","modified":1645673394000},{"_id":"source/_posts/CWNA-无线局域网安全体系结构.md","hash":"0c192c88fdd49378e9a9e6e0ceac1a401263ab52","modified":1646036891000},{"_id":"source/_posts/CWNA-无线局域网故障排除.md","hash":"7aca39192562d7f4836a5ceaf7962450f192c9f0","modified":1645673393000},{"_id":"source/_posts/CWNA-无线网络与扩频技术-2.md","hash":"bffd7b2437c831678319fd165eb472b4dac3dacf","modified":1643188736000},{"_id":"source/_posts/CWNA-无线网络与扩频技术.md","hash":"a1d51849a83553b4864a0c49af776a5dacc2c2fd","modified":1642661563000},{"_id":"source/_posts/CWNA-无线网络与扩频技术（三）.md","hash":"759231ce07076cd86c7559f3567bde1696bda084","modified":1643200158000},{"_id":"source/_posts/CWNA-标准、行业组织与通信基础知识概述.md","hash":"02ecd444f0ab9063b066abe7aae27580015dc445","modified":1641816942000},{"_id":"source/_posts/Linux-shell-script-实践记录-一.md","hash":"df24a93fc444d2ba9f39cd83e7580150a1ab43a2","modified":1644920408000},{"_id":"source/_posts/GIT-delete-history-commit.md","hash":"2a2d3de2eaf252880975be242fa78b7a3a2c9b1b","modified":1648222897694},{"_id":"source/_posts/SVN服务仓库搭建记录.md","hash":"3a5cf4d177b72fb280fb7091ab1fa26a499c4b6b","modified":1639725372000},{"_id":"source/_posts/Step-by-step-to-build-personal-blog.md","hash":"dbc09ebe5166d7cd005ef33b5d140e50dfe89b69","modified":1639234706000},{"_id":"source/_posts/tmux-conf.md","hash":"5cdb6faaa26e7dfef237408c1b5fcd76141d3eaf","modified":1655017754353},{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1639234706000},{"_id":"source/_posts/CWNA-无线攻击、入侵监控与安全策略.md","hash":"b2c51fca4393fde53bcb8013d153bf0338ae9aad","modified":1645771727000},{"_id":"source/_posts/CWNA：射频组件、度量与数学计算.md","hash":"cb68bb8ff6a2a9ab5c2134f542f8c55e3d95fc48","modified":1641896916000},{"_id":"source/_posts/vim-cscope-ctags阅读源码.md","hash":"f4cbfcc11aa70a681d7a840d0bd0e2a7598dded5","modified":1640154791000},{"_id":"source/_posts/访问维基百科-wikipedia的方法.md","hash":"4033c8dc96613ae56f24f73f36df97352b1d9d0f","modified":1652802188289},{"_id":"themes/yilia/layout/_partial/toc.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1639234706000},{"_id":"themes/yilia/.babelrc","hash":"b1b76475ac17dc9e2fa50af96c9e31eea2d0f2b4","modified":1639234706000},{"_id":"themes/yilia/.eslintrc.js","hash":"5696ae049de010ed3786768b0c359f14c05b5ec6","modified":1639234706000},{"_id":"themes/yilia/.eslintignore","hash":"df0a50b13cc00acb749226fee3cee6e0351fb1d9","modified":1639234706000},{"_id":"themes/yilia/.editorconfig","hash":"da6d022b8f4d9c961e2f8f80677e92af8de0db4d","modified":1639234706000},{"_id":"themes/yilia/_config.yml","hash":"b33ead7c39cec88b01575b408ccda7c2c5c4dfc1","modified":1645429021000},{"_id":"themes/yilia/.gitignore","hash":"9c4b7d27a1e3e5efa0c8ed143a032a85d586b03b","modified":1639234706000},{"_id":"themes/yilia/.gitattributes","hash":"e0f24dceeb1e6878a1dd9b01a2b9df1bc037a867","modified":1639234706000},{"_id":"themes/yilia/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1639234706000},{"_id":"themes/yilia/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1639234706000},{"_id":"themes/yilia/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1639234706000},{"_id":"themes/yilia/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1639234706000},{"_id":"themes/yilia/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1639234706000},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1639234706000},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1639234706000},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1639234706000},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1639234706000},{"_id":"themes/yilia/layout/index.ejs","hash":"a35dc900203f9d8dd863ea4c1722198d6d457ec8","modified":1639234706000},{"_id":"themes/yilia/layout/layout.ejs","hash":"0a332bdbd3b86c231d690614687f5b97186b85d5","modified":1639234706000},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1639234706000},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1639234706000},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1639234706000},{"_id":"themes/yilia/package.json","hash":"367cb9579d35968a942c243ab248a5f5ebfaf462","modified":1639234706000},{"_id":"themes/yilia/README.md","hash":"1bf755806af9d8874bd22e1abbdaaa24328ef4dc","modified":1639234706000},{"_id":"themes/yilia/webpack.config.js","hash":"05ba46a4ae744272f5312e684928910dccad3755","modified":1639234706000},{"_id":"themes/yilia/source/main.0cf68a.css","hash":"ddf6e2c6b953c2c59a3c271e6070010a4cc81cf9","modified":1639234706000},{"_id":"themes/yilia/source/slider.e37972.js","hash":"6dec4e220c89049037eebc44404abd8455d22ad7","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"b86b248720ad415ec1b5fee53fb583776c776f83","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"1f7d4819b7f67602c4a1b99871808d2160b60978","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a6e94061ac55b9eb55275f87b608d62f6ea35659","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"630c6ec866d056657d3d91e34b4c64eb993c0654","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/aside.ejs","hash":"8edbd7993b9b061611a193533a664e2e85eae748","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"236f8a377b2e4e35754319c3029bcd4a4115431d","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"f0e6e88f9f7eb08b8fe51449a8a3016273507924","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"910b3adca0e1c65fbfa82c4599f843ee79a247bc","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"64f092186b5a744aa1603ce22bb1d44a34446add","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"6387a93dad7c3d778eb91e3821852fbf6813880c","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"183d7ca4ba8e7c80694ffdc8cf39957092238346","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"151a1ef2173ba7b6789d349f0f8da89616cc1394","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"7fbbfabf5e29525b24ada14613c21a26789132b4","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"c41341b9618e591538e1136a2d1637587c1bbd90","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"e495790b2abe2290875817e42bd505bc611d3e26","modified":1639234706000},{"_id":"themes/yilia/source-src/css.ejs","hash":"94dbdb02ca11849e415d54fb28546a598f2cffb1","modified":1639234706000},{"_id":"themes/yilia/source-src/script.ejs","hash":"c21381e1317db7bb157f1d182b8c088cb7cba411","modified":1639234706000},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1639234706000},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1639234706000},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1639234706000},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1639234706000},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1639234706000},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1639234706000},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1639234706000},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1639234706000},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1639234706000},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"24f347a2412abbf58318369152504da9538f8d3b","modified":1639234706000},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"93a50dd19a93485712da1f8d0a1672482dd1eabc","modified":1639234706000},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"7d27e22ac898e8fafec14549e940c73cbea1fba8","modified":1639234706000},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"d79f2d35a06de83a2a226ca790b7a0a34789c115","modified":1639234706000},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"3fad68bd74260326f83090b0974dd80707e7bac7","modified":1639234706000},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"43e507f2a48504079afd9471353337e23ca47470","modified":1639234706000},{"_id":"themes/yilia/source-src/css/article.scss","hash":"0f6d61af99ed4db87f8589db1feaea7747b55963","modified":1639234706000},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"cafe3834017a3bf47420f37543725025225a2c89","modified":1639234706000},{"_id":"themes/yilia/source-src/css/aside.scss","hash":"578a67464dd0f542197f7fcee158c991db058563","modified":1639234706000},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7c995410b25baaf61dfc5e148e22ca60330abcd3","modified":1639234706000},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"97b8fba41c914145710b90091f400b845879577f","modified":1639234706000},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1639234706000},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"849a29fcd7150214fcf7b9715fa5dc71d1f9b896","modified":1639234706000},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"3719994c2c9393813cc1d42b657205c368a329cb","modified":1639234706000},{"_id":"themes/yilia/source-src/css/left.scss","hash":"0d30c0e7cdb831c3881a017006c782f2214ac195","modified":1639234706000},{"_id":"themes/yilia/source-src/css/main.scss","hash":"2f86a014af93583caba78a563d9549826bf28294","modified":1639234706000},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"f053c609d84df0dd9eee1d11ddf0c19163a456be","modified":1639234706000},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"ace041d72f95b419f6a5e443191703c2b62007f4","modified":1639234706000},{"_id":"themes/yilia/source-src/css/page.scss","hash":"bf206bb7f7d0967bc8b7fdf01b7ffc99aff9ba88","modified":1639234706000},{"_id":"themes/yilia/source-src/css/share.scss","hash":"150c6425f6582e7ec78a873256ce49c9930e8805","modified":1639234706000},{"_id":"themes/yilia/source-src/css/social.scss","hash":"724162ccf3977e70a45d189abfaa20b6e2fba87b","modified":1639234706000},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"80a4fcf9171d4a33235da96ac8a2b7dcabc45dfb","modified":1639234706000},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"9c8dfd1c76854ef063494ca76fac6360b391ed6d","modified":1639234706000},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"ac67a3c7097849206244db9b0ba91daaba017ef5","modified":1639234706000},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"c8aa84fca93862d3caae77c552873b8610f33327","modified":1639234706000},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"53d5a554bc2f38e9bb3d26400a47767013c05216","modified":1639234706000},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"1b1aa0908e58cf942b28e3881d07c5573c4129e1","modified":1639234706000},{"_id":"themes/yilia/source-src/js/Q.js","hash":"d011af172064b6c6e0c7051d8f9879373ddac113","modified":1639234706000},{"_id":"themes/yilia/source-src/js/anm.js","hash":"4a4c5d82b09a3063f91a434388e6aa064fd7fd98","modified":1639234706000},{"_id":"themes/yilia/source-src/js/fix.js","hash":"d6782d53c992e712af39c84e804eccaf38830b94","modified":1639234706000},{"_id":"themes/yilia/source-src/js/main.js","hash":"3894e60827c817319e43c9ff3ed045fc3d7336ce","modified":1639234706000},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"4d823b039fd296d24a454eae5a798b93c44560cb","modified":1639234706000},{"_id":"themes/yilia/source-src/js/report.js","hash":"4f1d9a18a936ce40b037f636a39127dd19175b6e","modified":1639234706000},{"_id":"themes/yilia/source-src/js/aside.js","hash":"754f771264548a6c5a8ad842908e59ae4e7ed099","modified":1639234706000},{"_id":"themes/yilia/source-src/js/share.js","hash":"b090f82cf80cba7da764753906d9e2cc2acdf30d","modified":1639234706000},{"_id":"themes/yilia/source-src/js/browser.js","hash":"04095b38cfd4316a23f8eb14b1ffaf95f78a4260","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"0809a4829aabeb4e911a3ed04ec28db4df7dfe3f","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"5f99b55980da64a723a8e14d5a7daba0d6504647","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"534b12ebc22d21ac565b20045e7382f0bb4c29e7","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"e8399025ed3b980aedb821c92855889f5f12fd5b","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/gitment.ejs","hash":"e68bbac9ffb1ad27b56837c9abad6ed6bb7daa0c","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"1036c8e4e1a7bc935ba173744da735a0d6ed09cd","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"5dccfbe165b23a101f1333cc65ed8efbd197453c","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2e783e68755abb852760eb0e627a3fbb50a05a55","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"ea41c462168d9697caef9485862e9cac718a12c1","modified":1639234706000},{"_id":"themes/yilia/source-src/js/slider.js","hash":"e846bcc5aac9c68b93f7b8de353df54d8d29f666","modified":1639234706000},{"_id":"themes/yilia/source-src/js/util.js","hash":"8456e9d6b19532742582c99b2fb9d09e146e1c58","modified":1639234706000},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"2577deb6a9fe4f5436360b2ce9afcc7f9a7f0116","modified":1639234706000},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"63a37f26276f9207405afe0f2d65339ce295bbaf","modified":1639234706000},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"491ab3378d5c11005ba65c607608bb36b368a9d5","modified":1639234706000},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"fab871fa93bd542e76a71a56428f2994a4aaf443","modified":1639234706000},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"3bba5c77bad5981eac859fe05c9561d580ba7fa9","modified":1639234706000},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"fb511c505d1309249f21dc577d4ad2bad99a764f","modified":1639234706000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1639234706000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1639234706000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1639234706000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1639234706000},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1639234706000},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1639234706000},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1639234706000},{"_id":"themes/yilia/source/main.0cf68a.js","hash":"993fadeb5f6d296e9d997a49ee20dc97333ceab7","modified":1639234706000},{"_id":"themes/yilia/source/mobile.992cbe.js","hash":"01b35e71e37aa2849664eb5daf26daede2278398","modified":1639234706000},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"4cb685f07e89dd5175c2a576e73a1a957aec5637","modified":1639234706000},{"_id":"public/content.json","hash":"9ad18ffc8f33e8021c9958f17e7c13556bff1a05","modified":1655444125073},{"_id":"public/2022/06/12/tmux-conf/index.html","hash":"7e3042ca9dbc771a665a3c73b405ce2a5105173d","modified":1655304879897},{"_id":"public/2022/06/12/CODE-ANALYSIS-9-data-tx-process/index.html","hash":"304216ba6fe8d803f9af43ccd69b13b121a8f23d","modified":1655017760360},{"_id":"public/2022/06/12/CODE-ANALYSIS-8-data-rx-process/index.html","hash":"e67d3365d8629639663b0e05abb3064122580e58","modified":1655017760360},{"_id":"public/2022/06/12/CODE-ANALYSIS-7-get-connection-info/index.html","hash":"0a754e5070b84c05265d0b3fc206a308943b6854","modified":1655017760360},{"_id":"public/2022/06/12/CODE-ANALYSIS-6-disconnect-process/index.html","hash":"b8b78ca049a9d19bfedbfdb8f16020ba4066cd04","modified":1655017760360},{"_id":"public/2022/06/12/CODE-ANALYSIS-5-connect-process/index.html","hash":"5c4750c1a47eb73a5e8e7b188bad317081aa8746","modified":1655017760360},{"_id":"public/2022/06/12/CODE-ANALYSIS-5-connect-process-hostmlme/index.html","hash":"c47e20c35671f57bf42dbaeb86844d712642d665","modified":1655017760360},{"_id":"public/2022/06/12/CODE-ANALYSIS-4-scan-process/index.html","hash":"7f748bd0dd3a9235cc1c827c976c1cbb9b73c25a","modified":1655017760360},{"_id":"public/2022/06/12/CODE-ANALYSIS-3-fw-init/index.html","hash":"b744d30898fce7393a38fba8156bcf4e771764a7","modified":1655017760360},{"_id":"public/2022/06/12/CODE-ANALYSIS-2-bus-driver-register/index.html","hash":"61c8cd8dec6d06e24946d061c198acad53f61970","modified":1655017760360},{"_id":"public/2022/06/11/CODE-ANALYSIS-1-module-init-process/index.html","hash":"082d34cf6b755738efff15d3c422157ad16c93a3","modified":1655017760360},{"_id":"public/2022/05/17/访问维基百科-wikipedia的方法/index.html","hash":"d2fd23dfc7f7e5cd6f6df0d3c11ae47910ec8b39","modified":1655017760360},{"_id":"public/2022/03/25/GIT-delete-history-commit/index.html","hash":"3a54ab110226360b75d209fb30247cf918ddb2f4","modified":1655017760360},{"_id":"public/2022/03/25/hello-world/index.html","hash":"a8d46f2849e0beed5e2f9a20bf319aabde7e9dcf","modified":1655017760360},{"_id":"public/2022/03/01/CWNA-802-11ax技术-高效无线局域网-二/index.html","hash":"b32ae4efc826eb01c45e6c8bf8430d563acbcd78","modified":1655017760360},{"_id":"public/2022/03/01/CWNA-802-11ax技术-高效无线局域网/index.html","hash":"c7dec11b2b3535092d88c95ff7ff04dcf468bc57","modified":1655017760360},{"_id":"public/2022/02/28/CWNA-无线局域网安全体系结构-二/index.html","hash":"ccaa74a0a892cc3f645450fe066f061bfc5382d0","modified":1655017760360},{"_id":"public/2022/02/25/CWNA-无线局域网安全体系结构/index.html","hash":"c93ce9af982e577aaa882afefa6d5ca8df9efdb4","modified":1655017760360},{"_id":"public/2022/02/25/CWNA-无线攻击、入侵监控与安全策略/index.html","hash":"20c64764fb5b288225887e1edb9c07e7296510b9","modified":1655017760360},{"_id":"public/2022/02/24/CWNA-无线局域网故障排除-一/index.html","hash":"8b59e4d340f8f79eb62f2514e40327b8ff4e40fa","modified":1655017760360},{"_id":"public/2022/02/23/CWNA-无线局域网故障排除/index.html","hash":"b5c64105b24509b86c9a3c31bad2ff2950a69bc3","modified":1655017760360},{"_id":"public/2022/02/22/CWNA-MIMO技术：高吞吐量与甚高吞吐量-三/index.html","hash":"22cf15473777838dd57a46d148c4602d8a175fab","modified":1655017760360},{"_id":"public/2022/02/22/CWNA-MIMO技术：高吞吐量与甚高吞吐量-二/index.html","hash":"694adda4fc89a7057dd844f8aaf7c47827c6649b","modified":1655017760360},{"_id":"public/2022/02/21/CWNA-MIMO技术：高吞吐量与甚高吞吐量/index.html","hash":"d45e441a81f3b4051ebea5aaef3c84855289efa8","modified":1655017760360},{"_id":"public/2022/02/21/CWNA-802-11-MAC-体系结构-五/index.html","hash":"eae93632fc472cd6d4d26ca20e295c1494a8a4a5","modified":1655017760360},{"_id":"public/2022/02/18/CWNA-802-11-MAC-体系结构-四/index.html","hash":"a0a68adff725e2ccdbcd0aff6d0833210b6fd58f","modified":1655017760360},{"_id":"public/2022/02/16/CWNA-802-11-MAC-体系结构-三/index.html","hash":"a52a9b200a7947c7f1dac297002276abef9f097e","modified":1655017760360},{"_id":"public/2022/02/15/Linux-shell-script-实践记录-一/index.html","hash":"b30cd274ea303e15bf34e1d5b4852a61717948b5","modified":1655017760360},{"_id":"public/2022/02/15/CWNA-802-11-MAC-体系结构-二/index.html","hash":"611c11f24285167982d28bee8f904cfbe27a9337","modified":1655017760360},{"_id":"public/2022/02/14/CWNA-802-11-MAC-体系结构/index.html","hash":"921fdfdf6239b2a58a2c71b394904d8af4f1ea60","modified":1655017760360},{"_id":"public/2022/02/14/CWNA-802-11介质访问（二）/index.html","hash":"11f808adf29fd06bc0f7c7bf3ff48c909cb3a177","modified":1655017760360},{"_id":"public/2022/02/10/CWNA-802-11介质访问/index.html","hash":"bbc963cf6a95feb3f94b8367818050b814d4d1b6","modified":1655017760360},{"_id":"public/2022/02/09/CWNA-无线局域网拓扑-二/index.html","hash":"d33c6621b68f843b86763bbb0daa29720e104c3a","modified":1655017760360},{"_id":"public/2022/01/26/CWNA-无线网络与扩频技术（三）/index.html","hash":"bc0505c48598788dd41e21c7e4c985cba281a08f","modified":1655017760360},{"_id":"public/2022/02/09/CWNA-无线局域网拓扑/index.html","hash":"f1384651405d28804faff7e2d370eba920485e30","modified":1655017760360},{"_id":"public/2022/01/26/CWNA-无线网络与扩频技术-2/index.html","hash":"aa3bcfacf547020042b6eed8cee7e6b187cde425","modified":1655017760360},{"_id":"public/2022/01/18/CWNA-无线网络与扩频技术/index.html","hash":"ba5afe7851c39f83ee20c3e45794f7a19d175ad6","modified":1655017760360},{"_id":"public/2022/01/14/CWNA-射频信号与天线概念/index.html","hash":"5c9ab8cb289ad872c6116a8eebfcbbb6fa098004","modified":1655017760360},{"_id":"public/2022/01/12/CWNA-射频基础知识-5/index.html","hash":"5160914d54e7276ee9a2f9b727e70bd32602e333","modified":1655017760360},{"_id":"public/2022/01/12/CWNA-射频数学计算/index.html","hash":"ac41622fb75c21b9d30d8e3bd0c1469f6366f120","modified":1655017760360},{"_id":"public/2022/01/11/CWNA：射频组件、度量与数学计算/index.html","hash":"6d4f02472076ca26b63faa0ebec9b4fa82922c82","modified":1655017760360},{"_id":"public/2022/01/11/CWNA-射频基础知识（2）/index.html","hash":"a71e2a4ca058f1704d40624390002b99e8de07f9","modified":1655017760360},{"_id":"public/2022/01/10/CWNA-射频基础知识/index.html","hash":"c4bc7d2b6fafffc18c82bbef15b059ea5d2e6298","modified":1655017760360},{"_id":"public/2022/01/10/CWNA-IEEE-802-11标准与修正案-3/index.html","hash":"572ae672c6b3d72e8faa0334d0c31450b261252e","modified":1655017760360},{"_id":"public/2022/01/10/CWNA-IEEE-802-11标准与修正案-2/index.html","hash":"086dab988cc8be9381995d81528f8034f1d5523d","modified":1655017760360},{"_id":"public/2022/01/07/CWNA-IEEE-802-11标准与修正案/index.html","hash":"49dbb9bdb4806b4e1182a3e4a743d6c6cfc3fc7c","modified":1655017760360},{"_id":"public/2022/01/06/CWNA-标准、行业组织与通信基础知识概述/index.html","hash":"c5907a65f90203531a6ba236324a146eeedc299d","modified":1655017760360},{"_id":"public/2021/12/22/vim-cscope-ctags阅读源码/index.html","hash":"a1168c3c13a5f9f8c1ff655d4f29de8f15eb69f7","modified":1655017760360},{"_id":"public/2021/12/16/SVN服务仓库搭建记录/index.html","hash":"b03a855822293ab77f43db8805e4e29501a07a2d","modified":1655017760360},{"_id":"public/2021/12/08/Step-by-step-to-build-personal-blog/index.html","hash":"8b236a1ca273fd1ca4c5e6ce9c985390dc22c538","modified":1655017760360},{"_id":"public/archives/index.html","hash":"34b8506b28a30a201347df9ba0bc16d1a5510de3","modified":1655444125073},{"_id":"public/archives/page/2/index.html","hash":"6b0cc5b395ac4f4b4535928c64e01ba7984196b2","modified":1655444125073},{"_id":"public/archives/page/3/index.html","hash":"94736824ed6e2d868ff619a15214ac38584a50c0","modified":1655444125073},{"_id":"public/archives/page/4/index.html","hash":"7fe68c76880d29bad19c1f245cef9e7959368b71","modified":1655444125073},{"_id":"public/archives/page/5/index.html","hash":"2d12ef3ede8ca9b5ef8e28386447ba28cd9b8488","modified":1655444125073},{"_id":"public/archives/2021/index.html","hash":"ebd4bc119102d6a5e5940412c0b0033db7664477","modified":1655017760360},{"_id":"public/archives/2021/12/index.html","hash":"2d017e702788c098fabc584bfe9d2fbe0333d012","modified":1655017760360},{"_id":"public/archives/2022/index.html","hash":"a24a2d73ee53c8f3da9ef06a7274eba28a121455","modified":1655444125073},{"_id":"public/archives/2022/page/2/index.html","hash":"c5869dfb2bc09b5ba2c8d69a78b3cbc2d4f9c4b2","modified":1655444125073},{"_id":"public/archives/2022/page/3/index.html","hash":"361a1fe1c68ea53e43de98c17b148594025d961b","modified":1655444125073},{"_id":"public/archives/2022/page/4/index.html","hash":"39f8b48d7cc9534aae0c05369cb4dc880ff8a8cf","modified":1655444125073},{"_id":"public/archives/2022/page/5/index.html","hash":"8c2c2ebfe6fce40fb2d1e51f373d30fe3f1ab0b9","modified":1655444125073},{"_id":"public/archives/2022/01/index.html","hash":"571e9df77df9fd5472ad5065168fa267fb559f4e","modified":1655017760360},{"_id":"public/archives/2022/01/page/2/index.html","hash":"45ebb8bde63e61be5e4de5c52dbe55a6f7bdcba9","modified":1655017760360},{"_id":"public/archives/2022/02/index.html","hash":"6a6b5ed66163df88e5e34a8511139d24aaf7df64","modified":1655017760360},{"_id":"public/archives/2022/02/page/2/index.html","hash":"9e6eb85d9bec95e899b5ab27f2ef6854eead127f","modified":1655017760360},{"_id":"public/archives/2022/03/index.html","hash":"198cf4bc10342a6c7a407a98f90b0e2d41d1f145","modified":1655017760360},{"_id":"public/archives/2022/05/index.html","hash":"85c00e5a683fcc0f70b2abe96cfc2eda3e20470a","modified":1655017760360},{"_id":"public/archives/2022/06/index.html","hash":"99519e5ea607241ee97bbb0a6ba516078a6b3552","modified":1655444125073},{"_id":"public/archives/2022/06/page/2/index.html","hash":"c8433895e46e0a5b81c36042094a73dfe3cc6e9a","modified":1655444125073},{"_id":"public/index.html","hash":"8f1d526443a3f007ebaacf104e906237d5b7b51c","modified":1655444542987},{"_id":"public/page/2/index.html","hash":"66269ede10b018598f59263982deb6d016e4ef3d","modified":1655444125073},{"_id":"public/page/3/index.html","hash":"e81de6171638683d5993452e9ba6f3103134c4a1","modified":1655444125073},{"_id":"public/page/4/index.html","hash":"5cbfeaf41529983a6d2efc56dd1f0f6c81b3cccf","modified":1655444125073},{"_id":"public/page/5/index.html","hash":"2b0725b18a98fe479e308588560cd6af2baafcbc","modified":1655444125073},{"_id":"public/tags/code-analysis-Wi-Fi-Driver/index.html","hash":"9bc6d8c98002b4f8193cb0027f2e28b9c9368e38","modified":1655017760360},{"_id":"public/tags/Wi-Fi/index.html","hash":"2aea23151568ce90402eab1ac6f67748a8890373","modified":1655017760360},{"_id":"public/tags/Wi-Fi/page/2/index.html","hash":"ad80231e3f5e8bff2810f32bf96fc33efa2135e5","modified":1655017760360},{"_id":"public/tags/Wi-Fi/page/3/index.html","hash":"88b8308c3e4f278901045ebd441a68da613e7feb","modified":1655017760360},{"_id":"public/tags/Wi-Fi/page/4/index.html","hash":"66f1277bcb3dca5e4349e1f53697e9cd5a730c2e","modified":1655017760360},{"_id":"public/tags/git-skills/index.html","hash":"e733ef4f4ad22af0c054ea5c741cf3b9474fdfc4","modified":1655017760360},{"_id":"public/tags/Shell-script/index.html","hash":"1b769986f7de8104b4bdc4bc5e6a78ea249728d9","modified":1655017760360},{"_id":"public/tags/Misc/index.html","hash":"8a6f1bb2e36fc1b3f86a31500fa209ca132150a8","modified":1655444125073},{"_id":"public/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1655017760360},{"_id":"public/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1655017760360},{"_id":"public/fonts/iconfont.45d7ee.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1655017760360},{"_id":"public/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1655017760360},{"_id":"public/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1655017760360},{"_id":"public/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1655017760360},{"_id":"public/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1655017760360},{"_id":"public/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1655017760360},{"_id":"public/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1655017760360},{"_id":"public/main.0cf68a.css","hash":"ddf6e2c6b953c2c59a3c271e6070010a4cc81cf9","modified":1655017760360},{"_id":"public/main.0cf68a.js","hash":"993fadeb5f6d296e9d997a49ee20dc97333ceab7","modified":1655017760360},{"_id":"public/slider.e37972.js","hash":"6dec4e220c89049037eebc44404abd8455d22ad7","modified":1655017760360},{"_id":"public/mobile.992cbe.js","hash":"01b35e71e37aa2849664eb5daf26daede2278398","modified":1655017760360},{"_id":"source/_posts/vscode-compile-commands-json-generate.md","hash":"3faf5395b929c8b05bbe27e9545573806a538240","modified":1655305046392},{"_id":"public/2022/06/15/vscode-compile-commands-json-generate/index.html","hash":"7b9b9957bd922b88b6c0bbde65f3e0b6c6dc04ee","modified":1655444125073},{"_id":"public/archives/page/6/index.html","hash":"5a4fa7b0c7011833628221963f23d5133bce14f8","modified":1655444125073},{"_id":"public/page/6/index.html","hash":"a1c83a09c2e4ac139aca62ac241a5cae803455ff","modified":1655444125073},{"_id":"source/_posts/adb-error-常用解决方法.md","hash":"faf3ad9f2d101805b677e4559832b2ef5f6405c9","modified":1655444537246},{"_id":"public/2022/06/17/adb-error-常用解决方法/index.html","hash":"eff443007de418d14b8ae75aaddf24feed940bc4","modified":1655444542987}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"CODE-ANALYSIS:1-module-init-process","date":"2022-06-11T15:37:12.000Z","_content":"\n2022/06/03\n\n// driver code enter point\nmodule_init(woal_init_module);\n\n\ninit card adapter card, maximum support is 4\n\n\ninit proc and crate proc/mwlan  wifi_status\n\n\ninit FW hang work queue.\n\ninit hang work to process FW hang\n\ninit register work queue\n\ninit register work to process bus driver register.\nqueue_work register work to register work queue.\n\n","source":"_posts/CODE-ANALYSIS-1-module-init-process.md","raw":"---\ntitle: 'CODE-ANALYSIS:1-module-init-process'\ndate: 2022-06-11 23:37:12\ntags: code analysis, Wi-Fi, Driver;\n---\n\n2022/06/03\n\n// driver code enter point\nmodule_init(woal_init_module);\n\n\ninit card adapter card, maximum support is 4\n\n\ninit proc and crate proc/mwlan  wifi_status\n\n\ninit FW hang work queue.\n\ninit hang work to process FW hang\n\ninit register work queue\n\ninit register work to process bus driver register.\nqueue_work register work to register work queue.\n\n","slug":"CODE-ANALYSIS-1-module-init-process","published":1,"updated":"2022-06-11T16:16:56.058Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud2s000018jx6rqu0sk3","content":"<p>2022/06/03</p>\n<p>// driver code enter point<br>module_init(woal_init_module);</p>\n<p>init card adapter card, maximum support is 4</p>\n<p>init proc and crate proc/mwlan  wifi_status</p>\n<p>init FW hang work queue.</p>\n<p>init hang work to process FW hang</p>\n<p>init register work queue</p>\n<p>init register work to process bus driver register.<br>queue_work register work to register work queue.</p>\n","site":{"data":{}},"excerpt":"","more":"<p>2022/06/03</p>\n<p>// driver code enter point<br>module_init(woal_init_module);</p>\n<p>init card adapter card, maximum support is 4</p>\n<p>init proc and crate proc/mwlan  wifi_status</p>\n<p>init FW hang work queue.</p>\n<p>init hang work to process FW hang</p>\n<p>init register work queue</p>\n<p>init register work to process bus driver register.<br>queue_work register work to register work queue.</p>\n"},{"title":"CODE-ANALYSIS:2-bus-driver-register","date":"2022-06-11T16:00:02.000Z","_content":"\nJun  3 16:36:02 CST 2022\n\n//while Wi-Fi card is detected by the Wi-Fi driver. Will trigger the register work.\n\nstatic void\nwoal_bus_register(struct work_struct *work)\n\n\nregister wlan_sdio operation struct to kernel\n/* SDIO Driver Registration */\nif (sdio_register_driver(&wlan_sdio)) {\n\n\tstatic struct sdio_driver REFDATA wlan_sdio = {\n\t\t.name = \"wlan_sdio\",\n\t\t.id_table = wlan_ids,\n\t\t.probe = woal_sdio_probe,\n\t\t.remove = woal_sdio_remove,\n\nif the Wi-Fi sdio card is detected by the OS, .probe function will be invoked.\n\nshow the vendor info of the detected card.\n\nupdate the card current card type, current is 8997.\n\n// add the card to system via the above card type.\nwoal_add_card(card, &card->func->dev, &sdiommc_ops, card_type)) {\n\n\tstatic moal_if_ops sdiommc_ops = {\n\t\t.register_dev = woal_sdiommc_register_dev,\n\t\t.unregister_dev = woal_sdiommc_unregister_dev,\n\t\t.read_reg = woal_sdiommc_read_reg,\n\n\n","source":"_posts/CODE-ANALYSIS-2-bus-driver-register.md","raw":"---\ntitle: 'CODE-ANALYSIS:2-bus-driver-register'\ndate: 2022-06-12 00:00:02\ntags: code analysis, Wi-Fi, Driver;\n---\n\nJun  3 16:36:02 CST 2022\n\n//while Wi-Fi card is detected by the Wi-Fi driver. Will trigger the register work.\n\nstatic void\nwoal_bus_register(struct work_struct *work)\n\n\nregister wlan_sdio operation struct to kernel\n/* SDIO Driver Registration */\nif (sdio_register_driver(&wlan_sdio)) {\n\n\tstatic struct sdio_driver REFDATA wlan_sdio = {\n\t\t.name = \"wlan_sdio\",\n\t\t.id_table = wlan_ids,\n\t\t.probe = woal_sdio_probe,\n\t\t.remove = woal_sdio_remove,\n\nif the Wi-Fi sdio card is detected by the OS, .probe function will be invoked.\n\nshow the vendor info of the detected card.\n\nupdate the card current card type, current is 8997.\n\n// add the card to system via the above card type.\nwoal_add_card(card, &card->func->dev, &sdiommc_ops, card_type)) {\n\n\tstatic moal_if_ops sdiommc_ops = {\n\t\t.register_dev = woal_sdiommc_register_dev,\n\t\t.unregister_dev = woal_sdiommc_unregister_dev,\n\t\t.read_reg = woal_sdiommc_read_reg,\n\n\n","slug":"CODE-ANALYSIS-2-bus-driver-register","published":1,"updated":"2022-06-11T16:07:11.823Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud2x000118jx2co97t9s","content":"<p>Jun  3 16:36:02 CST 2022</p>\n<p>//while Wi-Fi card is detected by the Wi-Fi driver. Will trigger the register work.</p>\n<p>static void<br>woal_bus_register(struct work_struct *work)</p>\n<p>register wlan_sdio operation struct to kernel<br>/<em> SDIO Driver Registration </em>/<br>if (sdio_register_driver(&amp;wlan_sdio)) {</p>\n<pre><code>static struct sdio_driver REFDATA wlan_sdio = &#123;\n    .name = &quot;wlan_sdio&quot;,\n    .id_table = wlan_ids,\n    .probe = woal_sdio_probe,\n    .remove = woal_sdio_remove,\n</code></pre><p>if the Wi-Fi sdio card is detected by the OS, .probe function will be invoked.</p>\n<p>show the vendor info of the detected card.</p>\n<p>update the card current card type, current is 8997.</p>\n<p>// add the card to system via the above card type.<br>woal_add_card(card, &amp;card-&gt;func-&gt;dev, &amp;sdiommc_ops, card_type)) {</p>\n<pre><code>static moal_if_ops sdiommc_ops = &#123;\n    .register_dev = woal_sdiommc_register_dev,\n    .unregister_dev = woal_sdiommc_unregister_dev,\n    .read_reg = woal_sdiommc_read_reg,\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<p>Jun  3 16:36:02 CST 2022</p>\n<p>//while Wi-Fi card is detected by the Wi-Fi driver. Will trigger the register work.</p>\n<p>static void<br>woal_bus_register(struct work_struct *work)</p>\n<p>register wlan_sdio operation struct to kernel<br>/<em> SDIO Driver Registration </em>/<br>if (sdio_register_driver(&amp;wlan_sdio)) {</p>\n<pre><code>static struct sdio_driver REFDATA wlan_sdio = &#123;\n    .name = &quot;wlan_sdio&quot;,\n    .id_table = wlan_ids,\n    .probe = woal_sdio_probe,\n    .remove = woal_sdio_remove,\n</code></pre><p>if the Wi-Fi sdio card is detected by the OS, .probe function will be invoked.</p>\n<p>show the vendor info of the detected card.</p>\n<p>update the card current card type, current is 8997.</p>\n<p>// add the card to system via the above card type.<br>woal_add_card(card, &amp;card-&gt;func-&gt;dev, &amp;sdiommc_ops, card_type)) {</p>\n<pre><code>static moal_if_ops sdiommc_ops = &#123;\n    .register_dev = woal_sdiommc_register_dev,\n    .unregister_dev = woal_sdiommc_unregister_dev,\n    .read_reg = woal_sdiommc_read_reg,\n</code></pre>"},{"title":"CODE-ANALYSIS:3-fw-init","date":"2022-06-11T16:23:20.000Z","_content":"Fri Jun  3 18:26:11 CST 2022\n\n// init firmware\n\nmlan_status\nwoal_init_fw(moal_handle *handle)\n\nlog the fw request time to req_fw_time\n\nexecute fw init, this function download FW using helper\n\tret = woal_request_fw(handle);\n\n// the real function used to download firmware\nret = woal_request_fw_dpc(handle,\n\n// Download and init firmware DPC\nwoal_init_fw_dpc(moal_handle *handle)\n\n\n// download firmware\nret = mlan_dnld_fw(handle->pmlan_adapter, &fw);\n   ret = pmadapter->ops.dnld_fw(pmadapter, pmfw);\n    \n\t// This function download firmware to card\n    static mlan_status\n\twlan_sdio_dnld_fw(pmlan_adapter pmadapter, pmlan_fw_image pmfw)\n\n\n// request dpd data\n\n// request txpwr data\n\n// request cal data\n\n// init data to MLAN\n\tret = mlan_set_init_param(handle->pmlan_adapter, &param);\n\n// this function init firmware\n\tret = mlan_init_fw(handle->pmlan_adapter);\n\t/* Initialize firmware, may return PENDING */\n\t\tret = wlan_init_fw(pmadapter);\n\t\t\n\t\t\t/* Initialize adapter structure */\n\t\t\t\twlan_init_adapter(pmadapter);\n\n\t\t    wlan_adapter_get_hw_spec(pmadapter);\n\n\n// send the first command 0xa9  to firmware\n\tret = wlan_prepare_cmd(priv, HostCmd_CMD_FUNC_INIT, HostCmd_ACT_GEN_SET,\n\t\t\t\t       0, MNULL, MNULL);\n/** Host Command ID : Function initialization */\n#define HostCmd_CMD_FUNC_INIT 0x00a9\n\n//prepare the command\n\n// insert the command to queue to firmware\n\n// process DPD data\n\n// process txpwr data\n\n// preapre command to firmware\n/** Host Command ID : Cal data dnld */\n#define HostCmd_CMD_CFG_DATA 0x008f\n\n\n/** use to query chan region cfg setting in firmware */\n#define HostCmd_CMD_CHAN_REGION_CFG 0x0242\n\n\n/** Host Command ID : Get hardware specifications */\n#define HostCmd_CMD_GET_HW_SPEC 0x0003\n\n\n// Add interface DPC\nwoal_add_card_dpc(moal_handle *handle)\n\t\t/* Add interfaces */\n\t\tfor (i = 0; i < handle->drv_mode.intf_num; i++) {\n\t\t\t\tif (handle->drv_mode.bss_attr[i].bss_virtual)\n\t\t\t\t\t\tcontinue;\n\t\t\t\tif (!woal_add_interface(handle, handle->priv_num,\n\t\t\t\t\t\t\t\t\t\thandle->drv_mode.bss_attr[i].\n\t\t\t\t\t\t\t\t\t\tbss_type)) {\n\t\t\t\t\t\tret = MLAN_STATUS_FAILURE;\n\t\t\t\t\t\tgoto err;\n\t\t\t\t}\n\t\t}\n\n// print driver version number\n\twoal_get_version(handle, str_buf, sizeof(str_buf) - 1);\n\t\tPRINTM(MMSG, \"wlan: version = %s\\n\", str_buf);\n\n// This function add new  interface.\nmoal_private *\nwoal_add_interface(moal_handle *handle, t_u8 bss_index, t_u8 bss_type)\n\n// define interface name, such as mlan0, wlan0, uap0 etc.\n\n// init bss type, bss role type\n\n\n// init tcp session queue\n\n// init tx status queue\n\n\nwoal_init_sta_dev(dev, priv);\n\n\n/* Register cfg80211 for STA or Wifi direct */\nif (woal_register_sta_cfg80211(dev, bss_type)) {\n\n\n// send domain info command to fw\n\t\tpriv->phandle->band = IEEE80211_BAND_2GHZ;\n\t\twoal_send_domain_info_cmd_fw(priv, MOAL_IOCTL_WAIT);\n\t\tpriv->phandle->band = IEEE80211_BAND_5GHZ;\n\t\twoal_send_domain_info_cmd_fw(priv, MOAL_IOCTL_WAIT);\n\t\tpriv->phandle->band = band;\n\n\n// create sche scan work queue\n\n// create csa work queue\n\n\n","source":"_posts/CODE-ANALYSIS-3-fw-init.md","raw":"---\ntitle: 'CODE-ANALYSIS:3-fw-init'\ndate: 2022-06-12 00:23:20\ntags: code analysis, Wi-Fi, Driver;\n---\nFri Jun  3 18:26:11 CST 2022\n\n// init firmware\n\nmlan_status\nwoal_init_fw(moal_handle *handle)\n\nlog the fw request time to req_fw_time\n\nexecute fw init, this function download FW using helper\n\tret = woal_request_fw(handle);\n\n// the real function used to download firmware\nret = woal_request_fw_dpc(handle,\n\n// Download and init firmware DPC\nwoal_init_fw_dpc(moal_handle *handle)\n\n\n// download firmware\nret = mlan_dnld_fw(handle->pmlan_adapter, &fw);\n   ret = pmadapter->ops.dnld_fw(pmadapter, pmfw);\n    \n\t// This function download firmware to card\n    static mlan_status\n\twlan_sdio_dnld_fw(pmlan_adapter pmadapter, pmlan_fw_image pmfw)\n\n\n// request dpd data\n\n// request txpwr data\n\n// request cal data\n\n// init data to MLAN\n\tret = mlan_set_init_param(handle->pmlan_adapter, &param);\n\n// this function init firmware\n\tret = mlan_init_fw(handle->pmlan_adapter);\n\t/* Initialize firmware, may return PENDING */\n\t\tret = wlan_init_fw(pmadapter);\n\t\t\n\t\t\t/* Initialize adapter structure */\n\t\t\t\twlan_init_adapter(pmadapter);\n\n\t\t    wlan_adapter_get_hw_spec(pmadapter);\n\n\n// send the first command 0xa9  to firmware\n\tret = wlan_prepare_cmd(priv, HostCmd_CMD_FUNC_INIT, HostCmd_ACT_GEN_SET,\n\t\t\t\t       0, MNULL, MNULL);\n/** Host Command ID : Function initialization */\n#define HostCmd_CMD_FUNC_INIT 0x00a9\n\n//prepare the command\n\n// insert the command to queue to firmware\n\n// process DPD data\n\n// process txpwr data\n\n// preapre command to firmware\n/** Host Command ID : Cal data dnld */\n#define HostCmd_CMD_CFG_DATA 0x008f\n\n\n/** use to query chan region cfg setting in firmware */\n#define HostCmd_CMD_CHAN_REGION_CFG 0x0242\n\n\n/** Host Command ID : Get hardware specifications */\n#define HostCmd_CMD_GET_HW_SPEC 0x0003\n\n\n// Add interface DPC\nwoal_add_card_dpc(moal_handle *handle)\n\t\t/* Add interfaces */\n\t\tfor (i = 0; i < handle->drv_mode.intf_num; i++) {\n\t\t\t\tif (handle->drv_mode.bss_attr[i].bss_virtual)\n\t\t\t\t\t\tcontinue;\n\t\t\t\tif (!woal_add_interface(handle, handle->priv_num,\n\t\t\t\t\t\t\t\t\t\thandle->drv_mode.bss_attr[i].\n\t\t\t\t\t\t\t\t\t\tbss_type)) {\n\t\t\t\t\t\tret = MLAN_STATUS_FAILURE;\n\t\t\t\t\t\tgoto err;\n\t\t\t\t}\n\t\t}\n\n// print driver version number\n\twoal_get_version(handle, str_buf, sizeof(str_buf) - 1);\n\t\tPRINTM(MMSG, \"wlan: version = %s\\n\", str_buf);\n\n// This function add new  interface.\nmoal_private *\nwoal_add_interface(moal_handle *handle, t_u8 bss_index, t_u8 bss_type)\n\n// define interface name, such as mlan0, wlan0, uap0 etc.\n\n// init bss type, bss role type\n\n\n// init tcp session queue\n\n// init tx status queue\n\n\nwoal_init_sta_dev(dev, priv);\n\n\n/* Register cfg80211 for STA or Wifi direct */\nif (woal_register_sta_cfg80211(dev, bss_type)) {\n\n\n// send domain info command to fw\n\t\tpriv->phandle->band = IEEE80211_BAND_2GHZ;\n\t\twoal_send_domain_info_cmd_fw(priv, MOAL_IOCTL_WAIT);\n\t\tpriv->phandle->band = IEEE80211_BAND_5GHZ;\n\t\twoal_send_domain_info_cmd_fw(priv, MOAL_IOCTL_WAIT);\n\t\tpriv->phandle->band = band;\n\n\n// create sche scan work queue\n\n// create csa work queue\n\n\n","slug":"CODE-ANALYSIS-3-fw-init","published":1,"updated":"2022-06-11T16:28:10.249Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud31000318jx8gro8yro","content":"<p>Fri Jun  3 18:26:11 CST 2022</p>\n<p>// init firmware</p>\n<p>mlan_status<br>woal_init_fw(moal_handle *handle)</p>\n<p>log the fw request time to req_fw_time</p>\n<p>execute fw init, this function download FW using helper<br>    ret = woal_request_fw(handle);</p>\n<p>// the real function used to download firmware<br>ret = woal_request_fw_dpc(handle,</p>\n<p>// Download and init firmware DPC<br>woal_init_fw_dpc(moal_handle *handle)</p>\n<p>// download firmware<br>ret = mlan_dnld_fw(handle-&gt;pmlan_adapter, &amp;fw);<br>   ret = pmadapter-&gt;ops.dnld_fw(pmadapter, pmfw);</p>\n<pre><code>// This function download firmware to card\nstatic mlan_status\nwlan_sdio_dnld_fw(pmlan_adapter pmadapter, pmlan_fw_image pmfw)\n</code></pre><p>// request dpd data</p>\n<p>// request txpwr data</p>\n<p>// request cal data</p>\n<p>// init data to MLAN<br>    ret = mlan_set_init_param(handle-&gt;pmlan_adapter, &amp;param);</p>\n<p>// this function init firmware<br>    ret = mlan_init_fw(handle-&gt;pmlan_adapter);<br>    /<em> Initialize firmware, may return PENDING </em>/<br>        ret = wlan_init_fw(pmadapter);</p>\n<pre><code>        /* Initialize adapter structure */\n            wlan_init_adapter(pmadapter);\n\n        wlan_adapter_get_hw_spec(pmadapter);\n</code></pre><p>// send the first command 0xa9  to firmware<br>    ret = wlan_prepare_cmd(priv, HostCmd_CMD_FUNC_INIT, HostCmd_ACT_GEN_SET,<br>                       0, MNULL, MNULL);<br>/<em>* Host Command ID : Function initialization </em>/</p>\n<h1 id=\"define-HostCmd-CMD-FUNC-INIT-0x00a9\"><a href=\"#define-HostCmd-CMD-FUNC-INIT-0x00a9\" class=\"headerlink\" title=\"define HostCmd_CMD_FUNC_INIT 0x00a9\"></a>define HostCmd_CMD_FUNC_INIT 0x00a9</h1><p>//prepare the command</p>\n<p>// insert the command to queue to firmware</p>\n<p>// process DPD data</p>\n<p>// process txpwr data</p>\n<p>// preapre command to firmware<br>/<em>* Host Command ID : Cal data dnld </em>/</p>\n<h1 id=\"define-HostCmd-CMD-CFG-DATA-0x008f\"><a href=\"#define-HostCmd-CMD-CFG-DATA-0x008f\" class=\"headerlink\" title=\"define HostCmd_CMD_CFG_DATA 0x008f\"></a>define HostCmd_CMD_CFG_DATA 0x008f</h1><p>/<em>* use to query chan region cfg setting in firmware </em>/</p>\n<h1 id=\"define-HostCmd-CMD-CHAN-REGION-CFG-0x0242\"><a href=\"#define-HostCmd-CMD-CHAN-REGION-CFG-0x0242\" class=\"headerlink\" title=\"define HostCmd_CMD_CHAN_REGION_CFG 0x0242\"></a>define HostCmd_CMD_CHAN_REGION_CFG 0x0242</h1><p>/<em>* Host Command ID : Get hardware specifications </em>/</p>\n<h1 id=\"define-HostCmd-CMD-GET-HW-SPEC-0x0003\"><a href=\"#define-HostCmd-CMD-GET-HW-SPEC-0x0003\" class=\"headerlink\" title=\"define HostCmd_CMD_GET_HW_SPEC 0x0003\"></a>define HostCmd_CMD_GET_HW_SPEC 0x0003</h1><p>// Add interface DPC<br>woal_add_card_dpc(moal_handle <em>handle)<br>        /</em> Add interfaces */<br>        for (i = 0; i &lt; handle-&gt;drv_mode.intf_num; i++) {<br>                if (handle-&gt;drv_mode.bss_attr[i].bss_virtual)<br>                        continue;<br>                if (!woal_add_interface(handle, handle-&gt;priv_num,<br>                                        handle-&gt;drv_mode.bss_attr[i].<br>                                        bss_type)) {<br>                        ret = MLAN_STATUS_FAILURE;<br>                        goto err;<br>                }<br>        }</p>\n<p>// print driver version number<br>    woal_get_version(handle, str_buf, sizeof(str_buf) - 1);<br>        PRINTM(MMSG, “wlan: version = %s\\n”, str_buf);</p>\n<p>// This function add new  interface.<br>moal_private <em><br>woal_add_interface(moal_handle </em>handle, t_u8 bss_index, t_u8 bss_type)</p>\n<p>// define interface name, such as mlan0, wlan0, uap0 etc.</p>\n<p>// init bss type, bss role type</p>\n<p>// init tcp session queue</p>\n<p>// init tx status queue</p>\n<p>woal_init_sta_dev(dev, priv);</p>\n<p>/<em> Register cfg80211 for STA or Wifi direct </em>/<br>if (woal_register_sta_cfg80211(dev, bss_type)) {</p>\n<p>// send domain info command to fw<br>        priv-&gt;phandle-&gt;band = IEEE80211_BAND_2GHZ;<br>        woal_send_domain_info_cmd_fw(priv, MOAL_IOCTL_WAIT);<br>        priv-&gt;phandle-&gt;band = IEEE80211_BAND_5GHZ;<br>        woal_send_domain_info_cmd_fw(priv, MOAL_IOCTL_WAIT);<br>        priv-&gt;phandle-&gt;band = band;</p>\n<p>// create sche scan work queue</p>\n<p>// create csa work queue</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Fri Jun  3 18:26:11 CST 2022</p>\n<p>// init firmware</p>\n<p>mlan_status<br>woal_init_fw(moal_handle *handle)</p>\n<p>log the fw request time to req_fw_time</p>\n<p>execute fw init, this function download FW using helper<br>    ret = woal_request_fw(handle);</p>\n<p>// the real function used to download firmware<br>ret = woal_request_fw_dpc(handle,</p>\n<p>// Download and init firmware DPC<br>woal_init_fw_dpc(moal_handle *handle)</p>\n<p>// download firmware<br>ret = mlan_dnld_fw(handle-&gt;pmlan_adapter, &amp;fw);<br>   ret = pmadapter-&gt;ops.dnld_fw(pmadapter, pmfw);</p>\n<pre><code>// This function download firmware to card\nstatic mlan_status\nwlan_sdio_dnld_fw(pmlan_adapter pmadapter, pmlan_fw_image pmfw)\n</code></pre><p>// request dpd data</p>\n<p>// request txpwr data</p>\n<p>// request cal data</p>\n<p>// init data to MLAN<br>    ret = mlan_set_init_param(handle-&gt;pmlan_adapter, &amp;param);</p>\n<p>// this function init firmware<br>    ret = mlan_init_fw(handle-&gt;pmlan_adapter);<br>    /<em> Initialize firmware, may return PENDING </em>/<br>        ret = wlan_init_fw(pmadapter);</p>\n<pre><code>        /* Initialize adapter structure */\n            wlan_init_adapter(pmadapter);\n\n        wlan_adapter_get_hw_spec(pmadapter);\n</code></pre><p>// send the first command 0xa9  to firmware<br>    ret = wlan_prepare_cmd(priv, HostCmd_CMD_FUNC_INIT, HostCmd_ACT_GEN_SET,<br>                       0, MNULL, MNULL);<br>/<em>* Host Command ID : Function initialization </em>/</p>\n<h1 id=\"define-HostCmd-CMD-FUNC-INIT-0x00a9\"><a href=\"#define-HostCmd-CMD-FUNC-INIT-0x00a9\" class=\"headerlink\" title=\"define HostCmd_CMD_FUNC_INIT 0x00a9\"></a>define HostCmd_CMD_FUNC_INIT 0x00a9</h1><p>//prepare the command</p>\n<p>// insert the command to queue to firmware</p>\n<p>// process DPD data</p>\n<p>// process txpwr data</p>\n<p>// preapre command to firmware<br>/<em>* Host Command ID : Cal data dnld </em>/</p>\n<h1 id=\"define-HostCmd-CMD-CFG-DATA-0x008f\"><a href=\"#define-HostCmd-CMD-CFG-DATA-0x008f\" class=\"headerlink\" title=\"define HostCmd_CMD_CFG_DATA 0x008f\"></a>define HostCmd_CMD_CFG_DATA 0x008f</h1><p>/<em>* use to query chan region cfg setting in firmware </em>/</p>\n<h1 id=\"define-HostCmd-CMD-CHAN-REGION-CFG-0x0242\"><a href=\"#define-HostCmd-CMD-CHAN-REGION-CFG-0x0242\" class=\"headerlink\" title=\"define HostCmd_CMD_CHAN_REGION_CFG 0x0242\"></a>define HostCmd_CMD_CHAN_REGION_CFG 0x0242</h1><p>/<em>* Host Command ID : Get hardware specifications </em>/</p>\n<h1 id=\"define-HostCmd-CMD-GET-HW-SPEC-0x0003\"><a href=\"#define-HostCmd-CMD-GET-HW-SPEC-0x0003\" class=\"headerlink\" title=\"define HostCmd_CMD_GET_HW_SPEC 0x0003\"></a>define HostCmd_CMD_GET_HW_SPEC 0x0003</h1><p>// Add interface DPC<br>woal_add_card_dpc(moal_handle <em>handle)<br>        /</em> Add interfaces */<br>        for (i = 0; i &lt; handle-&gt;drv_mode.intf_num; i++) {<br>                if (handle-&gt;drv_mode.bss_attr[i].bss_virtual)<br>                        continue;<br>                if (!woal_add_interface(handle, handle-&gt;priv_num,<br>                                        handle-&gt;drv_mode.bss_attr[i].<br>                                        bss_type)) {<br>                        ret = MLAN_STATUS_FAILURE;<br>                        goto err;<br>                }<br>        }</p>\n<p>// print driver version number<br>    woal_get_version(handle, str_buf, sizeof(str_buf) - 1);<br>        PRINTM(MMSG, “wlan: version = %s\\n”, str_buf);</p>\n<p>// This function add new  interface.<br>moal_private <em><br>woal_add_interface(moal_handle </em>handle, t_u8 bss_index, t_u8 bss_type)</p>\n<p>// define interface name, such as mlan0, wlan0, uap0 etc.</p>\n<p>// init bss type, bss role type</p>\n<p>// init tcp session queue</p>\n<p>// init tx status queue</p>\n<p>woal_init_sta_dev(dev, priv);</p>\n<p>/<em> Register cfg80211 for STA or Wifi direct </em>/<br>if (woal_register_sta_cfg80211(dev, bss_type)) {</p>\n<p>// send domain info command to fw<br>        priv-&gt;phandle-&gt;band = IEEE80211_BAND_2GHZ;<br>        woal_send_domain_info_cmd_fw(priv, MOAL_IOCTL_WAIT);<br>        priv-&gt;phandle-&gt;band = IEEE80211_BAND_5GHZ;<br>        woal_send_domain_info_cmd_fw(priv, MOAL_IOCTL_WAIT);<br>        priv-&gt;phandle-&gt;band = band;</p>\n<p>// create sche scan work queue</p>\n<p>// create csa work queue</p>\n"},{"title":"CODE-ANALYSIS:4-scan-process","date":"2022-06-12T06:17:46.000Z","_content":"\nFri Jun  3 20:55:15 CST 2022\n\n// driver scan process.\n\n/** cfg80211 operations */\nstatic struct cfg80211_ops woal_cfg80211_ops = {\n\t\t.change_virtual_intf = woal_cfg80211_change_virtual_intf,\n\t\t.scan = woal_cfg80211_scan,\n\n* @brief Request the driver to do a scan. Always returning\n* zero meaning that the scan request is given to driver,\n* and will be valid until passed to cfg80211_scan_done().\n* To inform scan results, call cfg80211_inform_bss().\n*\nstatic int\nwoal_cfg80211_scan(struct wiphy *wiphy, struct cfg80211_scan_request *request)\n\n\tPRINTM(MINFO, \"Received scan request on %s\\n\", dev->name);\t\n\t\nif (MLAN_STATUS_SUCCESS != woal_do_scan(priv, scan_req)) {\n\n// request scan\nmlan_status\nwoal_do_scan(moal_private *priv, wlan_user_scan_cfg *scan_cfg)\n\n\n\nif (!scan_cfg)\n\t\tret = woal_request_scan(priv, MOAL_NO_WAIT, NULL);\nelse\n\t\tret = woal_request_userscan(priv, MOAL_NO_WAIT, scan_cfg);\n\n\nscan = (mlan_ds_scan *)ioctl_req->pbuf;\nscan->sub_command = MLAN_OID_SCAN_USER_CONFIG;\nioctl_req->req_id = MLAN_IOCTL_SCAN;\nioctl_req->action = MLAN_ACT_SET;\n\n\n\t/* Send IOCTL request to MLAN */\n\t\tstatus = woal_request_ioctl(priv, ioctl_req, wait_option);\n\n\n\n\tstatus = mlan_ioctl(priv->phandle->pmlan_adapter, req);\n\nstatic mlan_operations mlan_sta_ops = {\n\t\t/* init cmd handler */\n\t\twlan_ops_sta_init_cmd,\n\t\t/* ioctl handler */\n\t\twlan_ops_sta_ioctl,\n\t\t/* cmd handler */\n\t\twlan_ops_sta_prepare_cmd,\n\n\nmlan_status\nwlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)\n\n\ncase MLAN_IOCTL_SCAN:\nstatus = wlan_scan_ioctl(pmadapter, pioctl_req);\nbreak;\n\n\n// Get /set scan\nstatic mlan_status\nwlan_scan_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\nPRINTM(MMSG, \"wlan: %s START SCAN\\n\", dev->name);\n\n// to start scan based on input config\ncase MLAN_OID_SCAN_USER_CONFIG:\nstatus = wlan_scan_networks(pmpriv, pioctl_req,\n\t\t\t\t(wlan_user_scan_cfg *)\n\t\t\t\tpscan->param.user_scan.\n\t\t\t\tscan_cfg_buf);\nbreak;\n\n// Construct and send multiple scan config commands to the firmware\n\tret = wlan_scan_channel_list(pmpriv, pioctl_buf, max_chan_per_scan,\n\t\t\t\t\t     filtered_scan, &pscan_cfg_out->config,\n\t\t\t\t\t\tpchan_list_out, pscan_chan_list);\n\n\n// Send the scan command to the firmware with the specified cfg\n\tcmd_no = HostCmd_CMD_802_11_SCAN_EXT;\n\telse\n\t\t\tcmd_no = HostCmd_CMD_802_11_SCAN;\n\tret = wlan_prepare_cmd(pmpriv, cmd_no, HostCmd_ACT_GEN_SET, 0,\n\t\t\t\t\tMNULL, pscan_cfg_out);\n\n\n// \t/* Get scan command from scan_pending_q and put to cmd_pending_q */\n\twlan_insert_cmd_to_pending_q(pmadapter,\n\t\t\t\t\tpcmd_node, MTRUE);\n\n\tPRINTM(MCMND, \"QUEUE_CMD: cmd=0x%x is queued\\n\", command);\n\n// main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n\nif (wlan_exec_next_cmd(pmadapter) ==\n\n\n// This function execute the next command in the cmd pending queue.\nmlan_status\nwlan_exec_next_cmd(mlan_adapter *pmadapter)\n\n\n\nutil_unlink_list(pmadapter->pmoal_handle,\n\t\t&pmadapter->cmd_pending_q,\n\t\t(pmlan_linked_list)pcmd_node, MNULL, MNULL);\nwlan_release_cmd_lock(pmadapter);\nret = wlan_dnld_cmd_to_fw(priv, pcmd_node);\n\n\n// This function download a command to firmware\nstatic mlan_status\nwlan_dnld_cmd_to_fw(mlan_private *pmpriv, cmd_ctrl_node *pcmd_node)\n\n\n/* Send the command to lower layer */\nret = pmadapter->ops.host_to_card(pmpriv, MLAN_TYPE_CMD,\n\t\t\t\tpcmd_node->cmdbuf, MNULL);\n\n\nmlan_adapter_operations mlan_sdio_ops = {\n\t\t.dnld_fw = wlan_sdio_dnld_fw,\n\t\t.host_to_card = wlan_sdio_host_to_card_ext,\n\n\n// This function sends data to card\nstatic mlan_status\nwlan_sdio_host_to_card_ext(pmlan_private pmpriv, t_u8 type,\n\t\t\t   mlan_buffer *pmbuf, mlan_tx_param *tx_param)\n\n// This function will send the data to card by methods via the type of the data.(data/ command)\n\tret = wlan_sdio_host_to_card(pmadapter, type, pmbuf, tx_param);\n\n/* Setup the timer after transmit command */\npcb->moal_start_timer(pmadapter->pmoal_handle,\n\t\t\t\tpmadapter->pmlan_cmd_timer, MFALSE, timeout);\n\n==============================================================================================\n\n// This function handles events generated by firmware\nmlan_status\nwlan_ops_sta_process_event(t_void *priv)\n\n\n// process scan result through event\ncase EVENT_EXT_SCAN_REPORT:      // 0x58\nPRINTM(MEVENT, \"EVENT: EXT_SCAN Report (%d)\\n\",\n\t\t\t\tpmbuf->data_len);\nif (pmadapter->pscan_ioctl_req && pmadapter->ext_scan)\n\t\tret = wlan_handle_event_ext_scan_report(priv, pmbuf);\nbreak;\n\n\n// This function handle the event extended scan report\nmlan_status\nwlan_handle_event_ext_scan_report(mlan_private *pmpriv, mlan_buffer *pmbuf)\n\n\n// This function parse and sotre the extended scan result\nwlan_parse_ext_scan_result(pmpriv, pevent_scan->num_of_set, ptlv,\n\t\t\t\t   tlv_buf_left);\n\n\n// This fucnntion handle the event exteded scan status\ncase EVENT_EXT_SCAN_STATUS_REPORT:      // 0x7f\nPRINTM(MEVENT, \"EVENT: EXT_SCAN status report (%d)\\n\",\n\t\t\t\tpmbuf->data_len);\npmadapter->ext_scan_timeout = MFALSE;\nret = wlan_handle_event_ext_scan_status(priv, pmbuf);\nbreak;\n\n\n// print current scan status\n\n\n// update channel statistics from scan result\ncase TLV_TYPE_CHANNEL_STATS:\ntlv_chan_stats = (MrvlIEtypes_ChannelStats_t *)tlv;\nwlan_update_chan_statistics(pmpriv, tlv_chan_stats);\nbreak;\n\n\n/* Now we got response from FW, cancel the command timer */\n\n\n// process the resulting scan table\nwlan_scan_process_results(pmpriv);\n// Post process the scan table after a new scan command has completed\nstatic t_void\nwlan_scan_process_results(mlan_private *pmpriv)\n\n\n// check if the media_connected status\n// if it is connected, update the status of the current work\n\n// find a specific compatible BSSID in the scan list\nj = wlan_find_bssid_in_list(pmpriv,\n\t\t\t\tpmpriv->curr_bss_params.\n\t\t\t\tbss_descriptor.mac_address,\n\t\t\t\tpmpriv->bss_mode);\n\n// save the current beacon buffer\n    wlan_save_curr_bcn(pmpriv);\n\ncaculate the channel load\n\nupdate channel rssi\n\n\n\n/*\n * Prepares domain info from scan table and downloads the\n *   domain info command to the FW.\n */\nwlan_11d_prepare_dnld_domain_info_cmd(pmpriv);\nPRINTM(MMSG, \"wlan: SCAN COMPLETED: scanned AP count=%d\\n\",\n\t\t\t\tpmadapter->num_in_scan_table);\n\n\n// This function parse country info from AP and download country info to FW\n/* Check if connected */\nif (pmpriv->media_connected == MTRUE) {\n\t\tret = wlan_11d_parse_dnld_countryinfo(pmpriv,\n\t\t\t\t\t\t&pmpriv->\n\t\t\t\t\t\tcurr_bss_params.\n\t\t\t\t\t\tbss_descriptor);\n} else {\n\t\tret = wlan_11d_parse_dnld_countryinfo(pmpriv, MNULL);\n}\n\n\n/* Generate domain info */\nwlan_11d_generate_domain_info(pmadapter, &region_chan);\n\n\n/* Set domain info */\nret = wlan_11d_send_domain_info(pmpriv, MNULL);\n/* Send cmd to FW to set domain info */\nret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11D_DOMAIN_INFO,\n\t\t\t\tHostCmd_ACT_GEN_SET, 0, (t_void *)pioctl_buf,\n\t\t\t\tMNULL);\n\n\ncomplete the scan ioctl\n\n\n\n","source":"_posts/CODE-ANALYSIS-4-scan-process.md","raw":"---\ntitle: 'CODE-ANALYSIS:4-scan-process'\ndate: 2022-06-12 14:17:46\ntags: code analysis, Wi-Fi, Driver;\n---\n\nFri Jun  3 20:55:15 CST 2022\n\n// driver scan process.\n\n/** cfg80211 operations */\nstatic struct cfg80211_ops woal_cfg80211_ops = {\n\t\t.change_virtual_intf = woal_cfg80211_change_virtual_intf,\n\t\t.scan = woal_cfg80211_scan,\n\n* @brief Request the driver to do a scan. Always returning\n* zero meaning that the scan request is given to driver,\n* and will be valid until passed to cfg80211_scan_done().\n* To inform scan results, call cfg80211_inform_bss().\n*\nstatic int\nwoal_cfg80211_scan(struct wiphy *wiphy, struct cfg80211_scan_request *request)\n\n\tPRINTM(MINFO, \"Received scan request on %s\\n\", dev->name);\t\n\t\nif (MLAN_STATUS_SUCCESS != woal_do_scan(priv, scan_req)) {\n\n// request scan\nmlan_status\nwoal_do_scan(moal_private *priv, wlan_user_scan_cfg *scan_cfg)\n\n\n\nif (!scan_cfg)\n\t\tret = woal_request_scan(priv, MOAL_NO_WAIT, NULL);\nelse\n\t\tret = woal_request_userscan(priv, MOAL_NO_WAIT, scan_cfg);\n\n\nscan = (mlan_ds_scan *)ioctl_req->pbuf;\nscan->sub_command = MLAN_OID_SCAN_USER_CONFIG;\nioctl_req->req_id = MLAN_IOCTL_SCAN;\nioctl_req->action = MLAN_ACT_SET;\n\n\n\t/* Send IOCTL request to MLAN */\n\t\tstatus = woal_request_ioctl(priv, ioctl_req, wait_option);\n\n\n\n\tstatus = mlan_ioctl(priv->phandle->pmlan_adapter, req);\n\nstatic mlan_operations mlan_sta_ops = {\n\t\t/* init cmd handler */\n\t\twlan_ops_sta_init_cmd,\n\t\t/* ioctl handler */\n\t\twlan_ops_sta_ioctl,\n\t\t/* cmd handler */\n\t\twlan_ops_sta_prepare_cmd,\n\n\nmlan_status\nwlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)\n\n\ncase MLAN_IOCTL_SCAN:\nstatus = wlan_scan_ioctl(pmadapter, pioctl_req);\nbreak;\n\n\n// Get /set scan\nstatic mlan_status\nwlan_scan_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\nPRINTM(MMSG, \"wlan: %s START SCAN\\n\", dev->name);\n\n// to start scan based on input config\ncase MLAN_OID_SCAN_USER_CONFIG:\nstatus = wlan_scan_networks(pmpriv, pioctl_req,\n\t\t\t\t(wlan_user_scan_cfg *)\n\t\t\t\tpscan->param.user_scan.\n\t\t\t\tscan_cfg_buf);\nbreak;\n\n// Construct and send multiple scan config commands to the firmware\n\tret = wlan_scan_channel_list(pmpriv, pioctl_buf, max_chan_per_scan,\n\t\t\t\t\t     filtered_scan, &pscan_cfg_out->config,\n\t\t\t\t\t\tpchan_list_out, pscan_chan_list);\n\n\n// Send the scan command to the firmware with the specified cfg\n\tcmd_no = HostCmd_CMD_802_11_SCAN_EXT;\n\telse\n\t\t\tcmd_no = HostCmd_CMD_802_11_SCAN;\n\tret = wlan_prepare_cmd(pmpriv, cmd_no, HostCmd_ACT_GEN_SET, 0,\n\t\t\t\t\tMNULL, pscan_cfg_out);\n\n\n// \t/* Get scan command from scan_pending_q and put to cmd_pending_q */\n\twlan_insert_cmd_to_pending_q(pmadapter,\n\t\t\t\t\tpcmd_node, MTRUE);\n\n\tPRINTM(MCMND, \"QUEUE_CMD: cmd=0x%x is queued\\n\", command);\n\n// main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n\nif (wlan_exec_next_cmd(pmadapter) ==\n\n\n// This function execute the next command in the cmd pending queue.\nmlan_status\nwlan_exec_next_cmd(mlan_adapter *pmadapter)\n\n\n\nutil_unlink_list(pmadapter->pmoal_handle,\n\t\t&pmadapter->cmd_pending_q,\n\t\t(pmlan_linked_list)pcmd_node, MNULL, MNULL);\nwlan_release_cmd_lock(pmadapter);\nret = wlan_dnld_cmd_to_fw(priv, pcmd_node);\n\n\n// This function download a command to firmware\nstatic mlan_status\nwlan_dnld_cmd_to_fw(mlan_private *pmpriv, cmd_ctrl_node *pcmd_node)\n\n\n/* Send the command to lower layer */\nret = pmadapter->ops.host_to_card(pmpriv, MLAN_TYPE_CMD,\n\t\t\t\tpcmd_node->cmdbuf, MNULL);\n\n\nmlan_adapter_operations mlan_sdio_ops = {\n\t\t.dnld_fw = wlan_sdio_dnld_fw,\n\t\t.host_to_card = wlan_sdio_host_to_card_ext,\n\n\n// This function sends data to card\nstatic mlan_status\nwlan_sdio_host_to_card_ext(pmlan_private pmpriv, t_u8 type,\n\t\t\t   mlan_buffer *pmbuf, mlan_tx_param *tx_param)\n\n// This function will send the data to card by methods via the type of the data.(data/ command)\n\tret = wlan_sdio_host_to_card(pmadapter, type, pmbuf, tx_param);\n\n/* Setup the timer after transmit command */\npcb->moal_start_timer(pmadapter->pmoal_handle,\n\t\t\t\tpmadapter->pmlan_cmd_timer, MFALSE, timeout);\n\n==============================================================================================\n\n// This function handles events generated by firmware\nmlan_status\nwlan_ops_sta_process_event(t_void *priv)\n\n\n// process scan result through event\ncase EVENT_EXT_SCAN_REPORT:      // 0x58\nPRINTM(MEVENT, \"EVENT: EXT_SCAN Report (%d)\\n\",\n\t\t\t\tpmbuf->data_len);\nif (pmadapter->pscan_ioctl_req && pmadapter->ext_scan)\n\t\tret = wlan_handle_event_ext_scan_report(priv, pmbuf);\nbreak;\n\n\n// This function handle the event extended scan report\nmlan_status\nwlan_handle_event_ext_scan_report(mlan_private *pmpriv, mlan_buffer *pmbuf)\n\n\n// This function parse and sotre the extended scan result\nwlan_parse_ext_scan_result(pmpriv, pevent_scan->num_of_set, ptlv,\n\t\t\t\t   tlv_buf_left);\n\n\n// This fucnntion handle the event exteded scan status\ncase EVENT_EXT_SCAN_STATUS_REPORT:      // 0x7f\nPRINTM(MEVENT, \"EVENT: EXT_SCAN status report (%d)\\n\",\n\t\t\t\tpmbuf->data_len);\npmadapter->ext_scan_timeout = MFALSE;\nret = wlan_handle_event_ext_scan_status(priv, pmbuf);\nbreak;\n\n\n// print current scan status\n\n\n// update channel statistics from scan result\ncase TLV_TYPE_CHANNEL_STATS:\ntlv_chan_stats = (MrvlIEtypes_ChannelStats_t *)tlv;\nwlan_update_chan_statistics(pmpriv, tlv_chan_stats);\nbreak;\n\n\n/* Now we got response from FW, cancel the command timer */\n\n\n// process the resulting scan table\nwlan_scan_process_results(pmpriv);\n// Post process the scan table after a new scan command has completed\nstatic t_void\nwlan_scan_process_results(mlan_private *pmpriv)\n\n\n// check if the media_connected status\n// if it is connected, update the status of the current work\n\n// find a specific compatible BSSID in the scan list\nj = wlan_find_bssid_in_list(pmpriv,\n\t\t\t\tpmpriv->curr_bss_params.\n\t\t\t\tbss_descriptor.mac_address,\n\t\t\t\tpmpriv->bss_mode);\n\n// save the current beacon buffer\n    wlan_save_curr_bcn(pmpriv);\n\ncaculate the channel load\n\nupdate channel rssi\n\n\n\n/*\n * Prepares domain info from scan table and downloads the\n *   domain info command to the FW.\n */\nwlan_11d_prepare_dnld_domain_info_cmd(pmpriv);\nPRINTM(MMSG, \"wlan: SCAN COMPLETED: scanned AP count=%d\\n\",\n\t\t\t\tpmadapter->num_in_scan_table);\n\n\n// This function parse country info from AP and download country info to FW\n/* Check if connected */\nif (pmpriv->media_connected == MTRUE) {\n\t\tret = wlan_11d_parse_dnld_countryinfo(pmpriv,\n\t\t\t\t\t\t&pmpriv->\n\t\t\t\t\t\tcurr_bss_params.\n\t\t\t\t\t\tbss_descriptor);\n} else {\n\t\tret = wlan_11d_parse_dnld_countryinfo(pmpriv, MNULL);\n}\n\n\n/* Generate domain info */\nwlan_11d_generate_domain_info(pmadapter, &region_chan);\n\n\n/* Set domain info */\nret = wlan_11d_send_domain_info(pmpriv, MNULL);\n/* Send cmd to FW to set domain info */\nret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11D_DOMAIN_INFO,\n\t\t\t\tHostCmd_ACT_GEN_SET, 0, (t_void *)pioctl_buf,\n\t\t\t\tMNULL);\n\n\ncomplete the scan ioctl\n\n\n\n","slug":"CODE-ANALYSIS-4-scan-process","published":1,"updated":"2022-06-12T06:19:13.748Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud32000418jx52fj5v4l","content":"<p>Fri Jun  3 20:55:15 CST 2022</p>\n<p>// driver scan process.</p>\n<p>/<em>* cfg80211 operations </em>/<br>static struct cfg80211_ops woal_cfg80211_ops = {<br>        .change_virtual_intf = woal_cfg80211_change_virtual_intf,<br>        .scan = woal_cfg80211_scan,</p>\n<ul>\n<li>@brief Request the driver to do a scan. Always returning</li>\n<li>zero meaning that the scan request is given to driver,</li>\n<li>and will be valid until passed to cfg80211_scan_done().</li>\n<li><p>To inform scan results, call cfg80211_inform_bss().<br><em><br>static int<br>woal_cfg80211_scan(struct wiphy </em>wiphy, struct cfg80211_scan_request *request)</p>\n<p>  PRINTM(MINFO, “Received scan request on %s\\n”, dev-&gt;name);    </p>\n</li>\n</ul>\n<p>if (MLAN_STATUS_SUCCESS != woal_do_scan(priv, scan_req)) {</p>\n<p>// request scan<br>mlan_status<br>woal_do_scan(moal_private <em>priv, wlan_user_scan_cfg </em>scan_cfg)</p>\n<p>if (!scan_cfg)<br>        ret = woal_request_scan(priv, MOAL_NO_WAIT, NULL);<br>else<br>        ret = woal_request_userscan(priv, MOAL_NO_WAIT, scan_cfg);</p>\n<p>scan = (mlan_ds_scan *)ioctl_req-&gt;pbuf;<br>scan-&gt;sub_command = MLAN_OID_SCAN_USER_CONFIG;<br>ioctl_req-&gt;req_id = MLAN_IOCTL_SCAN;<br>ioctl_req-&gt;action = MLAN_ACT_SET;</p>\n<pre><code>/* Send IOCTL request to MLAN */\n    status = woal_request_ioctl(priv, ioctl_req, wait_option);\n\n\n\nstatus = mlan_ioctl(priv-&gt;phandle-&gt;pmlan_adapter, req);\n</code></pre><p>static mlan_operations mlan_sta_ops = {<br>        /<em> init cmd handler </em>/<br>        wlan_ops_sta_init_cmd,<br>        /<em> ioctl handler </em>/<br>        wlan_ops_sta_ioctl,<br>        /<em> cmd handler </em>/<br>        wlan_ops_sta_prepare_cmd,</p>\n<p>mlan_status<br>wlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)</p>\n<p>case MLAN_IOCTL_SCAN:<br>status = wlan_scan_ioctl(pmadapter, pioctl_req);<br>break;</p>\n<p>// Get /set scan<br>static mlan_status<br>wlan_scan_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)<br>PRINTM(MMSG, “wlan: %s START SCAN\\n”, dev-&gt;name);</p>\n<p>// to start scan based on input config<br>case MLAN_OID_SCAN_USER_CONFIG:<br>status = wlan_scan_networks(pmpriv, pioctl_req,<br>                (wlan_user_scan_cfg *)<br>                pscan-&gt;param.user_scan.<br>                scan_cfg_buf);<br>break;</p>\n<p>// Construct and send multiple scan config commands to the firmware<br>    ret = wlan_scan_channel_list(pmpriv, pioctl_buf, max_chan_per_scan,<br>                         filtered_scan, &amp;pscan_cfg_out-&gt;config,<br>                        pchan_list_out, pscan_chan_list);</p>\n<p>// Send the scan command to the firmware with the specified cfg<br>    cmd_no = HostCmd_CMD_802_11_SCAN_EXT;<br>    else<br>            cmd_no = HostCmd_CMD_802_11_SCAN;<br>    ret = wlan_prepare_cmd(pmpriv, cmd_no, HostCmd_ACT_GEN_SET, 0,<br>                    MNULL, pscan_cfg_out);</p>\n<p>//     /<em> Get scan command from scan_pending_q and put to cmd_pending_q </em>/<br>    wlan_insert_cmd_to_pending_q(pmadapter,<br>                    pcmd_node, MTRUE);</p>\n<pre><code>PRINTM(MCMND, &quot;QUEUE_CMD: cmd=0x%x is queued\\n&quot;, command);\n</code></pre><p>// main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<p>if (wlan_exec_next_cmd(pmadapter) ==</p>\n<p>// This function execute the next command in the cmd pending queue.<br>mlan_status<br>wlan_exec_next_cmd(mlan_adapter *pmadapter)</p>\n<p>util_unlink_list(pmadapter-&gt;pmoal_handle,<br>        &amp;pmadapter-&gt;cmd_pending_q,<br>        (pmlan_linked_list)pcmd_node, MNULL, MNULL);<br>wlan_release_cmd_lock(pmadapter);<br>ret = wlan_dnld_cmd_to_fw(priv, pcmd_node);</p>\n<p>// This function download a command to firmware<br>static mlan_status<br>wlan_dnld_cmd_to_fw(mlan_private <em>pmpriv, cmd_ctrl_node </em>pcmd_node)</p>\n<p>/<em> Send the command to lower layer </em>/<br>ret = pmadapter-&gt;ops.host_to_card(pmpriv, MLAN_TYPE_CMD,<br>                pcmd_node-&gt;cmdbuf, MNULL);</p>\n<p>mlan_adapter_operations mlan_sdio_ops = {<br>        .dnld_fw = wlan_sdio_dnld_fw,<br>        .host_to_card = wlan_sdio_host_to_card_ext,</p>\n<p>// This function sends data to card<br>static mlan_status<br>wlan_sdio_host_to_card_ext(pmlan_private pmpriv, t_u8 type,<br>               mlan_buffer <em>pmbuf, mlan_tx_param </em>tx_param)</p>\n<p>// This function will send the data to card by methods via the type of the data.(data/ command)<br>    ret = wlan_sdio_host_to_card(pmadapter, type, pmbuf, tx_param);</p>\n<p>/<em> Setup the timer after transmit command </em>/<br>pcb-&gt;moal_start_timer(pmadapter-&gt;pmoal_handle,<br>                pmadapter-&gt;pmlan_cmd_timer, MFALSE, timeout);</p>\n<p>==============================================================================================</p>\n<p>// This function handles events generated by firmware<br>mlan_status<br>wlan_ops_sta_process_event(t_void *priv)</p>\n<p>// process scan result through event<br>case EVENT_EXT_SCAN_REPORT:      // 0x58<br>PRINTM(MEVENT, “EVENT: EXT_SCAN Report (%d)\\n”,<br>                pmbuf-&gt;data_len);<br>if (pmadapter-&gt;pscan_ioctl_req &amp;&amp; pmadapter-&gt;ext_scan)<br>        ret = wlan_handle_event_ext_scan_report(priv, pmbuf);<br>break;</p>\n<p>// This function handle the event extended scan report<br>mlan_status<br>wlan_handle_event_ext_scan_report(mlan_private <em>pmpriv, mlan_buffer </em>pmbuf)</p>\n<p>// This function parse and sotre the extended scan result<br>wlan_parse_ext_scan_result(pmpriv, pevent_scan-&gt;num_of_set, ptlv,<br>                   tlv_buf_left);</p>\n<p>// This fucnntion handle the event exteded scan status<br>case EVENT_EXT_SCAN_STATUS_REPORT:      // 0x7f<br>PRINTM(MEVENT, “EVENT: EXT_SCAN status report (%d)\\n”,<br>                pmbuf-&gt;data_len);<br>pmadapter-&gt;ext_scan_timeout = MFALSE;<br>ret = wlan_handle_event_ext_scan_status(priv, pmbuf);<br>break;</p>\n<p>// print current scan status</p>\n<p>// update channel statistics from scan result<br>case TLV_TYPE_CHANNEL_STATS:<br>tlv_chan_stats = (MrvlIEtypes_ChannelStats_t *)tlv;<br>wlan_update_chan_statistics(pmpriv, tlv_chan_stats);<br>break;</p>\n<p>/<em> Now we got response from FW, cancel the command timer </em>/</p>\n<p>// process the resulting scan table<br>wlan_scan_process_results(pmpriv);<br>// Post process the scan table after a new scan command has completed<br>static t_void<br>wlan_scan_process_results(mlan_private *pmpriv)</p>\n<p>// check if the media_connected status<br>// if it is connected, update the status of the current work</p>\n<p>// find a specific compatible BSSID in the scan list<br>j = wlan_find_bssid_in_list(pmpriv,<br>                pmpriv-&gt;curr_bss_params.<br>                bss_descriptor.mac_address,<br>                pmpriv-&gt;bss_mode);</p>\n<p>// save the current beacon buffer<br>    wlan_save_curr_bcn(pmpriv);</p>\n<p>caculate the channel load</p>\n<p>update channel rssi</p>\n<p>/*</p>\n<ul>\n<li>Prepares domain info from scan table and downloads the</li>\n<li>domain info command to the FW.<br>*/<br>wlan_11d_prepare_dnld_domain_info_cmd(pmpriv);<br>PRINTM(MMSG, “wlan: SCAN COMPLETED: scanned AP count=%d\\n”,<pre><code>       pmadapter-&gt;num_in_scan_table);\n</code></pre></li>\n</ul>\n<p>// This function parse country info from AP and download country info to FW<br>/<em> Check if connected </em>/<br>if (pmpriv-&gt;media_connected == MTRUE) {<br>        ret = wlan_11d_parse_dnld_countryinfo(pmpriv,<br>                        &amp;pmpriv-&gt;<br>                        curr_bss_params.<br>                        bss_descriptor);<br>} else {<br>        ret = wlan_11d_parse_dnld_countryinfo(pmpriv, MNULL);<br>}</p>\n<p>/<em> Generate domain info </em>/<br>wlan_11d_generate_domain_info(pmadapter, &amp;region_chan);</p>\n<p>/<em> Set domain info </em>/<br>ret = wlan_11d_send_domain_info(pmpriv, MNULL);<br>/<em> Send cmd to FW to set domain info </em>/<br>ret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11D_DOMAIN_INFO,<br>                HostCmd_ACT_GEN_SET, 0, (t_void *)pioctl_buf,<br>                MNULL);</p>\n<p>complete the scan ioctl</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Fri Jun  3 20:55:15 CST 2022</p>\n<p>// driver scan process.</p>\n<p>/<em>* cfg80211 operations </em>/<br>static struct cfg80211_ops woal_cfg80211_ops = {<br>        .change_virtual_intf = woal_cfg80211_change_virtual_intf,<br>        .scan = woal_cfg80211_scan,</p>\n<ul>\n<li>@brief Request the driver to do a scan. Always returning</li>\n<li>zero meaning that the scan request is given to driver,</li>\n<li>and will be valid until passed to cfg80211_scan_done().</li>\n<li><p>To inform scan results, call cfg80211_inform_bss().<br><em><br>static int<br>woal_cfg80211_scan(struct wiphy </em>wiphy, struct cfg80211_scan_request *request)</p>\n<p>  PRINTM(MINFO, “Received scan request on %s\\n”, dev-&gt;name);    </p>\n</li>\n</ul>\n<p>if (MLAN_STATUS_SUCCESS != woal_do_scan(priv, scan_req)) {</p>\n<p>// request scan<br>mlan_status<br>woal_do_scan(moal_private <em>priv, wlan_user_scan_cfg </em>scan_cfg)</p>\n<p>if (!scan_cfg)<br>        ret = woal_request_scan(priv, MOAL_NO_WAIT, NULL);<br>else<br>        ret = woal_request_userscan(priv, MOAL_NO_WAIT, scan_cfg);</p>\n<p>scan = (mlan_ds_scan *)ioctl_req-&gt;pbuf;<br>scan-&gt;sub_command = MLAN_OID_SCAN_USER_CONFIG;<br>ioctl_req-&gt;req_id = MLAN_IOCTL_SCAN;<br>ioctl_req-&gt;action = MLAN_ACT_SET;</p>\n<pre><code>/* Send IOCTL request to MLAN */\n    status = woal_request_ioctl(priv, ioctl_req, wait_option);\n\n\n\nstatus = mlan_ioctl(priv-&gt;phandle-&gt;pmlan_adapter, req);\n</code></pre><p>static mlan_operations mlan_sta_ops = {<br>        /<em> init cmd handler </em>/<br>        wlan_ops_sta_init_cmd,<br>        /<em> ioctl handler </em>/<br>        wlan_ops_sta_ioctl,<br>        /<em> cmd handler </em>/<br>        wlan_ops_sta_prepare_cmd,</p>\n<p>mlan_status<br>wlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)</p>\n<p>case MLAN_IOCTL_SCAN:<br>status = wlan_scan_ioctl(pmadapter, pioctl_req);<br>break;</p>\n<p>// Get /set scan<br>static mlan_status<br>wlan_scan_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)<br>PRINTM(MMSG, “wlan: %s START SCAN\\n”, dev-&gt;name);</p>\n<p>// to start scan based on input config<br>case MLAN_OID_SCAN_USER_CONFIG:<br>status = wlan_scan_networks(pmpriv, pioctl_req,<br>                (wlan_user_scan_cfg *)<br>                pscan-&gt;param.user_scan.<br>                scan_cfg_buf);<br>break;</p>\n<p>// Construct and send multiple scan config commands to the firmware<br>    ret = wlan_scan_channel_list(pmpriv, pioctl_buf, max_chan_per_scan,<br>                         filtered_scan, &amp;pscan_cfg_out-&gt;config,<br>                        pchan_list_out, pscan_chan_list);</p>\n<p>// Send the scan command to the firmware with the specified cfg<br>    cmd_no = HostCmd_CMD_802_11_SCAN_EXT;<br>    else<br>            cmd_no = HostCmd_CMD_802_11_SCAN;<br>    ret = wlan_prepare_cmd(pmpriv, cmd_no, HostCmd_ACT_GEN_SET, 0,<br>                    MNULL, pscan_cfg_out);</p>\n<p>//     /<em> Get scan command from scan_pending_q and put to cmd_pending_q </em>/<br>    wlan_insert_cmd_to_pending_q(pmadapter,<br>                    pcmd_node, MTRUE);</p>\n<pre><code>PRINTM(MCMND, &quot;QUEUE_CMD: cmd=0x%x is queued\\n&quot;, command);\n</code></pre><p>// main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<p>if (wlan_exec_next_cmd(pmadapter) ==</p>\n<p>// This function execute the next command in the cmd pending queue.<br>mlan_status<br>wlan_exec_next_cmd(mlan_adapter *pmadapter)</p>\n<p>util_unlink_list(pmadapter-&gt;pmoal_handle,<br>        &amp;pmadapter-&gt;cmd_pending_q,<br>        (pmlan_linked_list)pcmd_node, MNULL, MNULL);<br>wlan_release_cmd_lock(pmadapter);<br>ret = wlan_dnld_cmd_to_fw(priv, pcmd_node);</p>\n<p>// This function download a command to firmware<br>static mlan_status<br>wlan_dnld_cmd_to_fw(mlan_private <em>pmpriv, cmd_ctrl_node </em>pcmd_node)</p>\n<p>/<em> Send the command to lower layer </em>/<br>ret = pmadapter-&gt;ops.host_to_card(pmpriv, MLAN_TYPE_CMD,<br>                pcmd_node-&gt;cmdbuf, MNULL);</p>\n<p>mlan_adapter_operations mlan_sdio_ops = {<br>        .dnld_fw = wlan_sdio_dnld_fw,<br>        .host_to_card = wlan_sdio_host_to_card_ext,</p>\n<p>// This function sends data to card<br>static mlan_status<br>wlan_sdio_host_to_card_ext(pmlan_private pmpriv, t_u8 type,<br>               mlan_buffer <em>pmbuf, mlan_tx_param </em>tx_param)</p>\n<p>// This function will send the data to card by methods via the type of the data.(data/ command)<br>    ret = wlan_sdio_host_to_card(pmadapter, type, pmbuf, tx_param);</p>\n<p>/<em> Setup the timer after transmit command </em>/<br>pcb-&gt;moal_start_timer(pmadapter-&gt;pmoal_handle,<br>                pmadapter-&gt;pmlan_cmd_timer, MFALSE, timeout);</p>\n<p>==============================================================================================</p>\n<p>// This function handles events generated by firmware<br>mlan_status<br>wlan_ops_sta_process_event(t_void *priv)</p>\n<p>// process scan result through event<br>case EVENT_EXT_SCAN_REPORT:      // 0x58<br>PRINTM(MEVENT, “EVENT: EXT_SCAN Report (%d)\\n”,<br>                pmbuf-&gt;data_len);<br>if (pmadapter-&gt;pscan_ioctl_req &amp;&amp; pmadapter-&gt;ext_scan)<br>        ret = wlan_handle_event_ext_scan_report(priv, pmbuf);<br>break;</p>\n<p>// This function handle the event extended scan report<br>mlan_status<br>wlan_handle_event_ext_scan_report(mlan_private <em>pmpriv, mlan_buffer </em>pmbuf)</p>\n<p>// This function parse and sotre the extended scan result<br>wlan_parse_ext_scan_result(pmpriv, pevent_scan-&gt;num_of_set, ptlv,<br>                   tlv_buf_left);</p>\n<p>// This fucnntion handle the event exteded scan status<br>case EVENT_EXT_SCAN_STATUS_REPORT:      // 0x7f<br>PRINTM(MEVENT, “EVENT: EXT_SCAN status report (%d)\\n”,<br>                pmbuf-&gt;data_len);<br>pmadapter-&gt;ext_scan_timeout = MFALSE;<br>ret = wlan_handle_event_ext_scan_status(priv, pmbuf);<br>break;</p>\n<p>// print current scan status</p>\n<p>// update channel statistics from scan result<br>case TLV_TYPE_CHANNEL_STATS:<br>tlv_chan_stats = (MrvlIEtypes_ChannelStats_t *)tlv;<br>wlan_update_chan_statistics(pmpriv, tlv_chan_stats);<br>break;</p>\n<p>/<em> Now we got response from FW, cancel the command timer </em>/</p>\n<p>// process the resulting scan table<br>wlan_scan_process_results(pmpriv);<br>// Post process the scan table after a new scan command has completed<br>static t_void<br>wlan_scan_process_results(mlan_private *pmpriv)</p>\n<p>// check if the media_connected status<br>// if it is connected, update the status of the current work</p>\n<p>// find a specific compatible BSSID in the scan list<br>j = wlan_find_bssid_in_list(pmpriv,<br>                pmpriv-&gt;curr_bss_params.<br>                bss_descriptor.mac_address,<br>                pmpriv-&gt;bss_mode);</p>\n<p>// save the current beacon buffer<br>    wlan_save_curr_bcn(pmpriv);</p>\n<p>caculate the channel load</p>\n<p>update channel rssi</p>\n<p>/*</p>\n<ul>\n<li>Prepares domain info from scan table and downloads the</li>\n<li>domain info command to the FW.<br>*/<br>wlan_11d_prepare_dnld_domain_info_cmd(pmpriv);<br>PRINTM(MMSG, “wlan: SCAN COMPLETED: scanned AP count=%d\\n”,<pre><code>       pmadapter-&gt;num_in_scan_table);\n</code></pre></li>\n</ul>\n<p>// This function parse country info from AP and download country info to FW<br>/<em> Check if connected </em>/<br>if (pmpriv-&gt;media_connected == MTRUE) {<br>        ret = wlan_11d_parse_dnld_countryinfo(pmpriv,<br>                        &amp;pmpriv-&gt;<br>                        curr_bss_params.<br>                        bss_descriptor);<br>} else {<br>        ret = wlan_11d_parse_dnld_countryinfo(pmpriv, MNULL);<br>}</p>\n<p>/<em> Generate domain info </em>/<br>wlan_11d_generate_domain_info(pmadapter, &amp;region_chan);</p>\n<p>/<em> Set domain info </em>/<br>ret = wlan_11d_send_domain_info(pmpriv, MNULL);<br>/<em> Send cmd to FW to set domain info </em>/<br>ret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11D_DOMAIN_INFO,<br>                HostCmd_ACT_GEN_SET, 0, (t_void *)pioctl_buf,<br>                MNULL);</p>\n<p>complete the scan ioctl</p>\n"},{"title":"CODE-ANALYSIS:5-connect-process-hostmlme","date":"2022-06-12T06:19:41.000Z","_content":"\nSat Jun  4 22:29:17 CST 2022\n\nwoal_cfg80211_ops.auth = woal_cfg80211_authenticate;\n\n// This function is authentication handler when host MLME enable\n// In this case, driver will prepare and send Auth Req.\nstatic int\nwoal_cfg80211_authenticate(struct wiphy *wiphy,\n\t\t\t   struct net_device *dev, struct cfg80211_auth_request *req)\n\n\n\n// reset cfg_disconnect flag\n\n/** cancel pending scan */\n\t\twoal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n\n\n\t/* Not allowed to connect to the same AP which is already connected\n\t\t   with other interface */\n\n\n// create auth frame and fill the info\n\n\nPRINTM(MCMND, \"wlan: HostMlme %s send auth to bssid \" MACSTR \"\\n\",\n\t       dev->name, MAC2STR(req->bss->bssid));\n\n\n\n\tstatus = mlan_send_packet(priv->phandle->pmlan_adapter, pmbuf);\n\n// Function to send packet\nmlan_status\nmlan_send_packet(t_void *padapter, pmlan_buffer pmbuf)\n\n\nwlan_add_buf_bypass_txqueue(pmadapter, pmbuf);\n\n// Add packet to bypass tx queue\nt_void\nwlan_add_buf_bypass_txqueue(mlan_adapter *pmadapter, pmlan_buffer pmbuf)\n\t\tpmadapter->bypass_pkt_count++;\n\t\tutil_enqueue_list_tail(pmadapter->pmoal_handle, &priv->bypass_txq,\n\t\t\t\t\t\t(pmlan_linked_list)pmbuf, MNULL, MNULL);\n\n\n===== Another work queue to process the above bypass_txq\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n\n\t\t\tPRINTM(MINFO, \"mlan_send_pkt(): deq(bybass_txq)\\n\");\n\t\t\t\t\t\twlan_process_bypass_tx(pmadapter);\n\n// Transmit the By-passed packet awaiting in by-pass queue\nt_void\nwlan_process_bypass_tx(pmlan_adapter pmadapter)\n\n\n\t\tstatus = wlan_process_tx(pmadapter->\n\t\t\t\t\t\tpriv[pmbuf->\n\t\t\t\t\t\tbss_index],\n\t\t\t\t\t\tpmbuf,\n\t\t\t\t\t\t&tx_param);\n\n// This function checks the conditions and sends packet to device\nmlan_status\nwlan_process_tx(pmlan_private priv, pmlan_buffer pmbuf, mlan_tx_param *tx_param)\n\n\n\nhead_ptr = (t_u8 *)priv->ops.process_txpd(priv, pmbuf);\n\n\nstatic mlan_operations mlan_sta_ops = {\n\t\t/* txpd handler */\n\t\twlan_ops_sta_process_txpd,\n\n// This function fill the txpd for tx packet\nt_void *\nwlan_ops_sta_process_txpd(t_void *priv, pmlan_buffer pmbuf)\n\n\n// this function send the data to card\n\t\tret = pmadapter->ops.host_to_card(priv, MLAN_TYPE_DATA, pmbuf,\n\t\t\t\t\t\t\t\t  tx_param);\n\n\t.host_to_card = wlan_sdio_host_to_card_ext,\n\n// This function send data to card\nstatic mlan_status\nwlan_sdio_host_to_card_ext(pmlan_private pmpriv, t_u8 type,\n\t\t\t   mlan_buffer *pmbuf, mlan_tx_param *tx_param)\n\n\n====== above is the auth frame send by the STA\n\n===== below receive auth response from ex-ap\n\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n/* Handle pending interrupts if any */\nif (pmadapter->ireg) {\n\t\tif (pmadapter->hs_activated == MTRUE)\n\t\t\t\twlan_process_hs_config(pmadapter);\n\t\tpmadapter->ops.process_int_status(pmadapter);\n\n\t.process_int_status = wlan_process_sdio_int_status,\n\n\n\n\n// This function checks the interrupt status and handle it accordingly.\nstatic mlan_status\nwlan_process_sdio_int_status(mlan_adapter *pmadapter)\n\n\nstatic mlan_status\nwlan_decode_rx_packet(mlan_adapter *pmadapter,\n\t\t      mlan_buffer *pmbuf, t_u32 upld_typ, t_u8 lock_flag)\n\n\n// This function processed the received buffer\nmlan_status\nwlan_handle_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)\n\n\tret = priv->ops.process_rx_packet(pmadapter, pmbuf);\n\nwlan_ops_sta_process_rx_packet,\n\n// This function processed the received buffer\nmlan_status\nwlan_ops_sta_process_rx_packet(t_void *adapter, pmlan_buffer pmbuf)\n\n// This function processes the 802.11 mgmt Frame\nmlan_status\nwlan_process_802dot11_mgmt_pkt(mlan_private *priv,\n\t\t\t       t_u8 *payload, t_u32 payload_len, RxPD *prx_pd)\n\n    case SUBTYPE_AUTH:\n    unicast = MTRUE;\n    PRINTM_NETINTF(MMSG, priv);\n    PRINTM(MMSG, \"wlan: HostMlme Auth received from \" MACSTR \"\\n\",\n    \t\t\t\tMAC2STR(pieee_pkt_hdr->addr2));\n    break;\n\n\n\n\t\tpevent->event_id = MLAN_EVENT_ID_DRV_MGMT_FRAME;\n\n\twlan_recv_event(priv, pevent->event_id, pevent);\n\n\tcase MLAN_EVENT_ID_DRV_MGMT_FRAME:\n\n\tPRINTM(MEVENT,\n\t\t\t\t\t\"HostMlme %s: Received auth frame type = 0x%x\\n\",\n\t\t\t\t\tpriv->netdev->name,\n\t\t\t\t\tpriv->auth_alg);\n\n\n\tqueue_work\n\t\t\t(priv->\n\t\t\t phandle->\n\t\t\t evt_workqueue,\n\t\t\t &priv->\n\t\t\t phandle->\n\t\t\t host_mlme_work);\n\n\tMLAN_INIT_WORK(&handle->host_mlme_work, woal_host_mlme_work_queue);\n\n// This workqueue function handles association response in host mlme\nvoid\nwoal_host_mlme_work_queue(struct work_struct *work)\n\nPRINTM(MCMND, \"wlan: HostMlme %s auth success\\n\",\n\t\t\t\t\t\t       priv->netdev->name);\n\n\n\n\n\n\n// After auth success, the upper layer send associate request\nwoal_cfg80211_ops.assoc = woal_cfg80211_associate;\n\n// This function is association handler when host MLME enable\n// In this case driver will prepare and assoc req\nstatic int\nwoal_cfg80211_associate(struct wiphy *wiphy, struct net_device *dev,\n\t\t\tstruct cfg80211_assoc_request *req)\n\n\tPRINTM(MCMND, \"wlan: HostMlme %s send assoicate to bssid \" MACSTR \"\\n\",\n\t\t       priv->netdev->name, MAC2STR(req->bss->bssid));\n\n\n\tif (MLAN_STATUS_SUCCESS !=\n\t\t    woal_bss_start(priv, MOAL_IOCTL_WAIT_TIMEOUT, ssid_bssid)) {\n\n\n\t/* Fill request buffer */\n\t\tbss = (mlan_ds_bss *)req->pbuf;\n\t\n\t\t\tbss->sub_command = MLAN_OID_BSS_START;\n\t\t\tif (ssid_bssid)\n\t\t\t\t\tmoal_memcpy_ext(priv->phandle, &bss->param.ssid_bssid,\n\t\t\t\t\t\t\t\t\tssid_bssid, sizeof(mlan_ssid_bssid),\n\t\t\t\t\t\t\t\t\tsizeof(mlan_ssid_bssid));\n\t\t\treq->req_id = MLAN_IOCTL_BSS;\n\t\t\treq->action = MLAN_ACT_SET;\n\n\n\n\t/* Send IOCTL request to MLAN */\n\t\tstatus = woal_request_ioctl(priv, req, wait_option);\n\n\n// send ioctl request to MLAN\nmlan_status\nwoal_request_ioctl(moal_private *priv, mlan_ioctl_req *req, t_u8 wait_option)\n\n\n\n\n\tstatus = mlan_ioctl(priv->phandle->pmlan_adapter, req);\n\n\n\n\nmlan_status\nmlan_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)\n   \tret = pmpriv->ops.ioctl(adapter, pioctl_req);\n\n\n\twlan_ops_sta_ioctl,\n\n\n\nmlan_status\nwlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)\n  \tcase MLAN_IOCTL_BSS:\n\t\t\tstatus = wlan_bss_ioctl(pmadapter, pioctl_req);\n\t\t\t\t\tbreak;\n\n\nstatic mlan_status\nwlan_bss_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\n\tcase MLAN_OID_BSS_START:\n\t\t\tstatus = wlan_bss_ioctl_start(pmadapter, pioctl_req);\n\n\n\n// start bss\nstatic mlan_status\nwlan_bss_ioctl_start(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\n\n\n// find bssid in scan table list\n\n\n\t\t\tret = wlan_associate(pmpriv, pioctl_req,\n\t\t\t\t\t\t\t\t     &pmadapter->pscan_table[i]);\n\n\n\n// associate to specific bss disconvered in a scan\nmlan_status\nwlan_associate(mlan_private *pmpriv, t_void *pioctl_buf,\n\t       BSSDescriptor_t *pbss_desc)\n\n\n\n    /** Host Command ID : 802.11 associate */\n\t#define HostCmd_CMD_802_11_ASSOCIATE 0x0012\n\tret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11_ASSOCIATE,\n\t\t\t\t       HostCmd_ACT_GEN_SET, 0, pioctl_buf, pbss_desc);\n\n\n\nret = pmpriv->ops.prepare_cmd(pmpriv, cmd_no, cmd_action,\n\t\t\t\t\t\t\t      cmd_oid, pioctl_buf, pdata_buf, cmd_ptr);\n\n\t\t\twlan_queue_cmd(pmpriv, pcmd_node, cmd_no);\n\t\n\n\tcase HostCmd_CMD_802_11_ASSOCIATE:\n\t\t\tret = wlan_ret_802_11_associate(pmpriv, resp, pioctl_buf);\n\t\t\t\t\tbreak;\n\n\n// association firmware response handler\nmlan_status\nwlan_ret_802_11_associate(mlan_private *pmpriv,\n\t\t\t  HostCmd_DS_COMMAND *resp, t_void *pioctl_buf)\n\n\n\tPRINTM(MCMND, \"ASSOC_RESP: %-32s (a_id = 0x%x)\\n\", pbss_desc->ssid.ssid,\n\t\t       wlan_le16_to_cpu(passoc_rsp->a_id));\n\n\n// now it is simimlar with the no hostmlme type\n\n\t/* Send a Media Connected event, according to the Spec */\n\t\tpmpriv->media_connected = MTRUE;\n\n\n\twlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_CONNECTED, pevent);\n\n\n    wlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER, pevent);\n\n\n\t.moal_recv_event = moal_recv_event,\n\n\n// This function handle event received\nmlan_status\nmoal_recv_event(t_void *pmoal, pmlan_event pmevent)\n\n\n    woal_broadcast_event(priv, pmevent->event_buf,\n\t\t\t\tpmevent->event_len);\n\twoal_update_dscp_mapping(priv);\n\tpriv->media_connected = MTRUE;\n\n\n===============// 4-way handshake\n\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n/* Handle pending interrupts if any */\nif (pmadapter->ireg) {\n\t\tif (pmadapter->hs_activated == MTRUE)\n\t\t\t\twlan_process_hs_config(pmadapter);\n\t\tpmadapter->ops.process_int_status(pmadapter);\n\n\t.process_int_status = wlan_process_sdio_int_status,\n\n\n// This function checks the interrupt status and handle it accordingly.\nstatic mlan_status\nwlan_process_sdio_int_status(mlan_adapter *pmadapter)\n\n\n\nstatic mlan_status\nwlan_decode_rx_packet(mlan_adapter *pmadapter,\n\t\t      mlan_buffer *pmbuf, t_u32 upld_typ, t_u8 lock_flag)\n\nmlan_status\nwlan_handle_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)\n\n\tPRINTM(MDATA, \"%lu.%06lu : Data <= FW\\n\", sec, usec);\n\t\tret = priv->ops.process_rx_packet(pmadapter, pmbuf);\n\n\t/* rx handler */\n\t\twlan_ops_sta_process_rx_packet,\n\n// This function processes the received buffer\nmlan_status\nwlan_ops_sta_process_rx_packet(t_void *adapter, pmlan_buffer pmbuf)\n\n\n\n// this function process the received packet and forwards it to kernel/upper layer\nmlan_status\nwlan_process_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)\n\n\tret = pmadapter->callbacks.moal_recv_packet(pmadapter->pmoal_handle,\n\t\t\t\t\t\t\t    pmbuf);\n\t\n    pmadapter->ops.data_complete(pmadapter, pmbuf, ret);\n\n// this fucntion uploads the packet to network stack\nmlan_status\nmoal_recv_packet(t_void *pmoal, pmlan_buffer pmbuf)\n\n\tif (ntohs(ethh->h_proto) == ETH_P_PAE)\n\t\t\tPRINTM(MEVENT,\n\t\t\t\t\t\t\t\"wlan: %s Rx EAPOL pkt from \" MACSTR\n\t\t\t\t\t\t\t\"\\n\",\n\t\t\t\t\t\t\tpriv->netdev->name,\n\t\t\t\t\t\t\tMAC2STR(ethh->h_source));\n\n\n\n\t.moal_recv_packet = moal_recv_packet,\n\n// this fucntion uploads the packet to network stack\nmlan_status\nmoal_recv_packet(t_void *pmoal, pmlan_buffer pmbuf)\n\n\n\t\t\t\tskb_reserve(skb, pmbuf->data_offset);\n\n\t\t\t    skb_put(skb, pmbuf->data_len);\n\n\n\tnetif_rx(skb);\n\tor\n\tnetif_receive_skb(skb);\n\tor \n\tnetif_rx_ni(skb);\n\n\n// the above process include the process of rx data\n\n","source":"_posts/CODE-ANALYSIS-5-connect-process-hostmlme.md","raw":"---\ntitle: 'CODE-ANALYSIS:5-connect-process-hostmlme'\ndate: 2022-06-12 14:19:41\ntags: code analysis, Wi-Fi, Driver;\n---\n\nSat Jun  4 22:29:17 CST 2022\n\nwoal_cfg80211_ops.auth = woal_cfg80211_authenticate;\n\n// This function is authentication handler when host MLME enable\n// In this case, driver will prepare and send Auth Req.\nstatic int\nwoal_cfg80211_authenticate(struct wiphy *wiphy,\n\t\t\t   struct net_device *dev, struct cfg80211_auth_request *req)\n\n\n\n// reset cfg_disconnect flag\n\n/** cancel pending scan */\n\t\twoal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n\n\n\t/* Not allowed to connect to the same AP which is already connected\n\t\t   with other interface */\n\n\n// create auth frame and fill the info\n\n\nPRINTM(MCMND, \"wlan: HostMlme %s send auth to bssid \" MACSTR \"\\n\",\n\t       dev->name, MAC2STR(req->bss->bssid));\n\n\n\n\tstatus = mlan_send_packet(priv->phandle->pmlan_adapter, pmbuf);\n\n// Function to send packet\nmlan_status\nmlan_send_packet(t_void *padapter, pmlan_buffer pmbuf)\n\n\nwlan_add_buf_bypass_txqueue(pmadapter, pmbuf);\n\n// Add packet to bypass tx queue\nt_void\nwlan_add_buf_bypass_txqueue(mlan_adapter *pmadapter, pmlan_buffer pmbuf)\n\t\tpmadapter->bypass_pkt_count++;\n\t\tutil_enqueue_list_tail(pmadapter->pmoal_handle, &priv->bypass_txq,\n\t\t\t\t\t\t(pmlan_linked_list)pmbuf, MNULL, MNULL);\n\n\n===== Another work queue to process the above bypass_txq\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n\n\t\t\tPRINTM(MINFO, \"mlan_send_pkt(): deq(bybass_txq)\\n\");\n\t\t\t\t\t\twlan_process_bypass_tx(pmadapter);\n\n// Transmit the By-passed packet awaiting in by-pass queue\nt_void\nwlan_process_bypass_tx(pmlan_adapter pmadapter)\n\n\n\t\tstatus = wlan_process_tx(pmadapter->\n\t\t\t\t\t\tpriv[pmbuf->\n\t\t\t\t\t\tbss_index],\n\t\t\t\t\t\tpmbuf,\n\t\t\t\t\t\t&tx_param);\n\n// This function checks the conditions and sends packet to device\nmlan_status\nwlan_process_tx(pmlan_private priv, pmlan_buffer pmbuf, mlan_tx_param *tx_param)\n\n\n\nhead_ptr = (t_u8 *)priv->ops.process_txpd(priv, pmbuf);\n\n\nstatic mlan_operations mlan_sta_ops = {\n\t\t/* txpd handler */\n\t\twlan_ops_sta_process_txpd,\n\n// This function fill the txpd for tx packet\nt_void *\nwlan_ops_sta_process_txpd(t_void *priv, pmlan_buffer pmbuf)\n\n\n// this function send the data to card\n\t\tret = pmadapter->ops.host_to_card(priv, MLAN_TYPE_DATA, pmbuf,\n\t\t\t\t\t\t\t\t  tx_param);\n\n\t.host_to_card = wlan_sdio_host_to_card_ext,\n\n// This function send data to card\nstatic mlan_status\nwlan_sdio_host_to_card_ext(pmlan_private pmpriv, t_u8 type,\n\t\t\t   mlan_buffer *pmbuf, mlan_tx_param *tx_param)\n\n\n====== above is the auth frame send by the STA\n\n===== below receive auth response from ex-ap\n\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n/* Handle pending interrupts if any */\nif (pmadapter->ireg) {\n\t\tif (pmadapter->hs_activated == MTRUE)\n\t\t\t\twlan_process_hs_config(pmadapter);\n\t\tpmadapter->ops.process_int_status(pmadapter);\n\n\t.process_int_status = wlan_process_sdio_int_status,\n\n\n\n\n// This function checks the interrupt status and handle it accordingly.\nstatic mlan_status\nwlan_process_sdio_int_status(mlan_adapter *pmadapter)\n\n\nstatic mlan_status\nwlan_decode_rx_packet(mlan_adapter *pmadapter,\n\t\t      mlan_buffer *pmbuf, t_u32 upld_typ, t_u8 lock_flag)\n\n\n// This function processed the received buffer\nmlan_status\nwlan_handle_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)\n\n\tret = priv->ops.process_rx_packet(pmadapter, pmbuf);\n\nwlan_ops_sta_process_rx_packet,\n\n// This function processed the received buffer\nmlan_status\nwlan_ops_sta_process_rx_packet(t_void *adapter, pmlan_buffer pmbuf)\n\n// This function processes the 802.11 mgmt Frame\nmlan_status\nwlan_process_802dot11_mgmt_pkt(mlan_private *priv,\n\t\t\t       t_u8 *payload, t_u32 payload_len, RxPD *prx_pd)\n\n    case SUBTYPE_AUTH:\n    unicast = MTRUE;\n    PRINTM_NETINTF(MMSG, priv);\n    PRINTM(MMSG, \"wlan: HostMlme Auth received from \" MACSTR \"\\n\",\n    \t\t\t\tMAC2STR(pieee_pkt_hdr->addr2));\n    break;\n\n\n\n\t\tpevent->event_id = MLAN_EVENT_ID_DRV_MGMT_FRAME;\n\n\twlan_recv_event(priv, pevent->event_id, pevent);\n\n\tcase MLAN_EVENT_ID_DRV_MGMT_FRAME:\n\n\tPRINTM(MEVENT,\n\t\t\t\t\t\"HostMlme %s: Received auth frame type = 0x%x\\n\",\n\t\t\t\t\tpriv->netdev->name,\n\t\t\t\t\tpriv->auth_alg);\n\n\n\tqueue_work\n\t\t\t(priv->\n\t\t\t phandle->\n\t\t\t evt_workqueue,\n\t\t\t &priv->\n\t\t\t phandle->\n\t\t\t host_mlme_work);\n\n\tMLAN_INIT_WORK(&handle->host_mlme_work, woal_host_mlme_work_queue);\n\n// This workqueue function handles association response in host mlme\nvoid\nwoal_host_mlme_work_queue(struct work_struct *work)\n\nPRINTM(MCMND, \"wlan: HostMlme %s auth success\\n\",\n\t\t\t\t\t\t       priv->netdev->name);\n\n\n\n\n\n\n// After auth success, the upper layer send associate request\nwoal_cfg80211_ops.assoc = woal_cfg80211_associate;\n\n// This function is association handler when host MLME enable\n// In this case driver will prepare and assoc req\nstatic int\nwoal_cfg80211_associate(struct wiphy *wiphy, struct net_device *dev,\n\t\t\tstruct cfg80211_assoc_request *req)\n\n\tPRINTM(MCMND, \"wlan: HostMlme %s send assoicate to bssid \" MACSTR \"\\n\",\n\t\t       priv->netdev->name, MAC2STR(req->bss->bssid));\n\n\n\tif (MLAN_STATUS_SUCCESS !=\n\t\t    woal_bss_start(priv, MOAL_IOCTL_WAIT_TIMEOUT, ssid_bssid)) {\n\n\n\t/* Fill request buffer */\n\t\tbss = (mlan_ds_bss *)req->pbuf;\n\t\n\t\t\tbss->sub_command = MLAN_OID_BSS_START;\n\t\t\tif (ssid_bssid)\n\t\t\t\t\tmoal_memcpy_ext(priv->phandle, &bss->param.ssid_bssid,\n\t\t\t\t\t\t\t\t\tssid_bssid, sizeof(mlan_ssid_bssid),\n\t\t\t\t\t\t\t\t\tsizeof(mlan_ssid_bssid));\n\t\t\treq->req_id = MLAN_IOCTL_BSS;\n\t\t\treq->action = MLAN_ACT_SET;\n\n\n\n\t/* Send IOCTL request to MLAN */\n\t\tstatus = woal_request_ioctl(priv, req, wait_option);\n\n\n// send ioctl request to MLAN\nmlan_status\nwoal_request_ioctl(moal_private *priv, mlan_ioctl_req *req, t_u8 wait_option)\n\n\n\n\n\tstatus = mlan_ioctl(priv->phandle->pmlan_adapter, req);\n\n\n\n\nmlan_status\nmlan_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)\n   \tret = pmpriv->ops.ioctl(adapter, pioctl_req);\n\n\n\twlan_ops_sta_ioctl,\n\n\n\nmlan_status\nwlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)\n  \tcase MLAN_IOCTL_BSS:\n\t\t\tstatus = wlan_bss_ioctl(pmadapter, pioctl_req);\n\t\t\t\t\tbreak;\n\n\nstatic mlan_status\nwlan_bss_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\n\tcase MLAN_OID_BSS_START:\n\t\t\tstatus = wlan_bss_ioctl_start(pmadapter, pioctl_req);\n\n\n\n// start bss\nstatic mlan_status\nwlan_bss_ioctl_start(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\n\n\n// find bssid in scan table list\n\n\n\t\t\tret = wlan_associate(pmpriv, pioctl_req,\n\t\t\t\t\t\t\t\t     &pmadapter->pscan_table[i]);\n\n\n\n// associate to specific bss disconvered in a scan\nmlan_status\nwlan_associate(mlan_private *pmpriv, t_void *pioctl_buf,\n\t       BSSDescriptor_t *pbss_desc)\n\n\n\n    /** Host Command ID : 802.11 associate */\n\t#define HostCmd_CMD_802_11_ASSOCIATE 0x0012\n\tret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11_ASSOCIATE,\n\t\t\t\t       HostCmd_ACT_GEN_SET, 0, pioctl_buf, pbss_desc);\n\n\n\nret = pmpriv->ops.prepare_cmd(pmpriv, cmd_no, cmd_action,\n\t\t\t\t\t\t\t      cmd_oid, pioctl_buf, pdata_buf, cmd_ptr);\n\n\t\t\twlan_queue_cmd(pmpriv, pcmd_node, cmd_no);\n\t\n\n\tcase HostCmd_CMD_802_11_ASSOCIATE:\n\t\t\tret = wlan_ret_802_11_associate(pmpriv, resp, pioctl_buf);\n\t\t\t\t\tbreak;\n\n\n// association firmware response handler\nmlan_status\nwlan_ret_802_11_associate(mlan_private *pmpriv,\n\t\t\t  HostCmd_DS_COMMAND *resp, t_void *pioctl_buf)\n\n\n\tPRINTM(MCMND, \"ASSOC_RESP: %-32s (a_id = 0x%x)\\n\", pbss_desc->ssid.ssid,\n\t\t       wlan_le16_to_cpu(passoc_rsp->a_id));\n\n\n// now it is simimlar with the no hostmlme type\n\n\t/* Send a Media Connected event, according to the Spec */\n\t\tpmpriv->media_connected = MTRUE;\n\n\n\twlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_CONNECTED, pevent);\n\n\n    wlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER, pevent);\n\n\n\t.moal_recv_event = moal_recv_event,\n\n\n// This function handle event received\nmlan_status\nmoal_recv_event(t_void *pmoal, pmlan_event pmevent)\n\n\n    woal_broadcast_event(priv, pmevent->event_buf,\n\t\t\t\tpmevent->event_len);\n\twoal_update_dscp_mapping(priv);\n\tpriv->media_connected = MTRUE;\n\n\n===============// 4-way handshake\n\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n/* Handle pending interrupts if any */\nif (pmadapter->ireg) {\n\t\tif (pmadapter->hs_activated == MTRUE)\n\t\t\t\twlan_process_hs_config(pmadapter);\n\t\tpmadapter->ops.process_int_status(pmadapter);\n\n\t.process_int_status = wlan_process_sdio_int_status,\n\n\n// This function checks the interrupt status and handle it accordingly.\nstatic mlan_status\nwlan_process_sdio_int_status(mlan_adapter *pmadapter)\n\n\n\nstatic mlan_status\nwlan_decode_rx_packet(mlan_adapter *pmadapter,\n\t\t      mlan_buffer *pmbuf, t_u32 upld_typ, t_u8 lock_flag)\n\nmlan_status\nwlan_handle_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)\n\n\tPRINTM(MDATA, \"%lu.%06lu : Data <= FW\\n\", sec, usec);\n\t\tret = priv->ops.process_rx_packet(pmadapter, pmbuf);\n\n\t/* rx handler */\n\t\twlan_ops_sta_process_rx_packet,\n\n// This function processes the received buffer\nmlan_status\nwlan_ops_sta_process_rx_packet(t_void *adapter, pmlan_buffer pmbuf)\n\n\n\n// this function process the received packet and forwards it to kernel/upper layer\nmlan_status\nwlan_process_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)\n\n\tret = pmadapter->callbacks.moal_recv_packet(pmadapter->pmoal_handle,\n\t\t\t\t\t\t\t    pmbuf);\n\t\n    pmadapter->ops.data_complete(pmadapter, pmbuf, ret);\n\n// this fucntion uploads the packet to network stack\nmlan_status\nmoal_recv_packet(t_void *pmoal, pmlan_buffer pmbuf)\n\n\tif (ntohs(ethh->h_proto) == ETH_P_PAE)\n\t\t\tPRINTM(MEVENT,\n\t\t\t\t\t\t\t\"wlan: %s Rx EAPOL pkt from \" MACSTR\n\t\t\t\t\t\t\t\"\\n\",\n\t\t\t\t\t\t\tpriv->netdev->name,\n\t\t\t\t\t\t\tMAC2STR(ethh->h_source));\n\n\n\n\t.moal_recv_packet = moal_recv_packet,\n\n// this fucntion uploads the packet to network stack\nmlan_status\nmoal_recv_packet(t_void *pmoal, pmlan_buffer pmbuf)\n\n\n\t\t\t\tskb_reserve(skb, pmbuf->data_offset);\n\n\t\t\t    skb_put(skb, pmbuf->data_len);\n\n\n\tnetif_rx(skb);\n\tor\n\tnetif_receive_skb(skb);\n\tor \n\tnetif_rx_ni(skb);\n\n\n// the above process include the process of rx data\n\n","slug":"CODE-ANALYSIS-5-connect-process-hostmlme","published":1,"updated":"2022-06-12T06:20:46.333Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud33000518jx8xif4qdb","content":"<p>Sat Jun  4 22:29:17 CST 2022</p>\n<p>woal_cfg80211_ops.auth = woal_cfg80211_authenticate;</p>\n<p>// This function is authentication handler when host MLME enable<br>// In this case, driver will prepare and send Auth Req.<br>static int<br>woal_cfg80211_authenticate(struct wiphy <em>wiphy,<br>               struct net_device </em>dev, struct cfg80211_auth_request *req)</p>\n<p>// reset cfg_disconnect flag</p>\n<p>/<em>* cancel pending scan </em>/<br>        woal_cancel_scan(priv, MOAL_IOCTL_WAIT);</p>\n<pre><code>/* Not allowed to connect to the same AP which is already connected\n       with other interface */\n</code></pre><p>// create auth frame and fill the info</p>\n<p>PRINTM(MCMND, “wlan: HostMlme %s send auth to bssid “ MACSTR “\\n”,<br>           dev-&gt;name, MAC2STR(req-&gt;bss-&gt;bssid));</p>\n<pre><code>status = mlan_send_packet(priv-&gt;phandle-&gt;pmlan_adapter, pmbuf);\n</code></pre><p>// Function to send packet<br>mlan_status<br>mlan_send_packet(t_void *padapter, pmlan_buffer pmbuf)</p>\n<p>wlan_add_buf_bypass_txqueue(pmadapter, pmbuf);</p>\n<p>// Add packet to bypass tx queue<br>t_void<br>wlan_add_buf_bypass_txqueue(mlan_adapter *pmadapter, pmlan_buffer pmbuf)<br>        pmadapter-&gt;bypass_pkt_count++;<br>        util_enqueue_list_tail(pmadapter-&gt;pmoal_handle, &amp;priv-&gt;bypass_txq,<br>                        (pmlan_linked_list)pmbuf, MNULL, MNULL);</p>\n<p>===== Another work queue to process the above bypass_txq<br>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<pre><code>        PRINTM(MINFO, &quot;mlan_send_pkt(): deq(bybass_txq)\\n&quot;);\n                    wlan_process_bypass_tx(pmadapter);\n</code></pre><p>// Transmit the By-passed packet awaiting in by-pass queue<br>t_void<br>wlan_process_bypass_tx(pmlan_adapter pmadapter)</p>\n<pre><code>    status = wlan_process_tx(pmadapter-&gt;\n                    priv[pmbuf-&gt;\n                    bss_index],\n                    pmbuf,\n                    &amp;tx_param);\n</code></pre><p>// This function checks the conditions and sends packet to device<br>mlan_status<br>wlan_process_tx(pmlan_private priv, pmlan_buffer pmbuf, mlan_tx_param *tx_param)</p>\n<p>head_ptr = (t_u8 *)priv-&gt;ops.process_txpd(priv, pmbuf);</p>\n<p>static mlan_operations mlan_sta_ops = {<br>        /<em> txpd handler </em>/<br>        wlan_ops_sta_process_txpd,</p>\n<p>// This function fill the txpd for tx packet<br>t_void <em><br>wlan_ops_sta_process_txpd(t_void </em>priv, pmlan_buffer pmbuf)</p>\n<p>// this function send the data to card<br>        ret = pmadapter-&gt;ops.host_to_card(priv, MLAN_TYPE_DATA, pmbuf,<br>                                  tx_param);</p>\n<pre><code>.host_to_card = wlan_sdio_host_to_card_ext,\n</code></pre><p>// This function send data to card<br>static mlan_status<br>wlan_sdio_host_to_card_ext(pmlan_private pmpriv, t_u8 type,<br>               mlan_buffer <em>pmbuf, mlan_tx_param </em>tx_param)</p>\n<p>====== above is the auth frame send by the STA</p>\n<p>===== below receive auth response from ex-ap</p>\n<p>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<p>/<em> Handle pending interrupts if any </em>/<br>if (pmadapter-&gt;ireg) {<br>        if (pmadapter-&gt;hs_activated == MTRUE)<br>                wlan_process_hs_config(pmadapter);<br>        pmadapter-&gt;ops.process_int_status(pmadapter);</p>\n<pre><code>.process_int_status = wlan_process_sdio_int_status,\n</code></pre><p>// This function checks the interrupt status and handle it accordingly.<br>static mlan_status<br>wlan_process_sdio_int_status(mlan_adapter *pmadapter)</p>\n<p>static mlan_status<br>wlan_decode_rx_packet(mlan_adapter <em>pmadapter,<br>              mlan_buffer </em>pmbuf, t_u32 upld_typ, t_u8 lock_flag)</p>\n<p>// This function processed the received buffer<br>mlan_status<br>wlan_handle_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)</p>\n<pre><code>ret = priv-&gt;ops.process_rx_packet(pmadapter, pmbuf);\n</code></pre><p>wlan_ops_sta_process_rx_packet,</p>\n<p>// This function processed the received buffer<br>mlan_status<br>wlan_ops_sta_process_rx_packet(t_void *adapter, pmlan_buffer pmbuf)</p>\n<p>// This function processes the 802.11 mgmt Frame<br>mlan_status<br>wlan_process_802dot11_mgmt_pkt(mlan_private <em>priv,<br>                   t_u8 </em>payload, t_u32 payload_len, RxPD *prx_pd)</p>\n<pre><code>case SUBTYPE_AUTH:\nunicast = MTRUE;\nPRINTM_NETINTF(MMSG, priv);\nPRINTM(MMSG, &quot;wlan: HostMlme Auth received from &quot; MACSTR &quot;\\n&quot;,\n                MAC2STR(pieee_pkt_hdr-&gt;addr2));\nbreak;\n\n\n\n    pevent-&gt;event_id = MLAN_EVENT_ID_DRV_MGMT_FRAME;\n\nwlan_recv_event(priv, pevent-&gt;event_id, pevent);\n\ncase MLAN_EVENT_ID_DRV_MGMT_FRAME:\n\nPRINTM(MEVENT,\n                &quot;HostMlme %s: Received auth frame type = 0x%x\\n&quot;,\n                priv-&gt;netdev-&gt;name,\n                priv-&gt;auth_alg);\n\n\nqueue_work\n        (priv-&gt;\n         phandle-&gt;\n         evt_workqueue,\n         &amp;priv-&gt;\n         phandle-&gt;\n         host_mlme_work);\n\nMLAN_INIT_WORK(&amp;handle-&gt;host_mlme_work, woal_host_mlme_work_queue);\n</code></pre><p>// This workqueue function handles association response in host mlme<br>void<br>woal_host_mlme_work_queue(struct work_struct *work)</p>\n<p>PRINTM(MCMND, “wlan: HostMlme %s auth success\\n”,<br>                               priv-&gt;netdev-&gt;name);</p>\n<p>// After auth success, the upper layer send associate request<br>woal_cfg80211_ops.assoc = woal_cfg80211_associate;</p>\n<p>// This function is association handler when host MLME enable<br>// In this case driver will prepare and assoc req<br>static int<br>woal_cfg80211_associate(struct wiphy <em>wiphy, struct net_device </em>dev,<br>            struct cfg80211_assoc_request *req)</p>\n<pre><code>PRINTM(MCMND, &quot;wlan: HostMlme %s send assoicate to bssid &quot; MACSTR &quot;\\n&quot;,\n           priv-&gt;netdev-&gt;name, MAC2STR(req-&gt;bss-&gt;bssid));\n\n\nif (MLAN_STATUS_SUCCESS !=\n        woal_bss_start(priv, MOAL_IOCTL_WAIT_TIMEOUT, ssid_bssid)) &#123;\n\n\n/* Fill request buffer */\n    bss = (mlan_ds_bss *)req-&gt;pbuf;\n\n        bss-&gt;sub_command = MLAN_OID_BSS_START;\n        if (ssid_bssid)\n                moal_memcpy_ext(priv-&gt;phandle, &amp;bss-&gt;param.ssid_bssid,\n                                ssid_bssid, sizeof(mlan_ssid_bssid),\n                                sizeof(mlan_ssid_bssid));\n        req-&gt;req_id = MLAN_IOCTL_BSS;\n        req-&gt;action = MLAN_ACT_SET;\n\n\n\n/* Send IOCTL request to MLAN */\n    status = woal_request_ioctl(priv, req, wait_option);\n</code></pre><p>// send ioctl request to MLAN<br>mlan_status<br>woal_request_ioctl(moal_private <em>priv, mlan_ioctl_req </em>req, t_u8 wait_option)</p>\n<pre><code>status = mlan_ioctl(priv-&gt;phandle-&gt;pmlan_adapter, req);\n</code></pre><p>mlan_status<br>mlan_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)<br>       ret = pmpriv-&gt;ops.ioctl(adapter, pioctl_req);</p>\n<pre><code>wlan_ops_sta_ioctl,\n</code></pre><p>mlan_status<br>wlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)<br>      case MLAN_IOCTL_BSS:<br>            status = wlan_bss_ioctl(pmadapter, pioctl_req);<br>                    break;</p>\n<p>static mlan_status<br>wlan_bss_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)<br>    case MLAN_OID_BSS_START:<br>            status = wlan_bss_ioctl_start(pmadapter, pioctl_req);</p>\n<p>// start bss<br>static mlan_status<br>wlan_bss_ioctl_start(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)</p>\n<p>// find bssid in scan table list</p>\n<pre><code>        ret = wlan_associate(pmpriv, pioctl_req,\n                                 &amp;pmadapter-&gt;pscan_table[i]);\n</code></pre><p>// associate to specific bss disconvered in a scan<br>mlan_status<br>wlan_associate(mlan_private <em>pmpriv, t_void </em>pioctl_buf,<br>           BSSDescriptor_t *pbss_desc)</p>\n<pre><code>/** Host Command ID : 802.11 associate */\n#define HostCmd_CMD_802_11_ASSOCIATE 0x0012\nret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11_ASSOCIATE,\n                   HostCmd_ACT_GEN_SET, 0, pioctl_buf, pbss_desc);\n</code></pre><p>ret = pmpriv-&gt;ops.prepare_cmd(pmpriv, cmd_no, cmd_action,<br>                                  cmd_oid, pioctl_buf, pdata_buf, cmd_ptr);</p>\n<pre><code>        wlan_queue_cmd(pmpriv, pcmd_node, cmd_no);\n\n\ncase HostCmd_CMD_802_11_ASSOCIATE:\n        ret = wlan_ret_802_11_associate(pmpriv, resp, pioctl_buf);\n                break;\n</code></pre><p>// association firmware response handler<br>mlan_status<br>wlan_ret_802_11_associate(mlan_private <em>pmpriv,<br>              HostCmd_DS_COMMAND </em>resp, t_void *pioctl_buf)</p>\n<pre><code>PRINTM(MCMND, &quot;ASSOC_RESP: %-32s (a_id = 0x%x)\\n&quot;, pbss_desc-&gt;ssid.ssid,\n           wlan_le16_to_cpu(passoc_rsp-&gt;a_id));\n</code></pre><p>// now it is simimlar with the no hostmlme type</p>\n<pre><code>/* Send a Media Connected event, according to the Spec */\n    pmpriv-&gt;media_connected = MTRUE;\n\n\nwlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_CONNECTED, pevent);\n\n\nwlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER, pevent);\n\n\n.moal_recv_event = moal_recv_event,\n</code></pre><p>// This function handle event received<br>mlan_status<br>moal_recv_event(t_void *pmoal, pmlan_event pmevent)</p>\n<pre><code>woal_broadcast_event(priv, pmevent-&gt;event_buf,\n            pmevent-&gt;event_len);\nwoal_update_dscp_mapping(priv);\npriv-&gt;media_connected = MTRUE;\n</code></pre><p>===============// 4-way handshake</p>\n<p>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<p>/<em> Handle pending interrupts if any </em>/<br>if (pmadapter-&gt;ireg) {<br>        if (pmadapter-&gt;hs_activated == MTRUE)<br>                wlan_process_hs_config(pmadapter);<br>        pmadapter-&gt;ops.process_int_status(pmadapter);</p>\n<pre><code>.process_int_status = wlan_process_sdio_int_status,\n</code></pre><p>// This function checks the interrupt status and handle it accordingly.<br>static mlan_status<br>wlan_process_sdio_int_status(mlan_adapter *pmadapter)</p>\n<p>static mlan_status<br>wlan_decode_rx_packet(mlan_adapter <em>pmadapter,<br>              mlan_buffer </em>pmbuf, t_u32 upld_typ, t_u8 lock_flag)</p>\n<p>mlan_status<br>wlan_handle_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)</p>\n<pre><code>PRINTM(MDATA, &quot;%lu.%06lu : Data &lt;= FW\\n&quot;, sec, usec);\n    ret = priv-&gt;ops.process_rx_packet(pmadapter, pmbuf);\n\n/* rx handler */\n    wlan_ops_sta_process_rx_packet,\n</code></pre><p>// This function processes the received buffer<br>mlan_status<br>wlan_ops_sta_process_rx_packet(t_void *adapter, pmlan_buffer pmbuf)</p>\n<p>// this function process the received packet and forwards it to kernel/upper layer<br>mlan_status<br>wlan_process_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)</p>\n<pre><code>ret = pmadapter-&gt;callbacks.moal_recv_packet(pmadapter-&gt;pmoal_handle,\n                            pmbuf);\n\npmadapter-&gt;ops.data_complete(pmadapter, pmbuf, ret);\n</code></pre><p>// this fucntion uploads the packet to network stack<br>mlan_status<br>moal_recv_packet(t_void *pmoal, pmlan_buffer pmbuf)</p>\n<pre><code>if (ntohs(ethh-&gt;h_proto) == ETH_P_PAE)\n        PRINTM(MEVENT,\n                        &quot;wlan: %s Rx EAPOL pkt from &quot; MACSTR\n                        &quot;\\n&quot;,\n                        priv-&gt;netdev-&gt;name,\n                        MAC2STR(ethh-&gt;h_source));\n\n\n\n.moal_recv_packet = moal_recv_packet,\n</code></pre><p>// this fucntion uploads the packet to network stack<br>mlan_status<br>moal_recv_packet(t_void *pmoal, pmlan_buffer pmbuf)</p>\n<pre><code>            skb_reserve(skb, pmbuf-&gt;data_offset);\n\n            skb_put(skb, pmbuf-&gt;data_len);\n\n\nnetif_rx(skb);\nor\nnetif_receive_skb(skb);\nor \nnetif_rx_ni(skb);\n</code></pre><p>// the above process include the process of rx data</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Sat Jun  4 22:29:17 CST 2022</p>\n<p>woal_cfg80211_ops.auth = woal_cfg80211_authenticate;</p>\n<p>// This function is authentication handler when host MLME enable<br>// In this case, driver will prepare and send Auth Req.<br>static int<br>woal_cfg80211_authenticate(struct wiphy <em>wiphy,<br>               struct net_device </em>dev, struct cfg80211_auth_request *req)</p>\n<p>// reset cfg_disconnect flag</p>\n<p>/<em>* cancel pending scan </em>/<br>        woal_cancel_scan(priv, MOAL_IOCTL_WAIT);</p>\n<pre><code>/* Not allowed to connect to the same AP which is already connected\n       with other interface */\n</code></pre><p>// create auth frame and fill the info</p>\n<p>PRINTM(MCMND, “wlan: HostMlme %s send auth to bssid “ MACSTR “\\n”,<br>           dev-&gt;name, MAC2STR(req-&gt;bss-&gt;bssid));</p>\n<pre><code>status = mlan_send_packet(priv-&gt;phandle-&gt;pmlan_adapter, pmbuf);\n</code></pre><p>// Function to send packet<br>mlan_status<br>mlan_send_packet(t_void *padapter, pmlan_buffer pmbuf)</p>\n<p>wlan_add_buf_bypass_txqueue(pmadapter, pmbuf);</p>\n<p>// Add packet to bypass tx queue<br>t_void<br>wlan_add_buf_bypass_txqueue(mlan_adapter *pmadapter, pmlan_buffer pmbuf)<br>        pmadapter-&gt;bypass_pkt_count++;<br>        util_enqueue_list_tail(pmadapter-&gt;pmoal_handle, &amp;priv-&gt;bypass_txq,<br>                        (pmlan_linked_list)pmbuf, MNULL, MNULL);</p>\n<p>===== Another work queue to process the above bypass_txq<br>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<pre><code>        PRINTM(MINFO, &quot;mlan_send_pkt(): deq(bybass_txq)\\n&quot;);\n                    wlan_process_bypass_tx(pmadapter);\n</code></pre><p>// Transmit the By-passed packet awaiting in by-pass queue<br>t_void<br>wlan_process_bypass_tx(pmlan_adapter pmadapter)</p>\n<pre><code>    status = wlan_process_tx(pmadapter-&gt;\n                    priv[pmbuf-&gt;\n                    bss_index],\n                    pmbuf,\n                    &amp;tx_param);\n</code></pre><p>// This function checks the conditions and sends packet to device<br>mlan_status<br>wlan_process_tx(pmlan_private priv, pmlan_buffer pmbuf, mlan_tx_param *tx_param)</p>\n<p>head_ptr = (t_u8 *)priv-&gt;ops.process_txpd(priv, pmbuf);</p>\n<p>static mlan_operations mlan_sta_ops = {<br>        /<em> txpd handler </em>/<br>        wlan_ops_sta_process_txpd,</p>\n<p>// This function fill the txpd for tx packet<br>t_void <em><br>wlan_ops_sta_process_txpd(t_void </em>priv, pmlan_buffer pmbuf)</p>\n<p>// this function send the data to card<br>        ret = pmadapter-&gt;ops.host_to_card(priv, MLAN_TYPE_DATA, pmbuf,<br>                                  tx_param);</p>\n<pre><code>.host_to_card = wlan_sdio_host_to_card_ext,\n</code></pre><p>// This function send data to card<br>static mlan_status<br>wlan_sdio_host_to_card_ext(pmlan_private pmpriv, t_u8 type,<br>               mlan_buffer <em>pmbuf, mlan_tx_param </em>tx_param)</p>\n<p>====== above is the auth frame send by the STA</p>\n<p>===== below receive auth response from ex-ap</p>\n<p>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<p>/<em> Handle pending interrupts if any </em>/<br>if (pmadapter-&gt;ireg) {<br>        if (pmadapter-&gt;hs_activated == MTRUE)<br>                wlan_process_hs_config(pmadapter);<br>        pmadapter-&gt;ops.process_int_status(pmadapter);</p>\n<pre><code>.process_int_status = wlan_process_sdio_int_status,\n</code></pre><p>// This function checks the interrupt status and handle it accordingly.<br>static mlan_status<br>wlan_process_sdio_int_status(mlan_adapter *pmadapter)</p>\n<p>static mlan_status<br>wlan_decode_rx_packet(mlan_adapter <em>pmadapter,<br>              mlan_buffer </em>pmbuf, t_u32 upld_typ, t_u8 lock_flag)</p>\n<p>// This function processed the received buffer<br>mlan_status<br>wlan_handle_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)</p>\n<pre><code>ret = priv-&gt;ops.process_rx_packet(pmadapter, pmbuf);\n</code></pre><p>wlan_ops_sta_process_rx_packet,</p>\n<p>// This function processed the received buffer<br>mlan_status<br>wlan_ops_sta_process_rx_packet(t_void *adapter, pmlan_buffer pmbuf)</p>\n<p>// This function processes the 802.11 mgmt Frame<br>mlan_status<br>wlan_process_802dot11_mgmt_pkt(mlan_private <em>priv,<br>                   t_u8 </em>payload, t_u32 payload_len, RxPD *prx_pd)</p>\n<pre><code>case SUBTYPE_AUTH:\nunicast = MTRUE;\nPRINTM_NETINTF(MMSG, priv);\nPRINTM(MMSG, &quot;wlan: HostMlme Auth received from &quot; MACSTR &quot;\\n&quot;,\n                MAC2STR(pieee_pkt_hdr-&gt;addr2));\nbreak;\n\n\n\n    pevent-&gt;event_id = MLAN_EVENT_ID_DRV_MGMT_FRAME;\n\nwlan_recv_event(priv, pevent-&gt;event_id, pevent);\n\ncase MLAN_EVENT_ID_DRV_MGMT_FRAME:\n\nPRINTM(MEVENT,\n                &quot;HostMlme %s: Received auth frame type = 0x%x\\n&quot;,\n                priv-&gt;netdev-&gt;name,\n                priv-&gt;auth_alg);\n\n\nqueue_work\n        (priv-&gt;\n         phandle-&gt;\n         evt_workqueue,\n         &amp;priv-&gt;\n         phandle-&gt;\n         host_mlme_work);\n\nMLAN_INIT_WORK(&amp;handle-&gt;host_mlme_work, woal_host_mlme_work_queue);\n</code></pre><p>// This workqueue function handles association response in host mlme<br>void<br>woal_host_mlme_work_queue(struct work_struct *work)</p>\n<p>PRINTM(MCMND, “wlan: HostMlme %s auth success\\n”,<br>                               priv-&gt;netdev-&gt;name);</p>\n<p>// After auth success, the upper layer send associate request<br>woal_cfg80211_ops.assoc = woal_cfg80211_associate;</p>\n<p>// This function is association handler when host MLME enable<br>// In this case driver will prepare and assoc req<br>static int<br>woal_cfg80211_associate(struct wiphy <em>wiphy, struct net_device </em>dev,<br>            struct cfg80211_assoc_request *req)</p>\n<pre><code>PRINTM(MCMND, &quot;wlan: HostMlme %s send assoicate to bssid &quot; MACSTR &quot;\\n&quot;,\n           priv-&gt;netdev-&gt;name, MAC2STR(req-&gt;bss-&gt;bssid));\n\n\nif (MLAN_STATUS_SUCCESS !=\n        woal_bss_start(priv, MOAL_IOCTL_WAIT_TIMEOUT, ssid_bssid)) &#123;\n\n\n/* Fill request buffer */\n    bss = (mlan_ds_bss *)req-&gt;pbuf;\n\n        bss-&gt;sub_command = MLAN_OID_BSS_START;\n        if (ssid_bssid)\n                moal_memcpy_ext(priv-&gt;phandle, &amp;bss-&gt;param.ssid_bssid,\n                                ssid_bssid, sizeof(mlan_ssid_bssid),\n                                sizeof(mlan_ssid_bssid));\n        req-&gt;req_id = MLAN_IOCTL_BSS;\n        req-&gt;action = MLAN_ACT_SET;\n\n\n\n/* Send IOCTL request to MLAN */\n    status = woal_request_ioctl(priv, req, wait_option);\n</code></pre><p>// send ioctl request to MLAN<br>mlan_status<br>woal_request_ioctl(moal_private <em>priv, mlan_ioctl_req </em>req, t_u8 wait_option)</p>\n<pre><code>status = mlan_ioctl(priv-&gt;phandle-&gt;pmlan_adapter, req);\n</code></pre><p>mlan_status<br>mlan_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)<br>       ret = pmpriv-&gt;ops.ioctl(adapter, pioctl_req);</p>\n<pre><code>wlan_ops_sta_ioctl,\n</code></pre><p>mlan_status<br>wlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)<br>      case MLAN_IOCTL_BSS:<br>            status = wlan_bss_ioctl(pmadapter, pioctl_req);<br>                    break;</p>\n<p>static mlan_status<br>wlan_bss_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)<br>    case MLAN_OID_BSS_START:<br>            status = wlan_bss_ioctl_start(pmadapter, pioctl_req);</p>\n<p>// start bss<br>static mlan_status<br>wlan_bss_ioctl_start(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)</p>\n<p>// find bssid in scan table list</p>\n<pre><code>        ret = wlan_associate(pmpriv, pioctl_req,\n                                 &amp;pmadapter-&gt;pscan_table[i]);\n</code></pre><p>// associate to specific bss disconvered in a scan<br>mlan_status<br>wlan_associate(mlan_private <em>pmpriv, t_void </em>pioctl_buf,<br>           BSSDescriptor_t *pbss_desc)</p>\n<pre><code>/** Host Command ID : 802.11 associate */\n#define HostCmd_CMD_802_11_ASSOCIATE 0x0012\nret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11_ASSOCIATE,\n                   HostCmd_ACT_GEN_SET, 0, pioctl_buf, pbss_desc);\n</code></pre><p>ret = pmpriv-&gt;ops.prepare_cmd(pmpriv, cmd_no, cmd_action,<br>                                  cmd_oid, pioctl_buf, pdata_buf, cmd_ptr);</p>\n<pre><code>        wlan_queue_cmd(pmpriv, pcmd_node, cmd_no);\n\n\ncase HostCmd_CMD_802_11_ASSOCIATE:\n        ret = wlan_ret_802_11_associate(pmpriv, resp, pioctl_buf);\n                break;\n</code></pre><p>// association firmware response handler<br>mlan_status<br>wlan_ret_802_11_associate(mlan_private <em>pmpriv,<br>              HostCmd_DS_COMMAND </em>resp, t_void *pioctl_buf)</p>\n<pre><code>PRINTM(MCMND, &quot;ASSOC_RESP: %-32s (a_id = 0x%x)\\n&quot;, pbss_desc-&gt;ssid.ssid,\n           wlan_le16_to_cpu(passoc_rsp-&gt;a_id));\n</code></pre><p>// now it is simimlar with the no hostmlme type</p>\n<pre><code>/* Send a Media Connected event, according to the Spec */\n    pmpriv-&gt;media_connected = MTRUE;\n\n\nwlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_CONNECTED, pevent);\n\n\nwlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER, pevent);\n\n\n.moal_recv_event = moal_recv_event,\n</code></pre><p>// This function handle event received<br>mlan_status<br>moal_recv_event(t_void *pmoal, pmlan_event pmevent)</p>\n<pre><code>woal_broadcast_event(priv, pmevent-&gt;event_buf,\n            pmevent-&gt;event_len);\nwoal_update_dscp_mapping(priv);\npriv-&gt;media_connected = MTRUE;\n</code></pre><p>===============// 4-way handshake</p>\n<p>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<p>/<em> Handle pending interrupts if any </em>/<br>if (pmadapter-&gt;ireg) {<br>        if (pmadapter-&gt;hs_activated == MTRUE)<br>                wlan_process_hs_config(pmadapter);<br>        pmadapter-&gt;ops.process_int_status(pmadapter);</p>\n<pre><code>.process_int_status = wlan_process_sdio_int_status,\n</code></pre><p>// This function checks the interrupt status and handle it accordingly.<br>static mlan_status<br>wlan_process_sdio_int_status(mlan_adapter *pmadapter)</p>\n<p>static mlan_status<br>wlan_decode_rx_packet(mlan_adapter <em>pmadapter,<br>              mlan_buffer </em>pmbuf, t_u32 upld_typ, t_u8 lock_flag)</p>\n<p>mlan_status<br>wlan_handle_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)</p>\n<pre><code>PRINTM(MDATA, &quot;%lu.%06lu : Data &lt;= FW\\n&quot;, sec, usec);\n    ret = priv-&gt;ops.process_rx_packet(pmadapter, pmbuf);\n\n/* rx handler */\n    wlan_ops_sta_process_rx_packet,\n</code></pre><p>// This function processes the received buffer<br>mlan_status<br>wlan_ops_sta_process_rx_packet(t_void *adapter, pmlan_buffer pmbuf)</p>\n<p>// this function process the received packet and forwards it to kernel/upper layer<br>mlan_status<br>wlan_process_rx_packet(pmlan_adapter pmadapter, pmlan_buffer pmbuf)</p>\n<pre><code>ret = pmadapter-&gt;callbacks.moal_recv_packet(pmadapter-&gt;pmoal_handle,\n                            pmbuf);\n\npmadapter-&gt;ops.data_complete(pmadapter, pmbuf, ret);\n</code></pre><p>// this fucntion uploads the packet to network stack<br>mlan_status<br>moal_recv_packet(t_void *pmoal, pmlan_buffer pmbuf)</p>\n<pre><code>if (ntohs(ethh-&gt;h_proto) == ETH_P_PAE)\n        PRINTM(MEVENT,\n                        &quot;wlan: %s Rx EAPOL pkt from &quot; MACSTR\n                        &quot;\\n&quot;,\n                        priv-&gt;netdev-&gt;name,\n                        MAC2STR(ethh-&gt;h_source));\n\n\n\n.moal_recv_packet = moal_recv_packet,\n</code></pre><p>// this fucntion uploads the packet to network stack<br>mlan_status<br>moal_recv_packet(t_void *pmoal, pmlan_buffer pmbuf)</p>\n<pre><code>            skb_reserve(skb, pmbuf-&gt;data_offset);\n\n            skb_put(skb, pmbuf-&gt;data_len);\n\n\nnetif_rx(skb);\nor\nnetif_receive_skb(skb);\nor \nnetif_rx_ni(skb);\n</code></pre><p>// the above process include the process of rx data</p>\n"},{"title":"CODE-ANALYSIS:5-connect-process","date":"2022-06-12T06:21:11.000Z","_content":"\nSat Jun  4 16:01:49 CST 2022\n\n// connect process\n\n\n.connect = woal_cfg80211_connect,\n\n* @brief Request the driver to connect to the ESS with\n* the specified parameters from kernel\nstatic int\nwoal_cfg80211_connect(struct wiphy *wiphy, struct net_device *dev,\n\t\t      struct cfg80211_connect_params *sme)\n\nreceived association request on < interface > \n\nreset cfg_disconnect status\n\ncopy SSID and BSSID from the upper layer parameters\n\n\ncheck the current status, not allowed to connect the same AP which is already connected with other interface.\n\n\n\t/** cancel pending scan */\n\t\twoal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n\nif the connect is triggered by the 11r roaming from supplicant do sperated process.\n\n    get current bss info\n\tget target bss info\n\n\nelse \nset the cfg_connect status\n\n\nif current scan type is passive, set it to active.\n\n// request the driver for (re)association\n\tret = woal_cfg80211_assoc(priv, (void *)sme, MOAL_IOCTL_WAIT,\n\t\t\t\t\t  assoc_rsp);\n\n\n// send bss start command to mlan\n\t    woal_bss_start(priv, MOAL_IOCTL_WAIT_TIMEOUT, ssid_bssid)) {\n\n\tstatus = mlan_ioctl(priv->phandle->pmlan_adapter, req);\n\n\tret = pmpriv->ops.ioctl(adapter, pioctl_req);\n\n\twlan_ops_sta_ioctl,\n\n// MLAN station ioctl handler\nmlan_status\nwlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)\n\tcase MLAN_IOCTL_BSS:\n\t\t\tstatus = wlan_bss_ioctl(pmadapter, pioctl_req);\n\t\t\t\t\tbreak;\n\n// BSS command handler\nstatic mlan_status\nwlan_bss_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\n\tcase MLAN_OID_BSS_START:\n\t\t\tstatus = wlan_bss_ioctl_start(pmadapter, pioctl_req);\n\t\t\t\t\tbreak;\n\n// START BSS\nstatic mlan_status\nwlan_bss_ioctl_start(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\n\n\t\t\tret = wlan_associate(pmpriv, pioctl_req,\n\t\t\t\t\t\t\t\t     &pmadapter->pscan_table[i]);\n\n// associate to specific  BSS disconvered in a scan\nmlan_status\nwlan_associate(mlan_private *pmpriv, t_void *pioctl_buf, BSSDescriptor_t *pbss_desc)\n    \tret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11_ASSOCIATE,\n\t\t\t\t\t       HostCmd_ACT_GEN_SET, 0, pioctl_buf, pbss_desc);\n\n\n// This function prepare the command before sending to firmware.\nmlan_status\nwlan_prepare_cmd(mlan_private *pmpriv, t_u16 cmd_no,\n\t\t t_u16 cmd_action, t_u32 cmd_oid,\n\t\t \t\t t_void *pioctl_buf, t_void *pdata_buf)\n\n\t\tret = pmpriv->ops.prepare_cmd(pmpriv, cmd_no, cmd_action,\n\t\t\t\t\t\t\t      cmd_oid, pioctl_buf, pdata_buf,\n\t\t\t\t\t\t\t\t  \t\t\t\t\t      cmd_ptr);\n\nwlan_ops_sta_prepare_cmd,\n\nmlan_status\nwlan_ops_sta_prepare_cmd(t_void *priv, t_u16 cmd_no,\n\t\t\t t_u16 cmd_action, t_u32 cmd_oid,\n\t\t\t \t\t\t t_void *pioctl_buf,\n\t\t\t\t\t\t \t\t\t t_void *pdata_buf, t_void *pcmd_buf)\n\tcase HostCmd_CMD_802_11_ASSOCIATE:\n\t\t\tret = wlan_cmd_802_11_associate(pmpriv, cmd_ptr, pdata_buf);\n\tbreak;\n\n// This function prepare the command of association\nmlan_status\nwlan_cmd_802_11_associate(mlan_private *pmpriv,\n\t\t\t  HostCmd_DS_COMMAND *cmd, t_void *pdata_buf)\n\n\n\nwlan_queue_cmd(pmpriv, pcmd_node, cmd_no);\n\n\n\n// print connected to bssid xxx successfully.\n\tif (!ret && priv->media_connected) {\n\t\t\tPRINTM(MMSG,\n\t\t\t\t\t       \"wlan: Connected to bssid \" MACSTR \" successfully\\n\",\n\n\n============================================EVENT ============================ =\n\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n// This function handle the command response\nmlan_status\nwlan_process_cmdresp(mlan_adapter *pmadapter)\n\n\n// This function handle the station command response.\nmlan_status\nwlan_ops_sta_process_cmdresp(t_void *priv, t_u16 cmdresp_no,\n\t\t\t     t_void *pcmd_buf, t_void *pioctl)\n\tcase HostCmd_CMD_802_11_ASSOCIATE:\n\t\t\tret = wlan_ret_802_11_associate(pmpriv, resp, pioctl_buf);\n\t\t\t\t\tbreak;\n\n\n// Association firmware command response handler\nmlan_status\nwlan_ret_802_11_associate(mlan_private *pmpriv,\n\t\t\t  HostCmd_DS_COMMAND *resp, t_void *pioctl_buf)\n\n\t/* Send a Media Connected event, according to the Spec */\n\t\tpmpriv->media_connected = MTRUE;\n\t\n\t\tPRINTM(MCMND, \"ASSOC_RESP: %-32s (a_id = 0x%x)\\n\", pbss_desc->ssid.ssid,\n\t\t\t       wlan_le16_to_cpu(passoc_rsp->a_id));\n\n\n    MLAN_EVENT_ID_DRV_CONNECTED = 0x80000001,\n\twlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_CONNECTED, pevent);\n\n\tcase MLAN_EVENT_ID_DRV_CONNECTED:\n\n    MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER = 0x80000027, \n\twlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER, pevent);\n\n\n\twoal_broadcast_event(priv, pmevent->event_buf,\n\t\t\t\t\tpmevent->event_len);\n\n// This function handle events generated by firmware\nmlan_status\nwoal_broadcast_event(moal_private *priv, t_u8 *payload, t_u32 len)\n\n  /* Send message */\n  ret = netlink_broadcast(sk, skb, 0, NL_MULTICAST_GROUP, GFP_ATOMIC);\n\n\n\n\tpriv->media_connected = MTRUE;\n\n\n.moal_recv_event = moal_recv_event,\n\n// This function handle event received (MOAL)\nmlan_status\nmoal_recv_event(t_void *pmoal, pmlan_event pmevent)\n\n\n\n\n","source":"_posts/CODE-ANALYSIS-5-connect-process.md","raw":"---\ntitle: 'CODE-ANALYSIS:5-connect-process'\ndate: 2022-06-12 14:21:11\ntags: code analysis, Wi-Fi, Driver;\n---\n\nSat Jun  4 16:01:49 CST 2022\n\n// connect process\n\n\n.connect = woal_cfg80211_connect,\n\n* @brief Request the driver to connect to the ESS with\n* the specified parameters from kernel\nstatic int\nwoal_cfg80211_connect(struct wiphy *wiphy, struct net_device *dev,\n\t\t      struct cfg80211_connect_params *sme)\n\nreceived association request on < interface > \n\nreset cfg_disconnect status\n\ncopy SSID and BSSID from the upper layer parameters\n\n\ncheck the current status, not allowed to connect the same AP which is already connected with other interface.\n\n\n\t/** cancel pending scan */\n\t\twoal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n\nif the connect is triggered by the 11r roaming from supplicant do sperated process.\n\n    get current bss info\n\tget target bss info\n\n\nelse \nset the cfg_connect status\n\n\nif current scan type is passive, set it to active.\n\n// request the driver for (re)association\n\tret = woal_cfg80211_assoc(priv, (void *)sme, MOAL_IOCTL_WAIT,\n\t\t\t\t\t  assoc_rsp);\n\n\n// send bss start command to mlan\n\t    woal_bss_start(priv, MOAL_IOCTL_WAIT_TIMEOUT, ssid_bssid)) {\n\n\tstatus = mlan_ioctl(priv->phandle->pmlan_adapter, req);\n\n\tret = pmpriv->ops.ioctl(adapter, pioctl_req);\n\n\twlan_ops_sta_ioctl,\n\n// MLAN station ioctl handler\nmlan_status\nwlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)\n\tcase MLAN_IOCTL_BSS:\n\t\t\tstatus = wlan_bss_ioctl(pmadapter, pioctl_req);\n\t\t\t\t\tbreak;\n\n// BSS command handler\nstatic mlan_status\nwlan_bss_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\n\tcase MLAN_OID_BSS_START:\n\t\t\tstatus = wlan_bss_ioctl_start(pmadapter, pioctl_req);\n\t\t\t\t\tbreak;\n\n// START BSS\nstatic mlan_status\nwlan_bss_ioctl_start(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)\n\n\t\t\tret = wlan_associate(pmpriv, pioctl_req,\n\t\t\t\t\t\t\t\t     &pmadapter->pscan_table[i]);\n\n// associate to specific  BSS disconvered in a scan\nmlan_status\nwlan_associate(mlan_private *pmpriv, t_void *pioctl_buf, BSSDescriptor_t *pbss_desc)\n    \tret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11_ASSOCIATE,\n\t\t\t\t\t       HostCmd_ACT_GEN_SET, 0, pioctl_buf, pbss_desc);\n\n\n// This function prepare the command before sending to firmware.\nmlan_status\nwlan_prepare_cmd(mlan_private *pmpriv, t_u16 cmd_no,\n\t\t t_u16 cmd_action, t_u32 cmd_oid,\n\t\t \t\t t_void *pioctl_buf, t_void *pdata_buf)\n\n\t\tret = pmpriv->ops.prepare_cmd(pmpriv, cmd_no, cmd_action,\n\t\t\t\t\t\t\t      cmd_oid, pioctl_buf, pdata_buf,\n\t\t\t\t\t\t\t\t  \t\t\t\t\t      cmd_ptr);\n\nwlan_ops_sta_prepare_cmd,\n\nmlan_status\nwlan_ops_sta_prepare_cmd(t_void *priv, t_u16 cmd_no,\n\t\t\t t_u16 cmd_action, t_u32 cmd_oid,\n\t\t\t \t\t\t t_void *pioctl_buf,\n\t\t\t\t\t\t \t\t\t t_void *pdata_buf, t_void *pcmd_buf)\n\tcase HostCmd_CMD_802_11_ASSOCIATE:\n\t\t\tret = wlan_cmd_802_11_associate(pmpriv, cmd_ptr, pdata_buf);\n\tbreak;\n\n// This function prepare the command of association\nmlan_status\nwlan_cmd_802_11_associate(mlan_private *pmpriv,\n\t\t\t  HostCmd_DS_COMMAND *cmd, t_void *pdata_buf)\n\n\n\nwlan_queue_cmd(pmpriv, pcmd_node, cmd_no);\n\n\n\n// print connected to bssid xxx successfully.\n\tif (!ret && priv->media_connected) {\n\t\t\tPRINTM(MMSG,\n\t\t\t\t\t       \"wlan: Connected to bssid \" MACSTR \" successfully\\n\",\n\n\n============================================EVENT ============================ =\n\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n// This function handle the command response\nmlan_status\nwlan_process_cmdresp(mlan_adapter *pmadapter)\n\n\n// This function handle the station command response.\nmlan_status\nwlan_ops_sta_process_cmdresp(t_void *priv, t_u16 cmdresp_no,\n\t\t\t     t_void *pcmd_buf, t_void *pioctl)\n\tcase HostCmd_CMD_802_11_ASSOCIATE:\n\t\t\tret = wlan_ret_802_11_associate(pmpriv, resp, pioctl_buf);\n\t\t\t\t\tbreak;\n\n\n// Association firmware command response handler\nmlan_status\nwlan_ret_802_11_associate(mlan_private *pmpriv,\n\t\t\t  HostCmd_DS_COMMAND *resp, t_void *pioctl_buf)\n\n\t/* Send a Media Connected event, according to the Spec */\n\t\tpmpriv->media_connected = MTRUE;\n\t\n\t\tPRINTM(MCMND, \"ASSOC_RESP: %-32s (a_id = 0x%x)\\n\", pbss_desc->ssid.ssid,\n\t\t\t       wlan_le16_to_cpu(passoc_rsp->a_id));\n\n\n    MLAN_EVENT_ID_DRV_CONNECTED = 0x80000001,\n\twlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_CONNECTED, pevent);\n\n\tcase MLAN_EVENT_ID_DRV_CONNECTED:\n\n    MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER = 0x80000027, \n\twlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER, pevent);\n\n\n\twoal_broadcast_event(priv, pmevent->event_buf,\n\t\t\t\t\tpmevent->event_len);\n\n// This function handle events generated by firmware\nmlan_status\nwoal_broadcast_event(moal_private *priv, t_u8 *payload, t_u32 len)\n\n  /* Send message */\n  ret = netlink_broadcast(sk, skb, 0, NL_MULTICAST_GROUP, GFP_ATOMIC);\n\n\n\n\tpriv->media_connected = MTRUE;\n\n\n.moal_recv_event = moal_recv_event,\n\n// This function handle event received (MOAL)\nmlan_status\nmoal_recv_event(t_void *pmoal, pmlan_event pmevent)\n\n\n\n\n","slug":"CODE-ANALYSIS-5-connect-process","published":1,"updated":"2022-06-12T06:22:05.577Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud35000818jxbw7y8haz","content":"<p>Sat Jun  4 16:01:49 CST 2022</p>\n<p>// connect process</p>\n<p>.connect = woal_cfg80211_connect,</p>\n<ul>\n<li>@brief Request the driver to connect to the ESS with</li>\n<li>the specified parameters from kernel<br>static int<br>woal_cfg80211_connect(struct wiphy <em>wiphy, struct net_device </em>dev,<pre><code>        struct cfg80211_connect_params *sme)\n</code></pre></li>\n</ul>\n<p>received association request on &lt; interface &gt; </p>\n<p>reset cfg_disconnect status</p>\n<p>copy SSID and BSSID from the upper layer parameters</p>\n<p>check the current status, not allowed to connect the same AP which is already connected with other interface.</p>\n<pre><code>/** cancel pending scan */\n    woal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n</code></pre><p>if the connect is triggered by the 11r roaming from supplicant do sperated process.</p>\n<pre><code>get current bss info\nget target bss info\n</code></pre><p>else<br>set the cfg_connect status</p>\n<p>if current scan type is passive, set it to active.</p>\n<p>// request the driver for (re)association<br>    ret = woal_cfg80211_assoc(priv, (void *)sme, MOAL_IOCTL_WAIT,<br>                      assoc_rsp);</p>\n<p>// send bss start command to mlan<br>        woal_bss_start(priv, MOAL_IOCTL_WAIT_TIMEOUT, ssid_bssid)) {</p>\n<pre><code>status = mlan_ioctl(priv-&gt;phandle-&gt;pmlan_adapter, req);\n\nret = pmpriv-&gt;ops.ioctl(adapter, pioctl_req);\n\nwlan_ops_sta_ioctl,\n</code></pre><p>// MLAN station ioctl handler<br>mlan_status<br>wlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)<br>    case MLAN_IOCTL_BSS:<br>            status = wlan_bss_ioctl(pmadapter, pioctl_req);<br>                    break;</p>\n<p>// BSS command handler<br>static mlan_status<br>wlan_bss_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)<br>    case MLAN_OID_BSS_START:<br>            status = wlan_bss_ioctl_start(pmadapter, pioctl_req);<br>                    break;</p>\n<p>// START BSS<br>static mlan_status<br>wlan_bss_ioctl_start(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)</p>\n<pre><code>        ret = wlan_associate(pmpriv, pioctl_req,\n                                 &amp;pmadapter-&gt;pscan_table[i]);\n</code></pre><p>// associate to specific  BSS disconvered in a scan<br>mlan_status<br>wlan_associate(mlan_private <em>pmpriv, t_void </em>pioctl_buf, BSSDescriptor_t *pbss_desc)<br>        ret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11_ASSOCIATE,<br>                           HostCmd_ACT_GEN_SET, 0, pioctl_buf, pbss_desc);</p>\n<p>// This function prepare the command before sending to firmware.<br>mlan_status<br>wlan_prepare_cmd(mlan_private <em>pmpriv, t_u16 cmd_no,<br>         t_u16 cmd_action, t_u32 cmd_oid,<br>                  t_void </em>pioctl_buf, t_void *pdata_buf)</p>\n<pre><code>    ret = pmpriv-&gt;ops.prepare_cmd(pmpriv, cmd_no, cmd_action,\n                              cmd_oid, pioctl_buf, pdata_buf,\n                                                        cmd_ptr);\n</code></pre><p>wlan_ops_sta_prepare_cmd,</p>\n<p>mlan_status<br>wlan_ops_sta_prepare_cmd(t_void <em>priv, t_u16 cmd_no,<br>             t_u16 cmd_action, t_u32 cmd_oid,<br>                          t_void </em>pioctl_buf,<br>                                      t_void <em>pdata_buf, t_void </em>pcmd_buf)<br>    case HostCmd_CMD_802_11_ASSOCIATE:<br>            ret = wlan_cmd_802_11_associate(pmpriv, cmd_ptr, pdata_buf);<br>    break;</p>\n<p>// This function prepare the command of association<br>mlan_status<br>wlan_cmd_802_11_associate(mlan_private <em>pmpriv,<br>              HostCmd_DS_COMMAND </em>cmd, t_void *pdata_buf)</p>\n<p>wlan_queue_cmd(pmpriv, pcmd_node, cmd_no);</p>\n<p>// print connected to bssid xxx successfully.<br>    if (!ret &amp;&amp; priv-&gt;media_connected) {<br>            PRINTM(MMSG,<br>                           “wlan: Connected to bssid “ MACSTR “ successfully\\n”,</p>\n<p>============================================EVENT ============================ =</p>\n<p>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<p>// This function handle the command response<br>mlan_status<br>wlan_process_cmdresp(mlan_adapter *pmadapter)</p>\n<p>// This function handle the station command response.<br>mlan_status<br>wlan_ops_sta_process_cmdresp(t_void <em>priv, t_u16 cmdresp_no,<br>                 t_void </em>pcmd_buf, t_void *pioctl)<br>    case HostCmd_CMD_802_11_ASSOCIATE:<br>            ret = wlan_ret_802_11_associate(pmpriv, resp, pioctl_buf);<br>                    break;</p>\n<p>// Association firmware command response handler<br>mlan_status<br>wlan_ret_802_11_associate(mlan_private <em>pmpriv,<br>              HostCmd_DS_COMMAND </em>resp, t_void *pioctl_buf)</p>\n<pre><code>/* Send a Media Connected event, according to the Spec */\n    pmpriv-&gt;media_connected = MTRUE;\n\n    PRINTM(MCMND, &quot;ASSOC_RESP: %-32s (a_id = 0x%x)\\n&quot;, pbss_desc-&gt;ssid.ssid,\n               wlan_le16_to_cpu(passoc_rsp-&gt;a_id));\n\n\nMLAN_EVENT_ID_DRV_CONNECTED = 0x80000001,\nwlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_CONNECTED, pevent);\n\ncase MLAN_EVENT_ID_DRV_CONNECTED:\n\nMLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER = 0x80000027, \nwlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER, pevent);\n\n\nwoal_broadcast_event(priv, pmevent-&gt;event_buf,\n                pmevent-&gt;event_len);\n</code></pre><p>// This function handle events generated by firmware<br>mlan_status<br>woal_broadcast_event(moal_private <em>priv, t_u8 </em>payload, t_u32 len)</p>\n<p>  /<em> Send message </em>/<br>  ret = netlink_broadcast(sk, skb, 0, NL_MULTICAST_GROUP, GFP_ATOMIC);</p>\n<pre><code>priv-&gt;media_connected = MTRUE;\n</code></pre><p>.moal_recv_event = moal_recv_event,</p>\n<p>// This function handle event received (MOAL)<br>mlan_status<br>moal_recv_event(t_void *pmoal, pmlan_event pmevent)</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Sat Jun  4 16:01:49 CST 2022</p>\n<p>// connect process</p>\n<p>.connect = woal_cfg80211_connect,</p>\n<ul>\n<li>@brief Request the driver to connect to the ESS with</li>\n<li>the specified parameters from kernel<br>static int<br>woal_cfg80211_connect(struct wiphy <em>wiphy, struct net_device </em>dev,<pre><code>        struct cfg80211_connect_params *sme)\n</code></pre></li>\n</ul>\n<p>received association request on &lt; interface &gt; </p>\n<p>reset cfg_disconnect status</p>\n<p>copy SSID and BSSID from the upper layer parameters</p>\n<p>check the current status, not allowed to connect the same AP which is already connected with other interface.</p>\n<pre><code>/** cancel pending scan */\n    woal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n</code></pre><p>if the connect is triggered by the 11r roaming from supplicant do sperated process.</p>\n<pre><code>get current bss info\nget target bss info\n</code></pre><p>else<br>set the cfg_connect status</p>\n<p>if current scan type is passive, set it to active.</p>\n<p>// request the driver for (re)association<br>    ret = woal_cfg80211_assoc(priv, (void *)sme, MOAL_IOCTL_WAIT,<br>                      assoc_rsp);</p>\n<p>// send bss start command to mlan<br>        woal_bss_start(priv, MOAL_IOCTL_WAIT_TIMEOUT, ssid_bssid)) {</p>\n<pre><code>status = mlan_ioctl(priv-&gt;phandle-&gt;pmlan_adapter, req);\n\nret = pmpriv-&gt;ops.ioctl(adapter, pioctl_req);\n\nwlan_ops_sta_ioctl,\n</code></pre><p>// MLAN station ioctl handler<br>mlan_status<br>wlan_ops_sta_ioctl(t_void *adapter, pmlan_ioctl_req pioctl_req)<br>    case MLAN_IOCTL_BSS:<br>            status = wlan_bss_ioctl(pmadapter, pioctl_req);<br>                    break;</p>\n<p>// BSS command handler<br>static mlan_status<br>wlan_bss_ioctl(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)<br>    case MLAN_OID_BSS_START:<br>            status = wlan_bss_ioctl_start(pmadapter, pioctl_req);<br>                    break;</p>\n<p>// START BSS<br>static mlan_status<br>wlan_bss_ioctl_start(pmlan_adapter pmadapter, pmlan_ioctl_req pioctl_req)</p>\n<pre><code>        ret = wlan_associate(pmpriv, pioctl_req,\n                                 &amp;pmadapter-&gt;pscan_table[i]);\n</code></pre><p>// associate to specific  BSS disconvered in a scan<br>mlan_status<br>wlan_associate(mlan_private <em>pmpriv, t_void </em>pioctl_buf, BSSDescriptor_t *pbss_desc)<br>        ret = wlan_prepare_cmd(pmpriv, HostCmd_CMD_802_11_ASSOCIATE,<br>                           HostCmd_ACT_GEN_SET, 0, pioctl_buf, pbss_desc);</p>\n<p>// This function prepare the command before sending to firmware.<br>mlan_status<br>wlan_prepare_cmd(mlan_private <em>pmpriv, t_u16 cmd_no,<br>         t_u16 cmd_action, t_u32 cmd_oid,<br>                  t_void </em>pioctl_buf, t_void *pdata_buf)</p>\n<pre><code>    ret = pmpriv-&gt;ops.prepare_cmd(pmpriv, cmd_no, cmd_action,\n                              cmd_oid, pioctl_buf, pdata_buf,\n                                                        cmd_ptr);\n</code></pre><p>wlan_ops_sta_prepare_cmd,</p>\n<p>mlan_status<br>wlan_ops_sta_prepare_cmd(t_void <em>priv, t_u16 cmd_no,<br>             t_u16 cmd_action, t_u32 cmd_oid,<br>                          t_void </em>pioctl_buf,<br>                                      t_void <em>pdata_buf, t_void </em>pcmd_buf)<br>    case HostCmd_CMD_802_11_ASSOCIATE:<br>            ret = wlan_cmd_802_11_associate(pmpriv, cmd_ptr, pdata_buf);<br>    break;</p>\n<p>// This function prepare the command of association<br>mlan_status<br>wlan_cmd_802_11_associate(mlan_private <em>pmpriv,<br>              HostCmd_DS_COMMAND </em>cmd, t_void *pdata_buf)</p>\n<p>wlan_queue_cmd(pmpriv, pcmd_node, cmd_no);</p>\n<p>// print connected to bssid xxx successfully.<br>    if (!ret &amp;&amp; priv-&gt;media_connected) {<br>            PRINTM(MMSG,<br>                           “wlan: Connected to bssid “ MACSTR “ successfully\\n”,</p>\n<p>============================================EVENT ============================ =</p>\n<p>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<p>// This function handle the command response<br>mlan_status<br>wlan_process_cmdresp(mlan_adapter *pmadapter)</p>\n<p>// This function handle the station command response.<br>mlan_status<br>wlan_ops_sta_process_cmdresp(t_void <em>priv, t_u16 cmdresp_no,<br>                 t_void </em>pcmd_buf, t_void *pioctl)<br>    case HostCmd_CMD_802_11_ASSOCIATE:<br>            ret = wlan_ret_802_11_associate(pmpriv, resp, pioctl_buf);<br>                    break;</p>\n<p>// Association firmware command response handler<br>mlan_status<br>wlan_ret_802_11_associate(mlan_private <em>pmpriv,<br>              HostCmd_DS_COMMAND </em>resp, t_void *pioctl_buf)</p>\n<pre><code>/* Send a Media Connected event, according to the Spec */\n    pmpriv-&gt;media_connected = MTRUE;\n\n    PRINTM(MCMND, &quot;ASSOC_RESP: %-32s (a_id = 0x%x)\\n&quot;, pbss_desc-&gt;ssid.ssid,\n               wlan_le16_to_cpu(passoc_rsp-&gt;a_id));\n\n\nMLAN_EVENT_ID_DRV_CONNECTED = 0x80000001,\nwlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_CONNECTED, pevent);\n\ncase MLAN_EVENT_ID_DRV_CONNECTED:\n\nMLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER = 0x80000027, \nwlan_recv_event(pmpriv, MLAN_EVENT_ID_DRV_ASSOC_SUCC_LOGGER, pevent);\n\n\nwoal_broadcast_event(priv, pmevent-&gt;event_buf,\n                pmevent-&gt;event_len);\n</code></pre><p>// This function handle events generated by firmware<br>mlan_status<br>woal_broadcast_event(moal_private <em>priv, t_u8 </em>payload, t_u32 len)</p>\n<p>  /<em> Send message </em>/<br>  ret = netlink_broadcast(sk, skb, 0, NL_MULTICAST_GROUP, GFP_ATOMIC);</p>\n<pre><code>priv-&gt;media_connected = MTRUE;\n</code></pre><p>.moal_recv_event = moal_recv_event,</p>\n<p>// This function handle event received (MOAL)<br>mlan_status<br>moal_recv_event(t_void *pmoal, pmlan_event pmevent)</p>\n"},{"title":"CODE-ANALYSIS:6-disconnect-process","date":"2022-06-12T06:22:25.000Z","_content":"\nSat Jun  4 15:46:42 CST 2022\n\n\t.disconnect = woal_cfg80211_disconnect,\n\n\n// request the driver to disconnect\nstatic int\nwoal_cfg80211_disconnect(struct wiphy *wiphy, struct net_device *dev,\n\t\t\t t_u16 reason_code)\n\nwlan: Received disassociation request on < interface >, reason: xx\n\n\nprint disconnect reason code\n\n\n// check current driver_status, 0 indicate normal state, 1 abnormal state;\nabnormal state, the Wi-Fi function can't be used.\n\n\nif already disconnect, process it separately.\n\n\n\t/** cancel pending scan */\n\t\twoal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n\n\n// send deauth command to MLAN\n\tif (woal_disconnect(priv, MOAL_IOCTL_WAIT_TIMEOUT, priv->cfg_bssid,\n\t\t\t\t    reason_code) != MLAN_STATUS_SUCCESS) {\n\n// send command to firmware\n\t\t\t/* Fill request buffer */\n\t\t\tbss = (mlan_ds_bss *)req->pbuf;\n\t\t\tbss->sub_command = MLAN_OID_BSS_STOP;\n\t\t\tif (mac)\n\t\t\t\t\tmoal_memcpy_ext(priv->phandle,\n\t\t\t\t\t\t\t\t\t&bss->param.deauth_param.mac_addr, mac,\n\t\t\t\t\t\t\t\t\tsizeof(mlan_802_11_mac_addr),\n\t\t\t\t\t\t\t\t\tsizeof(bss->param.deauth_param.mac_addr));\n\t\t\tbss->param.deauth_param.reason_code = reason_code;\n\t\t\treq->req_id = MLAN_IOCTL_BSS;\n\t\t\treq->action = MLAN_ACT_SET;\n\n\n\n// notify cfg80211 that connection was dropped.\n// After it calls this function, the driver should enter \n// an idle state and not try to connect to any AP any more.\ncfg80211_disconnected(priv->netdev, 0, NULL, 0, true, GFP_KERNEL);\n\n\nclear connection parameters\n\n\n","source":"_posts/CODE-ANALYSIS-6-disconnect-process.md","raw":"---\ntitle: 'CODE-ANALYSIS:6-disconnect-process'\ndate: 2022-06-12 14:22:25\ntags: code analysis, Wi-Fi, Driver;\n---\n\nSat Jun  4 15:46:42 CST 2022\n\n\t.disconnect = woal_cfg80211_disconnect,\n\n\n// request the driver to disconnect\nstatic int\nwoal_cfg80211_disconnect(struct wiphy *wiphy, struct net_device *dev,\n\t\t\t t_u16 reason_code)\n\nwlan: Received disassociation request on < interface >, reason: xx\n\n\nprint disconnect reason code\n\n\n// check current driver_status, 0 indicate normal state, 1 abnormal state;\nabnormal state, the Wi-Fi function can't be used.\n\n\nif already disconnect, process it separately.\n\n\n\t/** cancel pending scan */\n\t\twoal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n\n\n// send deauth command to MLAN\n\tif (woal_disconnect(priv, MOAL_IOCTL_WAIT_TIMEOUT, priv->cfg_bssid,\n\t\t\t\t    reason_code) != MLAN_STATUS_SUCCESS) {\n\n// send command to firmware\n\t\t\t/* Fill request buffer */\n\t\t\tbss = (mlan_ds_bss *)req->pbuf;\n\t\t\tbss->sub_command = MLAN_OID_BSS_STOP;\n\t\t\tif (mac)\n\t\t\t\t\tmoal_memcpy_ext(priv->phandle,\n\t\t\t\t\t\t\t\t\t&bss->param.deauth_param.mac_addr, mac,\n\t\t\t\t\t\t\t\t\tsizeof(mlan_802_11_mac_addr),\n\t\t\t\t\t\t\t\t\tsizeof(bss->param.deauth_param.mac_addr));\n\t\t\tbss->param.deauth_param.reason_code = reason_code;\n\t\t\treq->req_id = MLAN_IOCTL_BSS;\n\t\t\treq->action = MLAN_ACT_SET;\n\n\n\n// notify cfg80211 that connection was dropped.\n// After it calls this function, the driver should enter \n// an idle state and not try to connect to any AP any more.\ncfg80211_disconnected(priv->netdev, 0, NULL, 0, true, GFP_KERNEL);\n\n\nclear connection parameters\n\n\n","slug":"CODE-ANALYSIS-6-disconnect-process","published":1,"updated":"2022-06-12T06:23:10.234Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud36000a18jx9hi79vb1","content":"<p>Sat Jun  4 15:46:42 CST 2022</p>\n<pre><code>.disconnect = woal_cfg80211_disconnect,\n</code></pre><p>// request the driver to disconnect<br>static int<br>woal_cfg80211_disconnect(struct wiphy <em>wiphy, struct net_device </em>dev,<br>             t_u16 reason_code)</p>\n<p>wlan: Received disassociation request on &lt; interface &gt;, reason: xx</p>\n<p>print disconnect reason code</p>\n<p>// check current driver_status, 0 indicate normal state, 1 abnormal state;<br>abnormal state, the Wi-Fi function can’t be used.</p>\n<p>if already disconnect, process it separately.</p>\n<pre><code>/** cancel pending scan */\n    woal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n</code></pre><p>// send deauth command to MLAN<br>    if (woal_disconnect(priv, MOAL_IOCTL_WAIT_TIMEOUT, priv-&gt;cfg_bssid,<br>                    reason_code) != MLAN_STATUS_SUCCESS) {</p>\n<p>// send command to firmware<br>            /<em> Fill request buffer </em>/<br>            bss = (mlan_ds_bss *)req-&gt;pbuf;<br>            bss-&gt;sub_command = MLAN_OID_BSS_STOP;<br>            if (mac)<br>                    moal_memcpy_ext(priv-&gt;phandle,<br>                                    &amp;bss-&gt;param.deauth_param.mac_addr, mac,<br>                                    sizeof(mlan_802_11_mac_addr),<br>                                    sizeof(bss-&gt;param.deauth_param.mac_addr));<br>            bss-&gt;param.deauth_param.reason_code = reason_code;<br>            req-&gt;req_id = MLAN_IOCTL_BSS;<br>            req-&gt;action = MLAN_ACT_SET;</p>\n<p>// notify cfg80211 that connection was dropped.<br>// After it calls this function, the driver should enter<br>// an idle state and not try to connect to any AP any more.<br>cfg80211_disconnected(priv-&gt;netdev, 0, NULL, 0, true, GFP_KERNEL);</p>\n<p>clear connection parameters</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Sat Jun  4 15:46:42 CST 2022</p>\n<pre><code>.disconnect = woal_cfg80211_disconnect,\n</code></pre><p>// request the driver to disconnect<br>static int<br>woal_cfg80211_disconnect(struct wiphy <em>wiphy, struct net_device </em>dev,<br>             t_u16 reason_code)</p>\n<p>wlan: Received disassociation request on &lt; interface &gt;, reason: xx</p>\n<p>print disconnect reason code</p>\n<p>// check current driver_status, 0 indicate normal state, 1 abnormal state;<br>abnormal state, the Wi-Fi function can’t be used.</p>\n<p>if already disconnect, process it separately.</p>\n<pre><code>/** cancel pending scan */\n    woal_cancel_scan(priv, MOAL_IOCTL_WAIT);\n</code></pre><p>// send deauth command to MLAN<br>    if (woal_disconnect(priv, MOAL_IOCTL_WAIT_TIMEOUT, priv-&gt;cfg_bssid,<br>                    reason_code) != MLAN_STATUS_SUCCESS) {</p>\n<p>// send command to firmware<br>            /<em> Fill request buffer </em>/<br>            bss = (mlan_ds_bss *)req-&gt;pbuf;<br>            bss-&gt;sub_command = MLAN_OID_BSS_STOP;<br>            if (mac)<br>                    moal_memcpy_ext(priv-&gt;phandle,<br>                                    &amp;bss-&gt;param.deauth_param.mac_addr, mac,<br>                                    sizeof(mlan_802_11_mac_addr),<br>                                    sizeof(bss-&gt;param.deauth_param.mac_addr));<br>            bss-&gt;param.deauth_param.reason_code = reason_code;<br>            req-&gt;req_id = MLAN_IOCTL_BSS;<br>            req-&gt;action = MLAN_ACT_SET;</p>\n<p>// notify cfg80211 that connection was dropped.<br>// After it calls this function, the driver should enter<br>// an idle state and not try to connect to any AP any more.<br>cfg80211_disconnected(priv-&gt;netdev, 0, NULL, 0, true, GFP_KERNEL);</p>\n<p>clear connection parameters</p>\n"},{"title":"CODE-ANALYSIS:7-get-connection-info","date":"2022-06-12T06:23:31.000Z","_content":"\nSat Jun  4 15:03:47 CST 2022\n\n\t.get_station = woal_cfg80211_get_station,\n\n\n// Request the driver to get the station info\nstatic int\nwoal_cfg80211_get_station(struct wiphy *wiphy, struct net_device *dev,\n\t\t\t  const u8 *mac, struct station_info *sinfo)\n\n// if media is not connected, return directly with ENOENT\n\n\n\tif (MLAN_STATUS_SUCCESS != woal_cfg80211_dump_station_info(priv, sinfo)) {\n\n// request the driver to dump the station info\nistatic mlan_status\nwoal_cfg80211_dump_station_info(moal_private *priv, struct station_info *sinfo)\n\n\n// get the signal info from firmware\n\tif (MLAN_STATUS_SUCCESS !=\n\t\t    woal_get_signal_info(priv, MOAL_IOCTL_WAIT, &signal)) {\n\n// Get RSSI info\nmlan_status\nwoal_get_signal_info(moal_private *priv, t_u8 wait_option,\n\t\t     mlan_ds_get_signal *signal)\n\n/* Fill request buffer */\ninfo = (mlan_ds_get_info *)req->pbuf;\ninfo->sub_command = MLAN_OID_GET_SIGNAL;\ninfo->param.signal.selector = ALL_RSSI_INFO_MASK;\nreq->req_id = MLAN_IOCTL_GET_INFO;\nreq->action = MLAN_ACT_GET;\n\n// get stats info from firmware\n\tif (MLAN_STATUS_SUCCESS !=\n\t\t    woal_get_stats_info(priv, MOAL_IOCTL_WAIT, &stats)) {\n\n// get bss info from firmware\n\tret = woal_get_bss_info(priv, MOAL_IOCTL_WAIT, &bss_info);\n\n// get DTIM period from firmware\n\tret = woal_set_get_dtim_period(priv, MLAN_ACT_GET, MOAL_IOCTL_WAIT,\n\t\t\t\t\t       &dtim_period);\n\n// file station info, request the driver to fill the tx/rx rate info, request from the firmware.\nwoal_cfg80211_fill_rate_info(priv, sinfo);\n\trate = (mlan_ds_rate *)req->pbuf;\n\trate->sub_command = MLAN_OID_GET_DATA_RATE;\n\treq->req_id = MLAN_IOCTL_RATE;\n\treq->action = MLAN_ACT_GET;\n\tret = woal_request_ioctl(priv, req, MOAL_IOCTL_WAIT);\n","source":"_posts/CODE-ANALYSIS-7-get-connection-info.md","raw":"---\ntitle: 'CODE-ANALYSIS:7-get-connection-info'\ndate: 2022-06-12 14:23:31\ntags: code analysis, Wi-Fi, Driver;\n---\n\nSat Jun  4 15:03:47 CST 2022\n\n\t.get_station = woal_cfg80211_get_station,\n\n\n// Request the driver to get the station info\nstatic int\nwoal_cfg80211_get_station(struct wiphy *wiphy, struct net_device *dev,\n\t\t\t  const u8 *mac, struct station_info *sinfo)\n\n// if media is not connected, return directly with ENOENT\n\n\n\tif (MLAN_STATUS_SUCCESS != woal_cfg80211_dump_station_info(priv, sinfo)) {\n\n// request the driver to dump the station info\nistatic mlan_status\nwoal_cfg80211_dump_station_info(moal_private *priv, struct station_info *sinfo)\n\n\n// get the signal info from firmware\n\tif (MLAN_STATUS_SUCCESS !=\n\t\t    woal_get_signal_info(priv, MOAL_IOCTL_WAIT, &signal)) {\n\n// Get RSSI info\nmlan_status\nwoal_get_signal_info(moal_private *priv, t_u8 wait_option,\n\t\t     mlan_ds_get_signal *signal)\n\n/* Fill request buffer */\ninfo = (mlan_ds_get_info *)req->pbuf;\ninfo->sub_command = MLAN_OID_GET_SIGNAL;\ninfo->param.signal.selector = ALL_RSSI_INFO_MASK;\nreq->req_id = MLAN_IOCTL_GET_INFO;\nreq->action = MLAN_ACT_GET;\n\n// get stats info from firmware\n\tif (MLAN_STATUS_SUCCESS !=\n\t\t    woal_get_stats_info(priv, MOAL_IOCTL_WAIT, &stats)) {\n\n// get bss info from firmware\n\tret = woal_get_bss_info(priv, MOAL_IOCTL_WAIT, &bss_info);\n\n// get DTIM period from firmware\n\tret = woal_set_get_dtim_period(priv, MLAN_ACT_GET, MOAL_IOCTL_WAIT,\n\t\t\t\t\t       &dtim_period);\n\n// file station info, request the driver to fill the tx/rx rate info, request from the firmware.\nwoal_cfg80211_fill_rate_info(priv, sinfo);\n\trate = (mlan_ds_rate *)req->pbuf;\n\trate->sub_command = MLAN_OID_GET_DATA_RATE;\n\treq->req_id = MLAN_IOCTL_RATE;\n\treq->action = MLAN_ACT_GET;\n\tret = woal_request_ioctl(priv, req, MOAL_IOCTL_WAIT);\n","slug":"CODE-ANALYSIS-7-get-connection-info","published":1,"updated":"2022-06-12T06:24:45.372Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud38000d18jx1wajfjf9","content":"<p>Sat Jun  4 15:03:47 CST 2022</p>\n<pre><code>.get_station = woal_cfg80211_get_station,\n</code></pre><p>// Request the driver to get the station info<br>static int<br>woal_cfg80211_get_station(struct wiphy <em>wiphy, struct net_device </em>dev,<br>              const u8 <em>mac, struct station_info </em>sinfo)</p>\n<p>// if media is not connected, return directly with ENOENT</p>\n<pre><code>if (MLAN_STATUS_SUCCESS != woal_cfg80211_dump_station_info(priv, sinfo)) &#123;\n</code></pre><p>// request the driver to dump the station info<br>istatic mlan_status<br>woal_cfg80211_dump_station_info(moal_private <em>priv, struct station_info </em>sinfo)</p>\n<p>// get the signal info from firmware<br>    if (MLAN_STATUS_SUCCESS !=<br>            woal_get_signal_info(priv, MOAL_IOCTL_WAIT, &amp;signal)) {</p>\n<p>// Get RSSI info<br>mlan_status<br>woal_get_signal_info(moal_private <em>priv, t_u8 wait_option,<br>             mlan_ds_get_signal </em>signal)</p>\n<p>/<em> Fill request buffer </em>/<br>info = (mlan_ds_get_info *)req-&gt;pbuf;<br>info-&gt;sub_command = MLAN_OID_GET_SIGNAL;<br>info-&gt;param.signal.selector = ALL_RSSI_INFO_MASK;<br>req-&gt;req_id = MLAN_IOCTL_GET_INFO;<br>req-&gt;action = MLAN_ACT_GET;</p>\n<p>// get stats info from firmware<br>    if (MLAN_STATUS_SUCCESS !=<br>            woal_get_stats_info(priv, MOAL_IOCTL_WAIT, &amp;stats)) {</p>\n<p>// get bss info from firmware<br>    ret = woal_get_bss_info(priv, MOAL_IOCTL_WAIT, &amp;bss_info);</p>\n<p>// get DTIM period from firmware<br>    ret = woal_set_get_dtim_period(priv, MLAN_ACT_GET, MOAL_IOCTL_WAIT,<br>                           &amp;dtim_period);</p>\n<p>// file station info, request the driver to fill the tx/rx rate info, request from the firmware.<br>woal_cfg80211_fill_rate_info(priv, sinfo);<br>    rate = (mlan_ds_rate *)req-&gt;pbuf;<br>    rate-&gt;sub_command = MLAN_OID_GET_DATA_RATE;<br>    req-&gt;req_id = MLAN_IOCTL_RATE;<br>    req-&gt;action = MLAN_ACT_GET;<br>    ret = woal_request_ioctl(priv, req, MOAL_IOCTL_WAIT);</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Sat Jun  4 15:03:47 CST 2022</p>\n<pre><code>.get_station = woal_cfg80211_get_station,\n</code></pre><p>// Request the driver to get the station info<br>static int<br>woal_cfg80211_get_station(struct wiphy <em>wiphy, struct net_device </em>dev,<br>              const u8 <em>mac, struct station_info </em>sinfo)</p>\n<p>// if media is not connected, return directly with ENOENT</p>\n<pre><code>if (MLAN_STATUS_SUCCESS != woal_cfg80211_dump_station_info(priv, sinfo)) &#123;\n</code></pre><p>// request the driver to dump the station info<br>istatic mlan_status<br>woal_cfg80211_dump_station_info(moal_private <em>priv, struct station_info </em>sinfo)</p>\n<p>// get the signal info from firmware<br>    if (MLAN_STATUS_SUCCESS !=<br>            woal_get_signal_info(priv, MOAL_IOCTL_WAIT, &amp;signal)) {</p>\n<p>// Get RSSI info<br>mlan_status<br>woal_get_signal_info(moal_private <em>priv, t_u8 wait_option,<br>             mlan_ds_get_signal </em>signal)</p>\n<p>/<em> Fill request buffer </em>/<br>info = (mlan_ds_get_info *)req-&gt;pbuf;<br>info-&gt;sub_command = MLAN_OID_GET_SIGNAL;<br>info-&gt;param.signal.selector = ALL_RSSI_INFO_MASK;<br>req-&gt;req_id = MLAN_IOCTL_GET_INFO;<br>req-&gt;action = MLAN_ACT_GET;</p>\n<p>// get stats info from firmware<br>    if (MLAN_STATUS_SUCCESS !=<br>            woal_get_stats_info(priv, MOAL_IOCTL_WAIT, &amp;stats)) {</p>\n<p>// get bss info from firmware<br>    ret = woal_get_bss_info(priv, MOAL_IOCTL_WAIT, &amp;bss_info);</p>\n<p>// get DTIM period from firmware<br>    ret = woal_set_get_dtim_period(priv, MLAN_ACT_GET, MOAL_IOCTL_WAIT,<br>                           &amp;dtim_period);</p>\n<p>// file station info, request the driver to fill the tx/rx rate info, request from the firmware.<br>woal_cfg80211_fill_rate_info(priv, sinfo);<br>    rate = (mlan_ds_rate *)req-&gt;pbuf;<br>    rate-&gt;sub_command = MLAN_OID_GET_DATA_RATE;<br>    req-&gt;req_id = MLAN_IOCTL_RATE;<br>    req-&gt;action = MLAN_ACT_GET;<br>    ret = woal_request_ioctl(priv, req, MOAL_IOCTL_WAIT);</p>\n"},{"title":"CODE-ANALYSIS:8-data-rx-process","date":"2022-06-12T06:24:59.000Z","_content":"\nSun Jun  5 12:49:47 CST 2022\n\n\nplease refer hostmlme EAPOL receive process\n\n","source":"_posts/CODE-ANALYSIS-8-data-rx-process.md","raw":"---\ntitle: 'CODE-ANALYSIS:8-data-rx-process'\ndate: 2022-06-12 14:24:59\ntags: code analysis, Wi-Fi, Driver;\n---\n\nSun Jun  5 12:49:47 CST 2022\n\n\nplease refer hostmlme EAPOL receive process\n\n","slug":"CODE-ANALYSIS-8-data-rx-process","published":1,"updated":"2022-06-12T06:25:42.864Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud39000f18jx67g70sn5","content":"<p>Sun Jun  5 12:49:47 CST 2022</p>\n<p>please refer hostmlme EAPOL receive process</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Sun Jun  5 12:49:47 CST 2022</p>\n<p>please refer hostmlme EAPOL receive process</p>\n"},{"title":"CODE-ANALYSIS:9-data-tx-process","date":"2022-06-12T06:25:54.000Z","_content":"\nSun Jun  5 12:16:54 CST 2022\n\nmlan_status\nwoal_init_sta_dev(struct net_device *dev, moal_private *priv)\n\tdev->netdev_ops = &woal_netdev_ops;\n\n\n// upper layer send the data by ndo_start_xmit\n\n/** Network device handlers */\nconst struct net_device_ops woal_netdev_ops = {\n\t.ndo_open = woal_open,\n\t\t.ndo_start_xmit = woal_hard_start_xmit,\n\n\n\n// this function handles packet transmission\nnetdev_tx_t\nwoal_hard_start_xmit(struct sk_buff * skb, struct net_device * dev)\n\n   \twoal_start_xmit(priv, skb);\n\n static int\n woal_start_xmit(moal_private *priv, struct sk_buff *skb)\n  \n // tcp enhance function \n \tif (priv->enable_tcp_ack_enh == MTRUE) {\n\t\t\tret = woal_process_tcp_ack(priv, pmbuf);\n\n\tindex = skb_get_queue_mapping(skb);\n\t\tstatus = mlan_send_packet(priv->phandle->pmlan_adapter, pmbuf);\n\n\n// function to send packet\nmlan_status\nmlan_send_packet(t_void *padapter, pmlan_buffer pmbuf)\n\n   \t\t\twlan_add_buf_bypass_txqueue(pmadapter, pmbuf);\n\n\t\t\tor\n\n\t\t    /* Transmit the packet */\n\t\t    wlan_wmm_add_buf_txqueue(pmadapter, pmbuf);\n\n\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n\t\t\twlan_wmm_process_tx(pmadapter);\n\n// Transmit the highest priority packet awaiting in the WMM Queues\nvoid\nwlan_wmm_process_tx(pmlan_adapter pmadapter)\n\n\n\t\tif (wlan_dequeue_tx_packet(pmadapter))\n\t\t\t\t\tbreak;\n\n// dequeue a packet\nstatic int\nwlan_dequeue_tx_packet(pmlan_adapter pmadapter)\n\n\n     wlan_11n_aggregate_pkt(priv, ptr, priv->intf_hr_len,\n\t \t\t\t\t\t       ptrindex);\n\n\npmbuf_src =\n\t\t(pmlan_buffer)util_dequeue_list(pmadapter->pmoal_handle,\n\t\t\t\t\t\t&pra_list->buf_head,\n\t\t\t\t\t\tMNULL, MNULL);\n\n    \t\tret = pmadapter->ops.host_to_card(priv, MLAN_TYPE_DATA,\n\t\t\t\t\t\t\t\t\t  pmbuf_aggr, &tx_param);\n\n\n\n\n// after this I am reading the Wi-Fi subsystem Linux porting guide\n","source":"_posts/CODE-ANALYSIS-9-data-tx-process.md","raw":"---\ntitle: 'CODE-ANALYSIS:9-data-tx-process'\ndate: 2022-06-12 14:25:54\ntags: code analysis, Wi-Fi, Driver;\n---\n\nSun Jun  5 12:16:54 CST 2022\n\nmlan_status\nwoal_init_sta_dev(struct net_device *dev, moal_private *priv)\n\tdev->netdev_ops = &woal_netdev_ops;\n\n\n// upper layer send the data by ndo_start_xmit\n\n/** Network device handlers */\nconst struct net_device_ops woal_netdev_ops = {\n\t.ndo_open = woal_open,\n\t\t.ndo_start_xmit = woal_hard_start_xmit,\n\n\n\n// this function handles packet transmission\nnetdev_tx_t\nwoal_hard_start_xmit(struct sk_buff * skb, struct net_device * dev)\n\n   \twoal_start_xmit(priv, skb);\n\n static int\n woal_start_xmit(moal_private *priv, struct sk_buff *skb)\n  \n // tcp enhance function \n \tif (priv->enable_tcp_ack_enh == MTRUE) {\n\t\t\tret = woal_process_tcp_ack(priv, pmbuf);\n\n\tindex = skb_get_queue_mapping(skb);\n\t\tstatus = mlan_send_packet(priv->phandle->pmlan_adapter, pmbuf);\n\n\n// function to send packet\nmlan_status\nmlan_send_packet(t_void *padapter, pmlan_buffer pmbuf)\n\n   \t\t\twlan_add_buf_bypass_txqueue(pmadapter, pmbuf);\n\n\t\t\tor\n\n\t\t    /* Transmit the packet */\n\t\t    wlan_wmm_add_buf_txqueue(pmadapter, pmbuf);\n\n\n// The main process\nmlan_status\nmlan_main_process(t_void *padapter)\n\n\t\t\twlan_wmm_process_tx(pmadapter);\n\n// Transmit the highest priority packet awaiting in the WMM Queues\nvoid\nwlan_wmm_process_tx(pmlan_adapter pmadapter)\n\n\n\t\tif (wlan_dequeue_tx_packet(pmadapter))\n\t\t\t\t\tbreak;\n\n// dequeue a packet\nstatic int\nwlan_dequeue_tx_packet(pmlan_adapter pmadapter)\n\n\n     wlan_11n_aggregate_pkt(priv, ptr, priv->intf_hr_len,\n\t \t\t\t\t\t       ptrindex);\n\n\npmbuf_src =\n\t\t(pmlan_buffer)util_dequeue_list(pmadapter->pmoal_handle,\n\t\t\t\t\t\t&pra_list->buf_head,\n\t\t\t\t\t\tMNULL, MNULL);\n\n    \t\tret = pmadapter->ops.host_to_card(priv, MLAN_TYPE_DATA,\n\t\t\t\t\t\t\t\t\t  pmbuf_aggr, &tx_param);\n\n\n\n\n// after this I am reading the Wi-Fi subsystem Linux porting guide\n","slug":"CODE-ANALYSIS-9-data-tx-process","published":1,"updated":"2022-06-12T06:26:44.151Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3b000h18jx7aow85mj","content":"<p>Sun Jun  5 12:16:54 CST 2022</p>\n<p>mlan_status<br>woal_init_sta_dev(struct net_device <em>dev, moal_private </em>priv)<br>    dev-&gt;netdev_ops = &amp;woal_netdev_ops;</p>\n<p>// upper layer send the data by ndo_start_xmit</p>\n<p>/<em>* Network device handlers </em>/<br>const struct net_device_ops woal_netdev_ops = {<br>    .ndo_open = woal_open,<br>        .ndo_start_xmit = woal_hard_start_xmit,</p>\n<p>// this function handles packet transmission<br>netdev_tx_t<br>woal_hard_start_xmit(struct sk_buff <em> skb, struct net_device </em> dev)</p>\n<pre><code>   woal_start_xmit(priv, skb);\n</code></pre><p> static int<br> woal_start_xmit(moal_private <em>priv, struct sk_buff </em>skb)</p>\n<p> // tcp enhance function<br>     if (priv-&gt;enable_tcp_ack_enh == MTRUE) {<br>            ret = woal_process_tcp_ack(priv, pmbuf);</p>\n<pre><code>index = skb_get_queue_mapping(skb);\n    status = mlan_send_packet(priv-&gt;phandle-&gt;pmlan_adapter, pmbuf);\n</code></pre><p>// function to send packet<br>mlan_status<br>mlan_send_packet(t_void *padapter, pmlan_buffer pmbuf)</p>\n<pre><code>           wlan_add_buf_bypass_txqueue(pmadapter, pmbuf);\n\n        or\n\n        /* Transmit the packet */\n        wlan_wmm_add_buf_txqueue(pmadapter, pmbuf);\n</code></pre><p>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<pre><code>        wlan_wmm_process_tx(pmadapter);\n</code></pre><p>// Transmit the highest priority packet awaiting in the WMM Queues<br>void<br>wlan_wmm_process_tx(pmlan_adapter pmadapter)</p>\n<pre><code>    if (wlan_dequeue_tx_packet(pmadapter))\n                break;\n</code></pre><p>// dequeue a packet<br>static int<br>wlan_dequeue_tx_packet(pmlan_adapter pmadapter)</p>\n<pre><code> wlan_11n_aggregate_pkt(priv, ptr, priv-&gt;intf_hr_len,\n                            ptrindex);\n</code></pre><p>pmbuf_src =<br>        (pmlan_buffer)util_dequeue_list(pmadapter-&gt;pmoal_handle,<br>                        &amp;pra_list-&gt;buf_head,<br>                        MNULL, MNULL);</p>\n<pre><code>        ret = pmadapter-&gt;ops.host_to_card(priv, MLAN_TYPE_DATA,\n                                  pmbuf_aggr, &amp;tx_param);\n</code></pre><p>// after this I am reading the Wi-Fi subsystem Linux porting guide</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Sun Jun  5 12:16:54 CST 2022</p>\n<p>mlan_status<br>woal_init_sta_dev(struct net_device <em>dev, moal_private </em>priv)<br>    dev-&gt;netdev_ops = &amp;woal_netdev_ops;</p>\n<p>// upper layer send the data by ndo_start_xmit</p>\n<p>/<em>* Network device handlers </em>/<br>const struct net_device_ops woal_netdev_ops = {<br>    .ndo_open = woal_open,<br>        .ndo_start_xmit = woal_hard_start_xmit,</p>\n<p>// this function handles packet transmission<br>netdev_tx_t<br>woal_hard_start_xmit(struct sk_buff <em> skb, struct net_device </em> dev)</p>\n<pre><code>   woal_start_xmit(priv, skb);\n</code></pre><p> static int<br> woal_start_xmit(moal_private <em>priv, struct sk_buff </em>skb)</p>\n<p> // tcp enhance function<br>     if (priv-&gt;enable_tcp_ack_enh == MTRUE) {<br>            ret = woal_process_tcp_ack(priv, pmbuf);</p>\n<pre><code>index = skb_get_queue_mapping(skb);\n    status = mlan_send_packet(priv-&gt;phandle-&gt;pmlan_adapter, pmbuf);\n</code></pre><p>// function to send packet<br>mlan_status<br>mlan_send_packet(t_void *padapter, pmlan_buffer pmbuf)</p>\n<pre><code>           wlan_add_buf_bypass_txqueue(pmadapter, pmbuf);\n\n        or\n\n        /* Transmit the packet */\n        wlan_wmm_add_buf_txqueue(pmadapter, pmbuf);\n</code></pre><p>// The main process<br>mlan_status<br>mlan_main_process(t_void *padapter)</p>\n<pre><code>        wlan_wmm_process_tx(pmadapter);\n</code></pre><p>// Transmit the highest priority packet awaiting in the WMM Queues<br>void<br>wlan_wmm_process_tx(pmlan_adapter pmadapter)</p>\n<pre><code>    if (wlan_dequeue_tx_packet(pmadapter))\n                break;\n</code></pre><p>// dequeue a packet<br>static int<br>wlan_dequeue_tx_packet(pmlan_adapter pmadapter)</p>\n<pre><code> wlan_11n_aggregate_pkt(priv, ptr, priv-&gt;intf_hr_len,\n                            ptrindex);\n</code></pre><p>pmbuf_src =<br>        (pmlan_buffer)util_dequeue_list(pmadapter-&gt;pmoal_handle,<br>                        &amp;pra_list-&gt;buf_head,<br>                        MNULL, MNULL);</p>\n<pre><code>        ret = pmadapter-&gt;ops.host_to_card(priv, MLAN_TYPE_DATA,\n                                  pmbuf_aggr, &amp;tx_param);\n</code></pre><p>// after this I am reading the Wi-Fi subsystem Linux porting guide</p>\n"},{"title":"CWNA:802.11 MAC 体系结构(三)","date":"2022-02-16T01:22:00.000Z","_content":"### 802.11状态机\n802.11-2016定义了4种客户端状态，称为802.11状态机。旨在使得客户端和接入点能发现彼此并建安全连接。\n\n主动扫描与被动扫描（active/passive scan）------     状态1：未通过验证未建立关联\n\n802.11身份验证成功(authentication request/response) ------          状态2：已通过验证未建立关联\n\n802.11（重）关联成功(association request/response) ------           状态3：已通过验证，已建立关联\n\n四次握手成功(4-way handshake) ------               状态4：以通过验证，已建立关联\n\n\n### 管理帧\nIEEE802.11-2016定义了14种管理帧子类型\n> 关联请求帧\n> 关联响应帧\n> 重关联请求帧\n> 重关联响应帧\n> 探询请求帧\n> 探询响应帧\n> 信标帧\n> 通过流量指示消息\n> 取消关联帧\n> 身份验证帧\n> 解除身份验证帧\n> 行动帧\n> 无确认行动帧\n> 定时通告帧\n\n**信标帧（Beacon)**\n相当于无线网络的心跳消息。接入点利用信标帧向客户端通告基本服务集的所有配置信息。信标帧间隔102.4毫秒，每秒大约发送10次信标帧。\n基本服务集中：接入点广播信标帧，客户端侦听信标帧。\nIBSS中：客户端之间传输信标帧。\n\n信标帧包含的信息\n\n|信息类型|描述|\n|:---:|:---:|\n|时间戳|同步信息|\n|扩频参数集|FHSS、OFDM等|\n|SSID|无线局域网的逻辑名|\n|数据速率|基本速率和支持速率|\n|服务集功能|额外的BSS或IBSS参数|\n|信道信息|接入点或IBSS使用的信道|\n|流量指示图|节电过程使用的字段|\n|BSS负载|802.11e指定的字段，能有效指示信道利用率|\n|Qos功能|服务质量和增强型分布式信道访问信息|\n|RSN功能|TKIP或CCMP密码信息和身份验证机制|\n|HT与VHT功能|802.11n和802.11ac功能|\n|供应商专有信息|特定于供应商的信息|\n\n1.被动扫描\n客户端必须发现接入点才能进行连接。\n客户端进行被动扫描时，将侦听接入点不断发送的信标帧(Beacon)。\n\n不足之处，信标帧仅在接入点使用的信道对外广播。\n\n2.主动扫描\n客户端发送探询帧，它既可以包括客户端正在查找的特定无线局域网的SSID，也可以搜索任何SSID。\n探询帧SSID字段为空：查找所有可能的SSID\n探询帧SSID字段存在：查找特定的SSID。\n\n探询响应帧(probe request)，用于回复探询请求帧。（probe response)\n\n主动扫描通过所有可用信道发送探询请求帧。\n\n客户端即便已经关联到接入点并开始传输数据，客户端一般也会实施信道外扫描（off-channel scanning),并继续每隔几秒就利用其他信道发送探询请求帧。\n主要目的是寻找可能漫游到其他接入点，通过off-channel scanning 客户端维护并更新一份已知接入点列表，从而在需要的时可以更快、更有效进行地漫游。\n\n**身份验证帧（authentication）**\n相当于验证两台设备是否是有效的802.11设备，客户端与接入点之间建立初步连接。802.11状态机进入状态2\n两种身份验证机制：\n1.共享密钥身份验证（早已过时）\n2.开放系统身份验证\n它不对客户端的身份做任何验证，本质是属于客户端与接入点之间的问候交换过程。\n\n**关联帧(association)**\n客户端向接入点验证自己的身份后，接下来将与接入点建立关联，关联到接入点的客户端称为基本服务集的成员。802.11状态机进入状态3\n关联请求帧（association request）的关联响应帧（association response）的帧体包含管理标识符（AID），每个关联的客户端唯一。\n如果不配做RSN安全，客户端可以请求IP地址并开始上层通信。\n如果接入点配置了预共享密钥或802.1X/EAP作为身份验证机制，双方还需要进行四次握手(4-way handshake)的帧交换，以便创建动态加密密钥。802.11状态机进入状态4，成为基本服务集的成员。\n\n如果客户端不能使用所有的基本速率，就无法关联到接入点，也不会获准加入基本服务集。\n\n**重关联帧(reassociation)**\n客户端与接入点的重关联过程：\n1）客户端向新接入点发送重关联帧；\n2）新接入点向客户端回复确认帧；\n3）新接入点尝试利用分布介质（DSM）与原接入点通信，获取漫游客户端的信息，并请求接入点转发所有缓存数据。（这部分是供应商专有）\n4）如果通信成功，原接入点将使用分布介质向新接入点转发所有缓冲数据。\n5）新接入点通过无线介质向漫游客户端发送重关联响应帧。\n6）客户端向新接入点回复确认帧，并准备漫游。\n7）如果加密了，进行四次握手帧交换，以便在两个无线接口之间生成唯一的加密密钥。\n\n**取消关联帧(deassociation)**\n取消关联属于通知而非请求，包括原因代码。802.11状态机由4/3 切换到2\n\n**解除身份验证帧(deauthentication)**\n属于通知而非请求，包括原因代码。802.11状态机由4/3/2 切换到1\n\n**行动帧(action)**\n用于触发基本服务集的特定操作，旨在为准备执行的操作提供信息和指示。\n由于管理帧的子类型已经耗尽，802.11h修正案首次引入行动帧。（Action)\n\nAction帧结构\n\n|帧控制|持续时间|目的地址|源地址|BSSID|序列控制|类别|行动|元素|FCS|\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|2|2|6|6|6|2|1|1|varialble|4|\n\n行动帧的帧体由3部分构成：\n类别：描述行动帧的类型\n操作：准备执行的操作\n元素：添加有关操作的其他信息。\n\n","source":"_posts/CWNA-802-11-MAC-体系结构-三.md","raw":"---\ntitle: 'CWNA:802.11 MAC 体系结构(三)'\ndate: 2022-02-16 09:22:00\ntags: 'Wi-Fi'\n---\n### 802.11状态机\n802.11-2016定义了4种客户端状态，称为802.11状态机。旨在使得客户端和接入点能发现彼此并建安全连接。\n\n主动扫描与被动扫描（active/passive scan）------     状态1：未通过验证未建立关联\n\n802.11身份验证成功(authentication request/response) ------          状态2：已通过验证未建立关联\n\n802.11（重）关联成功(association request/response) ------           状态3：已通过验证，已建立关联\n\n四次握手成功(4-way handshake) ------               状态4：以通过验证，已建立关联\n\n\n### 管理帧\nIEEE802.11-2016定义了14种管理帧子类型\n> 关联请求帧\n> 关联响应帧\n> 重关联请求帧\n> 重关联响应帧\n> 探询请求帧\n> 探询响应帧\n> 信标帧\n> 通过流量指示消息\n> 取消关联帧\n> 身份验证帧\n> 解除身份验证帧\n> 行动帧\n> 无确认行动帧\n> 定时通告帧\n\n**信标帧（Beacon)**\n相当于无线网络的心跳消息。接入点利用信标帧向客户端通告基本服务集的所有配置信息。信标帧间隔102.4毫秒，每秒大约发送10次信标帧。\n基本服务集中：接入点广播信标帧，客户端侦听信标帧。\nIBSS中：客户端之间传输信标帧。\n\n信标帧包含的信息\n\n|信息类型|描述|\n|:---:|:---:|\n|时间戳|同步信息|\n|扩频参数集|FHSS、OFDM等|\n|SSID|无线局域网的逻辑名|\n|数据速率|基本速率和支持速率|\n|服务集功能|额外的BSS或IBSS参数|\n|信道信息|接入点或IBSS使用的信道|\n|流量指示图|节电过程使用的字段|\n|BSS负载|802.11e指定的字段，能有效指示信道利用率|\n|Qos功能|服务质量和增强型分布式信道访问信息|\n|RSN功能|TKIP或CCMP密码信息和身份验证机制|\n|HT与VHT功能|802.11n和802.11ac功能|\n|供应商专有信息|特定于供应商的信息|\n\n1.被动扫描\n客户端必须发现接入点才能进行连接。\n客户端进行被动扫描时，将侦听接入点不断发送的信标帧(Beacon)。\n\n不足之处，信标帧仅在接入点使用的信道对外广播。\n\n2.主动扫描\n客户端发送探询帧，它既可以包括客户端正在查找的特定无线局域网的SSID，也可以搜索任何SSID。\n探询帧SSID字段为空：查找所有可能的SSID\n探询帧SSID字段存在：查找特定的SSID。\n\n探询响应帧(probe request)，用于回复探询请求帧。（probe response)\n\n主动扫描通过所有可用信道发送探询请求帧。\n\n客户端即便已经关联到接入点并开始传输数据，客户端一般也会实施信道外扫描（off-channel scanning),并继续每隔几秒就利用其他信道发送探询请求帧。\n主要目的是寻找可能漫游到其他接入点，通过off-channel scanning 客户端维护并更新一份已知接入点列表，从而在需要的时可以更快、更有效进行地漫游。\n\n**身份验证帧（authentication）**\n相当于验证两台设备是否是有效的802.11设备，客户端与接入点之间建立初步连接。802.11状态机进入状态2\n两种身份验证机制：\n1.共享密钥身份验证（早已过时）\n2.开放系统身份验证\n它不对客户端的身份做任何验证，本质是属于客户端与接入点之间的问候交换过程。\n\n**关联帧(association)**\n客户端向接入点验证自己的身份后，接下来将与接入点建立关联，关联到接入点的客户端称为基本服务集的成员。802.11状态机进入状态3\n关联请求帧（association request）的关联响应帧（association response）的帧体包含管理标识符（AID），每个关联的客户端唯一。\n如果不配做RSN安全，客户端可以请求IP地址并开始上层通信。\n如果接入点配置了预共享密钥或802.1X/EAP作为身份验证机制，双方还需要进行四次握手(4-way handshake)的帧交换，以便创建动态加密密钥。802.11状态机进入状态4，成为基本服务集的成员。\n\n如果客户端不能使用所有的基本速率，就无法关联到接入点，也不会获准加入基本服务集。\n\n**重关联帧(reassociation)**\n客户端与接入点的重关联过程：\n1）客户端向新接入点发送重关联帧；\n2）新接入点向客户端回复确认帧；\n3）新接入点尝试利用分布介质（DSM）与原接入点通信，获取漫游客户端的信息，并请求接入点转发所有缓存数据。（这部分是供应商专有）\n4）如果通信成功，原接入点将使用分布介质向新接入点转发所有缓冲数据。\n5）新接入点通过无线介质向漫游客户端发送重关联响应帧。\n6）客户端向新接入点回复确认帧，并准备漫游。\n7）如果加密了，进行四次握手帧交换，以便在两个无线接口之间生成唯一的加密密钥。\n\n**取消关联帧(deassociation)**\n取消关联属于通知而非请求，包括原因代码。802.11状态机由4/3 切换到2\n\n**解除身份验证帧(deauthentication)**\n属于通知而非请求，包括原因代码。802.11状态机由4/3/2 切换到1\n\n**行动帧(action)**\n用于触发基本服务集的特定操作，旨在为准备执行的操作提供信息和指示。\n由于管理帧的子类型已经耗尽，802.11h修正案首次引入行动帧。（Action)\n\nAction帧结构\n\n|帧控制|持续时间|目的地址|源地址|BSSID|序列控制|类别|行动|元素|FCS|\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|2|2|6|6|6|2|1|1|varialble|4|\n\n行动帧的帧体由3部分构成：\n类别：描述行动帧的类型\n操作：准备执行的操作\n元素：添加有关操作的其他信息。\n\n","slug":"CWNA-802-11-MAC-体系结构-三","published":1,"updated":"2022-02-18T07:24:08.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3c000j18jxe8al48xo","content":"<h3 id=\"802-11状态机\"><a href=\"#802-11状态机\" class=\"headerlink\" title=\"802.11状态机\"></a>802.11状态机</h3><p>802.11-2016定义了4种客户端状态，称为802.11状态机。旨在使得客户端和接入点能发现彼此并建安全连接。</p>\n<p>主动扫描与被动扫描（active/passive scan）———     状态1：未通过验证未建立关联</p>\n<p>802.11身份验证成功(authentication request/response) ———          状态2：已通过验证未建立关联</p>\n<p>802.11（重）关联成功(association request/response) ———           状态3：已通过验证，已建立关联</p>\n<p>四次握手成功(4-way handshake) ———               状态4：以通过验证，已建立关联</p>\n<h3 id=\"管理帧\"><a href=\"#管理帧\" class=\"headerlink\" title=\"管理帧\"></a>管理帧</h3><p>IEEE802.11-2016定义了14种管理帧子类型</p>\n<blockquote>\n<p>关联请求帧<br>关联响应帧<br>重关联请求帧<br>重关联响应帧<br>探询请求帧<br>探询响应帧<br>信标帧<br>通过流量指示消息<br>取消关联帧<br>身份验证帧<br>解除身份验证帧<br>行动帧<br>无确认行动帧<br>定时通告帧</p>\n</blockquote>\n<p><strong>信标帧（Beacon)</strong><br>相当于无线网络的心跳消息。接入点利用信标帧向客户端通告基本服务集的所有配置信息。信标帧间隔102.4毫秒，每秒大约发送10次信标帧。<br>基本服务集中：接入点广播信标帧，客户端侦听信标帧。<br>IBSS中：客户端之间传输信标帧。</p>\n<p>信标帧包含的信息</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">信息类型</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">时间戳</td>\n<td style=\"text-align:center\">同步信息</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">扩频参数集</td>\n<td style=\"text-align:center\">FHSS、OFDM等</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SSID</td>\n<td style=\"text-align:center\">无线局域网的逻辑名</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">数据速率</td>\n<td style=\"text-align:center\">基本速率和支持速率</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">服务集功能</td>\n<td style=\"text-align:center\">额外的BSS或IBSS参数</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">信道信息</td>\n<td style=\"text-align:center\">接入点或IBSS使用的信道</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">流量指示图</td>\n<td style=\"text-align:center\">节电过程使用的字段</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">BSS负载</td>\n<td style=\"text-align:center\">802.11e指定的字段，能有效指示信道利用率</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Qos功能</td>\n<td style=\"text-align:center\">服务质量和增强型分布式信道访问信息</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">RSN功能</td>\n<td style=\"text-align:center\">TKIP或CCMP密码信息和身份验证机制</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">HT与VHT功能</td>\n<td style=\"text-align:center\">802.11n和802.11ac功能</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">供应商专有信息</td>\n<td style=\"text-align:center\">特定于供应商的信息</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>1.被动扫描<br>客户端必须发现接入点才能进行连接。<br>客户端进行被动扫描时，将侦听接入点不断发送的信标帧(Beacon)。</p>\n<p>不足之处，信标帧仅在接入点使用的信道对外广播。</p>\n<p>2.主动扫描<br>客户端发送探询帧，它既可以包括客户端正在查找的特定无线局域网的SSID，也可以搜索任何SSID。<br>探询帧SSID字段为空：查找所有可能的SSID<br>探询帧SSID字段存在：查找特定的SSID。</p>\n<p>探询响应帧(probe request)，用于回复探询请求帧。（probe response)</p>\n<p>主动扫描通过所有可用信道发送探询请求帧。</p>\n<p>客户端即便已经关联到接入点并开始传输数据，客户端一般也会实施信道外扫描（off-channel scanning),并继续每隔几秒就利用其他信道发送探询请求帧。<br>主要目的是寻找可能漫游到其他接入点，通过off-channel scanning 客户端维护并更新一份已知接入点列表，从而在需要的时可以更快、更有效进行地漫游。</p>\n<p><strong>身份验证帧（authentication）</strong><br>相当于验证两台设备是否是有效的802.11设备，客户端与接入点之间建立初步连接。802.11状态机进入状态2<br>两种身份验证机制：<br>1.共享密钥身份验证（早已过时）<br>2.开放系统身份验证<br>它不对客户端的身份做任何验证，本质是属于客户端与接入点之间的问候交换过程。</p>\n<p><strong>关联帧(association)</strong><br>客户端向接入点验证自己的身份后，接下来将与接入点建立关联，关联到接入点的客户端称为基本服务集的成员。802.11状态机进入状态3<br>关联请求帧（association request）的关联响应帧（association response）的帧体包含管理标识符（AID），每个关联的客户端唯一。<br>如果不配做RSN安全，客户端可以请求IP地址并开始上层通信。<br>如果接入点配置了预共享密钥或802.1X/EAP作为身份验证机制，双方还需要进行四次握手(4-way handshake)的帧交换，以便创建动态加密密钥。802.11状态机进入状态4，成为基本服务集的成员。</p>\n<p>如果客户端不能使用所有的基本速率，就无法关联到接入点，也不会获准加入基本服务集。</p>\n<p><strong>重关联帧(reassociation)</strong><br>客户端与接入点的重关联过程：<br>1）客户端向新接入点发送重关联帧；<br>2）新接入点向客户端回复确认帧；<br>3）新接入点尝试利用分布介质（DSM）与原接入点通信，获取漫游客户端的信息，并请求接入点转发所有缓存数据。（这部分是供应商专有）<br>4）如果通信成功，原接入点将使用分布介质向新接入点转发所有缓冲数据。<br>5）新接入点通过无线介质向漫游客户端发送重关联响应帧。<br>6）客户端向新接入点回复确认帧，并准备漫游。<br>7）如果加密了，进行四次握手帧交换，以便在两个无线接口之间生成唯一的加密密钥。</p>\n<p><strong>取消关联帧(deassociation)</strong><br>取消关联属于通知而非请求，包括原因代码。802.11状态机由4/3 切换到2</p>\n<p><strong>解除身份验证帧(deauthentication)</strong><br>属于通知而非请求，包括原因代码。802.11状态机由4/3/2 切换到1</p>\n<p><strong>行动帧(action)</strong><br>用于触发基本服务集的特定操作，旨在为准备执行的操作提供信息和指示。<br>由于管理帧的子类型已经耗尽，802.11h修正案首次引入行动帧。（Action)</p>\n<p>Action帧结构</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">帧控制</th>\n<th style=\"text-align:center\">持续时间</th>\n<th style=\"text-align:center\">目的地址</th>\n<th style=\"text-align:center\">源地址</th>\n<th style=\"text-align:center\">BSSID</th>\n<th style=\"text-align:center\">序列控制</th>\n<th style=\"text-align:center\">类别</th>\n<th style=\"text-align:center\">行动</th>\n<th style=\"text-align:center\">元素</th>\n<th style=\"text-align:center\">FCS</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">varialble</td>\n<td style=\"text-align:center\">4</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>行动帧的帧体由3部分构成：<br>类别：描述行动帧的类型<br>操作：准备执行的操作<br>元素：添加有关操作的其他信息。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"802-11状态机\"><a href=\"#802-11状态机\" class=\"headerlink\" title=\"802.11状态机\"></a>802.11状态机</h3><p>802.11-2016定义了4种客户端状态，称为802.11状态机。旨在使得客户端和接入点能发现彼此并建安全连接。</p>\n<p>主动扫描与被动扫描（active/passive scan）———     状态1：未通过验证未建立关联</p>\n<p>802.11身份验证成功(authentication request/response) ———          状态2：已通过验证未建立关联</p>\n<p>802.11（重）关联成功(association request/response) ———           状态3：已通过验证，已建立关联</p>\n<p>四次握手成功(4-way handshake) ———               状态4：以通过验证，已建立关联</p>\n<h3 id=\"管理帧\"><a href=\"#管理帧\" class=\"headerlink\" title=\"管理帧\"></a>管理帧</h3><p>IEEE802.11-2016定义了14种管理帧子类型</p>\n<blockquote>\n<p>关联请求帧<br>关联响应帧<br>重关联请求帧<br>重关联响应帧<br>探询请求帧<br>探询响应帧<br>信标帧<br>通过流量指示消息<br>取消关联帧<br>身份验证帧<br>解除身份验证帧<br>行动帧<br>无确认行动帧<br>定时通告帧</p>\n</blockquote>\n<p><strong>信标帧（Beacon)</strong><br>相当于无线网络的心跳消息。接入点利用信标帧向客户端通告基本服务集的所有配置信息。信标帧间隔102.4毫秒，每秒大约发送10次信标帧。<br>基本服务集中：接入点广播信标帧，客户端侦听信标帧。<br>IBSS中：客户端之间传输信标帧。</p>\n<p>信标帧包含的信息</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">信息类型</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">时间戳</td>\n<td style=\"text-align:center\">同步信息</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">扩频参数集</td>\n<td style=\"text-align:center\">FHSS、OFDM等</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SSID</td>\n<td style=\"text-align:center\">无线局域网的逻辑名</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">数据速率</td>\n<td style=\"text-align:center\">基本速率和支持速率</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">服务集功能</td>\n<td style=\"text-align:center\">额外的BSS或IBSS参数</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">信道信息</td>\n<td style=\"text-align:center\">接入点或IBSS使用的信道</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">流量指示图</td>\n<td style=\"text-align:center\">节电过程使用的字段</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">BSS负载</td>\n<td style=\"text-align:center\">802.11e指定的字段，能有效指示信道利用率</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Qos功能</td>\n<td style=\"text-align:center\">服务质量和增强型分布式信道访问信息</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">RSN功能</td>\n<td style=\"text-align:center\">TKIP或CCMP密码信息和身份验证机制</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">HT与VHT功能</td>\n<td style=\"text-align:center\">802.11n和802.11ac功能</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">供应商专有信息</td>\n<td style=\"text-align:center\">特定于供应商的信息</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>1.被动扫描<br>客户端必须发现接入点才能进行连接。<br>客户端进行被动扫描时，将侦听接入点不断发送的信标帧(Beacon)。</p>\n<p>不足之处，信标帧仅在接入点使用的信道对外广播。</p>\n<p>2.主动扫描<br>客户端发送探询帧，它既可以包括客户端正在查找的特定无线局域网的SSID，也可以搜索任何SSID。<br>探询帧SSID字段为空：查找所有可能的SSID<br>探询帧SSID字段存在：查找特定的SSID。</p>\n<p>探询响应帧(probe request)，用于回复探询请求帧。（probe response)</p>\n<p>主动扫描通过所有可用信道发送探询请求帧。</p>\n<p>客户端即便已经关联到接入点并开始传输数据，客户端一般也会实施信道外扫描（off-channel scanning),并继续每隔几秒就利用其他信道发送探询请求帧。<br>主要目的是寻找可能漫游到其他接入点，通过off-channel scanning 客户端维护并更新一份已知接入点列表，从而在需要的时可以更快、更有效进行地漫游。</p>\n<p><strong>身份验证帧（authentication）</strong><br>相当于验证两台设备是否是有效的802.11设备，客户端与接入点之间建立初步连接。802.11状态机进入状态2<br>两种身份验证机制：<br>1.共享密钥身份验证（早已过时）<br>2.开放系统身份验证<br>它不对客户端的身份做任何验证，本质是属于客户端与接入点之间的问候交换过程。</p>\n<p><strong>关联帧(association)</strong><br>客户端向接入点验证自己的身份后，接下来将与接入点建立关联，关联到接入点的客户端称为基本服务集的成员。802.11状态机进入状态3<br>关联请求帧（association request）的关联响应帧（association response）的帧体包含管理标识符（AID），每个关联的客户端唯一。<br>如果不配做RSN安全，客户端可以请求IP地址并开始上层通信。<br>如果接入点配置了预共享密钥或802.1X/EAP作为身份验证机制，双方还需要进行四次握手(4-way handshake)的帧交换，以便创建动态加密密钥。802.11状态机进入状态4，成为基本服务集的成员。</p>\n<p>如果客户端不能使用所有的基本速率，就无法关联到接入点，也不会获准加入基本服务集。</p>\n<p><strong>重关联帧(reassociation)</strong><br>客户端与接入点的重关联过程：<br>1）客户端向新接入点发送重关联帧；<br>2）新接入点向客户端回复确认帧；<br>3）新接入点尝试利用分布介质（DSM）与原接入点通信，获取漫游客户端的信息，并请求接入点转发所有缓存数据。（这部分是供应商专有）<br>4）如果通信成功，原接入点将使用分布介质向新接入点转发所有缓冲数据。<br>5）新接入点通过无线介质向漫游客户端发送重关联响应帧。<br>6）客户端向新接入点回复确认帧，并准备漫游。<br>7）如果加密了，进行四次握手帧交换，以便在两个无线接口之间生成唯一的加密密钥。</p>\n<p><strong>取消关联帧(deassociation)</strong><br>取消关联属于通知而非请求，包括原因代码。802.11状态机由4/3 切换到2</p>\n<p><strong>解除身份验证帧(deauthentication)</strong><br>属于通知而非请求，包括原因代码。802.11状态机由4/3/2 切换到1</p>\n<p><strong>行动帧(action)</strong><br>用于触发基本服务集的特定操作，旨在为准备执行的操作提供信息和指示。<br>由于管理帧的子类型已经耗尽，802.11h修正案首次引入行动帧。（Action)</p>\n<p>Action帧结构</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">帧控制</th>\n<th style=\"text-align:center\">持续时间</th>\n<th style=\"text-align:center\">目的地址</th>\n<th style=\"text-align:center\">源地址</th>\n<th style=\"text-align:center\">BSSID</th>\n<th style=\"text-align:center\">序列控制</th>\n<th style=\"text-align:center\">类别</th>\n<th style=\"text-align:center\">行动</th>\n<th style=\"text-align:center\">元素</th>\n<th style=\"text-align:center\">FCS</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">varialble</td>\n<td style=\"text-align:center\">4</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>行动帧的帧体由3部分构成：<br>类别：描述行动帧的类型<br>操作：准备执行的操作<br>元素：添加有关操作的其他信息。</p>\n"},{"title":"CWNA:802.11 MAC 体系结构(二)","date":"2022-02-15T02:03:56.000Z","_content":"\n### 802.11 MAC 帧头\nMAC帧头属于二层信息，二层信息没有加密，可以通过协议分析仪查看内容。\nMAC帧头由9个字段构成，4个字段用于寻址，5个字段用于控制\n\n|帧控制|持续时间/ID|地址1|地址2|地址3|序列控制|地址4|QoS控制|HT控制|\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|2字节|2|6|0 or 6|0 or 6|0 or 2|0 or 6|0 or 2|0 or 4|\n\n**帧控制字段**\n\n|协议版本|类型|子类型|发往DS|来自DS|更多分片|重试|电源管理|更多数据|受保护帧|+HTC/顺序|\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|2|2|4|1|1|1|1|1|1|1|1|\n\n目前协议版本只有一种，值为0\n帧类型四种：\n管理帧（00）， 发现接入点并加入基本服务集\n控制帧（01）， 确认传输成功并保留无线介质\n数据帧（10）， 携带上层MSDU净荷\n扩展帧（11）， 一种新的灵活帧格式，仅用于802.11ad\n\n由于帧类型多，类型和子类型字段共同决定帧类型，具体子类型可以抓控制包查看。\n\n\n重试字段，802.11 MAC帧头中最重要的字段之一。\n0：表示首次传输\n1：表示重传\n可以通过重试字段设置为1的管理帧和数据帧计算二层重传率。\n\n受保护帧字段，标识数据帧的MSDU净荷是否加密。\n0：未加密\n1：加密\n\n\n**持续时间/ID字段**\n多数情况，持续时间字段用于虚载波监听，用来设置NAV的倒数计数器；\n个别情况，遗留的电源管理，客户端利用节电轮询帧的持续时间/ID向接入点通过电源管理状态。\n\n**MAC 寻址**\nMAC地址分为两类：\n单地址，分配给网络中唯一终端的地址\n组地址，一个和多个终端使用的目的地址\n多播地址，上层实体用于定义终端逻辑组的地址\n广播地址，FF:FF:FF:FF:FF:FF\n\nMAC地址6字节：\n前三个字节，组织唯一标识符（OUI)\n后三个字节，扩展标识符\n\n源地址（SA)，原发终端的MAC地址；\n目的地址(DA)，二层帧最终目的地的MAC地址；\n发射机地址(TA)，发送端802.11无线接口的MAC地址\n接收机地址(RA)，接收端802.11无线接口的MAC地址\n\n\n**发往DS和来自DS字段**\n00  常用于管理帧和控制帧\n01  表示接入点向客户端发送802.11数据帧（下行传输）\n10  表示客户端向接入点发送802.11数据帧（上行传输）\n11  表示使用无线分布系统，需要4个地址，源和目的通过中间的发送和接收转接。\n\n**序列控制字段**\n两字节，在802.11 MSDU分片时使用。\n分片总是在帧突发中传输，较小分片会降低数据吞吐量。\n支持帧聚合和块确认的802.11n/ac网络不需要分片机制。\n\n**Qos控制字段**\n2字节，仅有Qos数据帧的帧头使用该字段。\n\n**HT控制字段**\n用于802.11n/ac发射机和接收机的链路自适应、发射波束成形等高级功能。\n\n### 802.11 MAC 帧体\n控制帧没有帧体。\n802.11管理帧又称MAC管理协议数据单元（MMPDU），不携带任何上层信息。帧体包含二层信息字段和信息原始。帧体没有加密。\n数据帧，携带上层信息，可以通过加密来保护。\nnull data的数据帧也没有帧体。特殊功能。\n\n\n### 802.11 MAC 帧尾\n携带整个帧数据完整性校验信息。\n帧校验失败，将导致帧重传。\n","source":"_posts/CWNA-802-11-MAC-体系结构-二.md","raw":"---\ntitle: 'CWNA:802.11 MAC 体系结构(二)'\ndate: 2022-02-15 10:03:56\ntags: 'Wi-Fi'\n---\n\n### 802.11 MAC 帧头\nMAC帧头属于二层信息，二层信息没有加密，可以通过协议分析仪查看内容。\nMAC帧头由9个字段构成，4个字段用于寻址，5个字段用于控制\n\n|帧控制|持续时间/ID|地址1|地址2|地址3|序列控制|地址4|QoS控制|HT控制|\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|2字节|2|6|0 or 6|0 or 6|0 or 2|0 or 6|0 or 2|0 or 4|\n\n**帧控制字段**\n\n|协议版本|类型|子类型|发往DS|来自DS|更多分片|重试|电源管理|更多数据|受保护帧|+HTC/顺序|\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|2|2|4|1|1|1|1|1|1|1|1|\n\n目前协议版本只有一种，值为0\n帧类型四种：\n管理帧（00）， 发现接入点并加入基本服务集\n控制帧（01）， 确认传输成功并保留无线介质\n数据帧（10）， 携带上层MSDU净荷\n扩展帧（11）， 一种新的灵活帧格式，仅用于802.11ad\n\n由于帧类型多，类型和子类型字段共同决定帧类型，具体子类型可以抓控制包查看。\n\n\n重试字段，802.11 MAC帧头中最重要的字段之一。\n0：表示首次传输\n1：表示重传\n可以通过重试字段设置为1的管理帧和数据帧计算二层重传率。\n\n受保护帧字段，标识数据帧的MSDU净荷是否加密。\n0：未加密\n1：加密\n\n\n**持续时间/ID字段**\n多数情况，持续时间字段用于虚载波监听，用来设置NAV的倒数计数器；\n个别情况，遗留的电源管理，客户端利用节电轮询帧的持续时间/ID向接入点通过电源管理状态。\n\n**MAC 寻址**\nMAC地址分为两类：\n单地址，分配给网络中唯一终端的地址\n组地址，一个和多个终端使用的目的地址\n多播地址，上层实体用于定义终端逻辑组的地址\n广播地址，FF:FF:FF:FF:FF:FF\n\nMAC地址6字节：\n前三个字节，组织唯一标识符（OUI)\n后三个字节，扩展标识符\n\n源地址（SA)，原发终端的MAC地址；\n目的地址(DA)，二层帧最终目的地的MAC地址；\n发射机地址(TA)，发送端802.11无线接口的MAC地址\n接收机地址(RA)，接收端802.11无线接口的MAC地址\n\n\n**发往DS和来自DS字段**\n00  常用于管理帧和控制帧\n01  表示接入点向客户端发送802.11数据帧（下行传输）\n10  表示客户端向接入点发送802.11数据帧（上行传输）\n11  表示使用无线分布系统，需要4个地址，源和目的通过中间的发送和接收转接。\n\n**序列控制字段**\n两字节，在802.11 MSDU分片时使用。\n分片总是在帧突发中传输，较小分片会降低数据吞吐量。\n支持帧聚合和块确认的802.11n/ac网络不需要分片机制。\n\n**Qos控制字段**\n2字节，仅有Qos数据帧的帧头使用该字段。\n\n**HT控制字段**\n用于802.11n/ac发射机和接收机的链路自适应、发射波束成形等高级功能。\n\n### 802.11 MAC 帧体\n控制帧没有帧体。\n802.11管理帧又称MAC管理协议数据单元（MMPDU），不携带任何上层信息。帧体包含二层信息字段和信息原始。帧体没有加密。\n数据帧，携带上层信息，可以通过加密来保护。\nnull data的数据帧也没有帧体。特殊功能。\n\n\n### 802.11 MAC 帧尾\n携带整个帧数据完整性校验信息。\n帧校验失败，将导致帧重传。\n","slug":"CWNA-802-11-MAC-体系结构-二","published":1,"updated":"2022-02-15T09:35:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3e000l18jxbiie81nq","content":"<h3 id=\"802-11-MAC-帧头\"><a href=\"#802-11-MAC-帧头\" class=\"headerlink\" title=\"802.11 MAC 帧头\"></a>802.11 MAC 帧头</h3><p>MAC帧头属于二层信息，二层信息没有加密，可以通过协议分析仪查看内容。<br>MAC帧头由9个字段构成，4个字段用于寻址，5个字段用于控制</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">帧控制</th>\n<th style=\"text-align:center\">持续时间/ID</th>\n<th style=\"text-align:center\">地址1</th>\n<th style=\"text-align:center\">地址2</th>\n<th style=\"text-align:center\">地址3</th>\n<th style=\"text-align:center\">序列控制</th>\n<th style=\"text-align:center\">地址4</th>\n<th style=\"text-align:center\">QoS控制</th>\n<th style=\"text-align:center\">HT控制</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">2字节</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">0 or 6</td>\n<td style=\"text-align:center\">0 or 6</td>\n<td style=\"text-align:center\">0 or 2</td>\n<td style=\"text-align:center\">0 or 6</td>\n<td style=\"text-align:center\">0 or 2</td>\n<td style=\"text-align:center\">0 or 4</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>帧控制字段</strong></p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">协议版本</th>\n<th style=\"text-align:center\">类型</th>\n<th style=\"text-align:center\">子类型</th>\n<th style=\"text-align:center\">发往DS</th>\n<th style=\"text-align:center\">来自DS</th>\n<th style=\"text-align:center\">更多分片</th>\n<th style=\"text-align:center\">重试</th>\n<th style=\"text-align:center\">电源管理</th>\n<th style=\"text-align:center\">更多数据</th>\n<th style=\"text-align:center\">受保护帧</th>\n<th style=\"text-align:center\">+HTC/顺序</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>目前协议版本只有一种，值为0<br>帧类型四种：<br>管理帧（00）， 发现接入点并加入基本服务集<br>控制帧（01）， 确认传输成功并保留无线介质<br>数据帧（10）， 携带上层MSDU净荷<br>扩展帧（11）， 一种新的灵活帧格式，仅用于802.11ad</p>\n<p>由于帧类型多，类型和子类型字段共同决定帧类型，具体子类型可以抓控制包查看。</p>\n<p>重试字段，802.11 MAC帧头中最重要的字段之一。<br>0：表示首次传输<br>1：表示重传<br>可以通过重试字段设置为1的管理帧和数据帧计算二层重传率。</p>\n<p>受保护帧字段，标识数据帧的MSDU净荷是否加密。<br>0：未加密<br>1：加密</p>\n<p><strong>持续时间/ID字段</strong><br>多数情况，持续时间字段用于虚载波监听，用来设置NAV的倒数计数器；<br>个别情况，遗留的电源管理，客户端利用节电轮询帧的持续时间/ID向接入点通过电源管理状态。</p>\n<p><strong>MAC 寻址</strong><br>MAC地址分为两类：<br>单地址，分配给网络中唯一终端的地址<br>组地址，一个和多个终端使用的目的地址<br>多播地址，上层实体用于定义终端逻辑组的地址<br>广播地址，FF:FF:FF:FF:FF:FF</p>\n<p>MAC地址6字节：<br>前三个字节，组织唯一标识符（OUI)<br>后三个字节，扩展标识符</p>\n<p>源地址（SA)，原发终端的MAC地址；<br>目的地址(DA)，二层帧最终目的地的MAC地址；<br>发射机地址(TA)，发送端802.11无线接口的MAC地址<br>接收机地址(RA)，接收端802.11无线接口的MAC地址</p>\n<p><strong>发往DS和来自DS字段</strong><br>00  常用于管理帧和控制帧<br>01  表示接入点向客户端发送802.11数据帧（下行传输）<br>10  表示客户端向接入点发送802.11数据帧（上行传输）<br>11  表示使用无线分布系统，需要4个地址，源和目的通过中间的发送和接收转接。</p>\n<p><strong>序列控制字段</strong><br>两字节，在802.11 MSDU分片时使用。<br>分片总是在帧突发中传输，较小分片会降低数据吞吐量。<br>支持帧聚合和块确认的802.11n/ac网络不需要分片机制。</p>\n<p><strong>Qos控制字段</strong><br>2字节，仅有Qos数据帧的帧头使用该字段。</p>\n<p><strong>HT控制字段</strong><br>用于802.11n/ac发射机和接收机的链路自适应、发射波束成形等高级功能。</p>\n<h3 id=\"802-11-MAC-帧体\"><a href=\"#802-11-MAC-帧体\" class=\"headerlink\" title=\"802.11 MAC 帧体\"></a>802.11 MAC 帧体</h3><p>控制帧没有帧体。<br>802.11管理帧又称MAC管理协议数据单元（MMPDU），不携带任何上层信息。帧体包含二层信息字段和信息原始。帧体没有加密。<br>数据帧，携带上层信息，可以通过加密来保护。<br>null data的数据帧也没有帧体。特殊功能。</p>\n<h3 id=\"802-11-MAC-帧尾\"><a href=\"#802-11-MAC-帧尾\" class=\"headerlink\" title=\"802.11 MAC 帧尾\"></a>802.11 MAC 帧尾</h3><p>携带整个帧数据完整性校验信息。<br>帧校验失败，将导致帧重传。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"802-11-MAC-帧头\"><a href=\"#802-11-MAC-帧头\" class=\"headerlink\" title=\"802.11 MAC 帧头\"></a>802.11 MAC 帧头</h3><p>MAC帧头属于二层信息，二层信息没有加密，可以通过协议分析仪查看内容。<br>MAC帧头由9个字段构成，4个字段用于寻址，5个字段用于控制</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">帧控制</th>\n<th style=\"text-align:center\">持续时间/ID</th>\n<th style=\"text-align:center\">地址1</th>\n<th style=\"text-align:center\">地址2</th>\n<th style=\"text-align:center\">地址3</th>\n<th style=\"text-align:center\">序列控制</th>\n<th style=\"text-align:center\">地址4</th>\n<th style=\"text-align:center\">QoS控制</th>\n<th style=\"text-align:center\">HT控制</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">2字节</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">0 or 6</td>\n<td style=\"text-align:center\">0 or 6</td>\n<td style=\"text-align:center\">0 or 2</td>\n<td style=\"text-align:center\">0 or 6</td>\n<td style=\"text-align:center\">0 or 2</td>\n<td style=\"text-align:center\">0 or 4</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>帧控制字段</strong></p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">协议版本</th>\n<th style=\"text-align:center\">类型</th>\n<th style=\"text-align:center\">子类型</th>\n<th style=\"text-align:center\">发往DS</th>\n<th style=\"text-align:center\">来自DS</th>\n<th style=\"text-align:center\">更多分片</th>\n<th style=\"text-align:center\">重试</th>\n<th style=\"text-align:center\">电源管理</th>\n<th style=\"text-align:center\">更多数据</th>\n<th style=\"text-align:center\">受保护帧</th>\n<th style=\"text-align:center\">+HTC/顺序</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">1</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>目前协议版本只有一种，值为0<br>帧类型四种：<br>管理帧（00）， 发现接入点并加入基本服务集<br>控制帧（01）， 确认传输成功并保留无线介质<br>数据帧（10）， 携带上层MSDU净荷<br>扩展帧（11）， 一种新的灵活帧格式，仅用于802.11ad</p>\n<p>由于帧类型多，类型和子类型字段共同决定帧类型，具体子类型可以抓控制包查看。</p>\n<p>重试字段，802.11 MAC帧头中最重要的字段之一。<br>0：表示首次传输<br>1：表示重传<br>可以通过重试字段设置为1的管理帧和数据帧计算二层重传率。</p>\n<p>受保护帧字段，标识数据帧的MSDU净荷是否加密。<br>0：未加密<br>1：加密</p>\n<p><strong>持续时间/ID字段</strong><br>多数情况，持续时间字段用于虚载波监听，用来设置NAV的倒数计数器；<br>个别情况，遗留的电源管理，客户端利用节电轮询帧的持续时间/ID向接入点通过电源管理状态。</p>\n<p><strong>MAC 寻址</strong><br>MAC地址分为两类：<br>单地址，分配给网络中唯一终端的地址<br>组地址，一个和多个终端使用的目的地址<br>多播地址，上层实体用于定义终端逻辑组的地址<br>广播地址，FF:FF:FF:FF:FF:FF</p>\n<p>MAC地址6字节：<br>前三个字节，组织唯一标识符（OUI)<br>后三个字节，扩展标识符</p>\n<p>源地址（SA)，原发终端的MAC地址；<br>目的地址(DA)，二层帧最终目的地的MAC地址；<br>发射机地址(TA)，发送端802.11无线接口的MAC地址<br>接收机地址(RA)，接收端802.11无线接口的MAC地址</p>\n<p><strong>发往DS和来自DS字段</strong><br>00  常用于管理帧和控制帧<br>01  表示接入点向客户端发送802.11数据帧（下行传输）<br>10  表示客户端向接入点发送802.11数据帧（上行传输）<br>11  表示使用无线分布系统，需要4个地址，源和目的通过中间的发送和接收转接。</p>\n<p><strong>序列控制字段</strong><br>两字节，在802.11 MSDU分片时使用。<br>分片总是在帧突发中传输，较小分片会降低数据吞吐量。<br>支持帧聚合和块确认的802.11n/ac网络不需要分片机制。</p>\n<p><strong>Qos控制字段</strong><br>2字节，仅有Qos数据帧的帧头使用该字段。</p>\n<p><strong>HT控制字段</strong><br>用于802.11n/ac发射机和接收机的链路自适应、发射波束成形等高级功能。</p>\n<h3 id=\"802-11-MAC-帧体\"><a href=\"#802-11-MAC-帧体\" class=\"headerlink\" title=\"802.11 MAC 帧体\"></a>802.11 MAC 帧体</h3><p>控制帧没有帧体。<br>802.11管理帧又称MAC管理协议数据单元（MMPDU），不携带任何上层信息。帧体包含二层信息字段和信息原始。帧体没有加密。<br>数据帧，携带上层信息，可以通过加密来保护。<br>null data的数据帧也没有帧体。特殊功能。</p>\n<h3 id=\"802-11-MAC-帧尾\"><a href=\"#802-11-MAC-帧尾\" class=\"headerlink\" title=\"802.11 MAC 帧尾\"></a>802.11 MAC 帧尾</h3><p>携带整个帧数据完整性校验信息。<br>帧校验失败，将导致帧重传。</p>\n"},{"title":"CWNA:802.11 MAC 体系结构(五)","date":"2022-02-21T02:11:39.000Z","_content":"\n### 数据帧\nIEEE802.11-2016标准定义了15种数据子类型，11种仅停留在纸面上，4种实际存在的。\n> 数据帧（DATA）\n> 空帧（null data)\n> Qos数据帧(Qos Data)\n> Qos空帧(Qos null data)\n\n只要非Qos 设备作为发送方或接收方参与通信，就必须使用非Qos数据帧。\n\n**不携带数据的数据帧**\n仅由帧头和帧尾构成，帧体中没有MSDU数据。\n\n如果客户端希望通知接入点自己的节电状态有所变化，那么可以调整空帧的电源管理位。\n客户端决定进行信道外扫描时，将向接入点发送一个电源管理位设置为1的空功能帧，收到这个帧后，接入点将就所有传输给客户端的802.11帧存储在缓冲区。\n当客户端返回接入点所在的信道时，将向接入点发送另一个电源管理位设置为0的空功能帧。收到这个空功能帧后，接入点就向客户端发送缓冲帧。（可提高吞吐量）\n\n### 电源管理\n无线主要提供了客户端的移动性，客户端一般使用电池，电源管理主要是为了提高设备的续航能力。\n\n**遗留的电源管理机制**\n主动模式是早期802.11终端使用的电源管理模式，无线终端随时准备发送和接收数据。它不提供任何节电功能。使用该模式的终端获得更高的吞吐量，但电池使用时间通常要更短。\n应将始终与电源相连的终端配置为主动模式。\n\n节电模式，客户端将在一段时间内关闭部分收发组件以减少耗电。\n\n1.流量指示图\n加入基本服务集的客户端将电源管理位设置为1，以此通知接入点启用节电模式。接入点获知客户端处于节电模式，随后将收到的传输给客户端的数据存储在缓冲区中。每当客户端\n关联到接入点时，都会收到关联标识符（AID），接入点通过AID来跟踪与自己建立关联且加入基本服务集的客户端。如果接入点缓冲了客户端的数据，将在下一次发送信标帧时，\n信标帧的流量指示图（TIM）字段就会包括客户端的AID。TIM字段列出了所有需要接收数据的客户端，这些数据存储在接入点的缓冲区中。每个信标帧都会携带客户端的AID，直到\n缓冲区数据传输完毕。\n\n信标帧根据一致的预定时间传输，这段时间称为目标信标传输时间（TBTT）。客户端在短时间内继续保持休眠状态，并及时切换到唤醒状态侦听信标帧。客户端不必在每次信标帧\n发送时保持唤醒状态。\n\n客户端收到信标帧的时候，将查看自己的AID是否出现在TIM中，如果存在，客户端将保持唤醒并向接入点发送节电轮询帧。接入点收到节电轮询帧后，将向客户端发送数据单播帧。\n每个单播帧保护长度1比特的更多数据字段，如果是1，客户端不进入休眠状态继续接收数据。不过客户端需要继续发送ps-poll帧。\n当更多数据字段为0时，客户端重新进入休眠。\n\n2.发送流量指示图\n多播和广播流量传输期间，发送流量指示图（DTIM)用于确保所有使用电源管理的终端保持唤醒状态。\n\n**WMM节电与非调度自动节电传输**\n802.11e定义了改进的电源管理机制，自动节电传输（APSD）。分为两种\n调度自动节电传输（S-APSD）\n非调度自动节电传输（U-APSD）\n\n改进后的优点：\n> 应用可以通过设置休眠期并发送触发帧来控制节电行为。\n> 触发帧和交付方法可以取代节电轮询帧。\n> 客户端可以请求下载缓冲数据，不必等待信标帧。\n> TXOP期间，接入点可以在更快的帧突发中传输所有下行应用流量。\n\n**MIMO电源管理机制**\n空间复用节电，仅保持一条射频链，关闭其他射频链。\n","source":"_posts/CWNA-802-11-MAC-体系结构-五.md","raw":"---\ntitle: 'CWNA:802.11 MAC 体系结构(五)'\ndate: 2022-02-21 10:11:39\ntags: 'Wi-Fi'\n---\n\n### 数据帧\nIEEE802.11-2016标准定义了15种数据子类型，11种仅停留在纸面上，4种实际存在的。\n> 数据帧（DATA）\n> 空帧（null data)\n> Qos数据帧(Qos Data)\n> Qos空帧(Qos null data)\n\n只要非Qos 设备作为发送方或接收方参与通信，就必须使用非Qos数据帧。\n\n**不携带数据的数据帧**\n仅由帧头和帧尾构成，帧体中没有MSDU数据。\n\n如果客户端希望通知接入点自己的节电状态有所变化，那么可以调整空帧的电源管理位。\n客户端决定进行信道外扫描时，将向接入点发送一个电源管理位设置为1的空功能帧，收到这个帧后，接入点将就所有传输给客户端的802.11帧存储在缓冲区。\n当客户端返回接入点所在的信道时，将向接入点发送另一个电源管理位设置为0的空功能帧。收到这个空功能帧后，接入点就向客户端发送缓冲帧。（可提高吞吐量）\n\n### 电源管理\n无线主要提供了客户端的移动性，客户端一般使用电池，电源管理主要是为了提高设备的续航能力。\n\n**遗留的电源管理机制**\n主动模式是早期802.11终端使用的电源管理模式，无线终端随时准备发送和接收数据。它不提供任何节电功能。使用该模式的终端获得更高的吞吐量，但电池使用时间通常要更短。\n应将始终与电源相连的终端配置为主动模式。\n\n节电模式，客户端将在一段时间内关闭部分收发组件以减少耗电。\n\n1.流量指示图\n加入基本服务集的客户端将电源管理位设置为1，以此通知接入点启用节电模式。接入点获知客户端处于节电模式，随后将收到的传输给客户端的数据存储在缓冲区中。每当客户端\n关联到接入点时，都会收到关联标识符（AID），接入点通过AID来跟踪与自己建立关联且加入基本服务集的客户端。如果接入点缓冲了客户端的数据，将在下一次发送信标帧时，\n信标帧的流量指示图（TIM）字段就会包括客户端的AID。TIM字段列出了所有需要接收数据的客户端，这些数据存储在接入点的缓冲区中。每个信标帧都会携带客户端的AID，直到\n缓冲区数据传输完毕。\n\n信标帧根据一致的预定时间传输，这段时间称为目标信标传输时间（TBTT）。客户端在短时间内继续保持休眠状态，并及时切换到唤醒状态侦听信标帧。客户端不必在每次信标帧\n发送时保持唤醒状态。\n\n客户端收到信标帧的时候，将查看自己的AID是否出现在TIM中，如果存在，客户端将保持唤醒并向接入点发送节电轮询帧。接入点收到节电轮询帧后，将向客户端发送数据单播帧。\n每个单播帧保护长度1比特的更多数据字段，如果是1，客户端不进入休眠状态继续接收数据。不过客户端需要继续发送ps-poll帧。\n当更多数据字段为0时，客户端重新进入休眠。\n\n2.发送流量指示图\n多播和广播流量传输期间，发送流量指示图（DTIM)用于确保所有使用电源管理的终端保持唤醒状态。\n\n**WMM节电与非调度自动节电传输**\n802.11e定义了改进的电源管理机制，自动节电传输（APSD）。分为两种\n调度自动节电传输（S-APSD）\n非调度自动节电传输（U-APSD）\n\n改进后的优点：\n> 应用可以通过设置休眠期并发送触发帧来控制节电行为。\n> 触发帧和交付方法可以取代节电轮询帧。\n> 客户端可以请求下载缓冲数据，不必等待信标帧。\n> TXOP期间，接入点可以在更快的帧突发中传输所有下行应用流量。\n\n**MIMO电源管理机制**\n空间复用节电，仅保持一条射频链，关闭其他射频链。\n","slug":"CWNA-802-11-MAC-体系结构-五","published":1,"updated":"2022-02-21T03:39:04.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3f000o18jxc7ph9tth","content":"<h3 id=\"数据帧\"><a href=\"#数据帧\" class=\"headerlink\" title=\"数据帧\"></a>数据帧</h3><p>IEEE802.11-2016标准定义了15种数据子类型，11种仅停留在纸面上，4种实际存在的。</p>\n<blockquote>\n<p>数据帧（DATA）<br>空帧（null data)<br>Qos数据帧(Qos Data)<br>Qos空帧(Qos null data)</p>\n</blockquote>\n<p>只要非Qos 设备作为发送方或接收方参与通信，就必须使用非Qos数据帧。</p>\n<p><strong>不携带数据的数据帧</strong><br>仅由帧头和帧尾构成，帧体中没有MSDU数据。</p>\n<p>如果客户端希望通知接入点自己的节电状态有所变化，那么可以调整空帧的电源管理位。<br>客户端决定进行信道外扫描时，将向接入点发送一个电源管理位设置为1的空功能帧，收到这个帧后，接入点将就所有传输给客户端的802.11帧存储在缓冲区。<br>当客户端返回接入点所在的信道时，将向接入点发送另一个电源管理位设置为0的空功能帧。收到这个空功能帧后，接入点就向客户端发送缓冲帧。（可提高吞吐量）</p>\n<h3 id=\"电源管理\"><a href=\"#电源管理\" class=\"headerlink\" title=\"电源管理\"></a>电源管理</h3><p>无线主要提供了客户端的移动性，客户端一般使用电池，电源管理主要是为了提高设备的续航能力。</p>\n<p><strong>遗留的电源管理机制</strong><br>主动模式是早期802.11终端使用的电源管理模式，无线终端随时准备发送和接收数据。它不提供任何节电功能。使用该模式的终端获得更高的吞吐量，但电池使用时间通常要更短。<br>应将始终与电源相连的终端配置为主动模式。</p>\n<p>节电模式，客户端将在一段时间内关闭部分收发组件以减少耗电。</p>\n<p>1.流量指示图<br>加入基本服务集的客户端将电源管理位设置为1，以此通知接入点启用节电模式。接入点获知客户端处于节电模式，随后将收到的传输给客户端的数据存储在缓冲区中。每当客户端<br>关联到接入点时，都会收到关联标识符（AID），接入点通过AID来跟踪与自己建立关联且加入基本服务集的客户端。如果接入点缓冲了客户端的数据，将在下一次发送信标帧时，<br>信标帧的流量指示图（TIM）字段就会包括客户端的AID。TIM字段列出了所有需要接收数据的客户端，这些数据存储在接入点的缓冲区中。每个信标帧都会携带客户端的AID，直到<br>缓冲区数据传输完毕。</p>\n<p>信标帧根据一致的预定时间传输，这段时间称为目标信标传输时间（TBTT）。客户端在短时间内继续保持休眠状态，并及时切换到唤醒状态侦听信标帧。客户端不必在每次信标帧<br>发送时保持唤醒状态。</p>\n<p>客户端收到信标帧的时候，将查看自己的AID是否出现在TIM中，如果存在，客户端将保持唤醒并向接入点发送节电轮询帧。接入点收到节电轮询帧后，将向客户端发送数据单播帧。<br>每个单播帧保护长度1比特的更多数据字段，如果是1，客户端不进入休眠状态继续接收数据。不过客户端需要继续发送ps-poll帧。<br>当更多数据字段为0时，客户端重新进入休眠。</p>\n<p>2.发送流量指示图<br>多播和广播流量传输期间，发送流量指示图（DTIM)用于确保所有使用电源管理的终端保持唤醒状态。</p>\n<p><strong>WMM节电与非调度自动节电传输</strong><br>802.11e定义了改进的电源管理机制，自动节电传输（APSD）。分为两种<br>调度自动节电传输（S-APSD）<br>非调度自动节电传输（U-APSD）</p>\n<p>改进后的优点：</p>\n<blockquote>\n<p>应用可以通过设置休眠期并发送触发帧来控制节电行为。<br>触发帧和交付方法可以取代节电轮询帧。<br>客户端可以请求下载缓冲数据，不必等待信标帧。<br>TXOP期间，接入点可以在更快的帧突发中传输所有下行应用流量。</p>\n</blockquote>\n<p><strong>MIMO电源管理机制</strong><br>空间复用节电，仅保持一条射频链，关闭其他射频链。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"数据帧\"><a href=\"#数据帧\" class=\"headerlink\" title=\"数据帧\"></a>数据帧</h3><p>IEEE802.11-2016标准定义了15种数据子类型，11种仅停留在纸面上，4种实际存在的。</p>\n<blockquote>\n<p>数据帧（DATA）<br>空帧（null data)<br>Qos数据帧(Qos Data)<br>Qos空帧(Qos null data)</p>\n</blockquote>\n<p>只要非Qos 设备作为发送方或接收方参与通信，就必须使用非Qos数据帧。</p>\n<p><strong>不携带数据的数据帧</strong><br>仅由帧头和帧尾构成，帧体中没有MSDU数据。</p>\n<p>如果客户端希望通知接入点自己的节电状态有所变化，那么可以调整空帧的电源管理位。<br>客户端决定进行信道外扫描时，将向接入点发送一个电源管理位设置为1的空功能帧，收到这个帧后，接入点将就所有传输给客户端的802.11帧存储在缓冲区。<br>当客户端返回接入点所在的信道时，将向接入点发送另一个电源管理位设置为0的空功能帧。收到这个空功能帧后，接入点就向客户端发送缓冲帧。（可提高吞吐量）</p>\n<h3 id=\"电源管理\"><a href=\"#电源管理\" class=\"headerlink\" title=\"电源管理\"></a>电源管理</h3><p>无线主要提供了客户端的移动性，客户端一般使用电池，电源管理主要是为了提高设备的续航能力。</p>\n<p><strong>遗留的电源管理机制</strong><br>主动模式是早期802.11终端使用的电源管理模式，无线终端随时准备发送和接收数据。它不提供任何节电功能。使用该模式的终端获得更高的吞吐量，但电池使用时间通常要更短。<br>应将始终与电源相连的终端配置为主动模式。</p>\n<p>节电模式，客户端将在一段时间内关闭部分收发组件以减少耗电。</p>\n<p>1.流量指示图<br>加入基本服务集的客户端将电源管理位设置为1，以此通知接入点启用节电模式。接入点获知客户端处于节电模式，随后将收到的传输给客户端的数据存储在缓冲区中。每当客户端<br>关联到接入点时，都会收到关联标识符（AID），接入点通过AID来跟踪与自己建立关联且加入基本服务集的客户端。如果接入点缓冲了客户端的数据，将在下一次发送信标帧时，<br>信标帧的流量指示图（TIM）字段就会包括客户端的AID。TIM字段列出了所有需要接收数据的客户端，这些数据存储在接入点的缓冲区中。每个信标帧都会携带客户端的AID，直到<br>缓冲区数据传输完毕。</p>\n<p>信标帧根据一致的预定时间传输，这段时间称为目标信标传输时间（TBTT）。客户端在短时间内继续保持休眠状态，并及时切换到唤醒状态侦听信标帧。客户端不必在每次信标帧<br>发送时保持唤醒状态。</p>\n<p>客户端收到信标帧的时候，将查看自己的AID是否出现在TIM中，如果存在，客户端将保持唤醒并向接入点发送节电轮询帧。接入点收到节电轮询帧后，将向客户端发送数据单播帧。<br>每个单播帧保护长度1比特的更多数据字段，如果是1，客户端不进入休眠状态继续接收数据。不过客户端需要继续发送ps-poll帧。<br>当更多数据字段为0时，客户端重新进入休眠。</p>\n<p>2.发送流量指示图<br>多播和广播流量传输期间，发送流量指示图（DTIM)用于确保所有使用电源管理的终端保持唤醒状态。</p>\n<p><strong>WMM节电与非调度自动节电传输</strong><br>802.11e定义了改进的电源管理机制，自动节电传输（APSD）。分为两种<br>调度自动节电传输（S-APSD）<br>非调度自动节电传输（U-APSD）</p>\n<p>改进后的优点：</p>\n<blockquote>\n<p>应用可以通过设置休眠期并发送触发帧来控制节电行为。<br>触发帧和交付方法可以取代节电轮询帧。<br>客户端可以请求下载缓冲数据，不必等待信标帧。<br>TXOP期间，接入点可以在更快的帧突发中传输所有下行应用流量。</p>\n</blockquote>\n<p><strong>MIMO电源管理机制</strong><br>空间复用节电，仅保持一条射频链，关闭其他射频链。</p>\n"},{"title":"CWNA:802.11 MAC 体系结构","date":"2022-02-14T07:25:22.000Z","_content":"包、帧与比特\n数据链路层\n> MAC服务数据单元\n> MAC协议数据单元 \n\n物理层\n> PLCP服务数据单元\n> PLCP协议数据单元\n\n802.11与802.3互操作性\n802.11 MAC 帧头\n> 帧控制字段\n> 持续时间/ID字段\n> MAC寻址\n> 序列控制字段\n> QoS控制字段\n> HT控制字段\n\n802.11帧体\n802.11帧尾\n802.11状态机\n管理帧\n> 信标帧\n> 身份验证帧\n> 关联帧\n> 重关联帧\n> 取消关联帧\n> 接触身份验证帧\n> 行动帧\n\n控制帧\n> 确认帧\n> 块确认帧\n> 节电轮询帧\n> RTS/CTS\n> CTS-to-Self\n> 保护机制\n\n数据帧\n> Qos数据帧与非Qos数据帧\n> 不携带数据的数据帧\n\n电源管理\n> 遗留的电源管理机制\n> WMM节电与非调度自动节电传输\n> MIMO电源管理机制\n\n### 包、帧与比特\n对于802.11通信而言，主要目标就是在计算机设备之间传输用户数据。\n当数据在计算机中处理完毕并准备从一台计算机发送到另一台计算机时，数据从OSI模型的上层向下传递至物理层，最终经由物理层传输给其他设备。\n网络三层数据称为包\n网络二层数据称为帧\n物理层数据称为比特，数据最终以单比特的形式传输。比特是值为0或1的二进制数字，二进制数字是数字通信的基础。\n\n### 数据链路层（网络二层）\n包含两个子层：\n802.2逻辑链路控制子层（LLC),所有802网络具有相同的LLC子层结构；\n介质访问子层（MAC子层）， 802.11无线局域网通信位于MAC子层。\n\n**MAC服务数据单元**\n网络层将数据发送给数据链路层，数据在LLC子层后称为MAC服务数据单元（MSDU), 它有LLC子层以及第三~第七层信息构成。\n802.11有3种主要的帧类型。\n802.11管理帧和控制帧 不携带上层信息，\n802.11数据帧携带MSDU净荷。\n\nMSDU最大长度为2304字节，帧体的最大长度有MSDU最大长度与加密开销决定。\n\n2009年获批的802.11n引入 聚合MAC服务数据单元（A-MSDU)的概念。 A-MSDU最大长度（3839或7935）\n\n**MAC协议数据单元**\nLLC子层向MAC子层发送MSDU时，将添加MAC帧头信息，封装后的MSDU称为MAC协议数据单元（MPDU），也就是802.11帧。\n\nMPDU = MAC帧头 + 帧体 + 帧校验序列\nMAC帧头： 帧控制、持续时间、MAC寻址、序列控制、Qos控制、HT控制等信息。\n帧头： MSDU净荷在其中\n帧校验序列： FCS包括32为循环容易校验，用于验证帧的完整性。\n\n### 物理层\n分为两个子层：\n物理层会聚过程子层（PLCP）\n物理介质相关子层（PMD）\n\nMAC子层向 PLCP子层发送帧， PLCP子层创建 PLCP协议数据单元（PPDU）以便传输，PMD子层随后会调制数据并以比特形式发送出去。\n\n**PLCP服务数据单元**\nPLCP服务数据单元（PSDU）是物理层对MPDU的称谓。\n\n**PLCP协议数据单元**\nPPDU = 前同步码 + 物理层头部 + PSDU\n\n信息在各层之间流动的过程\n\n\n网络层（网络三层）\n——————————————————————————————————————————————————————————————————————————————————————\n数据链路层（第二层） LLC子层------------MSDU（第三~第七层数据）----------------LLC子层\n                                    \n------------------ MAC子层------------MSDU封装在MPDU中----------------------MAC子层\n-------------------------------------添加或删除MAC帧头与帧尾\n——————————————————————————————————————————————————————————————————————————————————————\n物理层（第一层）--- PLCP子层-----------PSDU封装在 PPDU中---------------------PLCP子层\n---------------------------------添加或删除前同步码与物理层头部\n------------------ PMD子层-----------数据以比特形式传输----------------------PMD子层\n","source":"_posts/CWNA-802-11-MAC-体系结构.md","raw":"---\ntitle: 'CWNA:802.11 MAC 体系结构'\ndate: 2022-02-14 15:25:22\ntags: 'Wi-Fi'\n---\n包、帧与比特\n数据链路层\n> MAC服务数据单元\n> MAC协议数据单元 \n\n物理层\n> PLCP服务数据单元\n> PLCP协议数据单元\n\n802.11与802.3互操作性\n802.11 MAC 帧头\n> 帧控制字段\n> 持续时间/ID字段\n> MAC寻址\n> 序列控制字段\n> QoS控制字段\n> HT控制字段\n\n802.11帧体\n802.11帧尾\n802.11状态机\n管理帧\n> 信标帧\n> 身份验证帧\n> 关联帧\n> 重关联帧\n> 取消关联帧\n> 接触身份验证帧\n> 行动帧\n\n控制帧\n> 确认帧\n> 块确认帧\n> 节电轮询帧\n> RTS/CTS\n> CTS-to-Self\n> 保护机制\n\n数据帧\n> Qos数据帧与非Qos数据帧\n> 不携带数据的数据帧\n\n电源管理\n> 遗留的电源管理机制\n> WMM节电与非调度自动节电传输\n> MIMO电源管理机制\n\n### 包、帧与比特\n对于802.11通信而言，主要目标就是在计算机设备之间传输用户数据。\n当数据在计算机中处理完毕并准备从一台计算机发送到另一台计算机时，数据从OSI模型的上层向下传递至物理层，最终经由物理层传输给其他设备。\n网络三层数据称为包\n网络二层数据称为帧\n物理层数据称为比特，数据最终以单比特的形式传输。比特是值为0或1的二进制数字，二进制数字是数字通信的基础。\n\n### 数据链路层（网络二层）\n包含两个子层：\n802.2逻辑链路控制子层（LLC),所有802网络具有相同的LLC子层结构；\n介质访问子层（MAC子层）， 802.11无线局域网通信位于MAC子层。\n\n**MAC服务数据单元**\n网络层将数据发送给数据链路层，数据在LLC子层后称为MAC服务数据单元（MSDU), 它有LLC子层以及第三~第七层信息构成。\n802.11有3种主要的帧类型。\n802.11管理帧和控制帧 不携带上层信息，\n802.11数据帧携带MSDU净荷。\n\nMSDU最大长度为2304字节，帧体的最大长度有MSDU最大长度与加密开销决定。\n\n2009年获批的802.11n引入 聚合MAC服务数据单元（A-MSDU)的概念。 A-MSDU最大长度（3839或7935）\n\n**MAC协议数据单元**\nLLC子层向MAC子层发送MSDU时，将添加MAC帧头信息，封装后的MSDU称为MAC协议数据单元（MPDU），也就是802.11帧。\n\nMPDU = MAC帧头 + 帧体 + 帧校验序列\nMAC帧头： 帧控制、持续时间、MAC寻址、序列控制、Qos控制、HT控制等信息。\n帧头： MSDU净荷在其中\n帧校验序列： FCS包括32为循环容易校验，用于验证帧的完整性。\n\n### 物理层\n分为两个子层：\n物理层会聚过程子层（PLCP）\n物理介质相关子层（PMD）\n\nMAC子层向 PLCP子层发送帧， PLCP子层创建 PLCP协议数据单元（PPDU）以便传输，PMD子层随后会调制数据并以比特形式发送出去。\n\n**PLCP服务数据单元**\nPLCP服务数据单元（PSDU）是物理层对MPDU的称谓。\n\n**PLCP协议数据单元**\nPPDU = 前同步码 + 物理层头部 + PSDU\n\n信息在各层之间流动的过程\n\n\n网络层（网络三层）\n——————————————————————————————————————————————————————————————————————————————————————\n数据链路层（第二层） LLC子层------------MSDU（第三~第七层数据）----------------LLC子层\n                                    \n------------------ MAC子层------------MSDU封装在MPDU中----------------------MAC子层\n-------------------------------------添加或删除MAC帧头与帧尾\n——————————————————————————————————————————————————————————————————————————————————————\n物理层（第一层）--- PLCP子层-----------PSDU封装在 PPDU中---------------------PLCP子层\n---------------------------------添加或删除前同步码与物理层头部\n------------------ PMD子层-----------数据以比特形式传输----------------------PMD子层\n","slug":"CWNA-802-11-MAC-体系结构","published":1,"updated":"2022-02-14T09:07:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3g000q18jx91qdcrj5","content":"<p>包、帧与比特<br>数据链路层</p>\n<blockquote>\n<p>MAC服务数据单元<br>MAC协议数据单元 </p>\n</blockquote>\n<p>物理层</p>\n<blockquote>\n<p>PLCP服务数据单元<br>PLCP协议数据单元</p>\n</blockquote>\n<p>802.11与802.3互操作性<br>802.11 MAC 帧头</p>\n<blockquote>\n<p>帧控制字段<br>持续时间/ID字段<br>MAC寻址<br>序列控制字段<br>QoS控制字段<br>HT控制字段</p>\n</blockquote>\n<p>802.11帧体<br>802.11帧尾<br>802.11状态机<br>管理帧</p>\n<blockquote>\n<p>信标帧<br>身份验证帧<br>关联帧<br>重关联帧<br>取消关联帧<br>接触身份验证帧<br>行动帧</p>\n</blockquote>\n<p>控制帧</p>\n<blockquote>\n<p>确认帧<br>块确认帧<br>节电轮询帧<br>RTS/CTS<br>CTS-to-Self<br>保护机制</p>\n</blockquote>\n<p>数据帧</p>\n<blockquote>\n<p>Qos数据帧与非Qos数据帧<br>不携带数据的数据帧</p>\n</blockquote>\n<p>电源管理</p>\n<blockquote>\n<p>遗留的电源管理机制<br>WMM节电与非调度自动节电传输<br>MIMO电源管理机制</p>\n</blockquote>\n<h3 id=\"包、帧与比特\"><a href=\"#包、帧与比特\" class=\"headerlink\" title=\"包、帧与比特\"></a>包、帧与比特</h3><p>对于802.11通信而言，主要目标就是在计算机设备之间传输用户数据。<br>当数据在计算机中处理完毕并准备从一台计算机发送到另一台计算机时，数据从OSI模型的上层向下传递至物理层，最终经由物理层传输给其他设备。<br>网络三层数据称为包<br>网络二层数据称为帧<br>物理层数据称为比特，数据最终以单比特的形式传输。比特是值为0或1的二进制数字，二进制数字是数字通信的基础。</p>\n<h3 id=\"数据链路层（网络二层）\"><a href=\"#数据链路层（网络二层）\" class=\"headerlink\" title=\"数据链路层（网络二层）\"></a>数据链路层（网络二层）</h3><p>包含两个子层：<br>802.2逻辑链路控制子层（LLC),所有802网络具有相同的LLC子层结构；<br>介质访问子层（MAC子层）， 802.11无线局域网通信位于MAC子层。</p>\n<p><strong>MAC服务数据单元</strong><br>网络层将数据发送给数据链路层，数据在LLC子层后称为MAC服务数据单元（MSDU), 它有LLC子层以及第三~第七层信息构成。<br>802.11有3种主要的帧类型。<br>802.11管理帧和控制帧 不携带上层信息，<br>802.11数据帧携带MSDU净荷。</p>\n<p>MSDU最大长度为2304字节，帧体的最大长度有MSDU最大长度与加密开销决定。</p>\n<p>2009年获批的802.11n引入 聚合MAC服务数据单元（A-MSDU)的概念。 A-MSDU最大长度（3839或7935）</p>\n<p><strong>MAC协议数据单元</strong><br>LLC子层向MAC子层发送MSDU时，将添加MAC帧头信息，封装后的MSDU称为MAC协议数据单元（MPDU），也就是802.11帧。</p>\n<p>MPDU = MAC帧头 + 帧体 + 帧校验序列<br>MAC帧头： 帧控制、持续时间、MAC寻址、序列控制、Qos控制、HT控制等信息。<br>帧头： MSDU净荷在其中<br>帧校验序列： FCS包括32为循环容易校验，用于验证帧的完整性。</p>\n<h3 id=\"物理层\"><a href=\"#物理层\" class=\"headerlink\" title=\"物理层\"></a>物理层</h3><p>分为两个子层：<br>物理层会聚过程子层（PLCP）<br>物理介质相关子层（PMD）</p>\n<p>MAC子层向 PLCP子层发送帧， PLCP子层创建 PLCP协议数据单元（PPDU）以便传输，PMD子层随后会调制数据并以比特形式发送出去。</p>\n<p><strong>PLCP服务数据单元</strong><br>PLCP服务数据单元（PSDU）是物理层对MPDU的称谓。</p>\n<p><strong>PLCP协议数据单元</strong><br>PPDU = 前同步码 + 物理层头部 + PSDU</p>\n<p>信息在各层之间流动的过程</p>\n<p>网络层（网络三层）<br>——————————————————————————————————————————————————————————————————————————————————————<br>数据链路层（第二层） LLC子层——————MSDU（第三~第七层数据）————————LLC子层</p>\n<p>————————— MAC子层——————MSDU封装在MPDU中———————————MAC子层<br>——————————————————-添加或删除MAC帧头与帧尾<br>——————————————————————————————————————————————————————————————————————————————————————<br>物理层（第一层）—- PLCP子层—————-PSDU封装在 PPDU中——————————-PLCP子层<br>————————————————-添加或删除前同步码与物理层头部<br>————————— PMD子层—————-数据以比特形式传输———————————PMD子层</p>\n","site":{"data":{}},"excerpt":"","more":"<p>包、帧与比特<br>数据链路层</p>\n<blockquote>\n<p>MAC服务数据单元<br>MAC协议数据单元 </p>\n</blockquote>\n<p>物理层</p>\n<blockquote>\n<p>PLCP服务数据单元<br>PLCP协议数据单元</p>\n</blockquote>\n<p>802.11与802.3互操作性<br>802.11 MAC 帧头</p>\n<blockquote>\n<p>帧控制字段<br>持续时间/ID字段<br>MAC寻址<br>序列控制字段<br>QoS控制字段<br>HT控制字段</p>\n</blockquote>\n<p>802.11帧体<br>802.11帧尾<br>802.11状态机<br>管理帧</p>\n<blockquote>\n<p>信标帧<br>身份验证帧<br>关联帧<br>重关联帧<br>取消关联帧<br>接触身份验证帧<br>行动帧</p>\n</blockquote>\n<p>控制帧</p>\n<blockquote>\n<p>确认帧<br>块确认帧<br>节电轮询帧<br>RTS/CTS<br>CTS-to-Self<br>保护机制</p>\n</blockquote>\n<p>数据帧</p>\n<blockquote>\n<p>Qos数据帧与非Qos数据帧<br>不携带数据的数据帧</p>\n</blockquote>\n<p>电源管理</p>\n<blockquote>\n<p>遗留的电源管理机制<br>WMM节电与非调度自动节电传输<br>MIMO电源管理机制</p>\n</blockquote>\n<h3 id=\"包、帧与比特\"><a href=\"#包、帧与比特\" class=\"headerlink\" title=\"包、帧与比特\"></a>包、帧与比特</h3><p>对于802.11通信而言，主要目标就是在计算机设备之间传输用户数据。<br>当数据在计算机中处理完毕并准备从一台计算机发送到另一台计算机时，数据从OSI模型的上层向下传递至物理层，最终经由物理层传输给其他设备。<br>网络三层数据称为包<br>网络二层数据称为帧<br>物理层数据称为比特，数据最终以单比特的形式传输。比特是值为0或1的二进制数字，二进制数字是数字通信的基础。</p>\n<h3 id=\"数据链路层（网络二层）\"><a href=\"#数据链路层（网络二层）\" class=\"headerlink\" title=\"数据链路层（网络二层）\"></a>数据链路层（网络二层）</h3><p>包含两个子层：<br>802.2逻辑链路控制子层（LLC),所有802网络具有相同的LLC子层结构；<br>介质访问子层（MAC子层）， 802.11无线局域网通信位于MAC子层。</p>\n<p><strong>MAC服务数据单元</strong><br>网络层将数据发送给数据链路层，数据在LLC子层后称为MAC服务数据单元（MSDU), 它有LLC子层以及第三~第七层信息构成。<br>802.11有3种主要的帧类型。<br>802.11管理帧和控制帧 不携带上层信息，<br>802.11数据帧携带MSDU净荷。</p>\n<p>MSDU最大长度为2304字节，帧体的最大长度有MSDU最大长度与加密开销决定。</p>\n<p>2009年获批的802.11n引入 聚合MAC服务数据单元（A-MSDU)的概念。 A-MSDU最大长度（3839或7935）</p>\n<p><strong>MAC协议数据单元</strong><br>LLC子层向MAC子层发送MSDU时，将添加MAC帧头信息，封装后的MSDU称为MAC协议数据单元（MPDU），也就是802.11帧。</p>\n<p>MPDU = MAC帧头 + 帧体 + 帧校验序列<br>MAC帧头： 帧控制、持续时间、MAC寻址、序列控制、Qos控制、HT控制等信息。<br>帧头： MSDU净荷在其中<br>帧校验序列： FCS包括32为循环容易校验，用于验证帧的完整性。</p>\n<h3 id=\"物理层\"><a href=\"#物理层\" class=\"headerlink\" title=\"物理层\"></a>物理层</h3><p>分为两个子层：<br>物理层会聚过程子层（PLCP）<br>物理介质相关子层（PMD）</p>\n<p>MAC子层向 PLCP子层发送帧， PLCP子层创建 PLCP协议数据单元（PPDU）以便传输，PMD子层随后会调制数据并以比特形式发送出去。</p>\n<p><strong>PLCP服务数据单元</strong><br>PLCP服务数据单元（PSDU）是物理层对MPDU的称谓。</p>\n<p><strong>PLCP协议数据单元</strong><br>PPDU = 前同步码 + 物理层头部 + PSDU</p>\n<p>信息在各层之间流动的过程</p>\n<p>网络层（网络三层）<br>——————————————————————————————————————————————————————————————————————————————————————<br>数据链路层（第二层） LLC子层——————MSDU（第三~第七层数据）————————LLC子层</p>\n<p>————————— MAC子层——————MSDU封装在MPDU中———————————MAC子层<br>——————————————————-添加或删除MAC帧头与帧尾<br>——————————————————————————————————————————————————————————————————————————————————————<br>物理层（第一层）—- PLCP子层—————-PSDU封装在 PPDU中——————————-PLCP子层<br>————————————————-添加或删除前同步码与物理层头部<br>————————— PMD子层—————-数据以比特形式传输———————————PMD子层</p>\n"},{"title":"CWNA:802.11ax技术:高效无线局域网(二)","date":"2022-03-01T07:11:40.000Z","_content":"\n### 基本服务集颜色\n重叠基本服务集（OBSS）通常称为同信道干扰，如果位于信道36的接入点1侦听到附近同样位于信道36的接入点2的前同步码传输，\n接入点1将推迟自己的传输，避免与接入点2同时发送数据。\n\n802.11ax引入的BSS color有望将信道复用效率提高8倍，致力于解决OBSS引起的介质争用开销问题。\n\n物理层和MAC子层都会传输BSS颜色信息。\n802.11ax物理层头部的前同步码种，SIG-A字段包含长度6bit的BSS颜色字段，可以标识多达63个BSS。\nMAC子层的BSS颜色信息位于802.11管理帧种，可以标识63种不同的BSS。\nBSS 颜色根据颜色区分是否来自相邻的OBSS干扰，极大提高信道利用率。\n\nTWT目标唤醒时间节电机制，指定预订的目标唤醒时间。\n\nMU-OFDMA,BSS color, MU-MIMO和TWT是802.11ax的核心技术。\n详细可以根据最新协议查阅。\nCWNA，无线局域网权威指南第五版记录到此。\n","source":"_posts/CWNA-802-11ax技术-高效无线局域网-二.md","raw":"---\ntitle: 'CWNA:802.11ax技术:高效无线局域网(二)'\ndate: 2022-03-01 15:11:40\ntags: 'Wi-Fi'\n---\n\n### 基本服务集颜色\n重叠基本服务集（OBSS）通常称为同信道干扰，如果位于信道36的接入点1侦听到附近同样位于信道36的接入点2的前同步码传输，\n接入点1将推迟自己的传输，避免与接入点2同时发送数据。\n\n802.11ax引入的BSS color有望将信道复用效率提高8倍，致力于解决OBSS引起的介质争用开销问题。\n\n物理层和MAC子层都会传输BSS颜色信息。\n802.11ax物理层头部的前同步码种，SIG-A字段包含长度6bit的BSS颜色字段，可以标识多达63个BSS。\nMAC子层的BSS颜色信息位于802.11管理帧种，可以标识63种不同的BSS。\nBSS 颜色根据颜色区分是否来自相邻的OBSS干扰，极大提高信道利用率。\n\nTWT目标唤醒时间节电机制，指定预订的目标唤醒时间。\n\nMU-OFDMA,BSS color, MU-MIMO和TWT是802.11ax的核心技术。\n详细可以根据最新协议查阅。\nCWNA，无线局域网权威指南第五版记录到此。\n","slug":"CWNA-802-11ax技术-高效无线局域网-二","published":1,"updated":"2022-03-01T07:51:11.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3h000s18jxhuqk8hfq","content":"<h3 id=\"基本服务集颜色\"><a href=\"#基本服务集颜色\" class=\"headerlink\" title=\"基本服务集颜色\"></a>基本服务集颜色</h3><p>重叠基本服务集（OBSS）通常称为同信道干扰，如果位于信道36的接入点1侦听到附近同样位于信道36的接入点2的前同步码传输，<br>接入点1将推迟自己的传输，避免与接入点2同时发送数据。</p>\n<p>802.11ax引入的BSS color有望将信道复用效率提高8倍，致力于解决OBSS引起的介质争用开销问题。</p>\n<p>物理层和MAC子层都会传输BSS颜色信息。<br>802.11ax物理层头部的前同步码种，SIG-A字段包含长度6bit的BSS颜色字段，可以标识多达63个BSS。<br>MAC子层的BSS颜色信息位于802.11管理帧种，可以标识63种不同的BSS。<br>BSS 颜色根据颜色区分是否来自相邻的OBSS干扰，极大提高信道利用率。</p>\n<p>TWT目标唤醒时间节电机制，指定预订的目标唤醒时间。</p>\n<p>MU-OFDMA,BSS color, MU-MIMO和TWT是802.11ax的核心技术。<br>详细可以根据最新协议查阅。<br>CWNA，无线局域网权威指南第五版记录到此。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"基本服务集颜色\"><a href=\"#基本服务集颜色\" class=\"headerlink\" title=\"基本服务集颜色\"></a>基本服务集颜色</h3><p>重叠基本服务集（OBSS）通常称为同信道干扰，如果位于信道36的接入点1侦听到附近同样位于信道36的接入点2的前同步码传输，<br>接入点1将推迟自己的传输，避免与接入点2同时发送数据。</p>\n<p>802.11ax引入的BSS color有望将信道复用效率提高8倍，致力于解决OBSS引起的介质争用开销问题。</p>\n<p>物理层和MAC子层都会传输BSS颜色信息。<br>802.11ax物理层头部的前同步码种，SIG-A字段包含长度6bit的BSS颜色字段，可以标识多达63个BSS。<br>MAC子层的BSS颜色信息位于802.11管理帧种，可以标识63种不同的BSS。<br>BSS 颜色根据颜色区分是否来自相邻的OBSS干扰，极大提高信道利用率。</p>\n<p>TWT目标唤醒时间节电机制，指定预订的目标唤醒时间。</p>\n<p>MU-OFDMA,BSS color, MU-MIMO和TWT是802.11ax的核心技术。<br>详细可以根据最新协议查阅。<br>CWNA，无线局域网权威指南第五版记录到此。</p>\n"},{"title":"CWNA:802.11 MAC 体系结构(四)","date":"2022-02-18T10:08:19.000Z","_content":"\n### 控制帧\n控制帧协助传输数据帧，以某个基本速率发送。仅由MAC帧头和帧尾构成，没有帧体。\n\n12种控制帧子类型：\n> 波束成形报告轮询帧\n> VHT NDP 通告帧\n> 控制帧扩展\n> 控制帧封装\n> 块确认请求帧(BAR)\n> 请求发送帧（RTS)\n> 允许发送帧(CTS)\n> 确认帧(ACK)\n> CF-End 帧\n> CF-End + CF-ACK 帧\n\n**确认帧(ACK)**\n由于802.11通信使用无线介质无法确保数据传输成功，发送端只能依靠接收端的通知来判断传输的帧是否已正确接收。\n\n格式：共14字节\n帧控制|持续时间|接收机地址|FCS\n2|2|6|4\n\n**块确认帧（BAR）**\n802.11e定义的块确认机制，它将多个确认帧聚合为一个确认帧以提高信道利用率。分为两类：\n1.即时块确认（immediate BA): 适用于延迟容忍度较低的流量。\n2.延迟块确认(delayed BA): 适用于容忍度较高的流量。\n\n块确认帧中的位图(bitmap)字段用于标识所有的接收数据帧的状态。如果只有一个数据帧损坏，那么只需要重传该帧。\n\n**节电轮询帧（PS-Poll）**\n采用遗留电源管理机制的客户端通过节电轮询帧请求接入点发送缓冲流量。\n节电轮询帧中的持续时间/ID字段作为AID，用AID标识自己向接入点请求缓冲的单播帧。\n仅有节电轮询帧使用持续时间/ID字段作为AID。\n\n**RTS/CTS**\n存在客户端无法侦听到其他客户端的情况。\n请求发送/允许发送机制通过实施NAV分发以帮助避免冲突。\n\n使用RTS/CTS机制的终端每次准备发送帧时，必须在正常的数据传输前执行（RTS/CTS）\n\n**CTS-to-Self**\n相较于RTS/CTS，CTS-to-self作为保护机制的优点是发送帧数更少，吞吐量因此而提高。\n\n**保护机制**\n802.11标准定义了ERP保护机制，以便两个802.11g无线接口的OFDM传输不会受到DSSS或HR-DSSS传输的干扰。\n802.11g ERP终端使用所有终端都能理解的语言通知它们重置NAV计数器。利用RTS/CTS或CTS-to-self帧保留介质后，802.11g终端就能采用OFDM技术调制传输数据帧，\n不必担心与802.11bHR-DSSS或遗留的802.11DSSS终端发生冲突。\n\n在ERP基本服务集中触发保护机制的3种情况：\n1.如果非ERP客户端关联到ERP接入点，ERP接入点将其信标帧的NonERP_Present 位设置1，从而在基本服务集种启用保护机制。\n2.如果侦听到802.11DSSS或802.11b HR-DSSS接入点发送信标帧，会启用保护机制\n3.如果侦听到802.11DSSS或802.11b HR-DSSS速率的管理帧，会启用保护机制。\n\nERP保护机制利用RTS/CTS或CTS-to-Self帧确保802.11终端和遗留的802.11b终端能共存于同一基本服务集。\n\n","source":"_posts/CWNA-802-11-MAC-体系结构-四.md","raw":"---\ntitle: 'CWNA:802.11 MAC 体系结构(四)'\ndate: 2022-02-18 18:08:19\ntags: 'Wi-Fi'\n---\n\n### 控制帧\n控制帧协助传输数据帧，以某个基本速率发送。仅由MAC帧头和帧尾构成，没有帧体。\n\n12种控制帧子类型：\n> 波束成形报告轮询帧\n> VHT NDP 通告帧\n> 控制帧扩展\n> 控制帧封装\n> 块确认请求帧(BAR)\n> 请求发送帧（RTS)\n> 允许发送帧(CTS)\n> 确认帧(ACK)\n> CF-End 帧\n> CF-End + CF-ACK 帧\n\n**确认帧(ACK)**\n由于802.11通信使用无线介质无法确保数据传输成功，发送端只能依靠接收端的通知来判断传输的帧是否已正确接收。\n\n格式：共14字节\n帧控制|持续时间|接收机地址|FCS\n2|2|6|4\n\n**块确认帧（BAR）**\n802.11e定义的块确认机制，它将多个确认帧聚合为一个确认帧以提高信道利用率。分为两类：\n1.即时块确认（immediate BA): 适用于延迟容忍度较低的流量。\n2.延迟块确认(delayed BA): 适用于容忍度较高的流量。\n\n块确认帧中的位图(bitmap)字段用于标识所有的接收数据帧的状态。如果只有一个数据帧损坏，那么只需要重传该帧。\n\n**节电轮询帧（PS-Poll）**\n采用遗留电源管理机制的客户端通过节电轮询帧请求接入点发送缓冲流量。\n节电轮询帧中的持续时间/ID字段作为AID，用AID标识自己向接入点请求缓冲的单播帧。\n仅有节电轮询帧使用持续时间/ID字段作为AID。\n\n**RTS/CTS**\n存在客户端无法侦听到其他客户端的情况。\n请求发送/允许发送机制通过实施NAV分发以帮助避免冲突。\n\n使用RTS/CTS机制的终端每次准备发送帧时，必须在正常的数据传输前执行（RTS/CTS）\n\n**CTS-to-Self**\n相较于RTS/CTS，CTS-to-self作为保护机制的优点是发送帧数更少，吞吐量因此而提高。\n\n**保护机制**\n802.11标准定义了ERP保护机制，以便两个802.11g无线接口的OFDM传输不会受到DSSS或HR-DSSS传输的干扰。\n802.11g ERP终端使用所有终端都能理解的语言通知它们重置NAV计数器。利用RTS/CTS或CTS-to-self帧保留介质后，802.11g终端就能采用OFDM技术调制传输数据帧，\n不必担心与802.11bHR-DSSS或遗留的802.11DSSS终端发生冲突。\n\n在ERP基本服务集中触发保护机制的3种情况：\n1.如果非ERP客户端关联到ERP接入点，ERP接入点将其信标帧的NonERP_Present 位设置1，从而在基本服务集种启用保护机制。\n2.如果侦听到802.11DSSS或802.11b HR-DSSS接入点发送信标帧，会启用保护机制\n3.如果侦听到802.11DSSS或802.11b HR-DSSS速率的管理帧，会启用保护机制。\n\nERP保护机制利用RTS/CTS或CTS-to-Self帧确保802.11终端和遗留的802.11b终端能共存于同一基本服务集。\n\n","slug":"CWNA-802-11-MAC-体系结构-四","published":1,"updated":"2022-02-21T02:01:03.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3i000v18jxh49v4i9l","content":"<h3 id=\"控制帧\"><a href=\"#控制帧\" class=\"headerlink\" title=\"控制帧\"></a>控制帧</h3><p>控制帧协助传输数据帧，以某个基本速率发送。仅由MAC帧头和帧尾构成，没有帧体。</p>\n<p>12种控制帧子类型：</p>\n<blockquote>\n<p>波束成形报告轮询帧<br>VHT NDP 通告帧<br>控制帧扩展<br>控制帧封装<br>块确认请求帧(BAR)<br>请求发送帧（RTS)<br>允许发送帧(CTS)<br>确认帧(ACK)<br>CF-End 帧<br>CF-End + CF-ACK 帧</p>\n</blockquote>\n<p><strong>确认帧(ACK)</strong><br>由于802.11通信使用无线介质无法确保数据传输成功，发送端只能依靠接收端的通知来判断传输的帧是否已正确接收。</p>\n<p>格式：共14字节<br>帧控制|持续时间|接收机地址|FCS<br>2|2|6|4</p>\n<p><strong>块确认帧（BAR）</strong><br>802.11e定义的块确认机制，它将多个确认帧聚合为一个确认帧以提高信道利用率。分为两类：<br>1.即时块确认（immediate BA): 适用于延迟容忍度较低的流量。<br>2.延迟块确认(delayed BA): 适用于容忍度较高的流量。</p>\n<p>块确认帧中的位图(bitmap)字段用于标识所有的接收数据帧的状态。如果只有一个数据帧损坏，那么只需要重传该帧。</p>\n<p><strong>节电轮询帧（PS-Poll）</strong><br>采用遗留电源管理机制的客户端通过节电轮询帧请求接入点发送缓冲流量。<br>节电轮询帧中的持续时间/ID字段作为AID，用AID标识自己向接入点请求缓冲的单播帧。<br>仅有节电轮询帧使用持续时间/ID字段作为AID。</p>\n<p><strong>RTS/CTS</strong><br>存在客户端无法侦听到其他客户端的情况。<br>请求发送/允许发送机制通过实施NAV分发以帮助避免冲突。</p>\n<p>使用RTS/CTS机制的终端每次准备发送帧时，必须在正常的数据传输前执行（RTS/CTS）</p>\n<p><strong>CTS-to-Self</strong><br>相较于RTS/CTS，CTS-to-self作为保护机制的优点是发送帧数更少，吞吐量因此而提高。</p>\n<p><strong>保护机制</strong><br>802.11标准定义了ERP保护机制，以便两个802.11g无线接口的OFDM传输不会受到DSSS或HR-DSSS传输的干扰。<br>802.11g ERP终端使用所有终端都能理解的语言通知它们重置NAV计数器。利用RTS/CTS或CTS-to-self帧保留介质后，802.11g终端就能采用OFDM技术调制传输数据帧，<br>不必担心与802.11bHR-DSSS或遗留的802.11DSSS终端发生冲突。</p>\n<p>在ERP基本服务集中触发保护机制的3种情况：<br>1.如果非ERP客户端关联到ERP接入点，ERP接入点将其信标帧的NonERP_Present 位设置1，从而在基本服务集种启用保护机制。<br>2.如果侦听到802.11DSSS或802.11b HR-DSSS接入点发送信标帧，会启用保护机制<br>3.如果侦听到802.11DSSS或802.11b HR-DSSS速率的管理帧，会启用保护机制。</p>\n<p>ERP保护机制利用RTS/CTS或CTS-to-Self帧确保802.11终端和遗留的802.11b终端能共存于同一基本服务集。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"控制帧\"><a href=\"#控制帧\" class=\"headerlink\" title=\"控制帧\"></a>控制帧</h3><p>控制帧协助传输数据帧，以某个基本速率发送。仅由MAC帧头和帧尾构成，没有帧体。</p>\n<p>12种控制帧子类型：</p>\n<blockquote>\n<p>波束成形报告轮询帧<br>VHT NDP 通告帧<br>控制帧扩展<br>控制帧封装<br>块确认请求帧(BAR)<br>请求发送帧（RTS)<br>允许发送帧(CTS)<br>确认帧(ACK)<br>CF-End 帧<br>CF-End + CF-ACK 帧</p>\n</blockquote>\n<p><strong>确认帧(ACK)</strong><br>由于802.11通信使用无线介质无法确保数据传输成功，发送端只能依靠接收端的通知来判断传输的帧是否已正确接收。</p>\n<p>格式：共14字节<br>帧控制|持续时间|接收机地址|FCS<br>2|2|6|4</p>\n<p><strong>块确认帧（BAR）</strong><br>802.11e定义的块确认机制，它将多个确认帧聚合为一个确认帧以提高信道利用率。分为两类：<br>1.即时块确认（immediate BA): 适用于延迟容忍度较低的流量。<br>2.延迟块确认(delayed BA): 适用于容忍度较高的流量。</p>\n<p>块确认帧中的位图(bitmap)字段用于标识所有的接收数据帧的状态。如果只有一个数据帧损坏，那么只需要重传该帧。</p>\n<p><strong>节电轮询帧（PS-Poll）</strong><br>采用遗留电源管理机制的客户端通过节电轮询帧请求接入点发送缓冲流量。<br>节电轮询帧中的持续时间/ID字段作为AID，用AID标识自己向接入点请求缓冲的单播帧。<br>仅有节电轮询帧使用持续时间/ID字段作为AID。</p>\n<p><strong>RTS/CTS</strong><br>存在客户端无法侦听到其他客户端的情况。<br>请求发送/允许发送机制通过实施NAV分发以帮助避免冲突。</p>\n<p>使用RTS/CTS机制的终端每次准备发送帧时，必须在正常的数据传输前执行（RTS/CTS）</p>\n<p><strong>CTS-to-Self</strong><br>相较于RTS/CTS，CTS-to-self作为保护机制的优点是发送帧数更少，吞吐量因此而提高。</p>\n<p><strong>保护机制</strong><br>802.11标准定义了ERP保护机制，以便两个802.11g无线接口的OFDM传输不会受到DSSS或HR-DSSS传输的干扰。<br>802.11g ERP终端使用所有终端都能理解的语言通知它们重置NAV计数器。利用RTS/CTS或CTS-to-self帧保留介质后，802.11g终端就能采用OFDM技术调制传输数据帧，<br>不必担心与802.11bHR-DSSS或遗留的802.11DSSS终端发生冲突。</p>\n<p>在ERP基本服务集中触发保护机制的3种情况：<br>1.如果非ERP客户端关联到ERP接入点，ERP接入点将其信标帧的NonERP_Present 位设置1，从而在基本服务集种启用保护机制。<br>2.如果侦听到802.11DSSS或802.11b HR-DSSS接入点发送信标帧，会启用保护机制<br>3.如果侦听到802.11DSSS或802.11b HR-DSSS速率的管理帧，会启用保护机制。</p>\n<p>ERP保护机制利用RTS/CTS或CTS-to-Self帧确保802.11终端和遗留的802.11b终端能共存于同一基本服务集。</p>\n"},{"title":"CWNA:802.11ax技术:高效无线局域网","date":"2022-03-01T01:30:57.000Z","_content":"\n高效无线局域网技术概述\n多用户\n正交频分多址\n> 副载波\n> 资源单元\n> 触发帧\n> 下行链路OFDMA\n> 上行链路OFDMA\n\n多用户-多输入多输出\n基本服务集颜色\n> 自适应空闲信道评估\n> 双NAV计数器\n\n目标唤醒时间\n其他802.11ax物理层与MAC子层功能\n> 1024-QAM\n> 长符合时间与保护间隔\n> 802.11ax PPDU格式\n> 仅20MHz模式\n> 多流量标识符聚合的MAC协议数据单元\n\n802.11ax设计注意事项\n\n### 高效无线局域网技术概述\n高效无线局域网（HEW）是描述802.11ax技术的专业术语。\n由于无线局域网工作原理决定的，总吞吐量通常最多只能达到标定802.11数据速率的50%。\n\n导致802.11流量拥塞的因素：\n遗留客户端的存在导致需要部署RTS/CTS保护机制，保护机制会降低效率。\n小的数据帧导致MAC子层和介质争用开销过多。\n由于高层应用协议的缘故，小帧必须按顺序传输，难以实施聚合。（例如:语音）\n\n802.11n/ac无线接口尽管可以使用更高的数据速率和更宽的信道，但却可能导致802.11流量拥塞。\n802.11ax致力于更好的流量管理，它的目标并非提高数据速率或增加信道宽度，而是实现更优质、更高效的802.11流量管理。\n\n802.11n、802.11ac、802.11ax技术比较\n\n||802.11n|802.11ac|802.11ax|\n|:---:|:---:|:---:|:---:|\n|频段|2.4GHz 和5GHz|仅5GHz|2.4GHz和5GHz|\n|信道宽度|20MHz\\40MHz|20/40/80/80+80/160MHz|20/40/80/80+80/160MHz|\n|频率复用技术|OFDM|OFDM|OFDM和OFDMA|\n|副载波间隔|312.5kHz|312.5kHz|78.125kHz|\n|OFDM符号时间|3.2微秒|3.2微秒|12.8微秒|\n|保护间隔|0.4或0.8微秒|0.4或0.8微秒|0.8、1.6或3.2微秒|\n|总符号时间|3.6或4.0微秒|3.6或4.0微秒|13.6、14.4或16.0微秒|\n|调制技术|BPSK/QPSK/16-QAM/64-QAM|BPSK/QPSK/16-QAM/64-QAM|BPSK/QPSK/16-QAM/64-QAM/1024-QAM|\n|多用户-多输入多输出|不适用|下行传输|下行传输和上行传输|\n\n802.11ax主要的优势在于OFDMA技术，将信道划分为若干较小的子信道。\n\n### 多用户\nOFDMA通过细分信道来实现多用户访问；\nMU-MIMO通过使用不同的空间流来实现多用户访问；\n\n### 正交频分多址（OFDMA）\nOFDMA技术将信道细分为较小的频率分配单元————资源单元（RU）————从而能同时向多个用户发送小帧。例如：\n将传统的20MHz信道划分为9个子信道，采用OFDMA技术的802.11ax接入点可以同时向9个802.11ax客户端发送小帧。\n它能够更好的利用频率空间，已经在LTE蜂窝通信中得到验证。\n\n802.11ax技术仍然采用802.11a/g/n/ac无线接口可以理解的OFDM技术，以基本速率传输管理帧和控制帧。\n\n**副载波**\n802.11n/ac 在20MHz信道包括64个副载波，副载波的宽度为312.5kHz\n802.11ax在20MHz信道包括256个副载波，副载波宽度为78.125KHz\n\n副载波包括3种：\n数据副载波， 采用802.11ac相同的调制编码方案（MCS），增加两种调制编码方案和1024-QAM\n导频副载波， 仅用于发射机和接收机之间的同步\n未使用的副载波， 防止邻信道和子信道干扰\n\n**资源单元**\nOFDM传输数据个多个客户端时，每一个时段都需要使用整个20MHz信道与单一客户端进行传输，各客户端分时占用。\n\nOFDMA包括256个副载波，242个副载波用于传输数据，可以将其细分为 106、 52、 26副载波资源单元，大致对应20MHz、8MHz、4MHz、2MHz\n802.11ax接入点可以利用8MHz信道与一个802.11ax客户端通信，同时利用4MHz子信道与2个802.11ax客户端进行通信。既可以上行，也可以是下行。\n\n**触发帧**\n触发帧为802.11ax客户端分配资源单元。\n\n|触发帧类型|各类触发帧|\n|:---:|:---:|\n|0|基本触发帧|\n|1|波束成形报告轮询|\n|2|多用户块确认请求|\n|3|多用户请求发送|\n|4|缓冲区状态报告轮询|\n|5|带重试的组播多用户块确认请求|\n|6|带宽查询报告轮询|\n|7|NDP反馈报告轮询|\n|8~15|保留|\n\n触发帧的用户信息字段种每个特定资源单元有长度为7bit的唯一组合定义。\n\n**下行链路OFDMA**\n接入点取得发送机会后，首先发送MU-RTS触发帧，分配资源单元，为了让遗留客户端重置，使用20MHz的信道发送。\n收到客户端发送的并行CTS响应后，接入点开始向支持OFDMA的客户端传输多用户DL-PPDU。\n\n802.11ax接入点---------------------------------------------------------------------802.11ax客户端\n\n-------------AIFS MU-RTS SIFS---------SIFS---DL-PPDU SIFS  BAR  SIFS--------------->\n<------------------------------CTS------------------------------------块确认帧-------STA1\n<------------------------------CTS------------------------------------块确认帧-------STA2\n<------------------------------CTS------------------------------------块确认帧-------STA3\n<------------------------------CTS------------------------------------块确认帧-------STA4\n\n**上行连接OFDMA**\n802.11ax接入点必须首先竞争介质的控制权并取得发送机会，然后才能协调802.11ax客户端发送的数据（上行传输）\n上行传输非常复杂。需要三轮触发帧才能实现一次上行传输数据。\n\n802.11ax接入点------------------------------------------------------------------------------802.11ax客户端\n\n---AIFS BSRP SIFS-------SIFS--MU-RTS SIFS ---- SIFS 触发帧 SIFS-----------SIFS 多终端块确认帧--->\n<------------------BSR--------------------CTS--------------------UL-PPDU---------------------STA1\n<------------------BSR--------------------CTS--------------------UL-PPDU---------------------STA2\n<------------------BSR--------------------CTS--------------------UL-PPDU---------------------STA3\n<------------------BSR--------------------CTS--------------------UL-PPDU---------------------STA4\n","source":"_posts/CWNA-802-11ax技术-高效无线局域网.md","raw":"---\ntitle: 'CWNA:802.11ax技术:高效无线局域网'\ndate: 2022-03-01 09:30:57\ntags: 'Wi-Fi'\n---\n\n高效无线局域网技术概述\n多用户\n正交频分多址\n> 副载波\n> 资源单元\n> 触发帧\n> 下行链路OFDMA\n> 上行链路OFDMA\n\n多用户-多输入多输出\n基本服务集颜色\n> 自适应空闲信道评估\n> 双NAV计数器\n\n目标唤醒时间\n其他802.11ax物理层与MAC子层功能\n> 1024-QAM\n> 长符合时间与保护间隔\n> 802.11ax PPDU格式\n> 仅20MHz模式\n> 多流量标识符聚合的MAC协议数据单元\n\n802.11ax设计注意事项\n\n### 高效无线局域网技术概述\n高效无线局域网（HEW）是描述802.11ax技术的专业术语。\n由于无线局域网工作原理决定的，总吞吐量通常最多只能达到标定802.11数据速率的50%。\n\n导致802.11流量拥塞的因素：\n遗留客户端的存在导致需要部署RTS/CTS保护机制，保护机制会降低效率。\n小的数据帧导致MAC子层和介质争用开销过多。\n由于高层应用协议的缘故，小帧必须按顺序传输，难以实施聚合。（例如:语音）\n\n802.11n/ac无线接口尽管可以使用更高的数据速率和更宽的信道，但却可能导致802.11流量拥塞。\n802.11ax致力于更好的流量管理，它的目标并非提高数据速率或增加信道宽度，而是实现更优质、更高效的802.11流量管理。\n\n802.11n、802.11ac、802.11ax技术比较\n\n||802.11n|802.11ac|802.11ax|\n|:---:|:---:|:---:|:---:|\n|频段|2.4GHz 和5GHz|仅5GHz|2.4GHz和5GHz|\n|信道宽度|20MHz\\40MHz|20/40/80/80+80/160MHz|20/40/80/80+80/160MHz|\n|频率复用技术|OFDM|OFDM|OFDM和OFDMA|\n|副载波间隔|312.5kHz|312.5kHz|78.125kHz|\n|OFDM符号时间|3.2微秒|3.2微秒|12.8微秒|\n|保护间隔|0.4或0.8微秒|0.4或0.8微秒|0.8、1.6或3.2微秒|\n|总符号时间|3.6或4.0微秒|3.6或4.0微秒|13.6、14.4或16.0微秒|\n|调制技术|BPSK/QPSK/16-QAM/64-QAM|BPSK/QPSK/16-QAM/64-QAM|BPSK/QPSK/16-QAM/64-QAM/1024-QAM|\n|多用户-多输入多输出|不适用|下行传输|下行传输和上行传输|\n\n802.11ax主要的优势在于OFDMA技术，将信道划分为若干较小的子信道。\n\n### 多用户\nOFDMA通过细分信道来实现多用户访问；\nMU-MIMO通过使用不同的空间流来实现多用户访问；\n\n### 正交频分多址（OFDMA）\nOFDMA技术将信道细分为较小的频率分配单元————资源单元（RU）————从而能同时向多个用户发送小帧。例如：\n将传统的20MHz信道划分为9个子信道，采用OFDMA技术的802.11ax接入点可以同时向9个802.11ax客户端发送小帧。\n它能够更好的利用频率空间，已经在LTE蜂窝通信中得到验证。\n\n802.11ax技术仍然采用802.11a/g/n/ac无线接口可以理解的OFDM技术，以基本速率传输管理帧和控制帧。\n\n**副载波**\n802.11n/ac 在20MHz信道包括64个副载波，副载波的宽度为312.5kHz\n802.11ax在20MHz信道包括256个副载波，副载波宽度为78.125KHz\n\n副载波包括3种：\n数据副载波， 采用802.11ac相同的调制编码方案（MCS），增加两种调制编码方案和1024-QAM\n导频副载波， 仅用于发射机和接收机之间的同步\n未使用的副载波， 防止邻信道和子信道干扰\n\n**资源单元**\nOFDM传输数据个多个客户端时，每一个时段都需要使用整个20MHz信道与单一客户端进行传输，各客户端分时占用。\n\nOFDMA包括256个副载波，242个副载波用于传输数据，可以将其细分为 106、 52、 26副载波资源单元，大致对应20MHz、8MHz、4MHz、2MHz\n802.11ax接入点可以利用8MHz信道与一个802.11ax客户端通信，同时利用4MHz子信道与2个802.11ax客户端进行通信。既可以上行，也可以是下行。\n\n**触发帧**\n触发帧为802.11ax客户端分配资源单元。\n\n|触发帧类型|各类触发帧|\n|:---:|:---:|\n|0|基本触发帧|\n|1|波束成形报告轮询|\n|2|多用户块确认请求|\n|3|多用户请求发送|\n|4|缓冲区状态报告轮询|\n|5|带重试的组播多用户块确认请求|\n|6|带宽查询报告轮询|\n|7|NDP反馈报告轮询|\n|8~15|保留|\n\n触发帧的用户信息字段种每个特定资源单元有长度为7bit的唯一组合定义。\n\n**下行链路OFDMA**\n接入点取得发送机会后，首先发送MU-RTS触发帧，分配资源单元，为了让遗留客户端重置，使用20MHz的信道发送。\n收到客户端发送的并行CTS响应后，接入点开始向支持OFDMA的客户端传输多用户DL-PPDU。\n\n802.11ax接入点---------------------------------------------------------------------802.11ax客户端\n\n-------------AIFS MU-RTS SIFS---------SIFS---DL-PPDU SIFS  BAR  SIFS--------------->\n<------------------------------CTS------------------------------------块确认帧-------STA1\n<------------------------------CTS------------------------------------块确认帧-------STA2\n<------------------------------CTS------------------------------------块确认帧-------STA3\n<------------------------------CTS------------------------------------块确认帧-------STA4\n\n**上行连接OFDMA**\n802.11ax接入点必须首先竞争介质的控制权并取得发送机会，然后才能协调802.11ax客户端发送的数据（上行传输）\n上行传输非常复杂。需要三轮触发帧才能实现一次上行传输数据。\n\n802.11ax接入点------------------------------------------------------------------------------802.11ax客户端\n\n---AIFS BSRP SIFS-------SIFS--MU-RTS SIFS ---- SIFS 触发帧 SIFS-----------SIFS 多终端块确认帧--->\n<------------------BSR--------------------CTS--------------------UL-PPDU---------------------STA1\n<------------------BSR--------------------CTS--------------------UL-PPDU---------------------STA2\n<------------------BSR--------------------CTS--------------------UL-PPDU---------------------STA3\n<------------------BSR--------------------CTS--------------------UL-PPDU---------------------STA4\n","slug":"CWNA-802-11ax技术-高效无线局域网","published":1,"updated":"2022-03-01T05:52:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3j000x18jxaa5s4es4","content":"<p>高效无线局域网技术概述<br>多用户<br>正交频分多址</p>\n<blockquote>\n<p>副载波<br>资源单元<br>触发帧<br>下行链路OFDMA<br>上行链路OFDMA</p>\n</blockquote>\n<p>多用户-多输入多输出<br>基本服务集颜色</p>\n<blockquote>\n<p>自适应空闲信道评估<br>双NAV计数器</p>\n</blockquote>\n<p>目标唤醒时间<br>其他802.11ax物理层与MAC子层功能</p>\n<blockquote>\n<p>1024-QAM<br>长符合时间与保护间隔<br>802.11ax PPDU格式<br>仅20MHz模式<br>多流量标识符聚合的MAC协议数据单元</p>\n</blockquote>\n<p>802.11ax设计注意事项</p>\n<h3 id=\"高效无线局域网技术概述\"><a href=\"#高效无线局域网技术概述\" class=\"headerlink\" title=\"高效无线局域网技术概述\"></a>高效无线局域网技术概述</h3><p>高效无线局域网（HEW）是描述802.11ax技术的专业术语。<br>由于无线局域网工作原理决定的，总吞吐量通常最多只能达到标定802.11数据速率的50%。</p>\n<p>导致802.11流量拥塞的因素：<br>遗留客户端的存在导致需要部署RTS/CTS保护机制，保护机制会降低效率。<br>小的数据帧导致MAC子层和介质争用开销过多。<br>由于高层应用协议的缘故，小帧必须按顺序传输，难以实施聚合。（例如:语音）</p>\n<p>802.11n/ac无线接口尽管可以使用更高的数据速率和更宽的信道，但却可能导致802.11流量拥塞。<br>802.11ax致力于更好的流量管理，它的目标并非提高数据速率或增加信道宽度，而是实现更优质、更高效的802.11流量管理。</p>\n<p>802.11n、802.11ac、802.11ax技术比较</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">802.11n</th>\n<th style=\"text-align:center\">802.11ac</th>\n<th style=\"text-align:center\">802.11ax</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">频段</td>\n<td style=\"text-align:center\">2.4GHz 和5GHz</td>\n<td style=\"text-align:center\">仅5GHz</td>\n<td style=\"text-align:center\">2.4GHz和5GHz</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">信道宽度</td>\n<td style=\"text-align:center\">20MHz\\40MHz</td>\n<td style=\"text-align:center\">20/40/80/80+80/160MHz</td>\n<td style=\"text-align:center\">20/40/80/80+80/160MHz</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">频率复用技术</td>\n<td style=\"text-align:center\">OFDM</td>\n<td style=\"text-align:center\">OFDM</td>\n<td style=\"text-align:center\">OFDM和OFDMA</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">副载波间隔</td>\n<td style=\"text-align:center\">312.5kHz</td>\n<td style=\"text-align:center\">312.5kHz</td>\n<td style=\"text-align:center\">78.125kHz</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">OFDM符号时间</td>\n<td style=\"text-align:center\">3.2微秒</td>\n<td style=\"text-align:center\">3.2微秒</td>\n<td style=\"text-align:center\">12.8微秒</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">保护间隔</td>\n<td style=\"text-align:center\">0.4或0.8微秒</td>\n<td style=\"text-align:center\">0.4或0.8微秒</td>\n<td style=\"text-align:center\">0.8、1.6或3.2微秒</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">总符号时间</td>\n<td style=\"text-align:center\">3.6或4.0微秒</td>\n<td style=\"text-align:center\">3.6或4.0微秒</td>\n<td style=\"text-align:center\">13.6、14.4或16.0微秒</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">调制技术</td>\n<td style=\"text-align:center\">BPSK/QPSK/16-QAM/64-QAM</td>\n<td style=\"text-align:center\">BPSK/QPSK/16-QAM/64-QAM</td>\n<td style=\"text-align:center\">BPSK/QPSK/16-QAM/64-QAM/1024-QAM</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">多用户-多输入多输出</td>\n<td style=\"text-align:center\">不适用</td>\n<td style=\"text-align:center\">下行传输</td>\n<td style=\"text-align:center\">下行传输和上行传输</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>802.11ax主要的优势在于OFDMA技术，将信道划分为若干较小的子信道。</p>\n<h3 id=\"多用户\"><a href=\"#多用户\" class=\"headerlink\" title=\"多用户\"></a>多用户</h3><p>OFDMA通过细分信道来实现多用户访问；<br>MU-MIMO通过使用不同的空间流来实现多用户访问；</p>\n<h3 id=\"正交频分多址（OFDMA）\"><a href=\"#正交频分多址（OFDMA）\" class=\"headerlink\" title=\"正交频分多址（OFDMA）\"></a>正交频分多址（OFDMA）</h3><p>OFDMA技术将信道细分为较小的频率分配单元————资源单元（RU）————从而能同时向多个用户发送小帧。例如：<br>将传统的20MHz信道划分为9个子信道，采用OFDMA技术的802.11ax接入点可以同时向9个802.11ax客户端发送小帧。<br>它能够更好的利用频率空间，已经在LTE蜂窝通信中得到验证。</p>\n<p>802.11ax技术仍然采用802.11a/g/n/ac无线接口可以理解的OFDM技术，以基本速率传输管理帧和控制帧。</p>\n<p><strong>副载波</strong><br>802.11n/ac 在20MHz信道包括64个副载波，副载波的宽度为312.5kHz<br>802.11ax在20MHz信道包括256个副载波，副载波宽度为78.125KHz</p>\n<p>副载波包括3种：<br>数据副载波， 采用802.11ac相同的调制编码方案（MCS），增加两种调制编码方案和1024-QAM<br>导频副载波， 仅用于发射机和接收机之间的同步<br>未使用的副载波， 防止邻信道和子信道干扰</p>\n<p><strong>资源单元</strong><br>OFDM传输数据个多个客户端时，每一个时段都需要使用整个20MHz信道与单一客户端进行传输，各客户端分时占用。</p>\n<p>OFDMA包括256个副载波，242个副载波用于传输数据，可以将其细分为 106、 52、 26副载波资源单元，大致对应20MHz、8MHz、4MHz、2MHz<br>802.11ax接入点可以利用8MHz信道与一个802.11ax客户端通信，同时利用4MHz子信道与2个802.11ax客户端进行通信。既可以上行，也可以是下行。</p>\n<p><strong>触发帧</strong><br>触发帧为802.11ax客户端分配资源单元。</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">触发帧类型</th>\n<th style=\"text-align:center\">各类触发帧</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">基本触发帧</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">波束成形报告轮询</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">多用户块确认请求</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">多用户请求发送</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">缓冲区状态报告轮询</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">带重试的组播多用户块确认请求</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">带宽查询报告轮询</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7</td>\n<td style=\"text-align:center\">NDP反馈报告轮询</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">8~15</td>\n<td style=\"text-align:center\">保留</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>触发帧的用户信息字段种每个特定资源单元有长度为7bit的唯一组合定义。</p>\n<p><strong>下行链路OFDMA</strong><br>接入点取得发送机会后，首先发送MU-RTS触发帧，分配资源单元，为了让遗留客户端重置，使用20MHz的信道发送。<br>收到客户端发送的并行CTS响应后，接入点开始向支持OFDMA的客户端传输多用户DL-PPDU。</p>\n<p>802.11ax接入点——————————————————————————————————-802.11ax客户端</p>\n<p>——————-AIFS MU-RTS SIFS————-SIFS—-DL-PPDU SIFS  BAR  SIFS———————-&gt;<br>&lt;———————————————CTS——————————————————块确认帧———-STA1<br>&lt;———————————————CTS——————————————————块确认帧———-STA2<br>&lt;———————————————CTS——————————————————块确认帧———-STA3<br>&lt;———————————————CTS——————————————————块确认帧———-STA4</p>\n<p><strong>上行连接OFDMA</strong><br>802.11ax接入点必须首先竞争介质的控制权并取得发送机会，然后才能协调802.11ax客户端发送的数据（上行传输）<br>上行传输非常复杂。需要三轮触发帧才能实现一次上行传输数据。</p>\n<p>802.11ax接入点———————————————————————————————————————802.11ax客户端</p>\n<p>—-AIFS BSRP SIFS———-SIFS—MU-RTS SIFS —— SIFS 触发帧 SIFS—————-SIFS 多终端块确认帧—-&gt;<br>&lt;—————————BSR——————————CTS——————————UL-PPDU——————————-STA1<br>&lt;—————————BSR——————————CTS——————————UL-PPDU——————————-STA2<br>&lt;—————————BSR——————————CTS——————————UL-PPDU——————————-STA3<br>&lt;—————————BSR——————————CTS——————————UL-PPDU——————————-STA4</p>\n","site":{"data":{}},"excerpt":"","more":"<p>高效无线局域网技术概述<br>多用户<br>正交频分多址</p>\n<blockquote>\n<p>副载波<br>资源单元<br>触发帧<br>下行链路OFDMA<br>上行链路OFDMA</p>\n</blockquote>\n<p>多用户-多输入多输出<br>基本服务集颜色</p>\n<blockquote>\n<p>自适应空闲信道评估<br>双NAV计数器</p>\n</blockquote>\n<p>目标唤醒时间<br>其他802.11ax物理层与MAC子层功能</p>\n<blockquote>\n<p>1024-QAM<br>长符合时间与保护间隔<br>802.11ax PPDU格式<br>仅20MHz模式<br>多流量标识符聚合的MAC协议数据单元</p>\n</blockquote>\n<p>802.11ax设计注意事项</p>\n<h3 id=\"高效无线局域网技术概述\"><a href=\"#高效无线局域网技术概述\" class=\"headerlink\" title=\"高效无线局域网技术概述\"></a>高效无线局域网技术概述</h3><p>高效无线局域网（HEW）是描述802.11ax技术的专业术语。<br>由于无线局域网工作原理决定的，总吞吐量通常最多只能达到标定802.11数据速率的50%。</p>\n<p>导致802.11流量拥塞的因素：<br>遗留客户端的存在导致需要部署RTS/CTS保护机制，保护机制会降低效率。<br>小的数据帧导致MAC子层和介质争用开销过多。<br>由于高层应用协议的缘故，小帧必须按顺序传输，难以实施聚合。（例如:语音）</p>\n<p>802.11n/ac无线接口尽管可以使用更高的数据速率和更宽的信道，但却可能导致802.11流量拥塞。<br>802.11ax致力于更好的流量管理，它的目标并非提高数据速率或增加信道宽度，而是实现更优质、更高效的802.11流量管理。</p>\n<p>802.11n、802.11ac、802.11ax技术比较</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">802.11n</th>\n<th style=\"text-align:center\">802.11ac</th>\n<th style=\"text-align:center\">802.11ax</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">频段</td>\n<td style=\"text-align:center\">2.4GHz 和5GHz</td>\n<td style=\"text-align:center\">仅5GHz</td>\n<td style=\"text-align:center\">2.4GHz和5GHz</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">信道宽度</td>\n<td style=\"text-align:center\">20MHz\\40MHz</td>\n<td style=\"text-align:center\">20/40/80/80+80/160MHz</td>\n<td style=\"text-align:center\">20/40/80/80+80/160MHz</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">频率复用技术</td>\n<td style=\"text-align:center\">OFDM</td>\n<td style=\"text-align:center\">OFDM</td>\n<td style=\"text-align:center\">OFDM和OFDMA</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">副载波间隔</td>\n<td style=\"text-align:center\">312.5kHz</td>\n<td style=\"text-align:center\">312.5kHz</td>\n<td style=\"text-align:center\">78.125kHz</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">OFDM符号时间</td>\n<td style=\"text-align:center\">3.2微秒</td>\n<td style=\"text-align:center\">3.2微秒</td>\n<td style=\"text-align:center\">12.8微秒</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">保护间隔</td>\n<td style=\"text-align:center\">0.4或0.8微秒</td>\n<td style=\"text-align:center\">0.4或0.8微秒</td>\n<td style=\"text-align:center\">0.8、1.6或3.2微秒</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">总符号时间</td>\n<td style=\"text-align:center\">3.6或4.0微秒</td>\n<td style=\"text-align:center\">3.6或4.0微秒</td>\n<td style=\"text-align:center\">13.6、14.4或16.0微秒</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">调制技术</td>\n<td style=\"text-align:center\">BPSK/QPSK/16-QAM/64-QAM</td>\n<td style=\"text-align:center\">BPSK/QPSK/16-QAM/64-QAM</td>\n<td style=\"text-align:center\">BPSK/QPSK/16-QAM/64-QAM/1024-QAM</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">多用户-多输入多输出</td>\n<td style=\"text-align:center\">不适用</td>\n<td style=\"text-align:center\">下行传输</td>\n<td style=\"text-align:center\">下行传输和上行传输</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>802.11ax主要的优势在于OFDMA技术，将信道划分为若干较小的子信道。</p>\n<h3 id=\"多用户\"><a href=\"#多用户\" class=\"headerlink\" title=\"多用户\"></a>多用户</h3><p>OFDMA通过细分信道来实现多用户访问；<br>MU-MIMO通过使用不同的空间流来实现多用户访问；</p>\n<h3 id=\"正交频分多址（OFDMA）\"><a href=\"#正交频分多址（OFDMA）\" class=\"headerlink\" title=\"正交频分多址（OFDMA）\"></a>正交频分多址（OFDMA）</h3><p>OFDMA技术将信道细分为较小的频率分配单元————资源单元（RU）————从而能同时向多个用户发送小帧。例如：<br>将传统的20MHz信道划分为9个子信道，采用OFDMA技术的802.11ax接入点可以同时向9个802.11ax客户端发送小帧。<br>它能够更好的利用频率空间，已经在LTE蜂窝通信中得到验证。</p>\n<p>802.11ax技术仍然采用802.11a/g/n/ac无线接口可以理解的OFDM技术，以基本速率传输管理帧和控制帧。</p>\n<p><strong>副载波</strong><br>802.11n/ac 在20MHz信道包括64个副载波，副载波的宽度为312.5kHz<br>802.11ax在20MHz信道包括256个副载波，副载波宽度为78.125KHz</p>\n<p>副载波包括3种：<br>数据副载波， 采用802.11ac相同的调制编码方案（MCS），增加两种调制编码方案和1024-QAM<br>导频副载波， 仅用于发射机和接收机之间的同步<br>未使用的副载波， 防止邻信道和子信道干扰</p>\n<p><strong>资源单元</strong><br>OFDM传输数据个多个客户端时，每一个时段都需要使用整个20MHz信道与单一客户端进行传输，各客户端分时占用。</p>\n<p>OFDMA包括256个副载波，242个副载波用于传输数据，可以将其细分为 106、 52、 26副载波资源单元，大致对应20MHz、8MHz、4MHz、2MHz<br>802.11ax接入点可以利用8MHz信道与一个802.11ax客户端通信，同时利用4MHz子信道与2个802.11ax客户端进行通信。既可以上行，也可以是下行。</p>\n<p><strong>触发帧</strong><br>触发帧为802.11ax客户端分配资源单元。</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">触发帧类型</th>\n<th style=\"text-align:center\">各类触发帧</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">基本触发帧</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">波束成形报告轮询</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">多用户块确认请求</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">多用户请求发送</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">缓冲区状态报告轮询</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">带重试的组播多用户块确认请求</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">带宽查询报告轮询</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7</td>\n<td style=\"text-align:center\">NDP反馈报告轮询</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">8~15</td>\n<td style=\"text-align:center\">保留</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>触发帧的用户信息字段种每个特定资源单元有长度为7bit的唯一组合定义。</p>\n<p><strong>下行链路OFDMA</strong><br>接入点取得发送机会后，首先发送MU-RTS触发帧，分配资源单元，为了让遗留客户端重置，使用20MHz的信道发送。<br>收到客户端发送的并行CTS响应后，接入点开始向支持OFDMA的客户端传输多用户DL-PPDU。</p>\n<p>802.11ax接入点——————————————————————————————————-802.11ax客户端</p>\n<p>——————-AIFS MU-RTS SIFS————-SIFS—-DL-PPDU SIFS  BAR  SIFS———————-&gt;<br>&lt;———————————————CTS——————————————————块确认帧———-STA1<br>&lt;———————————————CTS——————————————————块确认帧———-STA2<br>&lt;———————————————CTS——————————————————块确认帧———-STA3<br>&lt;———————————————CTS——————————————————块确认帧———-STA4</p>\n<p><strong>上行连接OFDMA</strong><br>802.11ax接入点必须首先竞争介质的控制权并取得发送机会，然后才能协调802.11ax客户端发送的数据（上行传输）<br>上行传输非常复杂。需要三轮触发帧才能实现一次上行传输数据。</p>\n<p>802.11ax接入点———————————————————————————————————————802.11ax客户端</p>\n<p>—-AIFS BSRP SIFS———-SIFS—MU-RTS SIFS —— SIFS 触发帧 SIFS—————-SIFS 多终端块确认帧—-&gt;<br>&lt;—————————BSR——————————CTS——————————UL-PPDU——————————-STA1<br>&lt;—————————BSR——————————CTS——————————UL-PPDU——————————-STA2<br>&lt;—————————BSR——————————CTS——————————UL-PPDU——————————-STA3<br>&lt;—————————BSR——————————CTS——————————UL-PPDU——————————-STA4</p>\n"},{"title":"CWNA:802.11介质访问","date":"2022-02-10T05:37:53.000Z","_content":"CSMA/CA与 CSMA/CD\n冲突检测\n分布式协调功能\n> 物理载波监听\n> 虚拟载波监听\n> 伪随机退避计时器\n> 帧间间隔\n\n点协调功能\n混合协调功能\n> 增强型分布式信道访问\n> HCF受控信道访问\n\nWi-Fi多媒体\n占用时长公平性\n\n### CSMA/CD 与 CSMA/CA\n802.3以太网使用带冲突检测的载波监听多路访问（CSMA/CD)的介质争用方法。\n802.11无线局域网使用带冲突避免的载波监听多路访问（CSMA/CA）的介质争用方法。\n\n**CSMA/CD**\n有线节点首先检查另一个节点是否在传输数据。如果其他节点没有占用以太网介质，节点将发送第一个信息比特。\n如果没有检测到冲突，则节点继续发送其他信息比特，同时继续检测是否存在冲突。\n如果检测到冲突，则节点计算一个随机等待时间，然后重新开始上述过程。\n\n**CSMA/CA**\n802.11节点无法同时发送和接收数据，半双工的特性决定了采用CSMA/CA\n终端确定其他终端没有传输数据时，802.11无线接口选择一个随机的退避值，并根据退避值等待一段额外的时间再开始传输。\n在此期间，终端继续监听介质，确保没有其他终端开始传输。\n\n载波监听，确定介质是否繁忙；\n多路访问，确保所有无线接口都能获得公平使用介质的机会（一次仅有一个无线接口可以传输）\n冲突避免，任何给定时间，仅有一个无线接口能访问介质，以避免可能存在的冲突。\n\n\n### 冲突检测\n所有802.11单播帧必须经过确认，而广播帧和多播帧不需要确认。\n如果无线接口没有收到确认帧，则说明传输过程中可能存在冲突。\n确认帧相当于验证802.11单播帧是否成功交付的机制：如果无法提供交付证明，原无线接口假定传输失败并**重传单播帧**。\n\n\n### 分布式协调功能\nDCF是无线局域网通信的基本访问方法，而CSMA/CA过程是DCF的基础。\nCSMA/CA协议主要包括4种机制：\n> 物理载波监听         确定无线介质是否繁忙\n> 虚拟载波监听         确定无线介质是否繁忙\n> 伪随机退避计时器     争用介质\n> 帧间间隔            提供访问无线介质的优先级\n\n4种机制同时实施，旨在确保仅有一个802.11无线接口使用半双工介质传输数据。\n\n**物理载波监听**\n所有没有收发数据的终端都会持续进行物理载波监听。它是监听信道，查看是否有其他射频传输占用信道。\n确定是否存在需要终端接收的帧传输。如果介质繁忙，无线接口将尝试与传输同步。\n确定介质在传输开始前是否繁忙。仅当介质空闲时，终端才能传输数据。\n\n802.11无线接口通过空闲信道评估（CCA)实现这个目的。它通过两种空闲信道评估阈值实现。\n**信号检测阈值**用于识别802.11无线接口的前同步码传输。如果接收信号高于本底噪声4dB左右，无线接口通常能解码任何收到的802.11前同部门传输。\n**能量检测阈值**用于在空闲信道评估期间检测其他类型的射频传输。能量检测阈值比信号检测阈值高20dB\n只有检测到两个阈值都空闲时，才允许传输。  如何判定繁忙？这是个问题。\n\n**虚拟载波监听**\n802.11帧头包括一个持续时间/ID字段。客户端发送单播帧时，该字段值介于0和32767之间。它表示一个活动帧交换过程所需的时间，在此期间，其他无线接口不会中断传输过程。\n这个值用于重置其他终端的网络分配向量计时器。\n\n虚载波监听使用称为网络分配向量（NAV)的计时器机制，NAV计时器根据从前一个帧传输中观察到的持续时间值来预测介质今后的流量。\n\n工作方式：\n监听终端在侦听到其他终端的帧传输时将查看帧头，并确定持续时间/ID字段是否包含持续时间值或ID值。如果字段中包含持续时间值，监听终端将自己的NAV计时器设置为该值，\n然后使用NAV作为倒数计时器。在倒计时减少到0之前，终端认为射频介质处于繁忙状态。传输数据的802.11无线接口通过这个过程通知其他终端，将在一段时间（持续时间/ID)\n值内占用介质。没有传输数据的终端，等NAV减少为0再开始争用介质的使用权。再NAV计时器到达0之前，终端无法争用介质。\n它是一种二层载波监听机制。\n\n虚载波监听属于二层防御措施，物理载波监听属于一层防御措施。\n\n**伪随机退避计时器**\n伪随机退避计时器是终端在传输前最后使用的计时器。退避计时器减少到0时，终端重新评估信道状态，如果信道空闲，则开始传输数据。\n如果物理载波监听或虚拟载波监听机制发现介质繁忙，则中止递减退避计数并保持退避计数的值。退避技术减少到0时，开始传输。\n> OFDM终端从0~15的争用窗口中选择一个随机数，假如是4\n> 终端将随机数与时隙值9微妙相乘\n> 如果在时隙内没有介质活动，退避计数器将减少一个时隙\n> 退避计数递减至0\n> 终端执行最后一次信道评估，如果空闲，开始传输。\n> 如果信道繁忙，终端将推迟一个时隙，然后再次执行空闲信道评估，如果空闲，开始传输。\n\n伪随机数保证了各个终端都有机会。\n在复杂环境中，重传的终端的伪随机退避计将越来越大，直至最大值。\n\n**帧间间隔**\n无线帧传输之间的一段时间，共10种，时间从短到长排列\n> 缩减的帧间间隔（RIFS),优先级最高。\n> 短帧帧间间隔（SIFS)，优先级第二。\n> PCF帧间间隔(PIFS)，优先级中等。\n> DCF帧间间隔(DIFS)，优先级最低\n> 仲裁帧间间隔(AIFS), 由QoS终端使用\n> 扩展的帧间将(EIFS)，在收到损坏的帧后使用。\n\n帧间间隔用于确定随后传输的802.11流量类型，也可以作为虚载波监听的备份机制。\n\n","source":"_posts/CWNA-802-11介质访问.md","raw":"---\ntitle: 'CWNA:802.11介质访问'\ndate: 2022-02-10 13:37:53\ntags: 'Wi-Fi'\n---\nCSMA/CA与 CSMA/CD\n冲突检测\n分布式协调功能\n> 物理载波监听\n> 虚拟载波监听\n> 伪随机退避计时器\n> 帧间间隔\n\n点协调功能\n混合协调功能\n> 增强型分布式信道访问\n> HCF受控信道访问\n\nWi-Fi多媒体\n占用时长公平性\n\n### CSMA/CD 与 CSMA/CA\n802.3以太网使用带冲突检测的载波监听多路访问（CSMA/CD)的介质争用方法。\n802.11无线局域网使用带冲突避免的载波监听多路访问（CSMA/CA）的介质争用方法。\n\n**CSMA/CD**\n有线节点首先检查另一个节点是否在传输数据。如果其他节点没有占用以太网介质，节点将发送第一个信息比特。\n如果没有检测到冲突，则节点继续发送其他信息比特，同时继续检测是否存在冲突。\n如果检测到冲突，则节点计算一个随机等待时间，然后重新开始上述过程。\n\n**CSMA/CA**\n802.11节点无法同时发送和接收数据，半双工的特性决定了采用CSMA/CA\n终端确定其他终端没有传输数据时，802.11无线接口选择一个随机的退避值，并根据退避值等待一段额外的时间再开始传输。\n在此期间，终端继续监听介质，确保没有其他终端开始传输。\n\n载波监听，确定介质是否繁忙；\n多路访问，确保所有无线接口都能获得公平使用介质的机会（一次仅有一个无线接口可以传输）\n冲突避免，任何给定时间，仅有一个无线接口能访问介质，以避免可能存在的冲突。\n\n\n### 冲突检测\n所有802.11单播帧必须经过确认，而广播帧和多播帧不需要确认。\n如果无线接口没有收到确认帧，则说明传输过程中可能存在冲突。\n确认帧相当于验证802.11单播帧是否成功交付的机制：如果无法提供交付证明，原无线接口假定传输失败并**重传单播帧**。\n\n\n### 分布式协调功能\nDCF是无线局域网通信的基本访问方法，而CSMA/CA过程是DCF的基础。\nCSMA/CA协议主要包括4种机制：\n> 物理载波监听         确定无线介质是否繁忙\n> 虚拟载波监听         确定无线介质是否繁忙\n> 伪随机退避计时器     争用介质\n> 帧间间隔            提供访问无线介质的优先级\n\n4种机制同时实施，旨在确保仅有一个802.11无线接口使用半双工介质传输数据。\n\n**物理载波监听**\n所有没有收发数据的终端都会持续进行物理载波监听。它是监听信道，查看是否有其他射频传输占用信道。\n确定是否存在需要终端接收的帧传输。如果介质繁忙，无线接口将尝试与传输同步。\n确定介质在传输开始前是否繁忙。仅当介质空闲时，终端才能传输数据。\n\n802.11无线接口通过空闲信道评估（CCA)实现这个目的。它通过两种空闲信道评估阈值实现。\n**信号检测阈值**用于识别802.11无线接口的前同步码传输。如果接收信号高于本底噪声4dB左右，无线接口通常能解码任何收到的802.11前同部门传输。\n**能量检测阈值**用于在空闲信道评估期间检测其他类型的射频传输。能量检测阈值比信号检测阈值高20dB\n只有检测到两个阈值都空闲时，才允许传输。  如何判定繁忙？这是个问题。\n\n**虚拟载波监听**\n802.11帧头包括一个持续时间/ID字段。客户端发送单播帧时，该字段值介于0和32767之间。它表示一个活动帧交换过程所需的时间，在此期间，其他无线接口不会中断传输过程。\n这个值用于重置其他终端的网络分配向量计时器。\n\n虚载波监听使用称为网络分配向量（NAV)的计时器机制，NAV计时器根据从前一个帧传输中观察到的持续时间值来预测介质今后的流量。\n\n工作方式：\n监听终端在侦听到其他终端的帧传输时将查看帧头，并确定持续时间/ID字段是否包含持续时间值或ID值。如果字段中包含持续时间值，监听终端将自己的NAV计时器设置为该值，\n然后使用NAV作为倒数计时器。在倒计时减少到0之前，终端认为射频介质处于繁忙状态。传输数据的802.11无线接口通过这个过程通知其他终端，将在一段时间（持续时间/ID)\n值内占用介质。没有传输数据的终端，等NAV减少为0再开始争用介质的使用权。再NAV计时器到达0之前，终端无法争用介质。\n它是一种二层载波监听机制。\n\n虚载波监听属于二层防御措施，物理载波监听属于一层防御措施。\n\n**伪随机退避计时器**\n伪随机退避计时器是终端在传输前最后使用的计时器。退避计时器减少到0时，终端重新评估信道状态，如果信道空闲，则开始传输数据。\n如果物理载波监听或虚拟载波监听机制发现介质繁忙，则中止递减退避计数并保持退避计数的值。退避技术减少到0时，开始传输。\n> OFDM终端从0~15的争用窗口中选择一个随机数，假如是4\n> 终端将随机数与时隙值9微妙相乘\n> 如果在时隙内没有介质活动，退避计数器将减少一个时隙\n> 退避计数递减至0\n> 终端执行最后一次信道评估，如果空闲，开始传输。\n> 如果信道繁忙，终端将推迟一个时隙，然后再次执行空闲信道评估，如果空闲，开始传输。\n\n伪随机数保证了各个终端都有机会。\n在复杂环境中，重传的终端的伪随机退避计将越来越大，直至最大值。\n\n**帧间间隔**\n无线帧传输之间的一段时间，共10种，时间从短到长排列\n> 缩减的帧间间隔（RIFS),优先级最高。\n> 短帧帧间间隔（SIFS)，优先级第二。\n> PCF帧间间隔(PIFS)，优先级中等。\n> DCF帧间间隔(DIFS)，优先级最低\n> 仲裁帧间间隔(AIFS), 由QoS终端使用\n> 扩展的帧间将(EIFS)，在收到损坏的帧后使用。\n\n帧间间隔用于确定随后传输的802.11流量类型，也可以作为虚载波监听的备份机制。\n\n","slug":"CWNA-802-11介质访问","published":1,"updated":"2022-02-11T09:54:20.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3k001018jx6gwrhhrf","content":"<p>CSMA/CA与 CSMA/CD<br>冲突检测<br>分布式协调功能</p>\n<blockquote>\n<p>物理载波监听<br>虚拟载波监听<br>伪随机退避计时器<br>帧间间隔</p>\n</blockquote>\n<p>点协调功能<br>混合协调功能</p>\n<blockquote>\n<p>增强型分布式信道访问<br>HCF受控信道访问</p>\n</blockquote>\n<p>Wi-Fi多媒体<br>占用时长公平性</p>\n<h3 id=\"CSMA-CD-与-CSMA-CA\"><a href=\"#CSMA-CD-与-CSMA-CA\" class=\"headerlink\" title=\"CSMA/CD 与 CSMA/CA\"></a>CSMA/CD 与 CSMA/CA</h3><p>802.3以太网使用带冲突检测的载波监听多路访问（CSMA/CD)的介质争用方法。<br>802.11无线局域网使用带冲突避免的载波监听多路访问（CSMA/CA）的介质争用方法。</p>\n<p><strong>CSMA/CD</strong><br>有线节点首先检查另一个节点是否在传输数据。如果其他节点没有占用以太网介质，节点将发送第一个信息比特。<br>如果没有检测到冲突，则节点继续发送其他信息比特，同时继续检测是否存在冲突。<br>如果检测到冲突，则节点计算一个随机等待时间，然后重新开始上述过程。</p>\n<p><strong>CSMA/CA</strong><br>802.11节点无法同时发送和接收数据，半双工的特性决定了采用CSMA/CA<br>终端确定其他终端没有传输数据时，802.11无线接口选择一个随机的退避值，并根据退避值等待一段额外的时间再开始传输。<br>在此期间，终端继续监听介质，确保没有其他终端开始传输。</p>\n<p>载波监听，确定介质是否繁忙；<br>多路访问，确保所有无线接口都能获得公平使用介质的机会（一次仅有一个无线接口可以传输）<br>冲突避免，任何给定时间，仅有一个无线接口能访问介质，以避免可能存在的冲突。</p>\n<h3 id=\"冲突检测\"><a href=\"#冲突检测\" class=\"headerlink\" title=\"冲突检测\"></a>冲突检测</h3><p>所有802.11单播帧必须经过确认，而广播帧和多播帧不需要确认。<br>如果无线接口没有收到确认帧，则说明传输过程中可能存在冲突。<br>确认帧相当于验证802.11单播帧是否成功交付的机制：如果无法提供交付证明，原无线接口假定传输失败并<strong>重传单播帧</strong>。</p>\n<h3 id=\"分布式协调功能\"><a href=\"#分布式协调功能\" class=\"headerlink\" title=\"分布式协调功能\"></a>分布式协调功能</h3><p>DCF是无线局域网通信的基本访问方法，而CSMA/CA过程是DCF的基础。<br>CSMA/CA协议主要包括4种机制：</p>\n<blockquote>\n<p>物理载波监听         确定无线介质是否繁忙<br>虚拟载波监听         确定无线介质是否繁忙<br>伪随机退避计时器     争用介质<br>帧间间隔            提供访问无线介质的优先级</p>\n</blockquote>\n<p>4种机制同时实施，旨在确保仅有一个802.11无线接口使用半双工介质传输数据。</p>\n<p><strong>物理载波监听</strong><br>所有没有收发数据的终端都会持续进行物理载波监听。它是监听信道，查看是否有其他射频传输占用信道。<br>确定是否存在需要终端接收的帧传输。如果介质繁忙，无线接口将尝试与传输同步。<br>确定介质在传输开始前是否繁忙。仅当介质空闲时，终端才能传输数据。</p>\n<p>802.11无线接口通过空闲信道评估（CCA)实现这个目的。它通过两种空闲信道评估阈值实现。<br><strong>信号检测阈值</strong>用于识别802.11无线接口的前同步码传输。如果接收信号高于本底噪声4dB左右，无线接口通常能解码任何收到的802.11前同部门传输。<br><strong>能量检测阈值</strong>用于在空闲信道评估期间检测其他类型的射频传输。能量检测阈值比信号检测阈值高20dB<br>只有检测到两个阈值都空闲时，才允许传输。  如何判定繁忙？这是个问题。</p>\n<p><strong>虚拟载波监听</strong><br>802.11帧头包括一个持续时间/ID字段。客户端发送单播帧时，该字段值介于0和32767之间。它表示一个活动帧交换过程所需的时间，在此期间，其他无线接口不会中断传输过程。<br>这个值用于重置其他终端的网络分配向量计时器。</p>\n<p>虚载波监听使用称为网络分配向量（NAV)的计时器机制，NAV计时器根据从前一个帧传输中观察到的持续时间值来预测介质今后的流量。</p>\n<p>工作方式：<br>监听终端在侦听到其他终端的帧传输时将查看帧头，并确定持续时间/ID字段是否包含持续时间值或ID值。如果字段中包含持续时间值，监听终端将自己的NAV计时器设置为该值，<br>然后使用NAV作为倒数计时器。在倒计时减少到0之前，终端认为射频介质处于繁忙状态。传输数据的802.11无线接口通过这个过程通知其他终端，将在一段时间（持续时间/ID)<br>值内占用介质。没有传输数据的终端，等NAV减少为0再开始争用介质的使用权。再NAV计时器到达0之前，终端无法争用介质。<br>它是一种二层载波监听机制。</p>\n<p>虚载波监听属于二层防御措施，物理载波监听属于一层防御措施。</p>\n<p><strong>伪随机退避计时器</strong><br>伪随机退避计时器是终端在传输前最后使用的计时器。退避计时器减少到0时，终端重新评估信道状态，如果信道空闲，则开始传输数据。<br>如果物理载波监听或虚拟载波监听机制发现介质繁忙，则中止递减退避计数并保持退避计数的值。退避技术减少到0时，开始传输。</p>\n<blockquote>\n<p>OFDM终端从0~15的争用窗口中选择一个随机数，假如是4<br>终端将随机数与时隙值9微妙相乘<br>如果在时隙内没有介质活动，退避计数器将减少一个时隙<br>退避计数递减至0<br>终端执行最后一次信道评估，如果空闲，开始传输。<br>如果信道繁忙，终端将推迟一个时隙，然后再次执行空闲信道评估，如果空闲，开始传输。</p>\n</blockquote>\n<p>伪随机数保证了各个终端都有机会。<br>在复杂环境中，重传的终端的伪随机退避计将越来越大，直至最大值。</p>\n<p><strong>帧间间隔</strong><br>无线帧传输之间的一段时间，共10种，时间从短到长排列</p>\n<blockquote>\n<p>缩减的帧间间隔（RIFS),优先级最高。<br>短帧帧间间隔（SIFS)，优先级第二。<br>PCF帧间间隔(PIFS)，优先级中等。<br>DCF帧间间隔(DIFS)，优先级最低<br>仲裁帧间间隔(AIFS), 由QoS终端使用<br>扩展的帧间将(EIFS)，在收到损坏的帧后使用。</p>\n</blockquote>\n<p>帧间间隔用于确定随后传输的802.11流量类型，也可以作为虚载波监听的备份机制。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>CSMA/CA与 CSMA/CD<br>冲突检测<br>分布式协调功能</p>\n<blockquote>\n<p>物理载波监听<br>虚拟载波监听<br>伪随机退避计时器<br>帧间间隔</p>\n</blockquote>\n<p>点协调功能<br>混合协调功能</p>\n<blockquote>\n<p>增强型分布式信道访问<br>HCF受控信道访问</p>\n</blockquote>\n<p>Wi-Fi多媒体<br>占用时长公平性</p>\n<h3 id=\"CSMA-CD-与-CSMA-CA\"><a href=\"#CSMA-CD-与-CSMA-CA\" class=\"headerlink\" title=\"CSMA/CD 与 CSMA/CA\"></a>CSMA/CD 与 CSMA/CA</h3><p>802.3以太网使用带冲突检测的载波监听多路访问（CSMA/CD)的介质争用方法。<br>802.11无线局域网使用带冲突避免的载波监听多路访问（CSMA/CA）的介质争用方法。</p>\n<p><strong>CSMA/CD</strong><br>有线节点首先检查另一个节点是否在传输数据。如果其他节点没有占用以太网介质，节点将发送第一个信息比特。<br>如果没有检测到冲突，则节点继续发送其他信息比特，同时继续检测是否存在冲突。<br>如果检测到冲突，则节点计算一个随机等待时间，然后重新开始上述过程。</p>\n<p><strong>CSMA/CA</strong><br>802.11节点无法同时发送和接收数据，半双工的特性决定了采用CSMA/CA<br>终端确定其他终端没有传输数据时，802.11无线接口选择一个随机的退避值，并根据退避值等待一段额外的时间再开始传输。<br>在此期间，终端继续监听介质，确保没有其他终端开始传输。</p>\n<p>载波监听，确定介质是否繁忙；<br>多路访问，确保所有无线接口都能获得公平使用介质的机会（一次仅有一个无线接口可以传输）<br>冲突避免，任何给定时间，仅有一个无线接口能访问介质，以避免可能存在的冲突。</p>\n<h3 id=\"冲突检测\"><a href=\"#冲突检测\" class=\"headerlink\" title=\"冲突检测\"></a>冲突检测</h3><p>所有802.11单播帧必须经过确认，而广播帧和多播帧不需要确认。<br>如果无线接口没有收到确认帧，则说明传输过程中可能存在冲突。<br>确认帧相当于验证802.11单播帧是否成功交付的机制：如果无法提供交付证明，原无线接口假定传输失败并<strong>重传单播帧</strong>。</p>\n<h3 id=\"分布式协调功能\"><a href=\"#分布式协调功能\" class=\"headerlink\" title=\"分布式协调功能\"></a>分布式协调功能</h3><p>DCF是无线局域网通信的基本访问方法，而CSMA/CA过程是DCF的基础。<br>CSMA/CA协议主要包括4种机制：</p>\n<blockquote>\n<p>物理载波监听         确定无线介质是否繁忙<br>虚拟载波监听         确定无线介质是否繁忙<br>伪随机退避计时器     争用介质<br>帧间间隔            提供访问无线介质的优先级</p>\n</blockquote>\n<p>4种机制同时实施，旨在确保仅有一个802.11无线接口使用半双工介质传输数据。</p>\n<p><strong>物理载波监听</strong><br>所有没有收发数据的终端都会持续进行物理载波监听。它是监听信道，查看是否有其他射频传输占用信道。<br>确定是否存在需要终端接收的帧传输。如果介质繁忙，无线接口将尝试与传输同步。<br>确定介质在传输开始前是否繁忙。仅当介质空闲时，终端才能传输数据。</p>\n<p>802.11无线接口通过空闲信道评估（CCA)实现这个目的。它通过两种空闲信道评估阈值实现。<br><strong>信号检测阈值</strong>用于识别802.11无线接口的前同步码传输。如果接收信号高于本底噪声4dB左右，无线接口通常能解码任何收到的802.11前同部门传输。<br><strong>能量检测阈值</strong>用于在空闲信道评估期间检测其他类型的射频传输。能量检测阈值比信号检测阈值高20dB<br>只有检测到两个阈值都空闲时，才允许传输。  如何判定繁忙？这是个问题。</p>\n<p><strong>虚拟载波监听</strong><br>802.11帧头包括一个持续时间/ID字段。客户端发送单播帧时，该字段值介于0和32767之间。它表示一个活动帧交换过程所需的时间，在此期间，其他无线接口不会中断传输过程。<br>这个值用于重置其他终端的网络分配向量计时器。</p>\n<p>虚载波监听使用称为网络分配向量（NAV)的计时器机制，NAV计时器根据从前一个帧传输中观察到的持续时间值来预测介质今后的流量。</p>\n<p>工作方式：<br>监听终端在侦听到其他终端的帧传输时将查看帧头，并确定持续时间/ID字段是否包含持续时间值或ID值。如果字段中包含持续时间值，监听终端将自己的NAV计时器设置为该值，<br>然后使用NAV作为倒数计时器。在倒计时减少到0之前，终端认为射频介质处于繁忙状态。传输数据的802.11无线接口通过这个过程通知其他终端，将在一段时间（持续时间/ID)<br>值内占用介质。没有传输数据的终端，等NAV减少为0再开始争用介质的使用权。再NAV计时器到达0之前，终端无法争用介质。<br>它是一种二层载波监听机制。</p>\n<p>虚载波监听属于二层防御措施，物理载波监听属于一层防御措施。</p>\n<p><strong>伪随机退避计时器</strong><br>伪随机退避计时器是终端在传输前最后使用的计时器。退避计时器减少到0时，终端重新评估信道状态，如果信道空闲，则开始传输数据。<br>如果物理载波监听或虚拟载波监听机制发现介质繁忙，则中止递减退避计数并保持退避计数的值。退避技术减少到0时，开始传输。</p>\n<blockquote>\n<p>OFDM终端从0~15的争用窗口中选择一个随机数，假如是4<br>终端将随机数与时隙值9微妙相乘<br>如果在时隙内没有介质活动，退避计数器将减少一个时隙<br>退避计数递减至0<br>终端执行最后一次信道评估，如果空闲，开始传输。<br>如果信道繁忙，终端将推迟一个时隙，然后再次执行空闲信道评估，如果空闲，开始传输。</p>\n</blockquote>\n<p>伪随机数保证了各个终端都有机会。<br>在复杂环境中，重传的终端的伪随机退避计将越来越大，直至最大值。</p>\n<p><strong>帧间间隔</strong><br>无线帧传输之间的一段时间，共10种，时间从短到长排列</p>\n<blockquote>\n<p>缩减的帧间间隔（RIFS),优先级最高。<br>短帧帧间间隔（SIFS)，优先级第二。<br>PCF帧间间隔(PIFS)，优先级中等。<br>DCF帧间间隔(DIFS)，优先级最低<br>仲裁帧间间隔(AIFS), 由QoS终端使用<br>扩展的帧间将(EIFS)，在收到损坏的帧后使用。</p>\n</blockquote>\n<p>帧间间隔用于确定随后传输的802.11流量类型，也可以作为虚载波监听的备份机制。</p>\n"},{"title":"CWNA:802.11介质访问（二）","date":"2022-02-14T02:00:36.000Z","_content":"\n### 点协调功能\nPCF是一种可选的介质访问方法，IEEE认为PCF已经过时，可能今后会将其删除。\n\n### 混合协调功能\n定义服务质量的802.11e增加了混合协调功能。\nHCF将DCF和PCF功能相结合并加以改进，定义了两种信道访问方法：增强型分布式信道访问（EDCA）和HCF受控信道访问（HCCA)\n前面的DCF和PCF介质争用机制只允许802.11无线接口传输单个帧。\nHCF定义的机制允许802.11无线接口通过射频介质传输多个帧。当兼容HCF的无线接口争用介质时，无线接口将获得帧发送时间，这段时间称为发送机会（TXOP）。\n在此期间，802.11无线接口可以通过帧突发（frame burst)发送多个帧，帧之间通过SIFS隔开，以确保其他无线接口不会在帧突发期间占用介质。\n\n**增强型分布式信道访问**\n提供差异化访问的无线介质访问方法，能将流量定向到4种访问类别的QoS优先级队列。优先级标记提供了在MAC子层实现QoS的机制。\nEDMAC基于8个用户优先级字段定义了4种访问类别，优先级从低到高：\nAC_BK(背景)\nAC_BE（尽力而为)\nAC_VI(视频)\nAC_VO(语音)\n\n每种访问类别经过改进的增强型分布式信道访问功能争用介质。拥有高优先级的帧具有最小退避值，因此机会更多。\n\n**HCF受控信道访问**\n内置在接入点中，具有更高的无线介质访问优先级。\n\n### Wi-Fi 多媒体\n语音，音频，视频等应用流量对延迟和抖动的容忍度较低，需要比标准数据流量更高的优先级。\nWMM基于EDCA机制，因此以太网的802.1D优先级标记用于将流量定向到4种访问类别的优先级队列。\n\n### 占用时长公平性\n由于存在高速设备和低速设备争用无线介质会导致低速设备占用较多传输时长，\n占用时长公平性，使得高数设备和低速设备有均等的时长，而非均等的机会。这样高速设备能够更多机会访问介质，最终提升无线局域网的性能、容量和吞吐量。\n它致力于避免速度较慢设备影响网络的整体性能。\n\n","source":"_posts/CWNA-802-11介质访问（二）.md","raw":"---\ntitle: 'CWNA:802.11介质访问（二）'\ndate: 2022-02-14 10:00:36\ntags: 'Wi-Fi'\n---\n\n### 点协调功能\nPCF是一种可选的介质访问方法，IEEE认为PCF已经过时，可能今后会将其删除。\n\n### 混合协调功能\n定义服务质量的802.11e增加了混合协调功能。\nHCF将DCF和PCF功能相结合并加以改进，定义了两种信道访问方法：增强型分布式信道访问（EDCA）和HCF受控信道访问（HCCA)\n前面的DCF和PCF介质争用机制只允许802.11无线接口传输单个帧。\nHCF定义的机制允许802.11无线接口通过射频介质传输多个帧。当兼容HCF的无线接口争用介质时，无线接口将获得帧发送时间，这段时间称为发送机会（TXOP）。\n在此期间，802.11无线接口可以通过帧突发（frame burst)发送多个帧，帧之间通过SIFS隔开，以确保其他无线接口不会在帧突发期间占用介质。\n\n**增强型分布式信道访问**\n提供差异化访问的无线介质访问方法，能将流量定向到4种访问类别的QoS优先级队列。优先级标记提供了在MAC子层实现QoS的机制。\nEDMAC基于8个用户优先级字段定义了4种访问类别，优先级从低到高：\nAC_BK(背景)\nAC_BE（尽力而为)\nAC_VI(视频)\nAC_VO(语音)\n\n每种访问类别经过改进的增强型分布式信道访问功能争用介质。拥有高优先级的帧具有最小退避值，因此机会更多。\n\n**HCF受控信道访问**\n内置在接入点中，具有更高的无线介质访问优先级。\n\n### Wi-Fi 多媒体\n语音，音频，视频等应用流量对延迟和抖动的容忍度较低，需要比标准数据流量更高的优先级。\nWMM基于EDCA机制，因此以太网的802.1D优先级标记用于将流量定向到4种访问类别的优先级队列。\n\n### 占用时长公平性\n由于存在高速设备和低速设备争用无线介质会导致低速设备占用较多传输时长，\n占用时长公平性，使得高数设备和低速设备有均等的时长，而非均等的机会。这样高速设备能够更多机会访问介质，最终提升无线局域网的性能、容量和吞吐量。\n它致力于避免速度较慢设备影响网络的整体性能。\n\n","slug":"CWNA-802-11介质访问（二）","published":1,"updated":"2022-02-14T07:21:09.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3l001218jxa1g95uga","content":"<h3 id=\"点协调功能\"><a href=\"#点协调功能\" class=\"headerlink\" title=\"点协调功能\"></a>点协调功能</h3><p>PCF是一种可选的介质访问方法，IEEE认为PCF已经过时，可能今后会将其删除。</p>\n<h3 id=\"混合协调功能\"><a href=\"#混合协调功能\" class=\"headerlink\" title=\"混合协调功能\"></a>混合协调功能</h3><p>定义服务质量的802.11e增加了混合协调功能。<br>HCF将DCF和PCF功能相结合并加以改进，定义了两种信道访问方法：增强型分布式信道访问（EDCA）和HCF受控信道访问（HCCA)<br>前面的DCF和PCF介质争用机制只允许802.11无线接口传输单个帧。<br>HCF定义的机制允许802.11无线接口通过射频介质传输多个帧。当兼容HCF的无线接口争用介质时，无线接口将获得帧发送时间，这段时间称为发送机会（TXOP）。<br>在此期间，802.11无线接口可以通过帧突发（frame burst)发送多个帧，帧之间通过SIFS隔开，以确保其他无线接口不会在帧突发期间占用介质。</p>\n<p><strong>增强型分布式信道访问</strong><br>提供差异化访问的无线介质访问方法，能将流量定向到4种访问类别的QoS优先级队列。优先级标记提供了在MAC子层实现QoS的机制。<br>EDMAC基于8个用户优先级字段定义了4种访问类别，优先级从低到高：<br>AC_BK(背景)<br>AC_BE（尽力而为)<br>AC_VI(视频)<br>AC_VO(语音)</p>\n<p>每种访问类别经过改进的增强型分布式信道访问功能争用介质。拥有高优先级的帧具有最小退避值，因此机会更多。</p>\n<p><strong>HCF受控信道访问</strong><br>内置在接入点中，具有更高的无线介质访问优先级。</p>\n<h3 id=\"Wi-Fi-多媒体\"><a href=\"#Wi-Fi-多媒体\" class=\"headerlink\" title=\"Wi-Fi 多媒体\"></a>Wi-Fi 多媒体</h3><p>语音，音频，视频等应用流量对延迟和抖动的容忍度较低，需要比标准数据流量更高的优先级。<br>WMM基于EDCA机制，因此以太网的802.1D优先级标记用于将流量定向到4种访问类别的优先级队列。</p>\n<h3 id=\"占用时长公平性\"><a href=\"#占用时长公平性\" class=\"headerlink\" title=\"占用时长公平性\"></a>占用时长公平性</h3><p>由于存在高速设备和低速设备争用无线介质会导致低速设备占用较多传输时长，<br>占用时长公平性，使得高数设备和低速设备有均等的时长，而非均等的机会。这样高速设备能够更多机会访问介质，最终提升无线局域网的性能、容量和吞吐量。<br>它致力于避免速度较慢设备影响网络的整体性能。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"点协调功能\"><a href=\"#点协调功能\" class=\"headerlink\" title=\"点协调功能\"></a>点协调功能</h3><p>PCF是一种可选的介质访问方法，IEEE认为PCF已经过时，可能今后会将其删除。</p>\n<h3 id=\"混合协调功能\"><a href=\"#混合协调功能\" class=\"headerlink\" title=\"混合协调功能\"></a>混合协调功能</h3><p>定义服务质量的802.11e增加了混合协调功能。<br>HCF将DCF和PCF功能相结合并加以改进，定义了两种信道访问方法：增强型分布式信道访问（EDCA）和HCF受控信道访问（HCCA)<br>前面的DCF和PCF介质争用机制只允许802.11无线接口传输单个帧。<br>HCF定义的机制允许802.11无线接口通过射频介质传输多个帧。当兼容HCF的无线接口争用介质时，无线接口将获得帧发送时间，这段时间称为发送机会（TXOP）。<br>在此期间，802.11无线接口可以通过帧突发（frame burst)发送多个帧，帧之间通过SIFS隔开，以确保其他无线接口不会在帧突发期间占用介质。</p>\n<p><strong>增强型分布式信道访问</strong><br>提供差异化访问的无线介质访问方法，能将流量定向到4种访问类别的QoS优先级队列。优先级标记提供了在MAC子层实现QoS的机制。<br>EDMAC基于8个用户优先级字段定义了4种访问类别，优先级从低到高：<br>AC_BK(背景)<br>AC_BE（尽力而为)<br>AC_VI(视频)<br>AC_VO(语音)</p>\n<p>每种访问类别经过改进的增强型分布式信道访问功能争用介质。拥有高优先级的帧具有最小退避值，因此机会更多。</p>\n<p><strong>HCF受控信道访问</strong><br>内置在接入点中，具有更高的无线介质访问优先级。</p>\n<h3 id=\"Wi-Fi-多媒体\"><a href=\"#Wi-Fi-多媒体\" class=\"headerlink\" title=\"Wi-Fi 多媒体\"></a>Wi-Fi 多媒体</h3><p>语音，音频，视频等应用流量对延迟和抖动的容忍度较低，需要比标准数据流量更高的优先级。<br>WMM基于EDCA机制，因此以太网的802.1D优先级标记用于将流量定向到4种访问类别的优先级队列。</p>\n<h3 id=\"占用时长公平性\"><a href=\"#占用时长公平性\" class=\"headerlink\" title=\"占用时长公平性\"></a>占用时长公平性</h3><p>由于存在高速设备和低速设备争用无线介质会导致低速设备占用较多传输时长，<br>占用时长公平性，使得高数设备和低速设备有均等的时长，而非均等的机会。这样高速设备能够更多机会访问介质，最终提升无线局域网的性能、容量和吞吐量。<br>它致力于避免速度较慢设备影响网络的整体性能。</p>\n"},{"title":"CWNA:IEEE 802.11标准与修正案(2)","date":"2022-01-10T02:26:31.000Z","_content":"承接上一篇\n\n### 802.11i-2004\n1997-2004年，802.11原始标准对安全未作太多定义。无线局域网唯一使用的加密机制是有线等效保密(WEP)。这种64位静态加密机制早已遭到破解。\n无法提供符合要求的数据安全。安全解决方案的三要素：\n数据保密（加密）\n数据完整性（防止修改）\n身份验证（确认身份是否合法）\n\n802.11原始标准定义了两种身份验证机制。\n开放系统身份验证(open system authentication)是默认认证机制。\n共享密钥身份验证(Shared key authentication)，同样存在很大安全隐患。\n\n802.11i修正案完善了无线网络安全保护机制，它定义了强健安全网络(RSN)，致力于更好的保护通过无线方式传输的数据。\n\n**数据保密**：\n使用计数器模式密码块链消息认证码协议(CCMP)，这种协议采用高级加密算法(AES)，称为CCMP/AES\n另外也定义了临时密钥完整性协议(TKIP)做为可选的加密机制。TKIP采用ARC4流密码算法，是对WEP的改进。\n\n**数据完整性**：\n为了确保数据不被篡改\nWEP使用完整性校验值(ICV)做为数据完整性方法。\nTKIP采用消息完整性校验(MIC)；\nCCMP采用跟高的MIC以及其他机制确保数据完整性。\n另外，所有的802.11帧的帧尾都包含称为帧校验序列(FCS)的32位循环冗余校验。\n\n**身份验证**：\n802.11i采用802.1X授权框架或预共享密钥(PSK)定义了两种身份验证机制。\n802.1X解决方案可配合扩展认证协议(EAP)使用，但没有指定具体的实现方式。\n\n**强健安全网络(RSN)**:\n定义了一套用于建立认证，协商安全关联，为客户端和接入点动态生成加密密钥的机制。\nWPA属于802.11i获批前的过渡方案，而WPA2完全符合802.11i修正案。Wi-Fi联盟有一项对应于WPA2的安全认证项目。\n\n### 802.11j-2004\n为了获得日本监管机构的认可，该方案致力于改进MAC子层和物理层在4.9GHz和5GHz频段的操作。\n802.11a需要支持20MHz的信道间隔，数据速率为6,9,12,18,24,36,48,54Mbps。日本市场可以使用10MHz的信道间隔，\n可用带宽数据速率为3,4.5,6,9,12,18,24,27Mbps，必须支持3,6,12Mbps。\n\n### 802.11k-2008\n定义了无线资源测量(RRM)的相关标准。要求物理层和数据链路层的MAC子层以请求和报告的形式提供可测量的客户统计信息。\n定义了以下重要的无线资源测量参数。\n发射功率控制：\n扩展了802.11h中的TCP方案，允许在其他频段和区域使用TPC。\n\n客户统计：\n除了信噪比，信号强度，数据速率等物理层信息外，客户端可以报告传输，重传，错误等MAC子层信息。\n\n邻居报告：\n从当前的接入点或无线局域网控制器学习目标接入点的信息，提高漫游效率。\n\n### 802.11n-2009\n这是继802.11g-2003之后另一个对Wi-Fi市场产生重大影响的方案。\n提高了2.4GHz和5GHz两个频段的吞吐量。\n通过改进物理层和MAC子层以支持到达600Mps的高吞吐量(HT)特性。\n引入了多输入多输出(MIMO)和OFDM技术。\nMIMO使用多幅接收天线和发送天线，利用了多径效应改善通信质量。不仅提高了吞吐量，还扩大了传输范围。\n\n### 802.11p-2010\n称为车载环境无线接入(WAVE)，用于支持智能交通系统应用。\n\n### 802.11r-2008\n称为快速基本服务集转换(FT)修正案。也称为快速安全漫游(FSR)\n\n### 802.11s-2011\n通常分布系统多采用有线802.3以太网介质，11s使得无线接入点充当无线分布系统(WDS)门户设备。### 802.11r-2008\n称为快速基本服务集转换(FT)修正案。也称为快速安全漫游(FSR)\n\n### 802.11u-2011\n致力于解决接入网与外部网络之间的互通问题，也成称为外部网络互通。奠定了Wi-Fi联盟的热点2.0(Hostpot 2.0)规范\n和控制点(Passpoint)认证项目的基础。\n\n### 802.11v-2011\n提供了一种信息交换的机制，有助于中央节点以无线方式简化客户端的配置。定义了无线网络管理(WNM)，802.11终端之间\n可以交换信息以提高无线网络的整体性能。\n\nWNM协议还定义了无线局域网交换位置信息的机制，并为多BSSID功能提供支持。\nWNM协议包括一种新的WMM休眠模式(WNM-Sleep)，客户端可以长时间进入休眠而无需从接入点接收帧。\n\n### 802.11w-2009\n使用802.11管理帧的数据链路层极易受到拒绝服务(Dos)攻击。802.11w致力于如何安全的交付管理帧，防止管理帧遭到伪造。\n旨在保护单播，多播，广播管理帧的安全。\n\n802.11w帧称为强健管理帧(robust management frame),包括取消关联帧，取消身份验证帧，强健行为帧。\nCCMP用于保护单播帧的安全，而广播/多播完整性协议(BIP)用于保护广播/多播帧的安全。\n\n不过，目前无法阻止所有的二层拒绝服务攻击。\n\n\n### 802.11y-2008\n多数802.11设备使用非授权频段，802.11y用于规范授权频段的相关操作。\n\n### 802.11z-2010\n定义并规范直接链路建立(DLS)机制。是的关联到同一接入点的客户端之间直接交换帧，而无需通过接入点交换。\n目前尚未实现应用。\n\n(未完待续...)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/CWNA-IEEE-802-11标准与修正案-2.md","raw":"---\ntitle: 'CWNA:IEEE 802.11标准与修正案(2)'\ndate: 2022-01-10 10:26:31\ntags: 'Wi-Fi'\n---\n承接上一篇\n\n### 802.11i-2004\n1997-2004年，802.11原始标准对安全未作太多定义。无线局域网唯一使用的加密机制是有线等效保密(WEP)。这种64位静态加密机制早已遭到破解。\n无法提供符合要求的数据安全。安全解决方案的三要素：\n数据保密（加密）\n数据完整性（防止修改）\n身份验证（确认身份是否合法）\n\n802.11原始标准定义了两种身份验证机制。\n开放系统身份验证(open system authentication)是默认认证机制。\n共享密钥身份验证(Shared key authentication)，同样存在很大安全隐患。\n\n802.11i修正案完善了无线网络安全保护机制，它定义了强健安全网络(RSN)，致力于更好的保护通过无线方式传输的数据。\n\n**数据保密**：\n使用计数器模式密码块链消息认证码协议(CCMP)，这种协议采用高级加密算法(AES)，称为CCMP/AES\n另外也定义了临时密钥完整性协议(TKIP)做为可选的加密机制。TKIP采用ARC4流密码算法，是对WEP的改进。\n\n**数据完整性**：\n为了确保数据不被篡改\nWEP使用完整性校验值(ICV)做为数据完整性方法。\nTKIP采用消息完整性校验(MIC)；\nCCMP采用跟高的MIC以及其他机制确保数据完整性。\n另外，所有的802.11帧的帧尾都包含称为帧校验序列(FCS)的32位循环冗余校验。\n\n**身份验证**：\n802.11i采用802.1X授权框架或预共享密钥(PSK)定义了两种身份验证机制。\n802.1X解决方案可配合扩展认证协议(EAP)使用，但没有指定具体的实现方式。\n\n**强健安全网络(RSN)**:\n定义了一套用于建立认证，协商安全关联，为客户端和接入点动态生成加密密钥的机制。\nWPA属于802.11i获批前的过渡方案，而WPA2完全符合802.11i修正案。Wi-Fi联盟有一项对应于WPA2的安全认证项目。\n\n### 802.11j-2004\n为了获得日本监管机构的认可，该方案致力于改进MAC子层和物理层在4.9GHz和5GHz频段的操作。\n802.11a需要支持20MHz的信道间隔，数据速率为6,9,12,18,24,36,48,54Mbps。日本市场可以使用10MHz的信道间隔，\n可用带宽数据速率为3,4.5,6,9,12,18,24,27Mbps，必须支持3,6,12Mbps。\n\n### 802.11k-2008\n定义了无线资源测量(RRM)的相关标准。要求物理层和数据链路层的MAC子层以请求和报告的形式提供可测量的客户统计信息。\n定义了以下重要的无线资源测量参数。\n发射功率控制：\n扩展了802.11h中的TCP方案，允许在其他频段和区域使用TPC。\n\n客户统计：\n除了信噪比，信号强度，数据速率等物理层信息外，客户端可以报告传输，重传，错误等MAC子层信息。\n\n邻居报告：\n从当前的接入点或无线局域网控制器学习目标接入点的信息，提高漫游效率。\n\n### 802.11n-2009\n这是继802.11g-2003之后另一个对Wi-Fi市场产生重大影响的方案。\n提高了2.4GHz和5GHz两个频段的吞吐量。\n通过改进物理层和MAC子层以支持到达600Mps的高吞吐量(HT)特性。\n引入了多输入多输出(MIMO)和OFDM技术。\nMIMO使用多幅接收天线和发送天线，利用了多径效应改善通信质量。不仅提高了吞吐量，还扩大了传输范围。\n\n### 802.11p-2010\n称为车载环境无线接入(WAVE)，用于支持智能交通系统应用。\n\n### 802.11r-2008\n称为快速基本服务集转换(FT)修正案。也称为快速安全漫游(FSR)\n\n### 802.11s-2011\n通常分布系统多采用有线802.3以太网介质，11s使得无线接入点充当无线分布系统(WDS)门户设备。### 802.11r-2008\n称为快速基本服务集转换(FT)修正案。也称为快速安全漫游(FSR)\n\n### 802.11u-2011\n致力于解决接入网与外部网络之间的互通问题，也成称为外部网络互通。奠定了Wi-Fi联盟的热点2.0(Hostpot 2.0)规范\n和控制点(Passpoint)认证项目的基础。\n\n### 802.11v-2011\n提供了一种信息交换的机制，有助于中央节点以无线方式简化客户端的配置。定义了无线网络管理(WNM)，802.11终端之间\n可以交换信息以提高无线网络的整体性能。\n\nWNM协议还定义了无线局域网交换位置信息的机制，并为多BSSID功能提供支持。\nWNM协议包括一种新的WMM休眠模式(WNM-Sleep)，客户端可以长时间进入休眠而无需从接入点接收帧。\n\n### 802.11w-2009\n使用802.11管理帧的数据链路层极易受到拒绝服务(Dos)攻击。802.11w致力于如何安全的交付管理帧，防止管理帧遭到伪造。\n旨在保护单播，多播，广播管理帧的安全。\n\n802.11w帧称为强健管理帧(robust management frame),包括取消关联帧，取消身份验证帧，强健行为帧。\nCCMP用于保护单播帧的安全，而广播/多播完整性协议(BIP)用于保护广播/多播帧的安全。\n\n不过，目前无法阻止所有的二层拒绝服务攻击。\n\n\n### 802.11y-2008\n多数802.11设备使用非授权频段，802.11y用于规范授权频段的相关操作。\n\n### 802.11z-2010\n定义并规范直接链路建立(DLS)机制。是的关联到同一接入点的客户端之间直接交换帧，而无需通过接入点交换。\n目前尚未实现应用。\n\n(未完待续...)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"CWNA-IEEE-802-11标准与修正案-2","published":1,"updated":"2022-01-10T12:15:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3m001418jx3b349q9t","content":"<p>承接上一篇</p>\n<h3 id=\"802-11i-2004\"><a href=\"#802-11i-2004\" class=\"headerlink\" title=\"802.11i-2004\"></a>802.11i-2004</h3><p>1997-2004年，802.11原始标准对安全未作太多定义。无线局域网唯一使用的加密机制是有线等效保密(WEP)。这种64位静态加密机制早已遭到破解。<br>无法提供符合要求的数据安全。安全解决方案的三要素：<br>数据保密（加密）<br>数据完整性（防止修改）<br>身份验证（确认身份是否合法）</p>\n<p>802.11原始标准定义了两种身份验证机制。<br>开放系统身份验证(open system authentication)是默认认证机制。<br>共享密钥身份验证(Shared key authentication)，同样存在很大安全隐患。</p>\n<p>802.11i修正案完善了无线网络安全保护机制，它定义了强健安全网络(RSN)，致力于更好的保护通过无线方式传输的数据。</p>\n<p><strong>数据保密</strong>：<br>使用计数器模式密码块链消息认证码协议(CCMP)，这种协议采用高级加密算法(AES)，称为CCMP/AES<br>另外也定义了临时密钥完整性协议(TKIP)做为可选的加密机制。TKIP采用ARC4流密码算法，是对WEP的改进。</p>\n<p><strong>数据完整性</strong>：<br>为了确保数据不被篡改<br>WEP使用完整性校验值(ICV)做为数据完整性方法。<br>TKIP采用消息完整性校验(MIC)；<br>CCMP采用跟高的MIC以及其他机制确保数据完整性。<br>另外，所有的802.11帧的帧尾都包含称为帧校验序列(FCS)的32位循环冗余校验。</p>\n<p><strong>身份验证</strong>：<br>802.11i采用802.1X授权框架或预共享密钥(PSK)定义了两种身份验证机制。<br>802.1X解决方案可配合扩展认证协议(EAP)使用，但没有指定具体的实现方式。</p>\n<p><strong>强健安全网络(RSN)</strong>:<br>定义了一套用于建立认证，协商安全关联，为客户端和接入点动态生成加密密钥的机制。<br>WPA属于802.11i获批前的过渡方案，而WPA2完全符合802.11i修正案。Wi-Fi联盟有一项对应于WPA2的安全认证项目。</p>\n<h3 id=\"802-11j-2004\"><a href=\"#802-11j-2004\" class=\"headerlink\" title=\"802.11j-2004\"></a>802.11j-2004</h3><p>为了获得日本监管机构的认可，该方案致力于改进MAC子层和物理层在4.9GHz和5GHz频段的操作。<br>802.11a需要支持20MHz的信道间隔，数据速率为6,9,12,18,24,36,48,54Mbps。日本市场可以使用10MHz的信道间隔，<br>可用带宽数据速率为3,4.5,6,9,12,18,24,27Mbps，必须支持3,6,12Mbps。</p>\n<h3 id=\"802-11k-2008\"><a href=\"#802-11k-2008\" class=\"headerlink\" title=\"802.11k-2008\"></a>802.11k-2008</h3><p>定义了无线资源测量(RRM)的相关标准。要求物理层和数据链路层的MAC子层以请求和报告的形式提供可测量的客户统计信息。<br>定义了以下重要的无线资源测量参数。<br>发射功率控制：<br>扩展了802.11h中的TCP方案，允许在其他频段和区域使用TPC。</p>\n<p>客户统计：<br>除了信噪比，信号强度，数据速率等物理层信息外，客户端可以报告传输，重传，错误等MAC子层信息。</p>\n<p>邻居报告：<br>从当前的接入点或无线局域网控制器学习目标接入点的信息，提高漫游效率。</p>\n<h3 id=\"802-11n-2009\"><a href=\"#802-11n-2009\" class=\"headerlink\" title=\"802.11n-2009\"></a>802.11n-2009</h3><p>这是继802.11g-2003之后另一个对Wi-Fi市场产生重大影响的方案。<br>提高了2.4GHz和5GHz两个频段的吞吐量。<br>通过改进物理层和MAC子层以支持到达600Mps的高吞吐量(HT)特性。<br>引入了多输入多输出(MIMO)和OFDM技术。<br>MIMO使用多幅接收天线和发送天线，利用了多径效应改善通信质量。不仅提高了吞吐量，还扩大了传输范围。</p>\n<h3 id=\"802-11p-2010\"><a href=\"#802-11p-2010\" class=\"headerlink\" title=\"802.11p-2010\"></a>802.11p-2010</h3><p>称为车载环境无线接入(WAVE)，用于支持智能交通系统应用。</p>\n<h3 id=\"802-11r-2008\"><a href=\"#802-11r-2008\" class=\"headerlink\" title=\"802.11r-2008\"></a>802.11r-2008</h3><p>称为快速基本服务集转换(FT)修正案。也称为快速安全漫游(FSR)</p>\n<h3 id=\"802-11s-2011\"><a href=\"#802-11s-2011\" class=\"headerlink\" title=\"802.11s-2011\"></a>802.11s-2011</h3><p>通常分布系统多采用有线802.3以太网介质，11s使得无线接入点充当无线分布系统(WDS)门户设备。### 802.11r-2008<br>称为快速基本服务集转换(FT)修正案。也称为快速安全漫游(FSR)</p>\n<h3 id=\"802-11u-2011\"><a href=\"#802-11u-2011\" class=\"headerlink\" title=\"802.11u-2011\"></a>802.11u-2011</h3><p>致力于解决接入网与外部网络之间的互通问题，也成称为外部网络互通。奠定了Wi-Fi联盟的热点2.0(Hostpot 2.0)规范<br>和控制点(Passpoint)认证项目的基础。</p>\n<h3 id=\"802-11v-2011\"><a href=\"#802-11v-2011\" class=\"headerlink\" title=\"802.11v-2011\"></a>802.11v-2011</h3><p>提供了一种信息交换的机制，有助于中央节点以无线方式简化客户端的配置。定义了无线网络管理(WNM)，802.11终端之间<br>可以交换信息以提高无线网络的整体性能。</p>\n<p>WNM协议还定义了无线局域网交换位置信息的机制，并为多BSSID功能提供支持。<br>WNM协议包括一种新的WMM休眠模式(WNM-Sleep)，客户端可以长时间进入休眠而无需从接入点接收帧。</p>\n<h3 id=\"802-11w-2009\"><a href=\"#802-11w-2009\" class=\"headerlink\" title=\"802.11w-2009\"></a>802.11w-2009</h3><p>使用802.11管理帧的数据链路层极易受到拒绝服务(Dos)攻击。802.11w致力于如何安全的交付管理帧，防止管理帧遭到伪造。<br>旨在保护单播，多播，广播管理帧的安全。</p>\n<p>802.11w帧称为强健管理帧(robust management frame),包括取消关联帧，取消身份验证帧，强健行为帧。<br>CCMP用于保护单播帧的安全，而广播/多播完整性协议(BIP)用于保护广播/多播帧的安全。</p>\n<p>不过，目前无法阻止所有的二层拒绝服务攻击。</p>\n<h3 id=\"802-11y-2008\"><a href=\"#802-11y-2008\" class=\"headerlink\" title=\"802.11y-2008\"></a>802.11y-2008</h3><p>多数802.11设备使用非授权频段，802.11y用于规范授权频段的相关操作。</p>\n<h3 id=\"802-11z-2010\"><a href=\"#802-11z-2010\" class=\"headerlink\" title=\"802.11z-2010\"></a>802.11z-2010</h3><p>定义并规范直接链路建立(DLS)机制。是的关联到同一接入点的客户端之间直接交换帧，而无需通过接入点交换。<br>目前尚未实现应用。</p>\n<p>(未完待续…)</p>\n","site":{"data":{}},"excerpt":"","more":"<p>承接上一篇</p>\n<h3 id=\"802-11i-2004\"><a href=\"#802-11i-2004\" class=\"headerlink\" title=\"802.11i-2004\"></a>802.11i-2004</h3><p>1997-2004年，802.11原始标准对安全未作太多定义。无线局域网唯一使用的加密机制是有线等效保密(WEP)。这种64位静态加密机制早已遭到破解。<br>无法提供符合要求的数据安全。安全解决方案的三要素：<br>数据保密（加密）<br>数据完整性（防止修改）<br>身份验证（确认身份是否合法）</p>\n<p>802.11原始标准定义了两种身份验证机制。<br>开放系统身份验证(open system authentication)是默认认证机制。<br>共享密钥身份验证(Shared key authentication)，同样存在很大安全隐患。</p>\n<p>802.11i修正案完善了无线网络安全保护机制，它定义了强健安全网络(RSN)，致力于更好的保护通过无线方式传输的数据。</p>\n<p><strong>数据保密</strong>：<br>使用计数器模式密码块链消息认证码协议(CCMP)，这种协议采用高级加密算法(AES)，称为CCMP/AES<br>另外也定义了临时密钥完整性协议(TKIP)做为可选的加密机制。TKIP采用ARC4流密码算法，是对WEP的改进。</p>\n<p><strong>数据完整性</strong>：<br>为了确保数据不被篡改<br>WEP使用完整性校验值(ICV)做为数据完整性方法。<br>TKIP采用消息完整性校验(MIC)；<br>CCMP采用跟高的MIC以及其他机制确保数据完整性。<br>另外，所有的802.11帧的帧尾都包含称为帧校验序列(FCS)的32位循环冗余校验。</p>\n<p><strong>身份验证</strong>：<br>802.11i采用802.1X授权框架或预共享密钥(PSK)定义了两种身份验证机制。<br>802.1X解决方案可配合扩展认证协议(EAP)使用，但没有指定具体的实现方式。</p>\n<p><strong>强健安全网络(RSN)</strong>:<br>定义了一套用于建立认证，协商安全关联，为客户端和接入点动态生成加密密钥的机制。<br>WPA属于802.11i获批前的过渡方案，而WPA2完全符合802.11i修正案。Wi-Fi联盟有一项对应于WPA2的安全认证项目。</p>\n<h3 id=\"802-11j-2004\"><a href=\"#802-11j-2004\" class=\"headerlink\" title=\"802.11j-2004\"></a>802.11j-2004</h3><p>为了获得日本监管机构的认可，该方案致力于改进MAC子层和物理层在4.9GHz和5GHz频段的操作。<br>802.11a需要支持20MHz的信道间隔，数据速率为6,9,12,18,24,36,48,54Mbps。日本市场可以使用10MHz的信道间隔，<br>可用带宽数据速率为3,4.5,6,9,12,18,24,27Mbps，必须支持3,6,12Mbps。</p>\n<h3 id=\"802-11k-2008\"><a href=\"#802-11k-2008\" class=\"headerlink\" title=\"802.11k-2008\"></a>802.11k-2008</h3><p>定义了无线资源测量(RRM)的相关标准。要求物理层和数据链路层的MAC子层以请求和报告的形式提供可测量的客户统计信息。<br>定义了以下重要的无线资源测量参数。<br>发射功率控制：<br>扩展了802.11h中的TCP方案，允许在其他频段和区域使用TPC。</p>\n<p>客户统计：<br>除了信噪比，信号强度，数据速率等物理层信息外，客户端可以报告传输，重传，错误等MAC子层信息。</p>\n<p>邻居报告：<br>从当前的接入点或无线局域网控制器学习目标接入点的信息，提高漫游效率。</p>\n<h3 id=\"802-11n-2009\"><a href=\"#802-11n-2009\" class=\"headerlink\" title=\"802.11n-2009\"></a>802.11n-2009</h3><p>这是继802.11g-2003之后另一个对Wi-Fi市场产生重大影响的方案。<br>提高了2.4GHz和5GHz两个频段的吞吐量。<br>通过改进物理层和MAC子层以支持到达600Mps的高吞吐量(HT)特性。<br>引入了多输入多输出(MIMO)和OFDM技术。<br>MIMO使用多幅接收天线和发送天线，利用了多径效应改善通信质量。不仅提高了吞吐量，还扩大了传输范围。</p>\n<h3 id=\"802-11p-2010\"><a href=\"#802-11p-2010\" class=\"headerlink\" title=\"802.11p-2010\"></a>802.11p-2010</h3><p>称为车载环境无线接入(WAVE)，用于支持智能交通系统应用。</p>\n<h3 id=\"802-11r-2008\"><a href=\"#802-11r-2008\" class=\"headerlink\" title=\"802.11r-2008\"></a>802.11r-2008</h3><p>称为快速基本服务集转换(FT)修正案。也称为快速安全漫游(FSR)</p>\n<h3 id=\"802-11s-2011\"><a href=\"#802-11s-2011\" class=\"headerlink\" title=\"802.11s-2011\"></a>802.11s-2011</h3><p>通常分布系统多采用有线802.3以太网介质，11s使得无线接入点充当无线分布系统(WDS)门户设备。### 802.11r-2008<br>称为快速基本服务集转换(FT)修正案。也称为快速安全漫游(FSR)</p>\n<h3 id=\"802-11u-2011\"><a href=\"#802-11u-2011\" class=\"headerlink\" title=\"802.11u-2011\"></a>802.11u-2011</h3><p>致力于解决接入网与外部网络之间的互通问题，也成称为外部网络互通。奠定了Wi-Fi联盟的热点2.0(Hostpot 2.0)规范<br>和控制点(Passpoint)认证项目的基础。</p>\n<h3 id=\"802-11v-2011\"><a href=\"#802-11v-2011\" class=\"headerlink\" title=\"802.11v-2011\"></a>802.11v-2011</h3><p>提供了一种信息交换的机制，有助于中央节点以无线方式简化客户端的配置。定义了无线网络管理(WNM)，802.11终端之间<br>可以交换信息以提高无线网络的整体性能。</p>\n<p>WNM协议还定义了无线局域网交换位置信息的机制，并为多BSSID功能提供支持。<br>WNM协议包括一种新的WMM休眠模式(WNM-Sleep)，客户端可以长时间进入休眠而无需从接入点接收帧。</p>\n<h3 id=\"802-11w-2009\"><a href=\"#802-11w-2009\" class=\"headerlink\" title=\"802.11w-2009\"></a>802.11w-2009</h3><p>使用802.11管理帧的数据链路层极易受到拒绝服务(Dos)攻击。802.11w致力于如何安全的交付管理帧，防止管理帧遭到伪造。<br>旨在保护单播，多播，广播管理帧的安全。</p>\n<p>802.11w帧称为强健管理帧(robust management frame),包括取消关联帧，取消身份验证帧，强健行为帧。<br>CCMP用于保护单播帧的安全，而广播/多播完整性协议(BIP)用于保护广播/多播帧的安全。</p>\n<p>不过，目前无法阻止所有的二层拒绝服务攻击。</p>\n<h3 id=\"802-11y-2008\"><a href=\"#802-11y-2008\" class=\"headerlink\" title=\"802.11y-2008\"></a>802.11y-2008</h3><p>多数802.11设备使用非授权频段，802.11y用于规范授权频段的相关操作。</p>\n<h3 id=\"802-11z-2010\"><a href=\"#802-11z-2010\" class=\"headerlink\" title=\"802.11z-2010\"></a>802.11z-2010</h3><p>定义并规范直接链路建立(DLS)机制。是的关联到同一接入点的客户端之间直接交换帧，而无需通过接入点交换。<br>目前尚未实现应用。</p>\n<p>(未完待续…)</p>\n"},{"title":"CWNA:IEEE 802.11标准与修正案(3)","date":"2022-01-10T05:59:00.000Z","_content":"承接上一篇\n\n### 802.11aa-2012\n为MAC子层定义了经过改进的Qos机制，以便为消费类应用和企业应用提供强健的音频和视频流。\n\n### 802.11ac-2013\n根据5GHz U-NII频段拥有更多的频谱空间而定义了低于6GHz频段的甚高吞吐量(VHT)增强机制。最高速率\n可达6933.3Mbps，这是由以下增强机制实现。\n**更宽的信道**\n802.11n定义了40MHz信道，而802.11ac支持20,40,80,160MHz信道宽度。这是2.4G所不具备的资源。\n\n**新的调制技术**\n支持256-QAM调制，不过需要很高的信噪比才能发挥作用。\n\n**更多的空间流**\n无线接口可以发送并接收最多8路空间流。\n\n**改进的MIMO与波束成形**\n引入MU-MIMO技术，如果多个客户端支持MU-MIMO且位于不同的物理区域，具有MU-MIMO功能的接入点就能同\n时向同一信道的这些客户端发送信号。\n\n### 802.11ad-2012\n为了提高无线网络性能，引入更高的60GHz非授权频段，也定义了多向吉比特(DMG)技术，支持高达7Gbps的\n数据速率。仅用于视距传输。\n\n引入了快速会话转移功能，以便在60GHz与遗留2.4GHz/5GHz频段之间无缝切换。\nCCMP对于大数据量加密存在缺陷，引入了GCMP加密。\n\n### 802.11ae-2012\n定义了经过改进的QoS管理机制，启用服务质量管理帧(QMF)服务，使用QoS访问类别，提高流量服务质量。\n\n### 802.11af-2014\n允许无线局域网通信使用54MHz~790MHz的空白电视频段(TVWS)。\n\n### 802.11ah-2016\n定义1GHz以下频段的Wi-Fi应用，有望用于传感器网络，智能家居，汽车，零售业，农业等。\n\n### 802.11ai-2016\n定义了快速初始链路建立机制，以应对高密度环境中存在的挑战。旨在改善机场，体育馆，购物中心的应用。\n\n### 802.11aj-2018\n定义59GHz~64GHz频段操作提供支持。还对802.11ad进行调整，以使得中国的45GHz频段传输数据。\n\n### 802.11ak-2018\n又称为通用链路(GLK)，致力于完善802.11链路，以便在桥接网络中使用。允许终端提供桥接服务。\n\n### 802.11aq-2018\n研究终端与802.11网络建立关联之前如何交付网络服务信息。\n\n### 802.11ax\n称为高校无线局域网修正案，支持2.4GHz和5GHz频段，提高吞吐量，支持更多的用户和更高的密度。引入了\nOFDMA技术。\n\n### 802.11ay\n致力于完善11ad方案，提高传输速度和增加传输距离。\n\n### 802.11az\n致力于提高物理位置跟踪和定位精度。\n\n### 802.11ba\n提出了唤醒无线电(WuR)的节电数据接收模式，致力于不增加网络延迟和性能的情况下增加设备的电池使用时间。\n\n\n### 802.11m\n致力于维护802.11标准的技术性文档。对外发布的综合性文档如下\nIEEE 802.11-2007标准\nIEEE 802.11-2012标准\nIEEE 802.11-2016标准\n\n\n以上就是标准历史演进和功能概述。\n","source":"_posts/CWNA-IEEE-802-11标准与修正案-3.md","raw":"---\ntitle: 'CWNA:IEEE 802.11标准与修正案(3)'\ndate: 2022-01-10 13:59:00\ntags: 'Wi-Fi'\n---\n承接上一篇\n\n### 802.11aa-2012\n为MAC子层定义了经过改进的Qos机制，以便为消费类应用和企业应用提供强健的音频和视频流。\n\n### 802.11ac-2013\n根据5GHz U-NII频段拥有更多的频谱空间而定义了低于6GHz频段的甚高吞吐量(VHT)增强机制。最高速率\n可达6933.3Mbps，这是由以下增强机制实现。\n**更宽的信道**\n802.11n定义了40MHz信道，而802.11ac支持20,40,80,160MHz信道宽度。这是2.4G所不具备的资源。\n\n**新的调制技术**\n支持256-QAM调制，不过需要很高的信噪比才能发挥作用。\n\n**更多的空间流**\n无线接口可以发送并接收最多8路空间流。\n\n**改进的MIMO与波束成形**\n引入MU-MIMO技术，如果多个客户端支持MU-MIMO且位于不同的物理区域，具有MU-MIMO功能的接入点就能同\n时向同一信道的这些客户端发送信号。\n\n### 802.11ad-2012\n为了提高无线网络性能，引入更高的60GHz非授权频段，也定义了多向吉比特(DMG)技术，支持高达7Gbps的\n数据速率。仅用于视距传输。\n\n引入了快速会话转移功能，以便在60GHz与遗留2.4GHz/5GHz频段之间无缝切换。\nCCMP对于大数据量加密存在缺陷，引入了GCMP加密。\n\n### 802.11ae-2012\n定义了经过改进的QoS管理机制，启用服务质量管理帧(QMF)服务，使用QoS访问类别，提高流量服务质量。\n\n### 802.11af-2014\n允许无线局域网通信使用54MHz~790MHz的空白电视频段(TVWS)。\n\n### 802.11ah-2016\n定义1GHz以下频段的Wi-Fi应用，有望用于传感器网络，智能家居，汽车，零售业，农业等。\n\n### 802.11ai-2016\n定义了快速初始链路建立机制，以应对高密度环境中存在的挑战。旨在改善机场，体育馆，购物中心的应用。\n\n### 802.11aj-2018\n定义59GHz~64GHz频段操作提供支持。还对802.11ad进行调整，以使得中国的45GHz频段传输数据。\n\n### 802.11ak-2018\n又称为通用链路(GLK)，致力于完善802.11链路，以便在桥接网络中使用。允许终端提供桥接服务。\n\n### 802.11aq-2018\n研究终端与802.11网络建立关联之前如何交付网络服务信息。\n\n### 802.11ax\n称为高校无线局域网修正案，支持2.4GHz和5GHz频段，提高吞吐量，支持更多的用户和更高的密度。引入了\nOFDMA技术。\n\n### 802.11ay\n致力于完善11ad方案，提高传输速度和增加传输距离。\n\n### 802.11az\n致力于提高物理位置跟踪和定位精度。\n\n### 802.11ba\n提出了唤醒无线电(WuR)的节电数据接收模式，致力于不增加网络延迟和性能的情况下增加设备的电池使用时间。\n\n\n### 802.11m\n致力于维护802.11标准的技术性文档。对外发布的综合性文档如下\nIEEE 802.11-2007标准\nIEEE 802.11-2012标准\nIEEE 802.11-2016标准\n\n\n以上就是标准历史演进和功能概述。\n","slug":"CWNA-IEEE-802-11标准与修正案-3","published":1,"updated":"2022-01-10T12:15:29.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3n001618jxe3es4pil","content":"<p>承接上一篇</p>\n<h3 id=\"802-11aa-2012\"><a href=\"#802-11aa-2012\" class=\"headerlink\" title=\"802.11aa-2012\"></a>802.11aa-2012</h3><p>为MAC子层定义了经过改进的Qos机制，以便为消费类应用和企业应用提供强健的音频和视频流。</p>\n<h3 id=\"802-11ac-2013\"><a href=\"#802-11ac-2013\" class=\"headerlink\" title=\"802.11ac-2013\"></a>802.11ac-2013</h3><p>根据5GHz U-NII频段拥有更多的频谱空间而定义了低于6GHz频段的甚高吞吐量(VHT)增强机制。最高速率<br>可达6933.3Mbps，这是由以下增强机制实现。<br><strong>更宽的信道</strong><br>802.11n定义了40MHz信道，而802.11ac支持20,40,80,160MHz信道宽度。这是2.4G所不具备的资源。</p>\n<p><strong>新的调制技术</strong><br>支持256-QAM调制，不过需要很高的信噪比才能发挥作用。</p>\n<p><strong>更多的空间流</strong><br>无线接口可以发送并接收最多8路空间流。</p>\n<p><strong>改进的MIMO与波束成形</strong><br>引入MU-MIMO技术，如果多个客户端支持MU-MIMO且位于不同的物理区域，具有MU-MIMO功能的接入点就能同<br>时向同一信道的这些客户端发送信号。</p>\n<h3 id=\"802-11ad-2012\"><a href=\"#802-11ad-2012\" class=\"headerlink\" title=\"802.11ad-2012\"></a>802.11ad-2012</h3><p>为了提高无线网络性能，引入更高的60GHz非授权频段，也定义了多向吉比特(DMG)技术，支持高达7Gbps的<br>数据速率。仅用于视距传输。</p>\n<p>引入了快速会话转移功能，以便在60GHz与遗留2.4GHz/5GHz频段之间无缝切换。<br>CCMP对于大数据量加密存在缺陷，引入了GCMP加密。</p>\n<h3 id=\"802-11ae-2012\"><a href=\"#802-11ae-2012\" class=\"headerlink\" title=\"802.11ae-2012\"></a>802.11ae-2012</h3><p>定义了经过改进的QoS管理机制，启用服务质量管理帧(QMF)服务，使用QoS访问类别，提高流量服务质量。</p>\n<h3 id=\"802-11af-2014\"><a href=\"#802-11af-2014\" class=\"headerlink\" title=\"802.11af-2014\"></a>802.11af-2014</h3><p>允许无线局域网通信使用54MHz~790MHz的空白电视频段(TVWS)。</p>\n<h3 id=\"802-11ah-2016\"><a href=\"#802-11ah-2016\" class=\"headerlink\" title=\"802.11ah-2016\"></a>802.11ah-2016</h3><p>定义1GHz以下频段的Wi-Fi应用，有望用于传感器网络，智能家居，汽车，零售业，农业等。</p>\n<h3 id=\"802-11ai-2016\"><a href=\"#802-11ai-2016\" class=\"headerlink\" title=\"802.11ai-2016\"></a>802.11ai-2016</h3><p>定义了快速初始链路建立机制，以应对高密度环境中存在的挑战。旨在改善机场，体育馆，购物中心的应用。</p>\n<h3 id=\"802-11aj-2018\"><a href=\"#802-11aj-2018\" class=\"headerlink\" title=\"802.11aj-2018\"></a>802.11aj-2018</h3><p>定义59GHz~64GHz频段操作提供支持。还对802.11ad进行调整，以使得中国的45GHz频段传输数据。</p>\n<h3 id=\"802-11ak-2018\"><a href=\"#802-11ak-2018\" class=\"headerlink\" title=\"802.11ak-2018\"></a>802.11ak-2018</h3><p>又称为通用链路(GLK)，致力于完善802.11链路，以便在桥接网络中使用。允许终端提供桥接服务。</p>\n<h3 id=\"802-11aq-2018\"><a href=\"#802-11aq-2018\" class=\"headerlink\" title=\"802.11aq-2018\"></a>802.11aq-2018</h3><p>研究终端与802.11网络建立关联之前如何交付网络服务信息。</p>\n<h3 id=\"802-11ax\"><a href=\"#802-11ax\" class=\"headerlink\" title=\"802.11ax\"></a>802.11ax</h3><p>称为高校无线局域网修正案，支持2.4GHz和5GHz频段，提高吞吐量，支持更多的用户和更高的密度。引入了<br>OFDMA技术。</p>\n<h3 id=\"802-11ay\"><a href=\"#802-11ay\" class=\"headerlink\" title=\"802.11ay\"></a>802.11ay</h3><p>致力于完善11ad方案，提高传输速度和增加传输距离。</p>\n<h3 id=\"802-11az\"><a href=\"#802-11az\" class=\"headerlink\" title=\"802.11az\"></a>802.11az</h3><p>致力于提高物理位置跟踪和定位精度。</p>\n<h3 id=\"802-11ba\"><a href=\"#802-11ba\" class=\"headerlink\" title=\"802.11ba\"></a>802.11ba</h3><p>提出了唤醒无线电(WuR)的节电数据接收模式，致力于不增加网络延迟和性能的情况下增加设备的电池使用时间。</p>\n<h3 id=\"802-11m\"><a href=\"#802-11m\" class=\"headerlink\" title=\"802.11m\"></a>802.11m</h3><p>致力于维护802.11标准的技术性文档。对外发布的综合性文档如下<br>IEEE 802.11-2007标准<br>IEEE 802.11-2012标准<br>IEEE 802.11-2016标准</p>\n<p>以上就是标准历史演进和功能概述。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>承接上一篇</p>\n<h3 id=\"802-11aa-2012\"><a href=\"#802-11aa-2012\" class=\"headerlink\" title=\"802.11aa-2012\"></a>802.11aa-2012</h3><p>为MAC子层定义了经过改进的Qos机制，以便为消费类应用和企业应用提供强健的音频和视频流。</p>\n<h3 id=\"802-11ac-2013\"><a href=\"#802-11ac-2013\" class=\"headerlink\" title=\"802.11ac-2013\"></a>802.11ac-2013</h3><p>根据5GHz U-NII频段拥有更多的频谱空间而定义了低于6GHz频段的甚高吞吐量(VHT)增强机制。最高速率<br>可达6933.3Mbps，这是由以下增强机制实现。<br><strong>更宽的信道</strong><br>802.11n定义了40MHz信道，而802.11ac支持20,40,80,160MHz信道宽度。这是2.4G所不具备的资源。</p>\n<p><strong>新的调制技术</strong><br>支持256-QAM调制，不过需要很高的信噪比才能发挥作用。</p>\n<p><strong>更多的空间流</strong><br>无线接口可以发送并接收最多8路空间流。</p>\n<p><strong>改进的MIMO与波束成形</strong><br>引入MU-MIMO技术，如果多个客户端支持MU-MIMO且位于不同的物理区域，具有MU-MIMO功能的接入点就能同<br>时向同一信道的这些客户端发送信号。</p>\n<h3 id=\"802-11ad-2012\"><a href=\"#802-11ad-2012\" class=\"headerlink\" title=\"802.11ad-2012\"></a>802.11ad-2012</h3><p>为了提高无线网络性能，引入更高的60GHz非授权频段，也定义了多向吉比特(DMG)技术，支持高达7Gbps的<br>数据速率。仅用于视距传输。</p>\n<p>引入了快速会话转移功能，以便在60GHz与遗留2.4GHz/5GHz频段之间无缝切换。<br>CCMP对于大数据量加密存在缺陷，引入了GCMP加密。</p>\n<h3 id=\"802-11ae-2012\"><a href=\"#802-11ae-2012\" class=\"headerlink\" title=\"802.11ae-2012\"></a>802.11ae-2012</h3><p>定义了经过改进的QoS管理机制，启用服务质量管理帧(QMF)服务，使用QoS访问类别，提高流量服务质量。</p>\n<h3 id=\"802-11af-2014\"><a href=\"#802-11af-2014\" class=\"headerlink\" title=\"802.11af-2014\"></a>802.11af-2014</h3><p>允许无线局域网通信使用54MHz~790MHz的空白电视频段(TVWS)。</p>\n<h3 id=\"802-11ah-2016\"><a href=\"#802-11ah-2016\" class=\"headerlink\" title=\"802.11ah-2016\"></a>802.11ah-2016</h3><p>定义1GHz以下频段的Wi-Fi应用，有望用于传感器网络，智能家居，汽车，零售业，农业等。</p>\n<h3 id=\"802-11ai-2016\"><a href=\"#802-11ai-2016\" class=\"headerlink\" title=\"802.11ai-2016\"></a>802.11ai-2016</h3><p>定义了快速初始链路建立机制，以应对高密度环境中存在的挑战。旨在改善机场，体育馆，购物中心的应用。</p>\n<h3 id=\"802-11aj-2018\"><a href=\"#802-11aj-2018\" class=\"headerlink\" title=\"802.11aj-2018\"></a>802.11aj-2018</h3><p>定义59GHz~64GHz频段操作提供支持。还对802.11ad进行调整，以使得中国的45GHz频段传输数据。</p>\n<h3 id=\"802-11ak-2018\"><a href=\"#802-11ak-2018\" class=\"headerlink\" title=\"802.11ak-2018\"></a>802.11ak-2018</h3><p>又称为通用链路(GLK)，致力于完善802.11链路，以便在桥接网络中使用。允许终端提供桥接服务。</p>\n<h3 id=\"802-11aq-2018\"><a href=\"#802-11aq-2018\" class=\"headerlink\" title=\"802.11aq-2018\"></a>802.11aq-2018</h3><p>研究终端与802.11网络建立关联之前如何交付网络服务信息。</p>\n<h3 id=\"802-11ax\"><a href=\"#802-11ax\" class=\"headerlink\" title=\"802.11ax\"></a>802.11ax</h3><p>称为高校无线局域网修正案，支持2.4GHz和5GHz频段，提高吞吐量，支持更多的用户和更高的密度。引入了<br>OFDMA技术。</p>\n<h3 id=\"802-11ay\"><a href=\"#802-11ay\" class=\"headerlink\" title=\"802.11ay\"></a>802.11ay</h3><p>致力于完善11ad方案，提高传输速度和增加传输距离。</p>\n<h3 id=\"802-11az\"><a href=\"#802-11az\" class=\"headerlink\" title=\"802.11az\"></a>802.11az</h3><p>致力于提高物理位置跟踪和定位精度。</p>\n<h3 id=\"802-11ba\"><a href=\"#802-11ba\" class=\"headerlink\" title=\"802.11ba\"></a>802.11ba</h3><p>提出了唤醒无线电(WuR)的节电数据接收模式，致力于不增加网络延迟和性能的情况下增加设备的电池使用时间。</p>\n<h3 id=\"802-11m\"><a href=\"#802-11m\" class=\"headerlink\" title=\"802.11m\"></a>802.11m</h3><p>致力于维护802.11标准的技术性文档。对外发布的综合性文档如下<br>IEEE 802.11-2007标准<br>IEEE 802.11-2012标准<br>IEEE 802.11-2016标准</p>\n<p>以上就是标准历史演进和功能概述。</p>\n"},{"title":"CWNA:IEEE 802.11标准与修正案","date":"2022-01-07T05:08:16.000Z","_content":"1.IEEE 802.11原始标准\n2.IEEE 802.11-2016标准\n>  802.11a-1999\n>  802.11b-1999\n>  802.11d-2001\n>  802.11e-2005\n>  802.11g-2003\n>  802.11h-2003\n>  802.11i-2003\n>  802.11j-2004\n>  802.11k-2008\n>  802.11n-2009\n>  802.11p-2010\n>  802.11r-2008\n>  802.11s-2011\n>  802.11u-2011\n>  802.11v-2011\n>  802.11w-2009\n>  802.11y-2008\n>  802.11z-2010\n>  802.11aa-2012\n>  802.11ac-2013\n>  802.11ad-2012\n>  802.11ae-2012\n>  802.11af-2014\n\n3.IEEE 802.11-2016标准发布后获批的修正案\n>  802.11ah-2016\n>  802.11ai-2016\n>  802.11aj-2018\n>  802.11aq-2018\n>  802.11ak-2018\n\n4.IEEE 802.11 修正案草案\n>  802.11ax\n>  802.11ay\n>  802.11az\n>  802.11ba\n\n5.已失效的IEEE 802.11 修正案\n>  802.11F\n>  802.11T\n\n4.IEEE 802.11m 任务组\n_______\n\n上面所列的一系列标准是由IEEE协会制定，命名一般是按照字母顺序排列。但是，由于获批时间不一样，存在先后。\n\n### 标准演进历程\n1997年6月，IEEE发布了802.11原始标准（IEEE std 802.11-1997）。通常称为802.11 prime。\n1999年对原始标准进行了修订；\n2003年再次确认以后以IEEE Std 802.11-1999(R-2003)为名重新发布。\n2007年3月,IEEE 802.11-2007标准（IEEE Std 802.11-2007）获批。\n2012年2月,IEEE 802.11-2012标准(IEEE Std 802.11-2012)获批。\n2016年12月,IEEE 802.11-2016标准(IEEE Std 802.11-2016)获批。\n\n新标准IEEE Std 802.11-2016是IEEE Std 802.11-2012标准与获批的修正案合并为一份文档形成。严格来说，任何\n纳入新标准的修正案都不再单独存在，然而，Wi-Fi联盟与大多数无线局域网专业人士仍然习惯采用获批的名称。\n\n### 802.11a-1999\n采用了正交频分复用(OFDM)的射频技术，定义了5GHz频率空间的无线局域网通信。可以使用三个不同的100MHz非授\n权频段传输信息，三者称为非授权国家信息基础设施(U-NII)频段。\n\n802.11a无线接口最初可以使用U-NII-1、U-NII-2、与U-NII-3频段的12条信道传输信息，具体可以使用的信道决定\n于各国的射频监管机构的规定。\n\n通过使用OFDM技术，802.11a无线接口可以支持6,9,12,18,24,36,48,54Mbps等数据速率。在修正案获批两年后，\n802.11a设备开始面世，一开始采用OFDM技术的无线芯片组极为昂贵，导致5GHz无线局域网部署缓慢。芯片组价格\n降至可负担的程度后，5GHz无线局域网显著增加。开始出现2.4GHz和5GHz两个无线接口的双频无线接入点。\n\n### 802.11b-1999\n定义了工作在2.4GHz ISM频段(2.4GHz~2.4835GHz)的无线局域网通信。支持1，2，5.5，11Mbps四种数据速率。它是\n最早广泛部署应用的标准。\n\n### 802.11d-2001\n由于原始标准是为符合美国、加拿大、日本于欧洲的监管规定而制定的标准。因此，802.11d增加了必要的定义和要求，\n以便802.11设备能在于是标准没有涉及的地区使用。\n\nBeacon Fream 和 probe response frame的字段中包含国家代码信息，802.11d兼容设备利用该信息确保符合特定国家\n的频率和功率规定。\n\n\n### 802.11e-2005\n由于原始标准没有为使用Wi-Fi语音等时敏应用定义合乎要求的服务质量(QoS)规程。语音、视频、音频等应用要求较低\n的延迟和抖动，其传输的优先级高于标准的数据应用流量。802.11e修正案定义了二层MAC机制，以满足无线局域网对时\n敏应用的QoS要求。\n\n802.11原始标准定义了两种方法，以便802.11无线接口卡获取半双工介质的控制权。分布式协调功能(DCF)是默认方法，这种\n基于争用的方法用于确定接下来使用无线介质进行传输的设备。为了满足Qos要求，混合协调功能(HCF)引入，增强型分布式\n信道访问(EDCA)是对DCF的扩展，这种介质访问方法根据上层协议提供“帧优先”，以满足必要的延迟要求。\n\nWi-Fi联盟有一项名为Wi-Fi多媒体(WMM)的认证项目。这项认证定义了802.11e修正案的许多要素，并根据重要性将流量\n优先级划分为4个访问类别。\n\n### 802.11g-2003\n是一项引起轰动的修正案，无线接口采用称为扩展速率物理层的新技术，并仍然可以使用2.4GHz ISM频段。\n\n定义了两种强制和两种可选的物理层\n为了获取更高的数据速率，设备必须支持称为扩展速率物理层-正交频分复用(ERP-OFDM)的物理层技术，支持6，9，12，18，\n24，36，48，54Mbps等多种速率。\n\n为了向后兼容802.11 DSSS与802.11b网络，设备必须支持称为扩展速率物理层-直接序列扩频/补码键控(ERP-DSSS/CCK)的物\n理层技术。\n\n802.11修正案的比较\n\n|        |802.11遗留|802.11b|802.11g|802.11a|\n|:------:|:--------:|:--------:|:-----:|:-----:|\n|工作频段|2.4GHz ISM|2.4GHz ISM|2.4GHz ISM|5GHz U-NII-1,U-NII-2,U-NII-3|\n|扩频技术|FHSS或DSSS|HR-DSSS   |ERP:强制支持ERP-OFDM与ERP-DSSS/CCK|OFDM|\n|数据速率|1或2Mbps  |DSSS:1 or 2Mbps/HR-DSSS: 5.5or 11Mbps|ERP-DSS/CCK:1,2,5.5,11Mbps/ERP-OFDM:强制支持6,12,24Mbs,可选支持9,18,36,48,54Mbps|强制支持6,12,24Mbps,可选支持9,18,36,48,54Mbps|\n|向后兼容|不适用    |仅802.11 DSSS|802.11b HR-DSSS和802.11DSSS|无|\n|获批时间|1997年    |1999年    |2003年|1999年|\n\n### 802.11h-2003\n定义了动态频率选择(DFS)和发射功率控制(TPC)机制。初衷是为了满足欧洲对于5GHz频段通信的监管要求，以及检测和\n避免对5GHz卫星和雷达系统的干扰。\n\n802.11h还定义了一个新的频段,UNII-2扩展(UNII-2 Extended)频段。属于802.11a频段的延申。\n\nDFS本质上属于雷达检测和雷达干扰回避技术，提供以下功能。\n> 接入点根据支持的信道，允许客户端进行关联。如果客户端成为接入点所在的无线网络的成员，称二者建立关联。\n> 接入点可以将信道禁声以测试是否存在雷达传输。\n> 在使用信道之前，接入点可以测试信道是否存在雷达传输。\n> 接入点可以检测当前信道和其他信道是否存在雷达传输。\n> 如果检测到雷达传输，接入点将停止操作以避免干扰。\n> 检测到干扰时，接入点可以选择不同的信道进行传输，并通知所有关联到自己的客户端。\n\nTPC致力于满足有关传输功率的监管要求，提供以下功能。\n> 客户端可以根据发射功率与接入点建立关连。\n> 如果法规允许，接入点和客户端遵守信道的最大发射功率电平。\n> 接入点可以指定某个或所有关联到自己的客户端使用的发射功率。\n> 接入点可以根据实际的射频环境参数（如路径损耗）调整客户端的传输功率。\n\n\n(未完待续...)\n","source":"_posts/CWNA-IEEE-802-11标准与修正案.md","raw":"---\ntitle: 'CWNA:IEEE 802.11标准与修正案'\ndate: 2022-01-07 13:08:16\ntags: 'Wi-Fi'\n---\n1.IEEE 802.11原始标准\n2.IEEE 802.11-2016标准\n>  802.11a-1999\n>  802.11b-1999\n>  802.11d-2001\n>  802.11e-2005\n>  802.11g-2003\n>  802.11h-2003\n>  802.11i-2003\n>  802.11j-2004\n>  802.11k-2008\n>  802.11n-2009\n>  802.11p-2010\n>  802.11r-2008\n>  802.11s-2011\n>  802.11u-2011\n>  802.11v-2011\n>  802.11w-2009\n>  802.11y-2008\n>  802.11z-2010\n>  802.11aa-2012\n>  802.11ac-2013\n>  802.11ad-2012\n>  802.11ae-2012\n>  802.11af-2014\n\n3.IEEE 802.11-2016标准发布后获批的修正案\n>  802.11ah-2016\n>  802.11ai-2016\n>  802.11aj-2018\n>  802.11aq-2018\n>  802.11ak-2018\n\n4.IEEE 802.11 修正案草案\n>  802.11ax\n>  802.11ay\n>  802.11az\n>  802.11ba\n\n5.已失效的IEEE 802.11 修正案\n>  802.11F\n>  802.11T\n\n4.IEEE 802.11m 任务组\n_______\n\n上面所列的一系列标准是由IEEE协会制定，命名一般是按照字母顺序排列。但是，由于获批时间不一样，存在先后。\n\n### 标准演进历程\n1997年6月，IEEE发布了802.11原始标准（IEEE std 802.11-1997）。通常称为802.11 prime。\n1999年对原始标准进行了修订；\n2003年再次确认以后以IEEE Std 802.11-1999(R-2003)为名重新发布。\n2007年3月,IEEE 802.11-2007标准（IEEE Std 802.11-2007）获批。\n2012年2月,IEEE 802.11-2012标准(IEEE Std 802.11-2012)获批。\n2016年12月,IEEE 802.11-2016标准(IEEE Std 802.11-2016)获批。\n\n新标准IEEE Std 802.11-2016是IEEE Std 802.11-2012标准与获批的修正案合并为一份文档形成。严格来说，任何\n纳入新标准的修正案都不再单独存在，然而，Wi-Fi联盟与大多数无线局域网专业人士仍然习惯采用获批的名称。\n\n### 802.11a-1999\n采用了正交频分复用(OFDM)的射频技术，定义了5GHz频率空间的无线局域网通信。可以使用三个不同的100MHz非授\n权频段传输信息，三者称为非授权国家信息基础设施(U-NII)频段。\n\n802.11a无线接口最初可以使用U-NII-1、U-NII-2、与U-NII-3频段的12条信道传输信息，具体可以使用的信道决定\n于各国的射频监管机构的规定。\n\n通过使用OFDM技术，802.11a无线接口可以支持6,9,12,18,24,36,48,54Mbps等数据速率。在修正案获批两年后，\n802.11a设备开始面世，一开始采用OFDM技术的无线芯片组极为昂贵，导致5GHz无线局域网部署缓慢。芯片组价格\n降至可负担的程度后，5GHz无线局域网显著增加。开始出现2.4GHz和5GHz两个无线接口的双频无线接入点。\n\n### 802.11b-1999\n定义了工作在2.4GHz ISM频段(2.4GHz~2.4835GHz)的无线局域网通信。支持1，2，5.5，11Mbps四种数据速率。它是\n最早广泛部署应用的标准。\n\n### 802.11d-2001\n由于原始标准是为符合美国、加拿大、日本于欧洲的监管规定而制定的标准。因此，802.11d增加了必要的定义和要求，\n以便802.11设备能在于是标准没有涉及的地区使用。\n\nBeacon Fream 和 probe response frame的字段中包含国家代码信息，802.11d兼容设备利用该信息确保符合特定国家\n的频率和功率规定。\n\n\n### 802.11e-2005\n由于原始标准没有为使用Wi-Fi语音等时敏应用定义合乎要求的服务质量(QoS)规程。语音、视频、音频等应用要求较低\n的延迟和抖动，其传输的优先级高于标准的数据应用流量。802.11e修正案定义了二层MAC机制，以满足无线局域网对时\n敏应用的QoS要求。\n\n802.11原始标准定义了两种方法，以便802.11无线接口卡获取半双工介质的控制权。分布式协调功能(DCF)是默认方法，这种\n基于争用的方法用于确定接下来使用无线介质进行传输的设备。为了满足Qos要求，混合协调功能(HCF)引入，增强型分布式\n信道访问(EDCA)是对DCF的扩展，这种介质访问方法根据上层协议提供“帧优先”，以满足必要的延迟要求。\n\nWi-Fi联盟有一项名为Wi-Fi多媒体(WMM)的认证项目。这项认证定义了802.11e修正案的许多要素，并根据重要性将流量\n优先级划分为4个访问类别。\n\n### 802.11g-2003\n是一项引起轰动的修正案，无线接口采用称为扩展速率物理层的新技术，并仍然可以使用2.4GHz ISM频段。\n\n定义了两种强制和两种可选的物理层\n为了获取更高的数据速率，设备必须支持称为扩展速率物理层-正交频分复用(ERP-OFDM)的物理层技术，支持6，9，12，18，\n24，36，48，54Mbps等多种速率。\n\n为了向后兼容802.11 DSSS与802.11b网络，设备必须支持称为扩展速率物理层-直接序列扩频/补码键控(ERP-DSSS/CCK)的物\n理层技术。\n\n802.11修正案的比较\n\n|        |802.11遗留|802.11b|802.11g|802.11a|\n|:------:|:--------:|:--------:|:-----:|:-----:|\n|工作频段|2.4GHz ISM|2.4GHz ISM|2.4GHz ISM|5GHz U-NII-1,U-NII-2,U-NII-3|\n|扩频技术|FHSS或DSSS|HR-DSSS   |ERP:强制支持ERP-OFDM与ERP-DSSS/CCK|OFDM|\n|数据速率|1或2Mbps  |DSSS:1 or 2Mbps/HR-DSSS: 5.5or 11Mbps|ERP-DSS/CCK:1,2,5.5,11Mbps/ERP-OFDM:强制支持6,12,24Mbs,可选支持9,18,36,48,54Mbps|强制支持6,12,24Mbps,可选支持9,18,36,48,54Mbps|\n|向后兼容|不适用    |仅802.11 DSSS|802.11b HR-DSSS和802.11DSSS|无|\n|获批时间|1997年    |1999年    |2003年|1999年|\n\n### 802.11h-2003\n定义了动态频率选择(DFS)和发射功率控制(TPC)机制。初衷是为了满足欧洲对于5GHz频段通信的监管要求，以及检测和\n避免对5GHz卫星和雷达系统的干扰。\n\n802.11h还定义了一个新的频段,UNII-2扩展(UNII-2 Extended)频段。属于802.11a频段的延申。\n\nDFS本质上属于雷达检测和雷达干扰回避技术，提供以下功能。\n> 接入点根据支持的信道，允许客户端进行关联。如果客户端成为接入点所在的无线网络的成员，称二者建立关联。\n> 接入点可以将信道禁声以测试是否存在雷达传输。\n> 在使用信道之前，接入点可以测试信道是否存在雷达传输。\n> 接入点可以检测当前信道和其他信道是否存在雷达传输。\n> 如果检测到雷达传输，接入点将停止操作以避免干扰。\n> 检测到干扰时，接入点可以选择不同的信道进行传输，并通知所有关联到自己的客户端。\n\nTPC致力于满足有关传输功率的监管要求，提供以下功能。\n> 客户端可以根据发射功率与接入点建立关连。\n> 如果法规允许，接入点和客户端遵守信道的最大发射功率电平。\n> 接入点可以指定某个或所有关联到自己的客户端使用的发射功率。\n> 接入点可以根据实际的射频环境参数（如路径损耗）调整客户端的传输功率。\n\n\n(未完待续...)\n","slug":"CWNA-IEEE-802-11标准与修正案","published":1,"updated":"2022-01-10T12:15:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3o001818jxb4i7c2ui","content":"<p>1.IEEE 802.11原始标准<br>2.IEEE 802.11-2016标准</p>\n<blockquote>\n<p> 802.11a-1999<br> 802.11b-1999<br> 802.11d-2001<br> 802.11e-2005<br> 802.11g-2003<br> 802.11h-2003<br> 802.11i-2003<br> 802.11j-2004<br> 802.11k-2008<br> 802.11n-2009<br> 802.11p-2010<br> 802.11r-2008<br> 802.11s-2011<br> 802.11u-2011<br> 802.11v-2011<br> 802.11w-2009<br> 802.11y-2008<br> 802.11z-2010<br> 802.11aa-2012<br> 802.11ac-2013<br> 802.11ad-2012<br> 802.11ae-2012<br> 802.11af-2014</p>\n</blockquote>\n<p>3.IEEE 802.11-2016标准发布后获批的修正案</p>\n<blockquote>\n<p> 802.11ah-2016<br> 802.11ai-2016<br> 802.11aj-2018<br> 802.11aq-2018<br> 802.11ak-2018</p>\n</blockquote>\n<p>4.IEEE 802.11 修正案草案</p>\n<blockquote>\n<p> 802.11ax<br> 802.11ay<br> 802.11az<br> 802.11ba</p>\n</blockquote>\n<p>5.已失效的IEEE 802.11 修正案</p>\n<blockquote>\n<p> 802.11F<br> 802.11T</p>\n</blockquote>\n<p>4.IEEE 802.11m 任务组</p>\n<hr>\n<p>上面所列的一系列标准是由IEEE协会制定，命名一般是按照字母顺序排列。但是，由于获批时间不一样，存在先后。</p>\n<h3 id=\"标准演进历程\"><a href=\"#标准演进历程\" class=\"headerlink\" title=\"标准演进历程\"></a>标准演进历程</h3><p>1997年6月，IEEE发布了802.11原始标准（IEEE std 802.11-1997）。通常称为802.11 prime。<br>1999年对原始标准进行了修订；<br>2003年再次确认以后以IEEE Std 802.11-1999(R-2003)为名重新发布。<br>2007年3月,IEEE 802.11-2007标准（IEEE Std 802.11-2007）获批。<br>2012年2月,IEEE 802.11-2012标准(IEEE Std 802.11-2012)获批。<br>2016年12月,IEEE 802.11-2016标准(IEEE Std 802.11-2016)获批。</p>\n<p>新标准IEEE Std 802.11-2016是IEEE Std 802.11-2012标准与获批的修正案合并为一份文档形成。严格来说，任何<br>纳入新标准的修正案都不再单独存在，然而，Wi-Fi联盟与大多数无线局域网专业人士仍然习惯采用获批的名称。</p>\n<h3 id=\"802-11a-1999\"><a href=\"#802-11a-1999\" class=\"headerlink\" title=\"802.11a-1999\"></a>802.11a-1999</h3><p>采用了正交频分复用(OFDM)的射频技术，定义了5GHz频率空间的无线局域网通信。可以使用三个不同的100MHz非授<br>权频段传输信息，三者称为非授权国家信息基础设施(U-NII)频段。</p>\n<p>802.11a无线接口最初可以使用U-NII-1、U-NII-2、与U-NII-3频段的12条信道传输信息，具体可以使用的信道决定<br>于各国的射频监管机构的规定。</p>\n<p>通过使用OFDM技术，802.11a无线接口可以支持6,9,12,18,24,36,48,54Mbps等数据速率。在修正案获批两年后，<br>802.11a设备开始面世，一开始采用OFDM技术的无线芯片组极为昂贵，导致5GHz无线局域网部署缓慢。芯片组价格<br>降至可负担的程度后，5GHz无线局域网显著增加。开始出现2.4GHz和5GHz两个无线接口的双频无线接入点。</p>\n<h3 id=\"802-11b-1999\"><a href=\"#802-11b-1999\" class=\"headerlink\" title=\"802.11b-1999\"></a>802.11b-1999</h3><p>定义了工作在2.4GHz ISM频段(2.4GHz~2.4835GHz)的无线局域网通信。支持1，2，5.5，11Mbps四种数据速率。它是<br>最早广泛部署应用的标准。</p>\n<h3 id=\"802-11d-2001\"><a href=\"#802-11d-2001\" class=\"headerlink\" title=\"802.11d-2001\"></a>802.11d-2001</h3><p>由于原始标准是为符合美国、加拿大、日本于欧洲的监管规定而制定的标准。因此，802.11d增加了必要的定义和要求，<br>以便802.11设备能在于是标准没有涉及的地区使用。</p>\n<p>Beacon Fream 和 probe response frame的字段中包含国家代码信息，802.11d兼容设备利用该信息确保符合特定国家<br>的频率和功率规定。</p>\n<h3 id=\"802-11e-2005\"><a href=\"#802-11e-2005\" class=\"headerlink\" title=\"802.11e-2005\"></a>802.11e-2005</h3><p>由于原始标准没有为使用Wi-Fi语音等时敏应用定义合乎要求的服务质量(QoS)规程。语音、视频、音频等应用要求较低<br>的延迟和抖动，其传输的优先级高于标准的数据应用流量。802.11e修正案定义了二层MAC机制，以满足无线局域网对时<br>敏应用的QoS要求。</p>\n<p>802.11原始标准定义了两种方法，以便802.11无线接口卡获取半双工介质的控制权。分布式协调功能(DCF)是默认方法，这种<br>基于争用的方法用于确定接下来使用无线介质进行传输的设备。为了满足Qos要求，混合协调功能(HCF)引入，增强型分布式<br>信道访问(EDCA)是对DCF的扩展，这种介质访问方法根据上层协议提供“帧优先”，以满足必要的延迟要求。</p>\n<p>Wi-Fi联盟有一项名为Wi-Fi多媒体(WMM)的认证项目。这项认证定义了802.11e修正案的许多要素，并根据重要性将流量<br>优先级划分为4个访问类别。</p>\n<h3 id=\"802-11g-2003\"><a href=\"#802-11g-2003\" class=\"headerlink\" title=\"802.11g-2003\"></a>802.11g-2003</h3><p>是一项引起轰动的修正案，无线接口采用称为扩展速率物理层的新技术，并仍然可以使用2.4GHz ISM频段。</p>\n<p>定义了两种强制和两种可选的物理层<br>为了获取更高的数据速率，设备必须支持称为扩展速率物理层-正交频分复用(ERP-OFDM)的物理层技术，支持6，9，12，18，<br>24，36，48，54Mbps等多种速率。</p>\n<p>为了向后兼容802.11 DSSS与802.11b网络，设备必须支持称为扩展速率物理层-直接序列扩频/补码键控(ERP-DSSS/CCK)的物<br>理层技术。</p>\n<p>802.11修正案的比较</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">802.11遗留</th>\n<th style=\"text-align:center\">802.11b</th>\n<th style=\"text-align:center\">802.11g</th>\n<th style=\"text-align:center\">802.11a</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">工作频段</td>\n<td style=\"text-align:center\">2.4GHz ISM</td>\n<td style=\"text-align:center\">2.4GHz ISM</td>\n<td style=\"text-align:center\">2.4GHz ISM</td>\n<td style=\"text-align:center\">5GHz U-NII-1,U-NII-2,U-NII-3</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">扩频技术</td>\n<td style=\"text-align:center\">FHSS或DSSS</td>\n<td style=\"text-align:center\">HR-DSSS</td>\n<td style=\"text-align:center\">ERP:强制支持ERP-OFDM与ERP-DSSS/CCK</td>\n<td style=\"text-align:center\">OFDM</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">数据速率</td>\n<td style=\"text-align:center\">1或2Mbps</td>\n<td style=\"text-align:center\">DSSS:1 or 2Mbps/HR-DSSS: 5.5or 11Mbps</td>\n<td style=\"text-align:center\">ERP-DSS/CCK:1,2,5.5,11Mbps/ERP-OFDM:强制支持6,12,24Mbs,可选支持9,18,36,48,54Mbps</td>\n<td style=\"text-align:center\">强制支持6,12,24Mbps,可选支持9,18,36,48,54Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">向后兼容</td>\n<td style=\"text-align:center\">不适用</td>\n<td style=\"text-align:center\">仅802.11 DSSS</td>\n<td style=\"text-align:center\">802.11b HR-DSSS和802.11DSSS</td>\n<td style=\"text-align:center\">无</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">获批时间</td>\n<td style=\"text-align:center\">1997年</td>\n<td style=\"text-align:center\">1999年</td>\n<td style=\"text-align:center\">2003年</td>\n<td style=\"text-align:center\">1999年</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"802-11h-2003\"><a href=\"#802-11h-2003\" class=\"headerlink\" title=\"802.11h-2003\"></a>802.11h-2003</h3><p>定义了动态频率选择(DFS)和发射功率控制(TPC)机制。初衷是为了满足欧洲对于5GHz频段通信的监管要求，以及检测和<br>避免对5GHz卫星和雷达系统的干扰。</p>\n<p>802.11h还定义了一个新的频段,UNII-2扩展(UNII-2 Extended)频段。属于802.11a频段的延申。</p>\n<p>DFS本质上属于雷达检测和雷达干扰回避技术，提供以下功能。</p>\n<blockquote>\n<p>接入点根据支持的信道，允许客户端进行关联。如果客户端成为接入点所在的无线网络的成员，称二者建立关联。<br>接入点可以将信道禁声以测试是否存在雷达传输。<br>在使用信道之前，接入点可以测试信道是否存在雷达传输。<br>接入点可以检测当前信道和其他信道是否存在雷达传输。<br>如果检测到雷达传输，接入点将停止操作以避免干扰。<br>检测到干扰时，接入点可以选择不同的信道进行传输，并通知所有关联到自己的客户端。</p>\n</blockquote>\n<p>TPC致力于满足有关传输功率的监管要求，提供以下功能。</p>\n<blockquote>\n<p>客户端可以根据发射功率与接入点建立关连。<br>如果法规允许，接入点和客户端遵守信道的最大发射功率电平。<br>接入点可以指定某个或所有关联到自己的客户端使用的发射功率。<br>接入点可以根据实际的射频环境参数（如路径损耗）调整客户端的传输功率。</p>\n</blockquote>\n<p>(未完待续…)</p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.IEEE 802.11原始标准<br>2.IEEE 802.11-2016标准</p>\n<blockquote>\n<p> 802.11a-1999<br> 802.11b-1999<br> 802.11d-2001<br> 802.11e-2005<br> 802.11g-2003<br> 802.11h-2003<br> 802.11i-2003<br> 802.11j-2004<br> 802.11k-2008<br> 802.11n-2009<br> 802.11p-2010<br> 802.11r-2008<br> 802.11s-2011<br> 802.11u-2011<br> 802.11v-2011<br> 802.11w-2009<br> 802.11y-2008<br> 802.11z-2010<br> 802.11aa-2012<br> 802.11ac-2013<br> 802.11ad-2012<br> 802.11ae-2012<br> 802.11af-2014</p>\n</blockquote>\n<p>3.IEEE 802.11-2016标准发布后获批的修正案</p>\n<blockquote>\n<p> 802.11ah-2016<br> 802.11ai-2016<br> 802.11aj-2018<br> 802.11aq-2018<br> 802.11ak-2018</p>\n</blockquote>\n<p>4.IEEE 802.11 修正案草案</p>\n<blockquote>\n<p> 802.11ax<br> 802.11ay<br> 802.11az<br> 802.11ba</p>\n</blockquote>\n<p>5.已失效的IEEE 802.11 修正案</p>\n<blockquote>\n<p> 802.11F<br> 802.11T</p>\n</blockquote>\n<p>4.IEEE 802.11m 任务组</p>\n<hr>\n<p>上面所列的一系列标准是由IEEE协会制定，命名一般是按照字母顺序排列。但是，由于获批时间不一样，存在先后。</p>\n<h3 id=\"标准演进历程\"><a href=\"#标准演进历程\" class=\"headerlink\" title=\"标准演进历程\"></a>标准演进历程</h3><p>1997年6月，IEEE发布了802.11原始标准（IEEE std 802.11-1997）。通常称为802.11 prime。<br>1999年对原始标准进行了修订；<br>2003年再次确认以后以IEEE Std 802.11-1999(R-2003)为名重新发布。<br>2007年3月,IEEE 802.11-2007标准（IEEE Std 802.11-2007）获批。<br>2012年2月,IEEE 802.11-2012标准(IEEE Std 802.11-2012)获批。<br>2016年12月,IEEE 802.11-2016标准(IEEE Std 802.11-2016)获批。</p>\n<p>新标准IEEE Std 802.11-2016是IEEE Std 802.11-2012标准与获批的修正案合并为一份文档形成。严格来说，任何<br>纳入新标准的修正案都不再单独存在，然而，Wi-Fi联盟与大多数无线局域网专业人士仍然习惯采用获批的名称。</p>\n<h3 id=\"802-11a-1999\"><a href=\"#802-11a-1999\" class=\"headerlink\" title=\"802.11a-1999\"></a>802.11a-1999</h3><p>采用了正交频分复用(OFDM)的射频技术，定义了5GHz频率空间的无线局域网通信。可以使用三个不同的100MHz非授<br>权频段传输信息，三者称为非授权国家信息基础设施(U-NII)频段。</p>\n<p>802.11a无线接口最初可以使用U-NII-1、U-NII-2、与U-NII-3频段的12条信道传输信息，具体可以使用的信道决定<br>于各国的射频监管机构的规定。</p>\n<p>通过使用OFDM技术，802.11a无线接口可以支持6,9,12,18,24,36,48,54Mbps等数据速率。在修正案获批两年后，<br>802.11a设备开始面世，一开始采用OFDM技术的无线芯片组极为昂贵，导致5GHz无线局域网部署缓慢。芯片组价格<br>降至可负担的程度后，5GHz无线局域网显著增加。开始出现2.4GHz和5GHz两个无线接口的双频无线接入点。</p>\n<h3 id=\"802-11b-1999\"><a href=\"#802-11b-1999\" class=\"headerlink\" title=\"802.11b-1999\"></a>802.11b-1999</h3><p>定义了工作在2.4GHz ISM频段(2.4GHz~2.4835GHz)的无线局域网通信。支持1，2，5.5，11Mbps四种数据速率。它是<br>最早广泛部署应用的标准。</p>\n<h3 id=\"802-11d-2001\"><a href=\"#802-11d-2001\" class=\"headerlink\" title=\"802.11d-2001\"></a>802.11d-2001</h3><p>由于原始标准是为符合美国、加拿大、日本于欧洲的监管规定而制定的标准。因此，802.11d增加了必要的定义和要求，<br>以便802.11设备能在于是标准没有涉及的地区使用。</p>\n<p>Beacon Fream 和 probe response frame的字段中包含国家代码信息，802.11d兼容设备利用该信息确保符合特定国家<br>的频率和功率规定。</p>\n<h3 id=\"802-11e-2005\"><a href=\"#802-11e-2005\" class=\"headerlink\" title=\"802.11e-2005\"></a>802.11e-2005</h3><p>由于原始标准没有为使用Wi-Fi语音等时敏应用定义合乎要求的服务质量(QoS)规程。语音、视频、音频等应用要求较低<br>的延迟和抖动，其传输的优先级高于标准的数据应用流量。802.11e修正案定义了二层MAC机制，以满足无线局域网对时<br>敏应用的QoS要求。</p>\n<p>802.11原始标准定义了两种方法，以便802.11无线接口卡获取半双工介质的控制权。分布式协调功能(DCF)是默认方法，这种<br>基于争用的方法用于确定接下来使用无线介质进行传输的设备。为了满足Qos要求，混合协调功能(HCF)引入，增强型分布式<br>信道访问(EDCA)是对DCF的扩展，这种介质访问方法根据上层协议提供“帧优先”，以满足必要的延迟要求。</p>\n<p>Wi-Fi联盟有一项名为Wi-Fi多媒体(WMM)的认证项目。这项认证定义了802.11e修正案的许多要素，并根据重要性将流量<br>优先级划分为4个访问类别。</p>\n<h3 id=\"802-11g-2003\"><a href=\"#802-11g-2003\" class=\"headerlink\" title=\"802.11g-2003\"></a>802.11g-2003</h3><p>是一项引起轰动的修正案，无线接口采用称为扩展速率物理层的新技术，并仍然可以使用2.4GHz ISM频段。</p>\n<p>定义了两种强制和两种可选的物理层<br>为了获取更高的数据速率，设备必须支持称为扩展速率物理层-正交频分复用(ERP-OFDM)的物理层技术，支持6，9，12，18，<br>24，36，48，54Mbps等多种速率。</p>\n<p>为了向后兼容802.11 DSSS与802.11b网络，设备必须支持称为扩展速率物理层-直接序列扩频/补码键控(ERP-DSSS/CCK)的物<br>理层技术。</p>\n<p>802.11修正案的比较</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">802.11遗留</th>\n<th style=\"text-align:center\">802.11b</th>\n<th style=\"text-align:center\">802.11g</th>\n<th style=\"text-align:center\">802.11a</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">工作频段</td>\n<td style=\"text-align:center\">2.4GHz ISM</td>\n<td style=\"text-align:center\">2.4GHz ISM</td>\n<td style=\"text-align:center\">2.4GHz ISM</td>\n<td style=\"text-align:center\">5GHz U-NII-1,U-NII-2,U-NII-3</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">扩频技术</td>\n<td style=\"text-align:center\">FHSS或DSSS</td>\n<td style=\"text-align:center\">HR-DSSS</td>\n<td style=\"text-align:center\">ERP:强制支持ERP-OFDM与ERP-DSSS/CCK</td>\n<td style=\"text-align:center\">OFDM</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">数据速率</td>\n<td style=\"text-align:center\">1或2Mbps</td>\n<td style=\"text-align:center\">DSSS:1 or 2Mbps/HR-DSSS: 5.5or 11Mbps</td>\n<td style=\"text-align:center\">ERP-DSS/CCK:1,2,5.5,11Mbps/ERP-OFDM:强制支持6,12,24Mbs,可选支持9,18,36,48,54Mbps</td>\n<td style=\"text-align:center\">强制支持6,12,24Mbps,可选支持9,18,36,48,54Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">向后兼容</td>\n<td style=\"text-align:center\">不适用</td>\n<td style=\"text-align:center\">仅802.11 DSSS</td>\n<td style=\"text-align:center\">802.11b HR-DSSS和802.11DSSS</td>\n<td style=\"text-align:center\">无</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">获批时间</td>\n<td style=\"text-align:center\">1997年</td>\n<td style=\"text-align:center\">1999年</td>\n<td style=\"text-align:center\">2003年</td>\n<td style=\"text-align:center\">1999年</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"802-11h-2003\"><a href=\"#802-11h-2003\" class=\"headerlink\" title=\"802.11h-2003\"></a>802.11h-2003</h3><p>定义了动态频率选择(DFS)和发射功率控制(TPC)机制。初衷是为了满足欧洲对于5GHz频段通信的监管要求，以及检测和<br>避免对5GHz卫星和雷达系统的干扰。</p>\n<p>802.11h还定义了一个新的频段,UNII-2扩展(UNII-2 Extended)频段。属于802.11a频段的延申。</p>\n<p>DFS本质上属于雷达检测和雷达干扰回避技术，提供以下功能。</p>\n<blockquote>\n<p>接入点根据支持的信道，允许客户端进行关联。如果客户端成为接入点所在的无线网络的成员，称二者建立关联。<br>接入点可以将信道禁声以测试是否存在雷达传输。<br>在使用信道之前，接入点可以测试信道是否存在雷达传输。<br>接入点可以检测当前信道和其他信道是否存在雷达传输。<br>如果检测到雷达传输，接入点将停止操作以避免干扰。<br>检测到干扰时，接入点可以选择不同的信道进行传输，并通知所有关联到自己的客户端。</p>\n</blockquote>\n<p>TPC致力于满足有关传输功率的监管要求，提供以下功能。</p>\n<blockquote>\n<p>客户端可以根据发射功率与接入点建立关连。<br>如果法规允许，接入点和客户端遵守信道的最大发射功率电平。<br>接入点可以指定某个或所有关联到自己的客户端使用的发射功率。<br>接入点可以根据实际的射频环境参数（如路径损耗）调整客户端的传输功率。</p>\n</blockquote>\n<p>(未完待续…)</p>\n"},{"title":"CWNA:MIMO技术：高吞吐量与甚高吞吐量(三)","date":"2022-02-22T08:33:35.000Z","_content":"\n### 802.11n/ac MAC体系结构\nMIMO无线接口使用的所有物理层增强机制可以增加并提高吞吐量。\n定义了两种帧聚合技术减少介质争用开销，并利用块确认机制减少固定的MAC开销。\n定义了3种电源管理机制。\n\n**聚合MAC服务数据单元（A-MSDU）**\n每次传输802.11单播帧时都会产生一定数量的固定开销，这些固定的开销包括物理层头部，MAC帧头，MAC帧尾，帧间间隔以及确认帧。\n每个帧必须争夺介质的使用权，介质争用开销同样不可避免。\n\n为了减少开销，将多个帧聚合为一个帧进行传输。这样减少了固定的帧头帧尾开销，减少了介质争用开销。\n第一种帧聚合：多个MSDU合并为一个A-MSDU, 外加 帧头和帧尾。\n\nA-MSDU中的所有MSDU必须属于同一802.11e Qos访问类别，使用相同的接收地址，采用同一种加密机制。\n\n**聚合MAC协议数据单元（A-MPDU）**\nA-MPDU包括多个MPDU以及物理层头部。\n构成A-MPDU的所有MPDU必须使用相同的接收机地址。与A-MSUD不同，每个MPDU的数据净荷是分别加密和解密的。\nA-MPDU中的所有MPDU必须同属同一种802.11e Qos访问类别。\n\n由于A-MPDU中的MPDU都有自己的MAC帧头和帧尾，因此A-MPDU的开销大于A-MSDU。 A-MPDU能减少ACK帧的开销。如果某个MPDU损坏，只需重传损坏帧。\n\nA-MPDU采用块确认帧作为交付验证方法，而A-MSDU采用确认帧的交付验证方法。 A-MSDU损坏，必须全部重传。\n\nA-MPDU中可以包括多个A-MSDU.\n\n**块确认**\n块确认帧用于确认A-MPDU的传输。\n如果某个MPDU损坏，只需重传损坏帧。A-MPDU的效率高于A-MSDU，这就是802.11ac无线接口要求使用A-MPDU的主要原因。\n\n**电源管理机制**\n802.11n定义的第一种电源管理机制是空间复用节电（SMPS），允许仅保留一个无线接口，关闭其他无线接口。\n\n定义的第二种电源管理机制是节电多轮询（PSMP），改进了自动节电传输（APSD）。\n\n定义的第三种电源管理机制是VHT TXOP节电。如果发现其他客户端享有发送机会，将在对方传输期间通过VHT TXOP节电机制关闭自己的无线接口。\n\n**调制编码方案**\n802.11n通过调制编码方案（MCS）矩阵定义数据速率。\n采用OFDM技术的非HT无线接口根据使用的调制和编码方法定义数据速率（6Mbps~54Mbps）\nHT无线接口根据调制技术，编码技术，空间流数量，信道宽度，保护间隔等多种参数定义数据速率。调制编码方案是这些参数的不同组合。\n802.11n为20MHz HT和40MHz HT信道定义了77种调制编码方案。20MHz HT信道必须支持的8种编码方案：\n\n|MCS指数|调制方法|空间流|数据速率：800ns保护间隔|数据速率：400ns保护间隔|\n|:---:|:---:|:---:|:---:|:---:|\n|0|BPSK|1路空间流|6.5Mbps|7.2Mbps|\n|1|QPSK|1路空间流|13.0Mbps|14.4Mbps|\n|2|QPSK|1路空间流|19.5Mbps|21.7Mbps|\n|3|16-QAM|1路空间流|26.0Mbps|28.9Mbps|\n|4|16-QAM|1路空间流|39.0Mbps|43.3Mbps|\n|5|64-QAM|1路空间流|52.0Mbps|57.8Mbps|\n|6|64-QAM|1路空间流|58.5Mbps|65.0Mbps|\n|7|64-QAM|1路空间流|65.0Mbps|72.2Mbps|\n\n802.11ac将802.11n调制编码方案缩减为10种。\n\n|MCS指数|调制方法|码率|20MHz数据速率|\n|:---:|:---:|:---:|:---:|:---:|\n|0|BPSK|1/2|7.2Mbps|\n|1|QPSK|1/2|14.4Mbps|\n|2|QPSK|3/4|21.7Mbps|\n|3|16-QAM|1/2|28.9Mbps|\n|4|16-QAM|3/4|43.3Mbps|\n|5|64-QAM|2/3|57.8Mbps|\n|6|64-QAM|3/4|65.0Mbps|\n|7|64-QAM|5/6|72.2Mbps|\n|8|256-QAM|3/4|86.7Mbps|\n|9|256-QAM|5/6|96.3Mbps|\n\n**802.11ac数据速率**\n802.11ac实现较高速率的措施：\n1.采用256-QAM\n2.空间流乘数\n3.信道宽度\n\n802.11ac最大速率 6933Mbps= 866.7 X 8 =  433.3 X 2 X 8 = 96.3Mbps X 4 X 2 X 8\n96.3Mbps是MCS9的基础速率。\n\n### HT/VHT保护机制\nHT 保护模式（0~3）\n模式0：绿地（无保护）模式：\n网络中只有HT无线接口，所有的HT客户端必须具备相同的操作功能。比如：基本服务集为20/40MHz基本服务集，则所有客户端必须支持20/40MHz通信。\n\n模式1：非成员保护模式：\n基本服务集种的所有终端必须是HT终端。如果HT接入点侦听到不属于基本服务集成员的非HT客户端或接入点，则触发保护机制。\n\n模式2：20MHz保护模式：\n基本服务集种的所有终端必须是关联到20/40MHz接入点的HT终端。如果仅支持20MHz通信的HT客户端关联到20/40MHz接入点，则必须启动保护机制。\n\n模式3：非HT混合模式：\n一个或多个非HT终端关联到HT接入点，将启用该模式。这也是最常见的保护模式。\n","source":"_posts/CWNA-MIMO技术：高吞吐量与甚高吞吐量-三.md","raw":"---\ntitle: 'CWNA:MIMO技术：高吞吐量与甚高吞吐量(三)'\ndate: 2022-02-22 16:33:35\ntags: 'Wi-Fi'\n---\n\n### 802.11n/ac MAC体系结构\nMIMO无线接口使用的所有物理层增强机制可以增加并提高吞吐量。\n定义了两种帧聚合技术减少介质争用开销，并利用块确认机制减少固定的MAC开销。\n定义了3种电源管理机制。\n\n**聚合MAC服务数据单元（A-MSDU）**\n每次传输802.11单播帧时都会产生一定数量的固定开销，这些固定的开销包括物理层头部，MAC帧头，MAC帧尾，帧间间隔以及确认帧。\n每个帧必须争夺介质的使用权，介质争用开销同样不可避免。\n\n为了减少开销，将多个帧聚合为一个帧进行传输。这样减少了固定的帧头帧尾开销，减少了介质争用开销。\n第一种帧聚合：多个MSDU合并为一个A-MSDU, 外加 帧头和帧尾。\n\nA-MSDU中的所有MSDU必须属于同一802.11e Qos访问类别，使用相同的接收地址，采用同一种加密机制。\n\n**聚合MAC协议数据单元（A-MPDU）**\nA-MPDU包括多个MPDU以及物理层头部。\n构成A-MPDU的所有MPDU必须使用相同的接收机地址。与A-MSUD不同，每个MPDU的数据净荷是分别加密和解密的。\nA-MPDU中的所有MPDU必须同属同一种802.11e Qos访问类别。\n\n由于A-MPDU中的MPDU都有自己的MAC帧头和帧尾，因此A-MPDU的开销大于A-MSDU。 A-MPDU能减少ACK帧的开销。如果某个MPDU损坏，只需重传损坏帧。\n\nA-MPDU采用块确认帧作为交付验证方法，而A-MSDU采用确认帧的交付验证方法。 A-MSDU损坏，必须全部重传。\n\nA-MPDU中可以包括多个A-MSDU.\n\n**块确认**\n块确认帧用于确认A-MPDU的传输。\n如果某个MPDU损坏，只需重传损坏帧。A-MPDU的效率高于A-MSDU，这就是802.11ac无线接口要求使用A-MPDU的主要原因。\n\n**电源管理机制**\n802.11n定义的第一种电源管理机制是空间复用节电（SMPS），允许仅保留一个无线接口，关闭其他无线接口。\n\n定义的第二种电源管理机制是节电多轮询（PSMP），改进了自动节电传输（APSD）。\n\n定义的第三种电源管理机制是VHT TXOP节电。如果发现其他客户端享有发送机会，将在对方传输期间通过VHT TXOP节电机制关闭自己的无线接口。\n\n**调制编码方案**\n802.11n通过调制编码方案（MCS）矩阵定义数据速率。\n采用OFDM技术的非HT无线接口根据使用的调制和编码方法定义数据速率（6Mbps~54Mbps）\nHT无线接口根据调制技术，编码技术，空间流数量，信道宽度，保护间隔等多种参数定义数据速率。调制编码方案是这些参数的不同组合。\n802.11n为20MHz HT和40MHz HT信道定义了77种调制编码方案。20MHz HT信道必须支持的8种编码方案：\n\n|MCS指数|调制方法|空间流|数据速率：800ns保护间隔|数据速率：400ns保护间隔|\n|:---:|:---:|:---:|:---:|:---:|\n|0|BPSK|1路空间流|6.5Mbps|7.2Mbps|\n|1|QPSK|1路空间流|13.0Mbps|14.4Mbps|\n|2|QPSK|1路空间流|19.5Mbps|21.7Mbps|\n|3|16-QAM|1路空间流|26.0Mbps|28.9Mbps|\n|4|16-QAM|1路空间流|39.0Mbps|43.3Mbps|\n|5|64-QAM|1路空间流|52.0Mbps|57.8Mbps|\n|6|64-QAM|1路空间流|58.5Mbps|65.0Mbps|\n|7|64-QAM|1路空间流|65.0Mbps|72.2Mbps|\n\n802.11ac将802.11n调制编码方案缩减为10种。\n\n|MCS指数|调制方法|码率|20MHz数据速率|\n|:---:|:---:|:---:|:---:|:---:|\n|0|BPSK|1/2|7.2Mbps|\n|1|QPSK|1/2|14.4Mbps|\n|2|QPSK|3/4|21.7Mbps|\n|3|16-QAM|1/2|28.9Mbps|\n|4|16-QAM|3/4|43.3Mbps|\n|5|64-QAM|2/3|57.8Mbps|\n|6|64-QAM|3/4|65.0Mbps|\n|7|64-QAM|5/6|72.2Mbps|\n|8|256-QAM|3/4|86.7Mbps|\n|9|256-QAM|5/6|96.3Mbps|\n\n**802.11ac数据速率**\n802.11ac实现较高速率的措施：\n1.采用256-QAM\n2.空间流乘数\n3.信道宽度\n\n802.11ac最大速率 6933Mbps= 866.7 X 8 =  433.3 X 2 X 8 = 96.3Mbps X 4 X 2 X 8\n96.3Mbps是MCS9的基础速率。\n\n### HT/VHT保护机制\nHT 保护模式（0~3）\n模式0：绿地（无保护）模式：\n网络中只有HT无线接口，所有的HT客户端必须具备相同的操作功能。比如：基本服务集为20/40MHz基本服务集，则所有客户端必须支持20/40MHz通信。\n\n模式1：非成员保护模式：\n基本服务集种的所有终端必须是HT终端。如果HT接入点侦听到不属于基本服务集成员的非HT客户端或接入点，则触发保护机制。\n\n模式2：20MHz保护模式：\n基本服务集种的所有终端必须是关联到20/40MHz接入点的HT终端。如果仅支持20MHz通信的HT客户端关联到20/40MHz接入点，则必须启动保护机制。\n\n模式3：非HT混合模式：\n一个或多个非HT终端关联到HT接入点，将启用该模式。这也是最常见的保护模式。\n","slug":"CWNA-MIMO技术：高吞吐量与甚高吞吐量-三","published":1,"updated":"2022-02-22T10:07:44.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3p001a18jxa3pp69oc","content":"<h3 id=\"802-11n-ac-MAC体系结构\"><a href=\"#802-11n-ac-MAC体系结构\" class=\"headerlink\" title=\"802.11n/ac MAC体系结构\"></a>802.11n/ac MAC体系结构</h3><p>MIMO无线接口使用的所有物理层增强机制可以增加并提高吞吐量。<br>定义了两种帧聚合技术减少介质争用开销，并利用块确认机制减少固定的MAC开销。<br>定义了3种电源管理机制。</p>\n<p><strong>聚合MAC服务数据单元（A-MSDU）</strong><br>每次传输802.11单播帧时都会产生一定数量的固定开销，这些固定的开销包括物理层头部，MAC帧头，MAC帧尾，帧间间隔以及确认帧。<br>每个帧必须争夺介质的使用权，介质争用开销同样不可避免。</p>\n<p>为了减少开销，将多个帧聚合为一个帧进行传输。这样减少了固定的帧头帧尾开销，减少了介质争用开销。<br>第一种帧聚合：多个MSDU合并为一个A-MSDU, 外加 帧头和帧尾。</p>\n<p>A-MSDU中的所有MSDU必须属于同一802.11e Qos访问类别，使用相同的接收地址，采用同一种加密机制。</p>\n<p><strong>聚合MAC协议数据单元（A-MPDU）</strong><br>A-MPDU包括多个MPDU以及物理层头部。<br>构成A-MPDU的所有MPDU必须使用相同的接收机地址。与A-MSUD不同，每个MPDU的数据净荷是分别加密和解密的。<br>A-MPDU中的所有MPDU必须同属同一种802.11e Qos访问类别。</p>\n<p>由于A-MPDU中的MPDU都有自己的MAC帧头和帧尾，因此A-MPDU的开销大于A-MSDU。 A-MPDU能减少ACK帧的开销。如果某个MPDU损坏，只需重传损坏帧。</p>\n<p>A-MPDU采用块确认帧作为交付验证方法，而A-MSDU采用确认帧的交付验证方法。 A-MSDU损坏，必须全部重传。</p>\n<p>A-MPDU中可以包括多个A-MSDU.</p>\n<p><strong>块确认</strong><br>块确认帧用于确认A-MPDU的传输。<br>如果某个MPDU损坏，只需重传损坏帧。A-MPDU的效率高于A-MSDU，这就是802.11ac无线接口要求使用A-MPDU的主要原因。</p>\n<p><strong>电源管理机制</strong><br>802.11n定义的第一种电源管理机制是空间复用节电（SMPS），允许仅保留一个无线接口，关闭其他无线接口。</p>\n<p>定义的第二种电源管理机制是节电多轮询（PSMP），改进了自动节电传输（APSD）。</p>\n<p>定义的第三种电源管理机制是VHT TXOP节电。如果发现其他客户端享有发送机会，将在对方传输期间通过VHT TXOP节电机制关闭自己的无线接口。</p>\n<p><strong>调制编码方案</strong><br>802.11n通过调制编码方案（MCS）矩阵定义数据速率。<br>采用OFDM技术的非HT无线接口根据使用的调制和编码方法定义数据速率（6Mbps~54Mbps）<br>HT无线接口根据调制技术，编码技术，空间流数量，信道宽度，保护间隔等多种参数定义数据速率。调制编码方案是这些参数的不同组合。<br>802.11n为20MHz HT和40MHz HT信道定义了77种调制编码方案。20MHz HT信道必须支持的8种编码方案：</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">MCS指数</th>\n<th style=\"text-align:center\">调制方法</th>\n<th style=\"text-align:center\">空间流</th>\n<th style=\"text-align:center\">数据速率：800ns保护间隔</th>\n<th style=\"text-align:center\">数据速率：400ns保护间隔</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">BPSK</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">6.5Mbps</td>\n<td style=\"text-align:center\">7.2Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">QPSK</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">13.0Mbps</td>\n<td style=\"text-align:center\">14.4Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">QPSK</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">19.5Mbps</td>\n<td style=\"text-align:center\">21.7Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">16-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">26.0Mbps</td>\n<td style=\"text-align:center\">28.9Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">16-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">39.0Mbps</td>\n<td style=\"text-align:center\">43.3Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">52.0Mbps</td>\n<td style=\"text-align:center\">57.8Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">58.5Mbps</td>\n<td style=\"text-align:center\">65.0Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">65.0Mbps</td>\n<td style=\"text-align:center\">72.2Mbps</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>802.11ac将802.11n调制编码方案缩减为10种。</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">MCS指数</th>\n<th style=\"text-align:center\">调制方法</th>\n<th style=\"text-align:center\">码率</th>\n<th style=\"text-align:center\">20MHz数据速率</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">BPSK</td>\n<td style=\"text-align:center\">1/2</td>\n<td style=\"text-align:center\">7.2Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">QPSK</td>\n<td style=\"text-align:center\">1/2</td>\n<td style=\"text-align:center\">14.4Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">QPSK</td>\n<td style=\"text-align:center\">3/4</td>\n<td style=\"text-align:center\">21.7Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">16-QAM</td>\n<td style=\"text-align:center\">1/2</td>\n<td style=\"text-align:center\">28.9Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">16-QAM</td>\n<td style=\"text-align:center\">3/4</td>\n<td style=\"text-align:center\">43.3Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">2/3</td>\n<td style=\"text-align:center\">57.8Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">3/4</td>\n<td style=\"text-align:center\">65.0Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">5/6</td>\n<td style=\"text-align:center\">72.2Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">256-QAM</td>\n<td style=\"text-align:center\">3/4</td>\n<td style=\"text-align:center\">86.7Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">9</td>\n<td style=\"text-align:center\">256-QAM</td>\n<td style=\"text-align:center\">5/6</td>\n<td style=\"text-align:center\">96.3Mbps</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>802.11ac数据速率</strong><br>802.11ac实现较高速率的措施：<br>1.采用256-QAM<br>2.空间流乘数<br>3.信道宽度</p>\n<p>802.11ac最大速率 6933Mbps= 866.7 X 8 =  433.3 X 2 X 8 = 96.3Mbps X 4 X 2 X 8<br>96.3Mbps是MCS9的基础速率。</p>\n<h3 id=\"HT-VHT保护机制\"><a href=\"#HT-VHT保护机制\" class=\"headerlink\" title=\"HT/VHT保护机制\"></a>HT/VHT保护机制</h3><p>HT 保护模式（0~3）<br>模式0：绿地（无保护）模式：<br>网络中只有HT无线接口，所有的HT客户端必须具备相同的操作功能。比如：基本服务集为20/40MHz基本服务集，则所有客户端必须支持20/40MHz通信。</p>\n<p>模式1：非成员保护模式：<br>基本服务集种的所有终端必须是HT终端。如果HT接入点侦听到不属于基本服务集成员的非HT客户端或接入点，则触发保护机制。</p>\n<p>模式2：20MHz保护模式：<br>基本服务集种的所有终端必须是关联到20/40MHz接入点的HT终端。如果仅支持20MHz通信的HT客户端关联到20/40MHz接入点，则必须启动保护机制。</p>\n<p>模式3：非HT混合模式：<br>一个或多个非HT终端关联到HT接入点，将启用该模式。这也是最常见的保护模式。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"802-11n-ac-MAC体系结构\"><a href=\"#802-11n-ac-MAC体系结构\" class=\"headerlink\" title=\"802.11n/ac MAC体系结构\"></a>802.11n/ac MAC体系结构</h3><p>MIMO无线接口使用的所有物理层增强机制可以增加并提高吞吐量。<br>定义了两种帧聚合技术减少介质争用开销，并利用块确认机制减少固定的MAC开销。<br>定义了3种电源管理机制。</p>\n<p><strong>聚合MAC服务数据单元（A-MSDU）</strong><br>每次传输802.11单播帧时都会产生一定数量的固定开销，这些固定的开销包括物理层头部，MAC帧头，MAC帧尾，帧间间隔以及确认帧。<br>每个帧必须争夺介质的使用权，介质争用开销同样不可避免。</p>\n<p>为了减少开销，将多个帧聚合为一个帧进行传输。这样减少了固定的帧头帧尾开销，减少了介质争用开销。<br>第一种帧聚合：多个MSDU合并为一个A-MSDU, 外加 帧头和帧尾。</p>\n<p>A-MSDU中的所有MSDU必须属于同一802.11e Qos访问类别，使用相同的接收地址，采用同一种加密机制。</p>\n<p><strong>聚合MAC协议数据单元（A-MPDU）</strong><br>A-MPDU包括多个MPDU以及物理层头部。<br>构成A-MPDU的所有MPDU必须使用相同的接收机地址。与A-MSUD不同，每个MPDU的数据净荷是分别加密和解密的。<br>A-MPDU中的所有MPDU必须同属同一种802.11e Qos访问类别。</p>\n<p>由于A-MPDU中的MPDU都有自己的MAC帧头和帧尾，因此A-MPDU的开销大于A-MSDU。 A-MPDU能减少ACK帧的开销。如果某个MPDU损坏，只需重传损坏帧。</p>\n<p>A-MPDU采用块确认帧作为交付验证方法，而A-MSDU采用确认帧的交付验证方法。 A-MSDU损坏，必须全部重传。</p>\n<p>A-MPDU中可以包括多个A-MSDU.</p>\n<p><strong>块确认</strong><br>块确认帧用于确认A-MPDU的传输。<br>如果某个MPDU损坏，只需重传损坏帧。A-MPDU的效率高于A-MSDU，这就是802.11ac无线接口要求使用A-MPDU的主要原因。</p>\n<p><strong>电源管理机制</strong><br>802.11n定义的第一种电源管理机制是空间复用节电（SMPS），允许仅保留一个无线接口，关闭其他无线接口。</p>\n<p>定义的第二种电源管理机制是节电多轮询（PSMP），改进了自动节电传输（APSD）。</p>\n<p>定义的第三种电源管理机制是VHT TXOP节电。如果发现其他客户端享有发送机会，将在对方传输期间通过VHT TXOP节电机制关闭自己的无线接口。</p>\n<p><strong>调制编码方案</strong><br>802.11n通过调制编码方案（MCS）矩阵定义数据速率。<br>采用OFDM技术的非HT无线接口根据使用的调制和编码方法定义数据速率（6Mbps~54Mbps）<br>HT无线接口根据调制技术，编码技术，空间流数量，信道宽度，保护间隔等多种参数定义数据速率。调制编码方案是这些参数的不同组合。<br>802.11n为20MHz HT和40MHz HT信道定义了77种调制编码方案。20MHz HT信道必须支持的8种编码方案：</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">MCS指数</th>\n<th style=\"text-align:center\">调制方法</th>\n<th style=\"text-align:center\">空间流</th>\n<th style=\"text-align:center\">数据速率：800ns保护间隔</th>\n<th style=\"text-align:center\">数据速率：400ns保护间隔</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">BPSK</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">6.5Mbps</td>\n<td style=\"text-align:center\">7.2Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">QPSK</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">13.0Mbps</td>\n<td style=\"text-align:center\">14.4Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">QPSK</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">19.5Mbps</td>\n<td style=\"text-align:center\">21.7Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">16-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">26.0Mbps</td>\n<td style=\"text-align:center\">28.9Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">16-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">39.0Mbps</td>\n<td style=\"text-align:center\">43.3Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">52.0Mbps</td>\n<td style=\"text-align:center\">57.8Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">58.5Mbps</td>\n<td style=\"text-align:center\">65.0Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">1路空间流</td>\n<td style=\"text-align:center\">65.0Mbps</td>\n<td style=\"text-align:center\">72.2Mbps</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>802.11ac将802.11n调制编码方案缩减为10种。</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">MCS指数</th>\n<th style=\"text-align:center\">调制方法</th>\n<th style=\"text-align:center\">码率</th>\n<th style=\"text-align:center\">20MHz数据速率</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">BPSK</td>\n<td style=\"text-align:center\">1/2</td>\n<td style=\"text-align:center\">7.2Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">QPSK</td>\n<td style=\"text-align:center\">1/2</td>\n<td style=\"text-align:center\">14.4Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">QPSK</td>\n<td style=\"text-align:center\">3/4</td>\n<td style=\"text-align:center\">21.7Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">16-QAM</td>\n<td style=\"text-align:center\">1/2</td>\n<td style=\"text-align:center\">28.9Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">16-QAM</td>\n<td style=\"text-align:center\">3/4</td>\n<td style=\"text-align:center\">43.3Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">2/3</td>\n<td style=\"text-align:center\">57.8Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">3/4</td>\n<td style=\"text-align:center\">65.0Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7</td>\n<td style=\"text-align:center\">64-QAM</td>\n<td style=\"text-align:center\">5/6</td>\n<td style=\"text-align:center\">72.2Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">256-QAM</td>\n<td style=\"text-align:center\">3/4</td>\n<td style=\"text-align:center\">86.7Mbps</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">9</td>\n<td style=\"text-align:center\">256-QAM</td>\n<td style=\"text-align:center\">5/6</td>\n<td style=\"text-align:center\">96.3Mbps</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>802.11ac数据速率</strong><br>802.11ac实现较高速率的措施：<br>1.采用256-QAM<br>2.空间流乘数<br>3.信道宽度</p>\n<p>802.11ac最大速率 6933Mbps= 866.7 X 8 =  433.3 X 2 X 8 = 96.3Mbps X 4 X 2 X 8<br>96.3Mbps是MCS9的基础速率。</p>\n<h3 id=\"HT-VHT保护机制\"><a href=\"#HT-VHT保护机制\" class=\"headerlink\" title=\"HT/VHT保护机制\"></a>HT/VHT保护机制</h3><p>HT 保护模式（0~3）<br>模式0：绿地（无保护）模式：<br>网络中只有HT无线接口，所有的HT客户端必须具备相同的操作功能。比如：基本服务集为20/40MHz基本服务集，则所有客户端必须支持20/40MHz通信。</p>\n<p>模式1：非成员保护模式：<br>基本服务集种的所有终端必须是HT终端。如果HT接入点侦听到不属于基本服务集成员的非HT客户端或接入点，则触发保护机制。</p>\n<p>模式2：20MHz保护模式：<br>基本服务集种的所有终端必须是关联到20/40MHz接入点的HT终端。如果仅支持20MHz通信的HT客户端关联到20/40MHz接入点，则必须启动保护机制。</p>\n<p>模式3：非HT混合模式：<br>一个或多个非HT终端关联到HT接入点，将启用该模式。这也是最常见的保护模式。</p>\n"},{"title":"CWNA:MIMO技术：高吞吐量与甚高吞吐量(二)","date":"2022-02-22T01:45:54.000Z","_content":"### 信道\n\n**20MHz 信道**\n802.11 a/g无线接口使用20MHz OFDM信道。由64个副载波构成，其中48个传输数据，4个作为导频载波用于发射机和接收机之间动态校准，其他12个没有使用。\n802.11 n HT 和802.11ac VHT无线接口同样采用OFDM技术，但增加了4个副载波传输数据，更有效的利用了频谱。\n\n**40MHz信道**\n802.11n HT 和 802.11ac VHT 无线接口也可以使用40MHz OFDM信道。每条40MHz信道由128个副载波构成，其中108个副载波传输数据，6个副载波作为导频波，\n用于发射机和接收机之间动态校准，其他副载波没有使用。\n\n40MHz信道实际上是由两个相邻20MHz信道绑定构成。它分为主信道和辅信道。\n\n2.4GHz频段只有一条40MHz信道可供使用，根本无法规划信道复用模式。\n\n**40MHz不兼容**\n用于防止2.4GHz频段使用到40MHz信道干扰到2.4GHz 20MHz信道。\n\n**80MHz与160MHz信道**\n80MHz是由4条20MHz信道绑定而成。\n160MHz是由2条80MHz信道绑定而成，两条80MHz信道不必相邻。如果相邻，则构成160MHz信道，如果不相邻，则构成80+80MHz信道。\n他们能提供更高的吞吐量。\n\n### 保护间隔\n信号沿着不同路径传输导致到达接收机的时间不同，引起符号间干扰。保护间隔用于补偿时延扩展和避免符号间干扰。\n\nHT/VHT技术引入400ns的保护间隔，称为短保护间隔。信号好的情况下，使用400ns的短保护间隔比使用800ns的保护间隔，数据速率可以提供10%左右。\n\n### 256-QAM\n随着时间的推移，802.11物理层技术不断发展出更新、更快的调制方法。每一种更新、更快的物理层都会定义能编码更多比特的调制方法，网络的速度和性能随之提高。\n但是，早期较慢的传输和调制方法并未因新技术的出现而弃之不用。\n当客户端远离接入点且信号电平下降时，将通过动态速率切换技术转换到较低的数据速率，以保持连接不会中断。\n\n无线局域网主要的调制方法：\n> DBPSK （差分二进制相移键控）\n> DQPSK\n> BPSK\n> QPSK   （正交相移键控）\n> 16-QAM\n> 64-QAM\n> 256-QAM （256-正交调幅）\n\n256-QAM 通过16种不同级别的相移和16种不同级别的幅移传输编码。\n\n相较于64-QAM，802.11ac接收机需要大约5dB的额外增益以保证性能。\n\n调制方式越高级，吞吐量越高，但是对环境的要求也越苛刻。\n","source":"_posts/CWNA-MIMO技术：高吞吐量与甚高吞吐量-二.md","raw":"---\ntitle: 'CWNA:MIMO技术：高吞吐量与甚高吞吐量(二)'\ndate: 2022-02-22 09:45:54\ntags: 'Wi-Fi'\n---\n### 信道\n\n**20MHz 信道**\n802.11 a/g无线接口使用20MHz OFDM信道。由64个副载波构成，其中48个传输数据，4个作为导频载波用于发射机和接收机之间动态校准，其他12个没有使用。\n802.11 n HT 和802.11ac VHT无线接口同样采用OFDM技术，但增加了4个副载波传输数据，更有效的利用了频谱。\n\n**40MHz信道**\n802.11n HT 和 802.11ac VHT 无线接口也可以使用40MHz OFDM信道。每条40MHz信道由128个副载波构成，其中108个副载波传输数据，6个副载波作为导频波，\n用于发射机和接收机之间动态校准，其他副载波没有使用。\n\n40MHz信道实际上是由两个相邻20MHz信道绑定构成。它分为主信道和辅信道。\n\n2.4GHz频段只有一条40MHz信道可供使用，根本无法规划信道复用模式。\n\n**40MHz不兼容**\n用于防止2.4GHz频段使用到40MHz信道干扰到2.4GHz 20MHz信道。\n\n**80MHz与160MHz信道**\n80MHz是由4条20MHz信道绑定而成。\n160MHz是由2条80MHz信道绑定而成，两条80MHz信道不必相邻。如果相邻，则构成160MHz信道，如果不相邻，则构成80+80MHz信道。\n他们能提供更高的吞吐量。\n\n### 保护间隔\n信号沿着不同路径传输导致到达接收机的时间不同，引起符号间干扰。保护间隔用于补偿时延扩展和避免符号间干扰。\n\nHT/VHT技术引入400ns的保护间隔，称为短保护间隔。信号好的情况下，使用400ns的短保护间隔比使用800ns的保护间隔，数据速率可以提供10%左右。\n\n### 256-QAM\n随着时间的推移，802.11物理层技术不断发展出更新、更快的调制方法。每一种更新、更快的物理层都会定义能编码更多比特的调制方法，网络的速度和性能随之提高。\n但是，早期较慢的传输和调制方法并未因新技术的出现而弃之不用。\n当客户端远离接入点且信号电平下降时，将通过动态速率切换技术转换到较低的数据速率，以保持连接不会中断。\n\n无线局域网主要的调制方法：\n> DBPSK （差分二进制相移键控）\n> DQPSK\n> BPSK\n> QPSK   （正交相移键控）\n> 16-QAM\n> 64-QAM\n> 256-QAM （256-正交调幅）\n\n256-QAM 通过16种不同级别的相移和16种不同级别的幅移传输编码。\n\n相较于64-QAM，802.11ac接收机需要大约5dB的额外增益以保证性能。\n\n调制方式越高级，吞吐量越高，但是对环境的要求也越苛刻。\n","slug":"CWNA-MIMO技术：高吞吐量与甚高吞吐量-二","published":1,"updated":"2022-02-22T08:18:09.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3p001c18jx6s9b7bud","content":"<h3 id=\"信道\"><a href=\"#信道\" class=\"headerlink\" title=\"信道\"></a>信道</h3><p><strong>20MHz 信道</strong><br>802.11 a/g无线接口使用20MHz OFDM信道。由64个副载波构成，其中48个传输数据，4个作为导频载波用于发射机和接收机之间动态校准，其他12个没有使用。<br>802.11 n HT 和802.11ac VHT无线接口同样采用OFDM技术，但增加了4个副载波传输数据，更有效的利用了频谱。</p>\n<p><strong>40MHz信道</strong><br>802.11n HT 和 802.11ac VHT 无线接口也可以使用40MHz OFDM信道。每条40MHz信道由128个副载波构成，其中108个副载波传输数据，6个副载波作为导频波，<br>用于发射机和接收机之间动态校准，其他副载波没有使用。</p>\n<p>40MHz信道实际上是由两个相邻20MHz信道绑定构成。它分为主信道和辅信道。</p>\n<p>2.4GHz频段只有一条40MHz信道可供使用，根本无法规划信道复用模式。</p>\n<p><strong>40MHz不兼容</strong><br>用于防止2.4GHz频段使用到40MHz信道干扰到2.4GHz 20MHz信道。</p>\n<p><strong>80MHz与160MHz信道</strong><br>80MHz是由4条20MHz信道绑定而成。<br>160MHz是由2条80MHz信道绑定而成，两条80MHz信道不必相邻。如果相邻，则构成160MHz信道，如果不相邻，则构成80+80MHz信道。<br>他们能提供更高的吞吐量。</p>\n<h3 id=\"保护间隔\"><a href=\"#保护间隔\" class=\"headerlink\" title=\"保护间隔\"></a>保护间隔</h3><p>信号沿着不同路径传输导致到达接收机的时间不同，引起符号间干扰。保护间隔用于补偿时延扩展和避免符号间干扰。</p>\n<p>HT/VHT技术引入400ns的保护间隔，称为短保护间隔。信号好的情况下，使用400ns的短保护间隔比使用800ns的保护间隔，数据速率可以提供10%左右。</p>\n<h3 id=\"256-QAM\"><a href=\"#256-QAM\" class=\"headerlink\" title=\"256-QAM\"></a>256-QAM</h3><p>随着时间的推移，802.11物理层技术不断发展出更新、更快的调制方法。每一种更新、更快的物理层都会定义能编码更多比特的调制方法，网络的速度和性能随之提高。<br>但是，早期较慢的传输和调制方法并未因新技术的出现而弃之不用。<br>当客户端远离接入点且信号电平下降时，将通过动态速率切换技术转换到较低的数据速率，以保持连接不会中断。</p>\n<p>无线局域网主要的调制方法：</p>\n<blockquote>\n<p>DBPSK （差分二进制相移键控）<br>DQPSK<br>BPSK<br>QPSK   （正交相移键控）<br>16-QAM<br>64-QAM<br>256-QAM （256-正交调幅）</p>\n</blockquote>\n<p>256-QAM 通过16种不同级别的相移和16种不同级别的幅移传输编码。</p>\n<p>相较于64-QAM，802.11ac接收机需要大约5dB的额外增益以保证性能。</p>\n<p>调制方式越高级，吞吐量越高，但是对环境的要求也越苛刻。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"信道\"><a href=\"#信道\" class=\"headerlink\" title=\"信道\"></a>信道</h3><p><strong>20MHz 信道</strong><br>802.11 a/g无线接口使用20MHz OFDM信道。由64个副载波构成，其中48个传输数据，4个作为导频载波用于发射机和接收机之间动态校准，其他12个没有使用。<br>802.11 n HT 和802.11ac VHT无线接口同样采用OFDM技术，但增加了4个副载波传输数据，更有效的利用了频谱。</p>\n<p><strong>40MHz信道</strong><br>802.11n HT 和 802.11ac VHT 无线接口也可以使用40MHz OFDM信道。每条40MHz信道由128个副载波构成，其中108个副载波传输数据，6个副载波作为导频波，<br>用于发射机和接收机之间动态校准，其他副载波没有使用。</p>\n<p>40MHz信道实际上是由两个相邻20MHz信道绑定构成。它分为主信道和辅信道。</p>\n<p>2.4GHz频段只有一条40MHz信道可供使用，根本无法规划信道复用模式。</p>\n<p><strong>40MHz不兼容</strong><br>用于防止2.4GHz频段使用到40MHz信道干扰到2.4GHz 20MHz信道。</p>\n<p><strong>80MHz与160MHz信道</strong><br>80MHz是由4条20MHz信道绑定而成。<br>160MHz是由2条80MHz信道绑定而成，两条80MHz信道不必相邻。如果相邻，则构成160MHz信道，如果不相邻，则构成80+80MHz信道。<br>他们能提供更高的吞吐量。</p>\n<h3 id=\"保护间隔\"><a href=\"#保护间隔\" class=\"headerlink\" title=\"保护间隔\"></a>保护间隔</h3><p>信号沿着不同路径传输导致到达接收机的时间不同，引起符号间干扰。保护间隔用于补偿时延扩展和避免符号间干扰。</p>\n<p>HT/VHT技术引入400ns的保护间隔，称为短保护间隔。信号好的情况下，使用400ns的短保护间隔比使用800ns的保护间隔，数据速率可以提供10%左右。</p>\n<h3 id=\"256-QAM\"><a href=\"#256-QAM\" class=\"headerlink\" title=\"256-QAM\"></a>256-QAM</h3><p>随着时间的推移，802.11物理层技术不断发展出更新、更快的调制方法。每一种更新、更快的物理层都会定义能编码更多比特的调制方法，网络的速度和性能随之提高。<br>但是，早期较慢的传输和调制方法并未因新技术的出现而弃之不用。<br>当客户端远离接入点且信号电平下降时，将通过动态速率切换技术转换到较低的数据速率，以保持连接不会中断。</p>\n<p>无线局域网主要的调制方法：</p>\n<blockquote>\n<p>DBPSK （差分二进制相移键控）<br>DQPSK<br>BPSK<br>QPSK   （正交相移键控）<br>16-QAM<br>64-QAM<br>256-QAM （256-正交调幅）</p>\n</blockquote>\n<p>256-QAM 通过16种不同级别的相移和16种不同级别的幅移传输编码。</p>\n<p>相较于64-QAM，802.11ac接收机需要大约5dB的额外增益以保证性能。</p>\n<p>调制方式越高级，吞吐量越高，但是对环境的要求也越苛刻。</p>\n"},{"title":"CWNA:MIMO技术：高吞吐量与甚高吞吐量","date":"2022-02-21T06:37:08.000Z","_content":"多输入多输出\n> 射频链\n> 空间复用\n> MIMO分集\n> 空时分组编码\n> 循环移位分集\n> 发射波束成形\n> 802.11ac显示波束成形\n\n多用户-多输入多输出\n> 多用户波束成形\n\n信道\n> 20MHz信道\n> 40MHz信道\n> 40MHz不兼容\n> 80MHz与160MHz信道\n\n保护间隔\n256-QAM\n802.11n/ac PPDU\n> 非HT PPDU\n> HT混合PPDU\n> VHT PPDU\n\n802.11n/ac MAC体系结构\n> 聚合MAC服务数据单元\n> 聚合MAC协议数据单元\n> 块确认\n> 电源管理机制\n> 调制编码方案\n> 802.11ac数据速率\n\nHT/VHT保护机制\n> HT保护模式（0~3）\n\nWi-Fi联盟认证项目\n\n802.11n首先定义的HT和802.11ac定义的VHT技术致力于改进物理层和MAC子层，以提高数据速率。\n\n### 多输入多输出（MIMO）\n多输入多输出（MIMO）技术是802.11n和802.11ac修正案中物理层增强机制的核心所在。\n\nMIMO可以利用多径提高系统性能。\n\n**射频链**\n2X3 MIMO系统，由3条射频链构成，包括2台发射机和3台接收机；\n3X3 MIMO系统，由3条射频链构成，包括3台发射机和3台接收机；\n\n802.11n最多支持4条射频链；\n802.11ac接入点最多支持8条射频链；\n\n**空间复用**\nMIMO接口可以传输多个信号，每路独立的数据流称为空间流，不同射频链发送的空间流包含不同的数据。\n利用空间不同路径发送多路数据流称为空间分集。它能够显著提高吞吐量。\n\n3X3:2 MIMO系统，3台发射机3台接收机，仅传输2路唯一的数据流\n3X3:3 MIMO系统，3台发射机3台接收机，可以传输3路唯一的数据流。\n\n**发射波束成形**\n多幅天线以协调一致的方式调整发射信号的相位和振幅，使得接收机接收到同相信号，提供更好的信号质量。\n\n\n### 多用户-多输入多输出（MU-MIMO）\n802.11ac技术出现之前，802.11接入点每次只能与一台设备进行通信，即接入点传输数据的目标被限制为一台客户设备。\n802.11ac使用MU-MIMO技术的802.11ac接入点可以最多4台设备同时交换数据。仅支持下行MU\n\n4X4:4:3:3\nSU-MIMO模式的802.11ac接入点可以向一个SU-MIMO客户端传输最多4路空间流，但最多只能向3个MU-MIMO客户端传输3路空间流，每个客户端接收一路空间流。\n\n**多用户波束成形**\n这种技术效果有限。\n\n","source":"_posts/CWNA-MIMO技术：高吞吐量与甚高吞吐量.md","raw":"---\ntitle: 'CWNA:MIMO技术：高吞吐量与甚高吞吐量'\ndate: 2022-02-21 14:37:08\ntags: 'Wi-Fi'\n---\n多输入多输出\n> 射频链\n> 空间复用\n> MIMO分集\n> 空时分组编码\n> 循环移位分集\n> 发射波束成形\n> 802.11ac显示波束成形\n\n多用户-多输入多输出\n> 多用户波束成形\n\n信道\n> 20MHz信道\n> 40MHz信道\n> 40MHz不兼容\n> 80MHz与160MHz信道\n\n保护间隔\n256-QAM\n802.11n/ac PPDU\n> 非HT PPDU\n> HT混合PPDU\n> VHT PPDU\n\n802.11n/ac MAC体系结构\n> 聚合MAC服务数据单元\n> 聚合MAC协议数据单元\n> 块确认\n> 电源管理机制\n> 调制编码方案\n> 802.11ac数据速率\n\nHT/VHT保护机制\n> HT保护模式（0~3）\n\nWi-Fi联盟认证项目\n\n802.11n首先定义的HT和802.11ac定义的VHT技术致力于改进物理层和MAC子层，以提高数据速率。\n\n### 多输入多输出（MIMO）\n多输入多输出（MIMO）技术是802.11n和802.11ac修正案中物理层增强机制的核心所在。\n\nMIMO可以利用多径提高系统性能。\n\n**射频链**\n2X3 MIMO系统，由3条射频链构成，包括2台发射机和3台接收机；\n3X3 MIMO系统，由3条射频链构成，包括3台发射机和3台接收机；\n\n802.11n最多支持4条射频链；\n802.11ac接入点最多支持8条射频链；\n\n**空间复用**\nMIMO接口可以传输多个信号，每路独立的数据流称为空间流，不同射频链发送的空间流包含不同的数据。\n利用空间不同路径发送多路数据流称为空间分集。它能够显著提高吞吐量。\n\n3X3:2 MIMO系统，3台发射机3台接收机，仅传输2路唯一的数据流\n3X3:3 MIMO系统，3台发射机3台接收机，可以传输3路唯一的数据流。\n\n**发射波束成形**\n多幅天线以协调一致的方式调整发射信号的相位和振幅，使得接收机接收到同相信号，提供更好的信号质量。\n\n\n### 多用户-多输入多输出（MU-MIMO）\n802.11ac技术出现之前，802.11接入点每次只能与一台设备进行通信，即接入点传输数据的目标被限制为一台客户设备。\n802.11ac使用MU-MIMO技术的802.11ac接入点可以最多4台设备同时交换数据。仅支持下行MU\n\n4X4:4:3:3\nSU-MIMO模式的802.11ac接入点可以向一个SU-MIMO客户端传输最多4路空间流，但最多只能向3个MU-MIMO客户端传输3路空间流，每个客户端接收一路空间流。\n\n**多用户波束成形**\n这种技术效果有限。\n\n","slug":"CWNA-MIMO技术：高吞吐量与甚高吞吐量","published":1,"updated":"2022-02-21T09:21:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3q001e18jxc8dp7otf","content":"<p>多输入多输出</p>\n<blockquote>\n<p>射频链<br>空间复用<br>MIMO分集<br>空时分组编码<br>循环移位分集<br>发射波束成形<br>802.11ac显示波束成形</p>\n</blockquote>\n<p>多用户-多输入多输出</p>\n<blockquote>\n<p>多用户波束成形</p>\n</blockquote>\n<p>信道</p>\n<blockquote>\n<p>20MHz信道<br>40MHz信道<br>40MHz不兼容<br>80MHz与160MHz信道</p>\n</blockquote>\n<p>保护间隔<br>256-QAM<br>802.11n/ac PPDU</p>\n<blockquote>\n<p>非HT PPDU<br>HT混合PPDU<br>VHT PPDU</p>\n</blockquote>\n<p>802.11n/ac MAC体系结构</p>\n<blockquote>\n<p>聚合MAC服务数据单元<br>聚合MAC协议数据单元<br>块确认<br>电源管理机制<br>调制编码方案<br>802.11ac数据速率</p>\n</blockquote>\n<p>HT/VHT保护机制</p>\n<blockquote>\n<p>HT保护模式（0~3）</p>\n</blockquote>\n<p>Wi-Fi联盟认证项目</p>\n<p>802.11n首先定义的HT和802.11ac定义的VHT技术致力于改进物理层和MAC子层，以提高数据速率。</p>\n<h3 id=\"多输入多输出（MIMO）\"><a href=\"#多输入多输出（MIMO）\" class=\"headerlink\" title=\"多输入多输出（MIMO）\"></a>多输入多输出（MIMO）</h3><p>多输入多输出（MIMO）技术是802.11n和802.11ac修正案中物理层增强机制的核心所在。</p>\n<p>MIMO可以利用多径提高系统性能。</p>\n<p><strong>射频链</strong><br>2X3 MIMO系统，由3条射频链构成，包括2台发射机和3台接收机；<br>3X3 MIMO系统，由3条射频链构成，包括3台发射机和3台接收机；</p>\n<p>802.11n最多支持4条射频链；<br>802.11ac接入点最多支持8条射频链；</p>\n<p><strong>空间复用</strong><br>MIMO接口可以传输多个信号，每路独立的数据流称为空间流，不同射频链发送的空间流包含不同的数据。<br>利用空间不同路径发送多路数据流称为空间分集。它能够显著提高吞吐量。</p>\n<p>3X3:2 MIMO系统，3台发射机3台接收机，仅传输2路唯一的数据流<br>3X3:3 MIMO系统，3台发射机3台接收机，可以传输3路唯一的数据流。</p>\n<p><strong>发射波束成形</strong><br>多幅天线以协调一致的方式调整发射信号的相位和振幅，使得接收机接收到同相信号，提供更好的信号质量。</p>\n<h3 id=\"多用户-多输入多输出（MU-MIMO）\"><a href=\"#多用户-多输入多输出（MU-MIMO）\" class=\"headerlink\" title=\"多用户-多输入多输出（MU-MIMO）\"></a>多用户-多输入多输出（MU-MIMO）</h3><p>802.11ac技术出现之前，802.11接入点每次只能与一台设备进行通信，即接入点传输数据的目标被限制为一台客户设备。<br>802.11ac使用MU-MIMO技术的802.11ac接入点可以最多4台设备同时交换数据。仅支持下行MU</p>\n<p>4X4:4:3:3<br>SU-MIMO模式的802.11ac接入点可以向一个SU-MIMO客户端传输最多4路空间流，但最多只能向3个MU-MIMO客户端传输3路空间流，每个客户端接收一路空间流。</p>\n<p><strong>多用户波束成形</strong><br>这种技术效果有限。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>多输入多输出</p>\n<blockquote>\n<p>射频链<br>空间复用<br>MIMO分集<br>空时分组编码<br>循环移位分集<br>发射波束成形<br>802.11ac显示波束成形</p>\n</blockquote>\n<p>多用户-多输入多输出</p>\n<blockquote>\n<p>多用户波束成形</p>\n</blockquote>\n<p>信道</p>\n<blockquote>\n<p>20MHz信道<br>40MHz信道<br>40MHz不兼容<br>80MHz与160MHz信道</p>\n</blockquote>\n<p>保护间隔<br>256-QAM<br>802.11n/ac PPDU</p>\n<blockquote>\n<p>非HT PPDU<br>HT混合PPDU<br>VHT PPDU</p>\n</blockquote>\n<p>802.11n/ac MAC体系结构</p>\n<blockquote>\n<p>聚合MAC服务数据单元<br>聚合MAC协议数据单元<br>块确认<br>电源管理机制<br>调制编码方案<br>802.11ac数据速率</p>\n</blockquote>\n<p>HT/VHT保护机制</p>\n<blockquote>\n<p>HT保护模式（0~3）</p>\n</blockquote>\n<p>Wi-Fi联盟认证项目</p>\n<p>802.11n首先定义的HT和802.11ac定义的VHT技术致力于改进物理层和MAC子层，以提高数据速率。</p>\n<h3 id=\"多输入多输出（MIMO）\"><a href=\"#多输入多输出（MIMO）\" class=\"headerlink\" title=\"多输入多输出（MIMO）\"></a>多输入多输出（MIMO）</h3><p>多输入多输出（MIMO）技术是802.11n和802.11ac修正案中物理层增强机制的核心所在。</p>\n<p>MIMO可以利用多径提高系统性能。</p>\n<p><strong>射频链</strong><br>2X3 MIMO系统，由3条射频链构成，包括2台发射机和3台接收机；<br>3X3 MIMO系统，由3条射频链构成，包括3台发射机和3台接收机；</p>\n<p>802.11n最多支持4条射频链；<br>802.11ac接入点最多支持8条射频链；</p>\n<p><strong>空间复用</strong><br>MIMO接口可以传输多个信号，每路独立的数据流称为空间流，不同射频链发送的空间流包含不同的数据。<br>利用空间不同路径发送多路数据流称为空间分集。它能够显著提高吞吐量。</p>\n<p>3X3:2 MIMO系统，3台发射机3台接收机，仅传输2路唯一的数据流<br>3X3:3 MIMO系统，3台发射机3台接收机，可以传输3路唯一的数据流。</p>\n<p><strong>发射波束成形</strong><br>多幅天线以协调一致的方式调整发射信号的相位和振幅，使得接收机接收到同相信号，提供更好的信号质量。</p>\n<h3 id=\"多用户-多输入多输出（MU-MIMO）\"><a href=\"#多用户-多输入多输出（MU-MIMO）\" class=\"headerlink\" title=\"多用户-多输入多输出（MU-MIMO）\"></a>多用户-多输入多输出（MU-MIMO）</h3><p>802.11ac技术出现之前，802.11接入点每次只能与一台设备进行通信，即接入点传输数据的目标被限制为一台客户设备。<br>802.11ac使用MU-MIMO技术的802.11ac接入点可以最多4台设备同时交换数据。仅支持下行MU</p>\n<p>4X4:4:3:3<br>SU-MIMO模式的802.11ac接入点可以向一个SU-MIMO客户端传输最多4路空间流，但最多只能向3个MU-MIMO客户端传输3路空间流，每个客户端接收一路空间流。</p>\n<p><strong>多用户波束成形</strong><br>这种技术效果有限。</p>\n"},{"title":"CWNA:射频信号与天线概念","date":"2022-01-14T08:47:44.000Z","_content":"\n方位图与立面图(天线辐射包络)\n理解极坐标图\n波束宽度\n天线类型\n> 全向天线\n> 半定向天线\n> 强方向性天线\n> 扇形天线\n> 天线阵\n\n可视视距\n射频视距\n菲涅尔区\n地球曲率\n天线极化\n天线分集\n多输入多输出\nMIMO天线\n> 室内MIMO天线\n> 室外MIMO天线\n\n天线的连接与安装\n> 电压驻波比\n> 信号损失\n> 天线的安装\n\n天线附件\n> 电缆\n> 连接器\n> 分路器\n> 放大器\n> 衰减器\n> 避雷器\n> 接地棒与接地线\n\n法规遵从性\n\n\n——————————————\n\n天线的安装是决定通信能否成功进行的首要因素。在无线网络中成功规划和安装天线是一项孰能生巧且有所收获的工作。\n\n\n### 方位图与立面图\n有两种天线辐射方向图：方位图，立面图。\n方位图=H平面=自顶向下视图；\n立面图=E平面=侧视图；\n\n### 波束宽度\n从天线信号的中心或最强点开始，沿横轴和纵轴测量每一个信号功率减半的点(-3dB)。这个半功率点的界面可以称为波束宽度。\n射频信号的大部分能量都集中在天线的波束宽度之内，波束宽度以内的部分称为天线的主瓣，波束宽度以外的称为旁瓣或后瓣。\n\n天线的波束宽度\n\n|天线类型|水平波束宽度|垂直波束宽度|\n|:----------:|:------:|:------:|\n|全向天线|360度|7~80度|\n|贴片天线|30~180度|6~90度|\n|八木天线|30~78度|14~64度|\n|扇形天线|60~180度|7~17度|\n|抛物面天线|4~25度|4~21度|\n\n\n### 天线类型\n全向天线： 类似于台灯灯光的辐射方式，所有方向提供水平覆盖。多用于市内安装。\n半定向天线：类似于壁灯的辐射方式，提供区域覆盖。多用于中短距离通信。\n强方向性天线：类似于聚光灯。用于远距离通信。\n\n天线阵列：由两幅或多幅天线构成的一组天线。天线阵列可以实现波束成形(beamforming)。\n波束成形是集中射频能量的一种技术，信号能量的集中，意味着功率增加，接收机的信噪比随之提高，从而提供更好的传输质量。\n几种波束成形技术：\n> 静态波束成形\n> 动态波束成形\n> 发射波束成形\n\n**静态波束成形**\n利用定向天线提供固定的辐射方向图。\n\n**动态波束成形**\n将射频能量集中于特定方向和特定形状。\n能够实现辐射方向逐帧改变，从而为每台终端提供最佳功率和信号质量。\n\n**发射波束成形**\n通过传输多个相移信号，使得这些信号能同时到达发射机认为接收机所处的位置。\n802.11ac 定义了两种发射波束成形：\n> 隐式发射波束成形：采用隐式信道探测过程优化传输链之间的相位差。\n> 显式发射波束成形：通过终端的反馈来确定每个信号所需的相移量。\n\n### 可视视距\n光从一点传播到另一点时，其传播路径理论上是一条畅通无阻的致谢， 称为可视视距。\n### 射频视距\n可视视距+菲涅尔区，菲涅尔区是一块虚构的细长椭球体区域，环绕在两幅点对点天线的可视视距路径周围。\n\n### 地球曲率\n一般来说，点对点距离超过11.3km,就应该考虑地球曲率的影响。\n\n### 天线极化\n天线向外发射电磁波时，电波振幅即可以是水平的，也可以是垂直的，但两幅天线需要保持一致的极化方向，以获取最佳信号质量。\n\n### 天线分集\n接入点使用两幅或多幅天线，并于接收机共同工作，以最大限度减小多径的不利影响。\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/CWNA-射频信号与天线概念.md","raw":"---\ntitle: 'CWNA:射频信号与天线概念'\ndate: 2022-01-14 16:47:44\ntags: 'Wi-Fi'\n---\n\n方位图与立面图(天线辐射包络)\n理解极坐标图\n波束宽度\n天线类型\n> 全向天线\n> 半定向天线\n> 强方向性天线\n> 扇形天线\n> 天线阵\n\n可视视距\n射频视距\n菲涅尔区\n地球曲率\n天线极化\n天线分集\n多输入多输出\nMIMO天线\n> 室内MIMO天线\n> 室外MIMO天线\n\n天线的连接与安装\n> 电压驻波比\n> 信号损失\n> 天线的安装\n\n天线附件\n> 电缆\n> 连接器\n> 分路器\n> 放大器\n> 衰减器\n> 避雷器\n> 接地棒与接地线\n\n法规遵从性\n\n\n——————————————\n\n天线的安装是决定通信能否成功进行的首要因素。在无线网络中成功规划和安装天线是一项孰能生巧且有所收获的工作。\n\n\n### 方位图与立面图\n有两种天线辐射方向图：方位图，立面图。\n方位图=H平面=自顶向下视图；\n立面图=E平面=侧视图；\n\n### 波束宽度\n从天线信号的中心或最强点开始，沿横轴和纵轴测量每一个信号功率减半的点(-3dB)。这个半功率点的界面可以称为波束宽度。\n射频信号的大部分能量都集中在天线的波束宽度之内，波束宽度以内的部分称为天线的主瓣，波束宽度以外的称为旁瓣或后瓣。\n\n天线的波束宽度\n\n|天线类型|水平波束宽度|垂直波束宽度|\n|:----------:|:------:|:------:|\n|全向天线|360度|7~80度|\n|贴片天线|30~180度|6~90度|\n|八木天线|30~78度|14~64度|\n|扇形天线|60~180度|7~17度|\n|抛物面天线|4~25度|4~21度|\n\n\n### 天线类型\n全向天线： 类似于台灯灯光的辐射方式，所有方向提供水平覆盖。多用于市内安装。\n半定向天线：类似于壁灯的辐射方式，提供区域覆盖。多用于中短距离通信。\n强方向性天线：类似于聚光灯。用于远距离通信。\n\n天线阵列：由两幅或多幅天线构成的一组天线。天线阵列可以实现波束成形(beamforming)。\n波束成形是集中射频能量的一种技术，信号能量的集中，意味着功率增加，接收机的信噪比随之提高，从而提供更好的传输质量。\n几种波束成形技术：\n> 静态波束成形\n> 动态波束成形\n> 发射波束成形\n\n**静态波束成形**\n利用定向天线提供固定的辐射方向图。\n\n**动态波束成形**\n将射频能量集中于特定方向和特定形状。\n能够实现辐射方向逐帧改变，从而为每台终端提供最佳功率和信号质量。\n\n**发射波束成形**\n通过传输多个相移信号，使得这些信号能同时到达发射机认为接收机所处的位置。\n802.11ac 定义了两种发射波束成形：\n> 隐式发射波束成形：采用隐式信道探测过程优化传输链之间的相位差。\n> 显式发射波束成形：通过终端的反馈来确定每个信号所需的相移量。\n\n### 可视视距\n光从一点传播到另一点时，其传播路径理论上是一条畅通无阻的致谢， 称为可视视距。\n### 射频视距\n可视视距+菲涅尔区，菲涅尔区是一块虚构的细长椭球体区域，环绕在两幅点对点天线的可视视距路径周围。\n\n### 地球曲率\n一般来说，点对点距离超过11.3km,就应该考虑地球曲率的影响。\n\n### 天线极化\n天线向外发射电磁波时，电波振幅即可以是水平的，也可以是垂直的，但两幅天线需要保持一致的极化方向，以获取最佳信号质量。\n\n### 天线分集\n接入点使用两幅或多幅天线，并于接收机共同工作，以最大限度减小多径的不利影响。\n\n\n\n\n\n\n\n\n\n\n\n","slug":"CWNA-射频信号与天线概念","published":1,"updated":"2022-01-17T08:34:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3r001g18jx5app0elw","content":"<p>方位图与立面图(天线辐射包络)<br>理解极坐标图<br>波束宽度<br>天线类型</p>\n<blockquote>\n<p>全向天线<br>半定向天线<br>强方向性天线<br>扇形天线<br>天线阵</p>\n</blockquote>\n<p>可视视距<br>射频视距<br>菲涅尔区<br>地球曲率<br>天线极化<br>天线分集<br>多输入多输出<br>MIMO天线</p>\n<blockquote>\n<p>室内MIMO天线<br>室外MIMO天线</p>\n</blockquote>\n<p>天线的连接与安装</p>\n<blockquote>\n<p>电压驻波比<br>信号损失<br>天线的安装</p>\n</blockquote>\n<p>天线附件</p>\n<blockquote>\n<p>电缆<br>连接器<br>分路器<br>放大器<br>衰减器<br>避雷器<br>接地棒与接地线</p>\n</blockquote>\n<p>法规遵从性</p>\n<p>——————————————</p>\n<p>天线的安装是决定通信能否成功进行的首要因素。在无线网络中成功规划和安装天线是一项孰能生巧且有所收获的工作。</p>\n<h3 id=\"方位图与立面图\"><a href=\"#方位图与立面图\" class=\"headerlink\" title=\"方位图与立面图\"></a>方位图与立面图</h3><p>有两种天线辐射方向图：方位图，立面图。<br>方位图=H平面=自顶向下视图；<br>立面图=E平面=侧视图；</p>\n<h3 id=\"波束宽度\"><a href=\"#波束宽度\" class=\"headerlink\" title=\"波束宽度\"></a>波束宽度</h3><p>从天线信号的中心或最强点开始，沿横轴和纵轴测量每一个信号功率减半的点(-3dB)。这个半功率点的界面可以称为波束宽度。<br>射频信号的大部分能量都集中在天线的波束宽度之内，波束宽度以内的部分称为天线的主瓣，波束宽度以外的称为旁瓣或后瓣。</p>\n<p>天线的波束宽度</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">天线类型</th>\n<th style=\"text-align:center\">水平波束宽度</th>\n<th style=\"text-align:center\">垂直波束宽度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">全向天线</td>\n<td style=\"text-align:center\">360度</td>\n<td style=\"text-align:center\">7~80度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">贴片天线</td>\n<td style=\"text-align:center\">30~180度</td>\n<td style=\"text-align:center\">6~90度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">八木天线</td>\n<td style=\"text-align:center\">30~78度</td>\n<td style=\"text-align:center\">14~64度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">扇形天线</td>\n<td style=\"text-align:center\">60~180度</td>\n<td style=\"text-align:center\">7~17度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">抛物面天线</td>\n<td style=\"text-align:center\">4~25度</td>\n<td style=\"text-align:center\">4~21度</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"天线类型\"><a href=\"#天线类型\" class=\"headerlink\" title=\"天线类型\"></a>天线类型</h3><p>全向天线： 类似于台灯灯光的辐射方式，所有方向提供水平覆盖。多用于市内安装。<br>半定向天线：类似于壁灯的辐射方式，提供区域覆盖。多用于中短距离通信。<br>强方向性天线：类似于聚光灯。用于远距离通信。</p>\n<p>天线阵列：由两幅或多幅天线构成的一组天线。天线阵列可以实现波束成形(beamforming)。<br>波束成形是集中射频能量的一种技术，信号能量的集中，意味着功率增加，接收机的信噪比随之提高，从而提供更好的传输质量。<br>几种波束成形技术：</p>\n<blockquote>\n<p>静态波束成形<br>动态波束成形<br>发射波束成形</p>\n</blockquote>\n<p><strong>静态波束成形</strong><br>利用定向天线提供固定的辐射方向图。</p>\n<p><strong>动态波束成形</strong><br>将射频能量集中于特定方向和特定形状。<br>能够实现辐射方向逐帧改变，从而为每台终端提供最佳功率和信号质量。</p>\n<p><strong>发射波束成形</strong><br>通过传输多个相移信号，使得这些信号能同时到达发射机认为接收机所处的位置。<br>802.11ac 定义了两种发射波束成形：</p>\n<blockquote>\n<p>隐式发射波束成形：采用隐式信道探测过程优化传输链之间的相位差。<br>显式发射波束成形：通过终端的反馈来确定每个信号所需的相移量。</p>\n</blockquote>\n<h3 id=\"可视视距\"><a href=\"#可视视距\" class=\"headerlink\" title=\"可视视距\"></a>可视视距</h3><p>光从一点传播到另一点时，其传播路径理论上是一条畅通无阻的致谢， 称为可视视距。</p>\n<h3 id=\"射频视距\"><a href=\"#射频视距\" class=\"headerlink\" title=\"射频视距\"></a>射频视距</h3><p>可视视距+菲涅尔区，菲涅尔区是一块虚构的细长椭球体区域，环绕在两幅点对点天线的可视视距路径周围。</p>\n<h3 id=\"地球曲率\"><a href=\"#地球曲率\" class=\"headerlink\" title=\"地球曲率\"></a>地球曲率</h3><p>一般来说，点对点距离超过11.3km,就应该考虑地球曲率的影响。</p>\n<h3 id=\"天线极化\"><a href=\"#天线极化\" class=\"headerlink\" title=\"天线极化\"></a>天线极化</h3><p>天线向外发射电磁波时，电波振幅即可以是水平的，也可以是垂直的，但两幅天线需要保持一致的极化方向，以获取最佳信号质量。</p>\n<h3 id=\"天线分集\"><a href=\"#天线分集\" class=\"headerlink\" title=\"天线分集\"></a>天线分集</h3><p>接入点使用两幅或多幅天线，并于接收机共同工作，以最大限度减小多径的不利影响。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>方位图与立面图(天线辐射包络)<br>理解极坐标图<br>波束宽度<br>天线类型</p>\n<blockquote>\n<p>全向天线<br>半定向天线<br>强方向性天线<br>扇形天线<br>天线阵</p>\n</blockquote>\n<p>可视视距<br>射频视距<br>菲涅尔区<br>地球曲率<br>天线极化<br>天线分集<br>多输入多输出<br>MIMO天线</p>\n<blockquote>\n<p>室内MIMO天线<br>室外MIMO天线</p>\n</blockquote>\n<p>天线的连接与安装</p>\n<blockquote>\n<p>电压驻波比<br>信号损失<br>天线的安装</p>\n</blockquote>\n<p>天线附件</p>\n<blockquote>\n<p>电缆<br>连接器<br>分路器<br>放大器<br>衰减器<br>避雷器<br>接地棒与接地线</p>\n</blockquote>\n<p>法规遵从性</p>\n<p>——————————————</p>\n<p>天线的安装是决定通信能否成功进行的首要因素。在无线网络中成功规划和安装天线是一项孰能生巧且有所收获的工作。</p>\n<h3 id=\"方位图与立面图\"><a href=\"#方位图与立面图\" class=\"headerlink\" title=\"方位图与立面图\"></a>方位图与立面图</h3><p>有两种天线辐射方向图：方位图，立面图。<br>方位图=H平面=自顶向下视图；<br>立面图=E平面=侧视图；</p>\n<h3 id=\"波束宽度\"><a href=\"#波束宽度\" class=\"headerlink\" title=\"波束宽度\"></a>波束宽度</h3><p>从天线信号的中心或最强点开始，沿横轴和纵轴测量每一个信号功率减半的点(-3dB)。这个半功率点的界面可以称为波束宽度。<br>射频信号的大部分能量都集中在天线的波束宽度之内，波束宽度以内的部分称为天线的主瓣，波束宽度以外的称为旁瓣或后瓣。</p>\n<p>天线的波束宽度</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">天线类型</th>\n<th style=\"text-align:center\">水平波束宽度</th>\n<th style=\"text-align:center\">垂直波束宽度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">全向天线</td>\n<td style=\"text-align:center\">360度</td>\n<td style=\"text-align:center\">7~80度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">贴片天线</td>\n<td style=\"text-align:center\">30~180度</td>\n<td style=\"text-align:center\">6~90度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">八木天线</td>\n<td style=\"text-align:center\">30~78度</td>\n<td style=\"text-align:center\">14~64度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">扇形天线</td>\n<td style=\"text-align:center\">60~180度</td>\n<td style=\"text-align:center\">7~17度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">抛物面天线</td>\n<td style=\"text-align:center\">4~25度</td>\n<td style=\"text-align:center\">4~21度</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"天线类型\"><a href=\"#天线类型\" class=\"headerlink\" title=\"天线类型\"></a>天线类型</h3><p>全向天线： 类似于台灯灯光的辐射方式，所有方向提供水平覆盖。多用于市内安装。<br>半定向天线：类似于壁灯的辐射方式，提供区域覆盖。多用于中短距离通信。<br>强方向性天线：类似于聚光灯。用于远距离通信。</p>\n<p>天线阵列：由两幅或多幅天线构成的一组天线。天线阵列可以实现波束成形(beamforming)。<br>波束成形是集中射频能量的一种技术，信号能量的集中，意味着功率增加，接收机的信噪比随之提高，从而提供更好的传输质量。<br>几种波束成形技术：</p>\n<blockquote>\n<p>静态波束成形<br>动态波束成形<br>发射波束成形</p>\n</blockquote>\n<p><strong>静态波束成形</strong><br>利用定向天线提供固定的辐射方向图。</p>\n<p><strong>动态波束成形</strong><br>将射频能量集中于特定方向和特定形状。<br>能够实现辐射方向逐帧改变，从而为每台终端提供最佳功率和信号质量。</p>\n<p><strong>发射波束成形</strong><br>通过传输多个相移信号，使得这些信号能同时到达发射机认为接收机所处的位置。<br>802.11ac 定义了两种发射波束成形：</p>\n<blockquote>\n<p>隐式发射波束成形：采用隐式信道探测过程优化传输链之间的相位差。<br>显式发射波束成形：通过终端的反馈来确定每个信号所需的相移量。</p>\n</blockquote>\n<h3 id=\"可视视距\"><a href=\"#可视视距\" class=\"headerlink\" title=\"可视视距\"></a>可视视距</h3><p>光从一点传播到另一点时，其传播路径理论上是一条畅通无阻的致谢， 称为可视视距。</p>\n<h3 id=\"射频视距\"><a href=\"#射频视距\" class=\"headerlink\" title=\"射频视距\"></a>射频视距</h3><p>可视视距+菲涅尔区，菲涅尔区是一块虚构的细长椭球体区域，环绕在两幅点对点天线的可视视距路径周围。</p>\n<h3 id=\"地球曲率\"><a href=\"#地球曲率\" class=\"headerlink\" title=\"地球曲率\"></a>地球曲率</h3><p>一般来说，点对点距离超过11.3km,就应该考虑地球曲率的影响。</p>\n<h3 id=\"天线极化\"><a href=\"#天线极化\" class=\"headerlink\" title=\"天线极化\"></a>天线极化</h3><p>天线向外发射电磁波时，电波振幅即可以是水平的，也可以是垂直的，但两幅天线需要保持一致的极化方向，以获取最佳信号质量。</p>\n<h3 id=\"天线分集\"><a href=\"#天线分集\" class=\"headerlink\" title=\"天线分集\"></a>天线分集</h3><p>接入点使用两幅或多幅天线，并于接收机共同工作，以最大限度减小多径的不利影响。</p>\n"},{"title":"CWNA:射频基础知识(5)","date":"2022-01-12T02:11:56.000Z","_content":"\n### 本底噪声\n本底噪声(noise floor)，特定信道上的无线电能量的环境或背景电平。\n这种背景能量来自附近传输数据的802.11无线接口产生的调制或编码比特，也包括非802.11设备（如微波炉，蓝牙设备等）产生的未调制能量。\n本底噪声也称为背景噪声，它因环境而异。\n2.4GHz ISM信道的本底噪声通常为 -100dBm左右。\n5GHz的本底噪声几乎总是低于2.4GHz信道。\n\n### 信噪比(SNR)\n接收信号与背景噪声之间的分贝差值，而并非比值。\n信噪比过低会引起数据破坏，并引起二层重传，从而降低数据吞吐量。\nSNR > 25dB 信号质量较好\nSNR < 10dB 信号质量较差\n\n### 信干噪比(SINR)\n主射频信号功率相对于射频干扰和背景噪声功率之和的差值。\n描述了主射频信号与干扰和噪声之间的关系，更好的描述信号在特定时间发生的变化。\n\n### 接收信号强度指示\n接收灵敏度，表示接收机无线接口成功接收射频信号所需的功率电平。\n\n无线通信中无处不在的折衷，需要根据需要进行选择。关键是做好平衡。\n> 功率越高支持的数据速率越高；\n> 调制技术和编码方案产生的数据速率也不同；\n> 调制技术和编码方案的数据速率越高，数据越容易遭到破坏；\n> 调制和编码方法的数据速率越低，数据越不易遭到破坏。\n\nRSSI，信号强度指示，不同供应商之间的定义范围不同，不能直接比较。\n\n接收灵敏度阈值\n\n|数据速率|接收信号的振幅|\n|:----------:|:------:|\n|MCS7|-77dBm|\n|MCS6|-78dBm|\n|MCS5|-80dBm|\n|MCS4|-85dBm|\n|MCS3|-88dBm|\n|MCS2|-90dBm|\n|MCS1|-90dBm|\n|MCS0|-90dBm|\n|54Mbps|-79dBm|\n|48Mbps|-80dBm|\n|36Mbps|-85dBm|\n|24Mbps|-87dBm|\n|18Mbps|-90dBm|\n|12Mbps|-91dBm|\n|9Mbps|-91dBm|\n|6Mbps|-91dBm|\n\n### 链路预算\n发射机无线接口经由射频介质到达接收机无线接口的所有增益与损耗之和。\n旨在确保最终接收到的信号振幅高于接收机无线接口的接收灵敏度。\n\n在所有的射频传输中，导致信号丢失的罪魁祸首是**自由空间路径损耗**\n\n### 衰落裕度(fade margin)\n最终接收信号与接收灵敏度阈值之间存在的缓冲空间，称为衰落裕度。\n由于射频信号受到多种外部因素影响，衰落裕度用来确保链路可靠性的做法十分普遍。\n\n### 系统运行裕度\n实际接收信号与实现可靠通信所需要的信号之间的差值。\n\n","source":"_posts/CWNA-射频基础知识-5.md","raw":"---\ntitle: 'CWNA:射频基础知识(5)'\ndate: 2022-01-12 10:11:56\ntags: 'Wi-Fi'\n---\n\n### 本底噪声\n本底噪声(noise floor)，特定信道上的无线电能量的环境或背景电平。\n这种背景能量来自附近传输数据的802.11无线接口产生的调制或编码比特，也包括非802.11设备（如微波炉，蓝牙设备等）产生的未调制能量。\n本底噪声也称为背景噪声，它因环境而异。\n2.4GHz ISM信道的本底噪声通常为 -100dBm左右。\n5GHz的本底噪声几乎总是低于2.4GHz信道。\n\n### 信噪比(SNR)\n接收信号与背景噪声之间的分贝差值，而并非比值。\n信噪比过低会引起数据破坏，并引起二层重传，从而降低数据吞吐量。\nSNR > 25dB 信号质量较好\nSNR < 10dB 信号质量较差\n\n### 信干噪比(SINR)\n主射频信号功率相对于射频干扰和背景噪声功率之和的差值。\n描述了主射频信号与干扰和噪声之间的关系，更好的描述信号在特定时间发生的变化。\n\n### 接收信号强度指示\n接收灵敏度，表示接收机无线接口成功接收射频信号所需的功率电平。\n\n无线通信中无处不在的折衷，需要根据需要进行选择。关键是做好平衡。\n> 功率越高支持的数据速率越高；\n> 调制技术和编码方案产生的数据速率也不同；\n> 调制技术和编码方案的数据速率越高，数据越容易遭到破坏；\n> 调制和编码方法的数据速率越低，数据越不易遭到破坏。\n\nRSSI，信号强度指示，不同供应商之间的定义范围不同，不能直接比较。\n\n接收灵敏度阈值\n\n|数据速率|接收信号的振幅|\n|:----------:|:------:|\n|MCS7|-77dBm|\n|MCS6|-78dBm|\n|MCS5|-80dBm|\n|MCS4|-85dBm|\n|MCS3|-88dBm|\n|MCS2|-90dBm|\n|MCS1|-90dBm|\n|MCS0|-90dBm|\n|54Mbps|-79dBm|\n|48Mbps|-80dBm|\n|36Mbps|-85dBm|\n|24Mbps|-87dBm|\n|18Mbps|-90dBm|\n|12Mbps|-91dBm|\n|9Mbps|-91dBm|\n|6Mbps|-91dBm|\n\n### 链路预算\n发射机无线接口经由射频介质到达接收机无线接口的所有增益与损耗之和。\n旨在确保最终接收到的信号振幅高于接收机无线接口的接收灵敏度。\n\n在所有的射频传输中，导致信号丢失的罪魁祸首是**自由空间路径损耗**\n\n### 衰落裕度(fade margin)\n最终接收信号与接收灵敏度阈值之间存在的缓冲空间，称为衰落裕度。\n由于射频信号受到多种外部因素影响，衰落裕度用来确保链路可靠性的做法十分普遍。\n\n### 系统运行裕度\n实际接收信号与实现可靠通信所需要的信号之间的差值。\n\n","slug":"CWNA-射频基础知识-5","published":1,"updated":"2022-01-12T03:11:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3s001i18jxaqikatwa","content":"<h3 id=\"本底噪声\"><a href=\"#本底噪声\" class=\"headerlink\" title=\"本底噪声\"></a>本底噪声</h3><p>本底噪声(noise floor)，特定信道上的无线电能量的环境或背景电平。<br>这种背景能量来自附近传输数据的802.11无线接口产生的调制或编码比特，也包括非802.11设备（如微波炉，蓝牙设备等）产生的未调制能量。<br>本底噪声也称为背景噪声，它因环境而异。<br>2.4GHz ISM信道的本底噪声通常为 -100dBm左右。<br>5GHz的本底噪声几乎总是低于2.4GHz信道。</p>\n<h3 id=\"信噪比-SNR\"><a href=\"#信噪比-SNR\" class=\"headerlink\" title=\"信噪比(SNR)\"></a>信噪比(SNR)</h3><p>接收信号与背景噪声之间的分贝差值，而并非比值。<br>信噪比过低会引起数据破坏，并引起二层重传，从而降低数据吞吐量。<br>SNR &gt; 25dB 信号质量较好<br>SNR &lt; 10dB 信号质量较差</p>\n<h3 id=\"信干噪比-SINR\"><a href=\"#信干噪比-SINR\" class=\"headerlink\" title=\"信干噪比(SINR)\"></a>信干噪比(SINR)</h3><p>主射频信号功率相对于射频干扰和背景噪声功率之和的差值。<br>描述了主射频信号与干扰和噪声之间的关系，更好的描述信号在特定时间发生的变化。</p>\n<h3 id=\"接收信号强度指示\"><a href=\"#接收信号强度指示\" class=\"headerlink\" title=\"接收信号强度指示\"></a>接收信号强度指示</h3><p>接收灵敏度，表示接收机无线接口成功接收射频信号所需的功率电平。</p>\n<p>无线通信中无处不在的折衷，需要根据需要进行选择。关键是做好平衡。</p>\n<blockquote>\n<p>功率越高支持的数据速率越高；<br>调制技术和编码方案产生的数据速率也不同；<br>调制技术和编码方案的数据速率越高，数据越容易遭到破坏；<br>调制和编码方法的数据速率越低，数据越不易遭到破坏。</p>\n</blockquote>\n<p>RSSI，信号强度指示，不同供应商之间的定义范围不同，不能直接比较。</p>\n<p>接收灵敏度阈值</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">数据速率</th>\n<th style=\"text-align:center\">接收信号的振幅</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">MCS7</td>\n<td style=\"text-align:center\">-77dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS6</td>\n<td style=\"text-align:center\">-78dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS5</td>\n<td style=\"text-align:center\">-80dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS4</td>\n<td style=\"text-align:center\">-85dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS3</td>\n<td style=\"text-align:center\">-88dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS2</td>\n<td style=\"text-align:center\">-90dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS1</td>\n<td style=\"text-align:center\">-90dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS0</td>\n<td style=\"text-align:center\">-90dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">54Mbps</td>\n<td style=\"text-align:center\">-79dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">48Mbps</td>\n<td style=\"text-align:center\">-80dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">36Mbps</td>\n<td style=\"text-align:center\">-85dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">24Mbps</td>\n<td style=\"text-align:center\">-87dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">18Mbps</td>\n<td style=\"text-align:center\">-90dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">12Mbps</td>\n<td style=\"text-align:center\">-91dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">9Mbps</td>\n<td style=\"text-align:center\">-91dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6Mbps</td>\n<td style=\"text-align:center\">-91dBm</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"链路预算\"><a href=\"#链路预算\" class=\"headerlink\" title=\"链路预算\"></a>链路预算</h3><p>发射机无线接口经由射频介质到达接收机无线接口的所有增益与损耗之和。<br>旨在确保最终接收到的信号振幅高于接收机无线接口的接收灵敏度。</p>\n<p>在所有的射频传输中，导致信号丢失的罪魁祸首是<strong>自由空间路径损耗</strong></p>\n<h3 id=\"衰落裕度-fade-margin\"><a href=\"#衰落裕度-fade-margin\" class=\"headerlink\" title=\"衰落裕度(fade margin)\"></a>衰落裕度(fade margin)</h3><p>最终接收信号与接收灵敏度阈值之间存在的缓冲空间，称为衰落裕度。<br>由于射频信号受到多种外部因素影响，衰落裕度用来确保链路可靠性的做法十分普遍。</p>\n<h3 id=\"系统运行裕度\"><a href=\"#系统运行裕度\" class=\"headerlink\" title=\"系统运行裕度\"></a>系统运行裕度</h3><p>实际接收信号与实现可靠通信所需要的信号之间的差值。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"本底噪声\"><a href=\"#本底噪声\" class=\"headerlink\" title=\"本底噪声\"></a>本底噪声</h3><p>本底噪声(noise floor)，特定信道上的无线电能量的环境或背景电平。<br>这种背景能量来自附近传输数据的802.11无线接口产生的调制或编码比特，也包括非802.11设备（如微波炉，蓝牙设备等）产生的未调制能量。<br>本底噪声也称为背景噪声，它因环境而异。<br>2.4GHz ISM信道的本底噪声通常为 -100dBm左右。<br>5GHz的本底噪声几乎总是低于2.4GHz信道。</p>\n<h3 id=\"信噪比-SNR\"><a href=\"#信噪比-SNR\" class=\"headerlink\" title=\"信噪比(SNR)\"></a>信噪比(SNR)</h3><p>接收信号与背景噪声之间的分贝差值，而并非比值。<br>信噪比过低会引起数据破坏，并引起二层重传，从而降低数据吞吐量。<br>SNR &gt; 25dB 信号质量较好<br>SNR &lt; 10dB 信号质量较差</p>\n<h3 id=\"信干噪比-SINR\"><a href=\"#信干噪比-SINR\" class=\"headerlink\" title=\"信干噪比(SINR)\"></a>信干噪比(SINR)</h3><p>主射频信号功率相对于射频干扰和背景噪声功率之和的差值。<br>描述了主射频信号与干扰和噪声之间的关系，更好的描述信号在特定时间发生的变化。</p>\n<h3 id=\"接收信号强度指示\"><a href=\"#接收信号强度指示\" class=\"headerlink\" title=\"接收信号强度指示\"></a>接收信号强度指示</h3><p>接收灵敏度，表示接收机无线接口成功接收射频信号所需的功率电平。</p>\n<p>无线通信中无处不在的折衷，需要根据需要进行选择。关键是做好平衡。</p>\n<blockquote>\n<p>功率越高支持的数据速率越高；<br>调制技术和编码方案产生的数据速率也不同；<br>调制技术和编码方案的数据速率越高，数据越容易遭到破坏；<br>调制和编码方法的数据速率越低，数据越不易遭到破坏。</p>\n</blockquote>\n<p>RSSI，信号强度指示，不同供应商之间的定义范围不同，不能直接比较。</p>\n<p>接收灵敏度阈值</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">数据速率</th>\n<th style=\"text-align:center\">接收信号的振幅</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">MCS7</td>\n<td style=\"text-align:center\">-77dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS6</td>\n<td style=\"text-align:center\">-78dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS5</td>\n<td style=\"text-align:center\">-80dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS4</td>\n<td style=\"text-align:center\">-85dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS3</td>\n<td style=\"text-align:center\">-88dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS2</td>\n<td style=\"text-align:center\">-90dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS1</td>\n<td style=\"text-align:center\">-90dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MCS0</td>\n<td style=\"text-align:center\">-90dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">54Mbps</td>\n<td style=\"text-align:center\">-79dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">48Mbps</td>\n<td style=\"text-align:center\">-80dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">36Mbps</td>\n<td style=\"text-align:center\">-85dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">24Mbps</td>\n<td style=\"text-align:center\">-87dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">18Mbps</td>\n<td style=\"text-align:center\">-90dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">12Mbps</td>\n<td style=\"text-align:center\">-91dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">9Mbps</td>\n<td style=\"text-align:center\">-91dBm</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6Mbps</td>\n<td style=\"text-align:center\">-91dBm</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"链路预算\"><a href=\"#链路预算\" class=\"headerlink\" title=\"链路预算\"></a>链路预算</h3><p>发射机无线接口经由射频介质到达接收机无线接口的所有增益与损耗之和。<br>旨在确保最终接收到的信号振幅高于接收机无线接口的接收灵敏度。</p>\n<p>在所有的射频传输中，导致信号丢失的罪魁祸首是<strong>自由空间路径损耗</strong></p>\n<h3 id=\"衰落裕度-fade-margin\"><a href=\"#衰落裕度-fade-margin\" class=\"headerlink\" title=\"衰落裕度(fade margin)\"></a>衰落裕度(fade margin)</h3><p>最终接收信号与接收灵敏度阈值之间存在的缓冲空间，称为衰落裕度。<br>由于射频信号受到多种外部因素影响，衰落裕度用来确保链路可靠性的做法十分普遍。</p>\n<h3 id=\"系统运行裕度\"><a href=\"#系统运行裕度\" class=\"headerlink\" title=\"系统运行裕度\"></a>系统运行裕度</h3><p>实际接收信号与实现可靠通信所需要的信号之间的差值。</p>\n"},{"title":"CWNA:射频基础知识","date":"2022-01-10T09:10:14.000Z","_content":"\n**射频信号定义**\n\n**射频特性**\n> 波长\n> 频率\n> 振幅\n> 相位\n\n**射频行为**\n> 波传播\n> 吸收\n> 反射\n> 散射\n> 折射\n> 衍射\n> 损耗（衰减）\n> 自由空间路径损耗\n> 多径\n> 增益（放大）\n\n\n为了深入理解802.11技术，需要掌握无线信号在OSI模型的物理层上的原理。射频通信是物理层核心所在。\n有线通信，信号在有界介质中传输。\n无线通信，信号在无界介质中传输，信号向四面八方辐射到周围环境中，因而容易受环境影响。\n\n**射频信号的定义**\n电磁频谱通常简称频谱，表示所有可能的电磁辐射的范围，这种辐射以自传播的电磁波的形式存在。\n\n射频信号始于发射机产生的交流信号，在传输过程中，射频信号会产生多种运动行为，称为传播行为。\n\n\n**射频信号的特性**\n**波长**，连续两个波峰或者连续两个波谷之间的距离。也是射频信号在一个周期内实际传播的距离。\n$λ=c/f$\n表示波长等于光速除以频率。\n\n射频信号在空间或物质中传输会出现衰减。衰减的原因并非频率和波长，而是距离。所有天线都存在接收\n功率的有效区域，称为天线孔径(aperture)。天线的频率越高，天线孔径能捕获的能量频率越低。人们总\n感觉波长较短的高频信号衰减较快。从理论上讲，电磁波在空中传播永不停歇；从本质上将，信号永远可以\n到达接收机，但是会因为强度过低而难以被检测到。\n\n人们认为，与波长较短的高频信号相比，波长较长的低频信号能传播更远的距离。实际情况是，高频天线的\n孔径能够捕获的能量远低于低频天线的孔径所能捕获的能量。\n\n多数802.11无线接口使用2.4GHz和5GHz频段的数据。\n2.45GHz对应的波长12.24cm\n5.775GHz对应的波长5.19cm\n\n高频信号在通过各种物理介质时，衰减的速度一般比低频信号要快。衰减的原因：\n信号的自由空间损耗；\n频率越高穿越障碍物的能力越差。2.4GHz比5GHz的穿墙能力更好。\n\n**频率**\n频率，在指定时间内发生的次数，单位Hz,得名于德国物理学家海因里希·鲁道夫·赫兹。\n> 1Hz:每秒循环1次\n> 1kHz:每秒循环1000次\n> 1MHz:每秒循环1 000 000次\n> 1GHz:每秒循环1 000 000 000次\n因此，2.4GHz信号每秒振荡24亿次。\n\n**振幅**\n振幅，表征信号的强度或功率。\n不同类型的射频技术要求的发射振幅有所不同。\n调幅广播电台发射的窄带信号功率可能达到50kW\n802.11接入点的发射功率介于1mW和100mW之间。\n802.11无线接口可以接收并解调振幅低于十亿分之一毫瓦的信号。\n\n**相位**\n相位，描述两个或多个同频信号之间的关系。\n同相，两个同频信号的波峰同一时刻精确对齐。\n异相，两个同频信号的波峰在同一时刻没有精确对齐。\n相位影响信号叠加的强度。多径效应就是有异相信号引起的。\n\n（未完待续...)\n\n\n\n\n","source":"_posts/CWNA-射频基础知识.md","raw":"---\ntitle: CWNA:射频基础知识\ndate: 2022-01-10 17:10:14\ntags: 'Wi-Fi'\n---\n\n**射频信号定义**\n\n**射频特性**\n> 波长\n> 频率\n> 振幅\n> 相位\n\n**射频行为**\n> 波传播\n> 吸收\n> 反射\n> 散射\n> 折射\n> 衍射\n> 损耗（衰减）\n> 自由空间路径损耗\n> 多径\n> 增益（放大）\n\n\n为了深入理解802.11技术，需要掌握无线信号在OSI模型的物理层上的原理。射频通信是物理层核心所在。\n有线通信，信号在有界介质中传输。\n无线通信，信号在无界介质中传输，信号向四面八方辐射到周围环境中，因而容易受环境影响。\n\n**射频信号的定义**\n电磁频谱通常简称频谱，表示所有可能的电磁辐射的范围，这种辐射以自传播的电磁波的形式存在。\n\n射频信号始于发射机产生的交流信号，在传输过程中，射频信号会产生多种运动行为，称为传播行为。\n\n\n**射频信号的特性**\n**波长**，连续两个波峰或者连续两个波谷之间的距离。也是射频信号在一个周期内实际传播的距离。\n$λ=c/f$\n表示波长等于光速除以频率。\n\n射频信号在空间或物质中传输会出现衰减。衰减的原因并非频率和波长，而是距离。所有天线都存在接收\n功率的有效区域，称为天线孔径(aperture)。天线的频率越高，天线孔径能捕获的能量频率越低。人们总\n感觉波长较短的高频信号衰减较快。从理论上讲，电磁波在空中传播永不停歇；从本质上将，信号永远可以\n到达接收机，但是会因为强度过低而难以被检测到。\n\n人们认为，与波长较短的高频信号相比，波长较长的低频信号能传播更远的距离。实际情况是，高频天线的\n孔径能够捕获的能量远低于低频天线的孔径所能捕获的能量。\n\n多数802.11无线接口使用2.4GHz和5GHz频段的数据。\n2.45GHz对应的波长12.24cm\n5.775GHz对应的波长5.19cm\n\n高频信号在通过各种物理介质时，衰减的速度一般比低频信号要快。衰减的原因：\n信号的自由空间损耗；\n频率越高穿越障碍物的能力越差。2.4GHz比5GHz的穿墙能力更好。\n\n**频率**\n频率，在指定时间内发生的次数，单位Hz,得名于德国物理学家海因里希·鲁道夫·赫兹。\n> 1Hz:每秒循环1次\n> 1kHz:每秒循环1000次\n> 1MHz:每秒循环1 000 000次\n> 1GHz:每秒循环1 000 000 000次\n因此，2.4GHz信号每秒振荡24亿次。\n\n**振幅**\n振幅，表征信号的强度或功率。\n不同类型的射频技术要求的发射振幅有所不同。\n调幅广播电台发射的窄带信号功率可能达到50kW\n802.11接入点的发射功率介于1mW和100mW之间。\n802.11无线接口可以接收并解调振幅低于十亿分之一毫瓦的信号。\n\n**相位**\n相位，描述两个或多个同频信号之间的关系。\n同相，两个同频信号的波峰同一时刻精确对齐。\n异相，两个同频信号的波峰在同一时刻没有精确对齐。\n相位影响信号叠加的强度。多径效应就是有异相信号引起的。\n\n（未完待续...)\n\n\n\n\n","slug":"CWNA-射频基础知识","published":1,"updated":"2022-01-11T01:42:38.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3t001k18jx6xc3a87x","content":"<p><strong>射频信号定义</strong></p>\n<p><strong>射频特性</strong></p>\n<blockquote>\n<p>波长<br>频率<br>振幅<br>相位</p>\n</blockquote>\n<p><strong>射频行为</strong></p>\n<blockquote>\n<p>波传播<br>吸收<br>反射<br>散射<br>折射<br>衍射<br>损耗（衰减）<br>自由空间路径损耗<br>多径<br>增益（放大）</p>\n</blockquote>\n<p>为了深入理解802.11技术，需要掌握无线信号在OSI模型的物理层上的原理。射频通信是物理层核心所在。<br>有线通信，信号在有界介质中传输。<br>无线通信，信号在无界介质中传输，信号向四面八方辐射到周围环境中，因而容易受环境影响。</p>\n<p><strong>射频信号的定义</strong><br>电磁频谱通常简称频谱，表示所有可能的电磁辐射的范围，这种辐射以自传播的电磁波的形式存在。</p>\n<p>射频信号始于发射机产生的交流信号，在传输过程中，射频信号会产生多种运动行为，称为传播行为。</p>\n<p><strong>射频信号的特性</strong><br><strong>波长</strong>，连续两个波峰或者连续两个波谷之间的距离。也是射频信号在一个周期内实际传播的距离。<br>$λ=c/f$<br>表示波长等于光速除以频率。</p>\n<p>射频信号在空间或物质中传输会出现衰减。衰减的原因并非频率和波长，而是距离。所有天线都存在接收<br>功率的有效区域，称为天线孔径(aperture)。天线的频率越高，天线孔径能捕获的能量频率越低。人们总<br>感觉波长较短的高频信号衰减较快。从理论上讲，电磁波在空中传播永不停歇；从本质上将，信号永远可以<br>到达接收机，但是会因为强度过低而难以被检测到。</p>\n<p>人们认为，与波长较短的高频信号相比，波长较长的低频信号能传播更远的距离。实际情况是，高频天线的<br>孔径能够捕获的能量远低于低频天线的孔径所能捕获的能量。</p>\n<p>多数802.11无线接口使用2.4GHz和5GHz频段的数据。<br>2.45GHz对应的波长12.24cm<br>5.775GHz对应的波长5.19cm</p>\n<p>高频信号在通过各种物理介质时，衰减的速度一般比低频信号要快。衰减的原因：<br>信号的自由空间损耗；<br>频率越高穿越障碍物的能力越差。2.4GHz比5GHz的穿墙能力更好。</p>\n<p><strong>频率</strong><br>频率，在指定时间内发生的次数，单位Hz,得名于德国物理学家海因里希·鲁道夫·赫兹。</p>\n<blockquote>\n<p>1Hz:每秒循环1次<br>1kHz:每秒循环1000次<br>1MHz:每秒循环1 000 000次<br>1GHz:每秒循环1 000 000 000次<br>因此，2.4GHz信号每秒振荡24亿次。</p>\n</blockquote>\n<p><strong>振幅</strong><br>振幅，表征信号的强度或功率。<br>不同类型的射频技术要求的发射振幅有所不同。<br>调幅广播电台发射的窄带信号功率可能达到50kW<br>802.11接入点的发射功率介于1mW和100mW之间。<br>802.11无线接口可以接收并解调振幅低于十亿分之一毫瓦的信号。</p>\n<p><strong>相位</strong><br>相位，描述两个或多个同频信号之间的关系。<br>同相，两个同频信号的波峰同一时刻精确对齐。<br>异相，两个同频信号的波峰在同一时刻没有精确对齐。<br>相位影响信号叠加的强度。多径效应就是有异相信号引起的。</p>\n<p>（未完待续…)</p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>射频信号定义</strong></p>\n<p><strong>射频特性</strong></p>\n<blockquote>\n<p>波长<br>频率<br>振幅<br>相位</p>\n</blockquote>\n<p><strong>射频行为</strong></p>\n<blockquote>\n<p>波传播<br>吸收<br>反射<br>散射<br>折射<br>衍射<br>损耗（衰减）<br>自由空间路径损耗<br>多径<br>增益（放大）</p>\n</blockquote>\n<p>为了深入理解802.11技术，需要掌握无线信号在OSI模型的物理层上的原理。射频通信是物理层核心所在。<br>有线通信，信号在有界介质中传输。<br>无线通信，信号在无界介质中传输，信号向四面八方辐射到周围环境中，因而容易受环境影响。</p>\n<p><strong>射频信号的定义</strong><br>电磁频谱通常简称频谱，表示所有可能的电磁辐射的范围，这种辐射以自传播的电磁波的形式存在。</p>\n<p>射频信号始于发射机产生的交流信号，在传输过程中，射频信号会产生多种运动行为，称为传播行为。</p>\n<p><strong>射频信号的特性</strong><br><strong>波长</strong>，连续两个波峰或者连续两个波谷之间的距离。也是射频信号在一个周期内实际传播的距离。<br>$λ=c/f$<br>表示波长等于光速除以频率。</p>\n<p>射频信号在空间或物质中传输会出现衰减。衰减的原因并非频率和波长，而是距离。所有天线都存在接收<br>功率的有效区域，称为天线孔径(aperture)。天线的频率越高，天线孔径能捕获的能量频率越低。人们总<br>感觉波长较短的高频信号衰减较快。从理论上讲，电磁波在空中传播永不停歇；从本质上将，信号永远可以<br>到达接收机，但是会因为强度过低而难以被检测到。</p>\n<p>人们认为，与波长较短的高频信号相比，波长较长的低频信号能传播更远的距离。实际情况是，高频天线的<br>孔径能够捕获的能量远低于低频天线的孔径所能捕获的能量。</p>\n<p>多数802.11无线接口使用2.4GHz和5GHz频段的数据。<br>2.45GHz对应的波长12.24cm<br>5.775GHz对应的波长5.19cm</p>\n<p>高频信号在通过各种物理介质时，衰减的速度一般比低频信号要快。衰减的原因：<br>信号的自由空间损耗；<br>频率越高穿越障碍物的能力越差。2.4GHz比5GHz的穿墙能力更好。</p>\n<p><strong>频率</strong><br>频率，在指定时间内发生的次数，单位Hz,得名于德国物理学家海因里希·鲁道夫·赫兹。</p>\n<blockquote>\n<p>1Hz:每秒循环1次<br>1kHz:每秒循环1000次<br>1MHz:每秒循环1 000 000次<br>1GHz:每秒循环1 000 000 000次<br>因此，2.4GHz信号每秒振荡24亿次。</p>\n</blockquote>\n<p><strong>振幅</strong><br>振幅，表征信号的强度或功率。<br>不同类型的射频技术要求的发射振幅有所不同。<br>调幅广播电台发射的窄带信号功率可能达到50kW<br>802.11接入点的发射功率介于1mW和100mW之间。<br>802.11无线接口可以接收并解调振幅低于十亿分之一毫瓦的信号。</p>\n<p><strong>相位</strong><br>相位，描述两个或多个同频信号之间的关系。<br>同相，两个同频信号的波峰同一时刻精确对齐。<br>异相，两个同频信号的波峰在同一时刻没有精确对齐。<br>相位影响信号叠加的强度。多径效应就是有异相信号引起的。</p>\n<p>（未完待续…)</p>\n"},{"title":"CWNA:射频基础知识（2）","date":"2022-01-11T05:13:36.000Z","_content":"\n传播介质对射频波的传播影响极大。\n\n**吸收**\n2.4GHz射频信号通过混凝土墙后，功率降低到原来的1/16，而同样的信号穿过石膏板后，功率损失1/2.\n吸收是导致信号衰减的主要原因。\n成年人的身体平均含水量50%~60%，水会吸收信号，导致信号衰减。\n\n**反射**\n反射分为天波反射和微波反射两大类。\n频率低于1GHz的信号会发生天波反射，它会从地球电离层带电粒子的表面反弹回来。\n反射导致多径效应，多径会降低接收信号的强度和质量，甚至导致数据损坏和信号相消。\n\n在遗留的802.11/a/b/无线接口时，反射和多径往往导致性能下降的罪魁祸首。而802.11n/ac无线接口采用\n多输入多输出(MIMO)天线和高级数字信号处理技术，使得多径效应具有建设性影响。\n\n**散射**\n天空之所以呈现蓝色是由于瑞利散射（Rayleigh scattering),得名于19世纪英国物理学家约翰·威廉·斯特拉特，后者曾受封瑞利勋爵。\n\n散射就是波向四面八方反射。\n\n**折射**\n波进入密度不均匀的介质后会发生折射。\n\n**衍射**\n信号遇到障碍物时发生弯曲。\n障碍物正后方的区域称为射频阴影（RF shadow)。射频阴影可能称为信号覆盖死角，天线安装位置需要考虑。\n\n**损耗**\n损耗又称为衰减，用于描述振幅和信号强度的降低。\n介质会导致波的损耗。\n\n**自由空间损耗**\n即便没有障碍物，吸收，反射，衍射等因素造成的衰减，电磁信号在传输过程中也会因为物理定律而衰减。由于波的自然展宽引起的信号强度衰减称为自由空间路径损耗，一般称为波束发散。\n\n距离每增加一倍，振幅将减少6dB。\n\n信号的成功接收，不仅要确保射频信号不会衰减到无线接口的接收灵敏度以下，也要确保信号不会衰减到接近或低于本底噪声的水平。\n\n**多径**\n多径，指信号沿着两条或多条路径同时或相隔极短时间到达接收天线。上述波的各种行为多数会导致多径现象。\n\n电视图像的重影就是多径效应引起。\n\n多径引起的4种结果：\n增强\n减弱\n消失\n损坏\n\n**增益**\n描述信号或信号强度的增加。分为有源增益和无源增益\n有源增益————收发器\n无源增益————天线\n\n两种信号测量工具\n频域工具————频谱分析仪\n时域工具————示波器\n\n### 提示\n遇到网络问题，最好从物理层开始排除网络故障。无论是以太网还是无线局域网。\n","source":"_posts/CWNA-射频基础知识（2）.md","raw":"---\ntitle: 'CWNA:射频基础知识（2）'\ndate: 2022-01-11 13:13:36\ntags: 'Wi-Fi'\n---\n\n传播介质对射频波的传播影响极大。\n\n**吸收**\n2.4GHz射频信号通过混凝土墙后，功率降低到原来的1/16，而同样的信号穿过石膏板后，功率损失1/2.\n吸收是导致信号衰减的主要原因。\n成年人的身体平均含水量50%~60%，水会吸收信号，导致信号衰减。\n\n**反射**\n反射分为天波反射和微波反射两大类。\n频率低于1GHz的信号会发生天波反射，它会从地球电离层带电粒子的表面反弹回来。\n反射导致多径效应，多径会降低接收信号的强度和质量，甚至导致数据损坏和信号相消。\n\n在遗留的802.11/a/b/无线接口时，反射和多径往往导致性能下降的罪魁祸首。而802.11n/ac无线接口采用\n多输入多输出(MIMO)天线和高级数字信号处理技术，使得多径效应具有建设性影响。\n\n**散射**\n天空之所以呈现蓝色是由于瑞利散射（Rayleigh scattering),得名于19世纪英国物理学家约翰·威廉·斯特拉特，后者曾受封瑞利勋爵。\n\n散射就是波向四面八方反射。\n\n**折射**\n波进入密度不均匀的介质后会发生折射。\n\n**衍射**\n信号遇到障碍物时发生弯曲。\n障碍物正后方的区域称为射频阴影（RF shadow)。射频阴影可能称为信号覆盖死角，天线安装位置需要考虑。\n\n**损耗**\n损耗又称为衰减，用于描述振幅和信号强度的降低。\n介质会导致波的损耗。\n\n**自由空间损耗**\n即便没有障碍物，吸收，反射，衍射等因素造成的衰减，电磁信号在传输过程中也会因为物理定律而衰减。由于波的自然展宽引起的信号强度衰减称为自由空间路径损耗，一般称为波束发散。\n\n距离每增加一倍，振幅将减少6dB。\n\n信号的成功接收，不仅要确保射频信号不会衰减到无线接口的接收灵敏度以下，也要确保信号不会衰减到接近或低于本底噪声的水平。\n\n**多径**\n多径，指信号沿着两条或多条路径同时或相隔极短时间到达接收天线。上述波的各种行为多数会导致多径现象。\n\n电视图像的重影就是多径效应引起。\n\n多径引起的4种结果：\n增强\n减弱\n消失\n损坏\n\n**增益**\n描述信号或信号强度的增加。分为有源增益和无源增益\n有源增益————收发器\n无源增益————天线\n\n两种信号测量工具\n频域工具————频谱分析仪\n时域工具————示波器\n\n### 提示\n遇到网络问题，最好从物理层开始排除网络故障。无论是以太网还是无线局域网。\n","slug":"CWNA-射频基础知识（2）","published":1,"updated":"2022-01-11T06:26:13.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3w001m18jxal0rgc72","content":"<p>传播介质对射频波的传播影响极大。</p>\n<p><strong>吸收</strong><br>2.4GHz射频信号通过混凝土墙后，功率降低到原来的1/16，而同样的信号穿过石膏板后，功率损失1/2.<br>吸收是导致信号衰减的主要原因。<br>成年人的身体平均含水量50%~60%，水会吸收信号，导致信号衰减。</p>\n<p><strong>反射</strong><br>反射分为天波反射和微波反射两大类。<br>频率低于1GHz的信号会发生天波反射，它会从地球电离层带电粒子的表面反弹回来。<br>反射导致多径效应，多径会降低接收信号的强度和质量，甚至导致数据损坏和信号相消。</p>\n<p>在遗留的802.11/a/b/无线接口时，反射和多径往往导致性能下降的罪魁祸首。而802.11n/ac无线接口采用<br>多输入多输出(MIMO)天线和高级数字信号处理技术，使得多径效应具有建设性影响。</p>\n<p><strong>散射</strong><br>天空之所以呈现蓝色是由于瑞利散射（Rayleigh scattering),得名于19世纪英国物理学家约翰·威廉·斯特拉特，后者曾受封瑞利勋爵。</p>\n<p>散射就是波向四面八方反射。</p>\n<p><strong>折射</strong><br>波进入密度不均匀的介质后会发生折射。</p>\n<p><strong>衍射</strong><br>信号遇到障碍物时发生弯曲。<br>障碍物正后方的区域称为射频阴影（RF shadow)。射频阴影可能称为信号覆盖死角，天线安装位置需要考虑。</p>\n<p><strong>损耗</strong><br>损耗又称为衰减，用于描述振幅和信号强度的降低。<br>介质会导致波的损耗。</p>\n<p><strong>自由空间损耗</strong><br>即便没有障碍物，吸收，反射，衍射等因素造成的衰减，电磁信号在传输过程中也会因为物理定律而衰减。由于波的自然展宽引起的信号强度衰减称为自由空间路径损耗，一般称为波束发散。</p>\n<p>距离每增加一倍，振幅将减少6dB。</p>\n<p>信号的成功接收，不仅要确保射频信号不会衰减到无线接口的接收灵敏度以下，也要确保信号不会衰减到接近或低于本底噪声的水平。</p>\n<p><strong>多径</strong><br>多径，指信号沿着两条或多条路径同时或相隔极短时间到达接收天线。上述波的各种行为多数会导致多径现象。</p>\n<p>电视图像的重影就是多径效应引起。</p>\n<p>多径引起的4种结果：<br>增强<br>减弱<br>消失<br>损坏</p>\n<p><strong>增益</strong><br>描述信号或信号强度的增加。分为有源增益和无源增益<br>有源增益————收发器<br>无源增益————天线</p>\n<p>两种信号测量工具<br>频域工具————频谱分析仪<br>时域工具————示波器</p>\n<h3 id=\"提示\"><a href=\"#提示\" class=\"headerlink\" title=\"提示\"></a>提示</h3><p>遇到网络问题，最好从物理层开始排除网络故障。无论是以太网还是无线局域网。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>传播介质对射频波的传播影响极大。</p>\n<p><strong>吸收</strong><br>2.4GHz射频信号通过混凝土墙后，功率降低到原来的1/16，而同样的信号穿过石膏板后，功率损失1/2.<br>吸收是导致信号衰减的主要原因。<br>成年人的身体平均含水量50%~60%，水会吸收信号，导致信号衰减。</p>\n<p><strong>反射</strong><br>反射分为天波反射和微波反射两大类。<br>频率低于1GHz的信号会发生天波反射，它会从地球电离层带电粒子的表面反弹回来。<br>反射导致多径效应，多径会降低接收信号的强度和质量，甚至导致数据损坏和信号相消。</p>\n<p>在遗留的802.11/a/b/无线接口时，反射和多径往往导致性能下降的罪魁祸首。而802.11n/ac无线接口采用<br>多输入多输出(MIMO)天线和高级数字信号处理技术，使得多径效应具有建设性影响。</p>\n<p><strong>散射</strong><br>天空之所以呈现蓝色是由于瑞利散射（Rayleigh scattering),得名于19世纪英国物理学家约翰·威廉·斯特拉特，后者曾受封瑞利勋爵。</p>\n<p>散射就是波向四面八方反射。</p>\n<p><strong>折射</strong><br>波进入密度不均匀的介质后会发生折射。</p>\n<p><strong>衍射</strong><br>信号遇到障碍物时发生弯曲。<br>障碍物正后方的区域称为射频阴影（RF shadow)。射频阴影可能称为信号覆盖死角，天线安装位置需要考虑。</p>\n<p><strong>损耗</strong><br>损耗又称为衰减，用于描述振幅和信号强度的降低。<br>介质会导致波的损耗。</p>\n<p><strong>自由空间损耗</strong><br>即便没有障碍物，吸收，反射，衍射等因素造成的衰减，电磁信号在传输过程中也会因为物理定律而衰减。由于波的自然展宽引起的信号强度衰减称为自由空间路径损耗，一般称为波束发散。</p>\n<p>距离每增加一倍，振幅将减少6dB。</p>\n<p>信号的成功接收，不仅要确保射频信号不会衰减到无线接口的接收灵敏度以下，也要确保信号不会衰减到接近或低于本底噪声的水平。</p>\n<p><strong>多径</strong><br>多径，指信号沿着两条或多条路径同时或相隔极短时间到达接收天线。上述波的各种行为多数会导致多径现象。</p>\n<p>电视图像的重影就是多径效应引起。</p>\n<p>多径引起的4种结果：<br>增强<br>减弱<br>消失<br>损坏</p>\n<p><strong>增益</strong><br>描述信号或信号强度的增加。分为有源增益和无源增益<br>有源增益————收发器<br>无源增益————天线</p>\n<p>两种信号测量工具<br>频域工具————频谱分析仪<br>时域工具————示波器</p>\n<h3 id=\"提示\"><a href=\"#提示\" class=\"headerlink\" title=\"提示\"></a>提示</h3><p>遇到网络问题，最好从物理层开始排除网络故障。无论是以太网还是无线局域网。</p>\n"},{"title":"CWNA:射频数学计算","date":"2022-01-12T01:32:41.000Z","_content":"\n射频计算中包含很多对数运算，不过工程应用无需进行复杂的计算。\n\n**10与3规则**\n用于工程近似计算。\n4条规则：\n> 每3dB增益（相对值），意味着绝对功率(mW)加倍；\n> 每3dB损耗（相对值），意味着绝对功率(mW)减半；\n> 每10dB增益，意味着绝对功率乘以10；\n> 每10dB损耗，意味着绝对功率除以10；\n\n多数802.11无线接口可以解析从-30dBm(1mW 的千分之一)到低至-100dBm(1mW的百亿分之一)的接收信号\n毫瓦分贝对照表\n\n|毫瓦分贝(dBm)|毫瓦(mW)|功率电平|\n|:----------:|:------:|:------:|\n|+20dBm|200mW|十分之一瓦|\n|+10dBm|100mW|百分之一瓦|\n|0dBm|1mW|千分之一瓦|\n|-10dBm|0.1mW|十分之一毫瓦|\n|-20dBm|0.01mW|百分之一毫瓦|\n|-30dBm|0.001mW|千分之一毫瓦|\n","source":"_posts/CWNA-射频数学计算.md","raw":"---\ntitle: 'CWNA:射频数学计算'\ndate: 2022-01-12 09:32:41\ntags: 'Wi-Fi'\n---\n\n射频计算中包含很多对数运算，不过工程应用无需进行复杂的计算。\n\n**10与3规则**\n用于工程近似计算。\n4条规则：\n> 每3dB增益（相对值），意味着绝对功率(mW)加倍；\n> 每3dB损耗（相对值），意味着绝对功率(mW)减半；\n> 每10dB增益，意味着绝对功率乘以10；\n> 每10dB损耗，意味着绝对功率除以10；\n\n多数802.11无线接口可以解析从-30dBm(1mW 的千分之一)到低至-100dBm(1mW的百亿分之一)的接收信号\n毫瓦分贝对照表\n\n|毫瓦分贝(dBm)|毫瓦(mW)|功率电平|\n|:----------:|:------:|:------:|\n|+20dBm|200mW|十分之一瓦|\n|+10dBm|100mW|百分之一瓦|\n|0dBm|1mW|千分之一瓦|\n|-10dBm|0.1mW|十分之一毫瓦|\n|-20dBm|0.01mW|百分之一毫瓦|\n|-30dBm|0.001mW|千分之一毫瓦|\n","slug":"CWNA-射频数学计算","published":1,"updated":"2022-01-12T01:56:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3x001o18jx7mgp6uhn","content":"<p>射频计算中包含很多对数运算，不过工程应用无需进行复杂的计算。</p>\n<p><strong>10与3规则</strong><br>用于工程近似计算。<br>4条规则：</p>\n<blockquote>\n<p>每3dB增益（相对值），意味着绝对功率(mW)加倍；<br>每3dB损耗（相对值），意味着绝对功率(mW)减半；<br>每10dB增益，意味着绝对功率乘以10；<br>每10dB损耗，意味着绝对功率除以10；</p>\n</blockquote>\n<p>多数802.11无线接口可以解析从-30dBm(1mW 的千分之一)到低至-100dBm(1mW的百亿分之一)的接收信号<br>毫瓦分贝对照表</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">毫瓦分贝(dBm)</th>\n<th style=\"text-align:center\">毫瓦(mW)</th>\n<th style=\"text-align:center\">功率电平</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">+20dBm</td>\n<td style=\"text-align:center\">200mW</td>\n<td style=\"text-align:center\">十分之一瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">+10dBm</td>\n<td style=\"text-align:center\">100mW</td>\n<td style=\"text-align:center\">百分之一瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">0dBm</td>\n<td style=\"text-align:center\">1mW</td>\n<td style=\"text-align:center\">千分之一瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-10dBm</td>\n<td style=\"text-align:center\">0.1mW</td>\n<td style=\"text-align:center\">十分之一毫瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-20dBm</td>\n<td style=\"text-align:center\">0.01mW</td>\n<td style=\"text-align:center\">百分之一毫瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-30dBm</td>\n<td style=\"text-align:center\">0.001mW</td>\n<td style=\"text-align:center\">千分之一毫瓦</td>\n</tr>\n</tbody>\n</table>\n</div>\n","site":{"data":{}},"excerpt":"","more":"<p>射频计算中包含很多对数运算，不过工程应用无需进行复杂的计算。</p>\n<p><strong>10与3规则</strong><br>用于工程近似计算。<br>4条规则：</p>\n<blockquote>\n<p>每3dB增益（相对值），意味着绝对功率(mW)加倍；<br>每3dB损耗（相对值），意味着绝对功率(mW)减半；<br>每10dB增益，意味着绝对功率乘以10；<br>每10dB损耗，意味着绝对功率除以10；</p>\n</blockquote>\n<p>多数802.11无线接口可以解析从-30dBm(1mW 的千分之一)到低至-100dBm(1mW的百亿分之一)的接收信号<br>毫瓦分贝对照表</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">毫瓦分贝(dBm)</th>\n<th style=\"text-align:center\">毫瓦(mW)</th>\n<th style=\"text-align:center\">功率电平</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">+20dBm</td>\n<td style=\"text-align:center\">200mW</td>\n<td style=\"text-align:center\">十分之一瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">+10dBm</td>\n<td style=\"text-align:center\">100mW</td>\n<td style=\"text-align:center\">百分之一瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">0dBm</td>\n<td style=\"text-align:center\">1mW</td>\n<td style=\"text-align:center\">千分之一瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-10dBm</td>\n<td style=\"text-align:center\">0.1mW</td>\n<td style=\"text-align:center\">十分之一毫瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-20dBm</td>\n<td style=\"text-align:center\">0.01mW</td>\n<td style=\"text-align:center\">百分之一毫瓦</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-30dBm</td>\n<td style=\"text-align:center\">0.001mW</td>\n<td style=\"text-align:center\">千分之一毫瓦</td>\n</tr>\n</tbody>\n</table>\n</div>\n"},{"title":"CWNA:无线局域网安全体系结构(二)","date":"2022-02-28T09:31:28.000Z","_content":"\n### 强健安全机制\nIEEE802.11-2016标准定义802.1X/EAP作为企业无线网络的身份验证机制；\n定义预共享密钥或密码短语作为家用无线网络的身份验证机制。\n\n**强健安全网络**\nIEEE802.11-2016定义了强健安全网络（RSN）和强健安全网络关联（RSNA）。\n两台终端必须验证彼此的身份并建立关联，且通过四次握手过程生成动态加密密钥，这个关联称为RSNA\n\n**身份验证与授权**\n身份验证必须先于授权进行。\n\n**预共享密钥身份验证**\nWPA/WPA2个人版支持最终用户输入长度为8~63个字符的简单ASCII字符串。\n\n强健安全网络使用预共享密钥长度为256位，以十六进制则表示为64个字符。接入点和所有客户端都会配置预共享密钥，它是一种静态密钥。\n\n系统的密码短语-预共享密钥映射（passphrase-to-PSK mapping)函数负责将密码短语转换位256位的预共享密钥。它旨在方便普通家庭\n用户配置密码短语。\n\n256位预共享密钥可以充当成对主密钥（PMK）。PMK位四次握手提供种子，四次握手用于生成动态加密密钥。因此，WPA/WPA2个人半使用的\n预共享密钥实际上与PMK完全相同。\n\n**专有预共享密钥身份验证**\nWPA/WPA2的密码短语是静态的，很容易受社会工程学攻击。\n\n专有预共享密钥身份验证位每个用户设置唯一的密码，为每个用户或每台设备提供唯一的预共享密钥功能。\n如果摸一个预共享密钥泄漏，管理员只需撤销这一个密钥，不必重新配置所有接入点和最终用户设备。\n\n**对等实体同时验证**\nSAE交换期间，802.11终端之间不会传输密码短语。\n它以蜻蜓密钥交换（Dragonfly key exchange）为基础，采用零知识证明（zero-knowledge proof）密钥交换，用户或设备必须在不透露\n密码的情况下证明自己掌握密码。\n\n**802.1X/EAP框架**\nEAP类型众多，它是一种二层身份验证协议。\n802.1X是基于端口的网络访问控制标准。既能用于无线环境，也能用于有线环境。\n\n802.1X授权框架主要包括请求方，认证方、认证服务器3个要素。\n请求方， 要求身份验证并访问网络资源的主机。 通常是手机或平板。\n认证方， 允许或拒绝流量通过其端口的设备。 通常是接入点或无线局域网控制器。\n认证服务器， 验证请求方提供的凭证，并将请求方是否获得授权的结果通知认证方。认证服务器一般是 RADIUS服务器。\n\n\n802.1X/EAP帧交换过程\n\n请求方---------------------------认证方----------------------------认证服务器\n1. 802.11关联请求 --------------->    -------受控端口和非受控端口关闭---\n2. EAPO-start ------------------>    --------受控端口和非受控端口关闭--\n3. EAP-request/identity<---------    --------非受控端口开启-----------\n4. EAP-response/identity---------> 5. RAIDUS-access-request--------->\n7. EAP-challenge request<--------- 6. RADIUS-access-challenge------->\n8. EAP-challenge response--------->9. RADIUS-access-request--------->\n11. EAP-success<------------------10. RADIUS-access-accept<----------\n12. 创建动态加密密钥的四次握手<----->\n13. 受控端口开启，允许访问网络。\n\n802.1X框架与EAP相互协作，提供验证用户和设备身份以及授权客户端访问网络资源的必要机制。\n\n动态密钥的优点：\n1. 不会受到社会工程学的攻击\n2. 每位用户有一把不同且唯一的密钥。\n\n**四次握手**\n\n请求方----------------------------------------------------------------认证方\nPMK已知---------------------------------------------------------------PMK已知\n生成SNonce------------------------------------------------------------生成ANonce\nMessage 1: EAPOL-Key(ANonce, Unicast)<----------------------------------\n派生PTK\nMessage 2: EAPOL-Key(SNonce, Unicast, MIC)----------------------------->\n----------------------------------------------------------------------派生PTK，如果需要则生成GTK\nMessage 3: EAPOL-Key(Install PTK, Unicast, MIC, Encrypted GTK)<---------\nMessage 4: EAPL-Key(Unicast, MIC)-------------------------------------->\n安装PTK和GTK-----------------------------------------------------------安装PTK\n\n最终的密钥为成对瞬时密钥（PTK）和组临时密钥（GTK）。PTK用于加密解密单播流量；GTK用于加密解密广播和多播流量。\n\nTKIP加密是正对WEP的加强版；CCMP加密优于TKIP；GCMP是更新的加密方式，无法向后兼容，接入点和客户端需要升级硬件。\n","source":"_posts/CWNA-无线局域网安全体系结构-二.md","raw":"---\ntitle: 'CWNA:无线局域网安全体系结构(二)'\ndate: 2022-02-28 17:31:28\ntags: 'Wi-Fi'\n---\n\n### 强健安全机制\nIEEE802.11-2016标准定义802.1X/EAP作为企业无线网络的身份验证机制；\n定义预共享密钥或密码短语作为家用无线网络的身份验证机制。\n\n**强健安全网络**\nIEEE802.11-2016定义了强健安全网络（RSN）和强健安全网络关联（RSNA）。\n两台终端必须验证彼此的身份并建立关联，且通过四次握手过程生成动态加密密钥，这个关联称为RSNA\n\n**身份验证与授权**\n身份验证必须先于授权进行。\n\n**预共享密钥身份验证**\nWPA/WPA2个人版支持最终用户输入长度为8~63个字符的简单ASCII字符串。\n\n强健安全网络使用预共享密钥长度为256位，以十六进制则表示为64个字符。接入点和所有客户端都会配置预共享密钥，它是一种静态密钥。\n\n系统的密码短语-预共享密钥映射（passphrase-to-PSK mapping)函数负责将密码短语转换位256位的预共享密钥。它旨在方便普通家庭\n用户配置密码短语。\n\n256位预共享密钥可以充当成对主密钥（PMK）。PMK位四次握手提供种子，四次握手用于生成动态加密密钥。因此，WPA/WPA2个人半使用的\n预共享密钥实际上与PMK完全相同。\n\n**专有预共享密钥身份验证**\nWPA/WPA2的密码短语是静态的，很容易受社会工程学攻击。\n\n专有预共享密钥身份验证位每个用户设置唯一的密码，为每个用户或每台设备提供唯一的预共享密钥功能。\n如果摸一个预共享密钥泄漏，管理员只需撤销这一个密钥，不必重新配置所有接入点和最终用户设备。\n\n**对等实体同时验证**\nSAE交换期间，802.11终端之间不会传输密码短语。\n它以蜻蜓密钥交换（Dragonfly key exchange）为基础，采用零知识证明（zero-knowledge proof）密钥交换，用户或设备必须在不透露\n密码的情况下证明自己掌握密码。\n\n**802.1X/EAP框架**\nEAP类型众多，它是一种二层身份验证协议。\n802.1X是基于端口的网络访问控制标准。既能用于无线环境，也能用于有线环境。\n\n802.1X授权框架主要包括请求方，认证方、认证服务器3个要素。\n请求方， 要求身份验证并访问网络资源的主机。 通常是手机或平板。\n认证方， 允许或拒绝流量通过其端口的设备。 通常是接入点或无线局域网控制器。\n认证服务器， 验证请求方提供的凭证，并将请求方是否获得授权的结果通知认证方。认证服务器一般是 RADIUS服务器。\n\n\n802.1X/EAP帧交换过程\n\n请求方---------------------------认证方----------------------------认证服务器\n1. 802.11关联请求 --------------->    -------受控端口和非受控端口关闭---\n2. EAPO-start ------------------>    --------受控端口和非受控端口关闭--\n3. EAP-request/identity<---------    --------非受控端口开启-----------\n4. EAP-response/identity---------> 5. RAIDUS-access-request--------->\n7. EAP-challenge request<--------- 6. RADIUS-access-challenge------->\n8. EAP-challenge response--------->9. RADIUS-access-request--------->\n11. EAP-success<------------------10. RADIUS-access-accept<----------\n12. 创建动态加密密钥的四次握手<----->\n13. 受控端口开启，允许访问网络。\n\n802.1X框架与EAP相互协作，提供验证用户和设备身份以及授权客户端访问网络资源的必要机制。\n\n动态密钥的优点：\n1. 不会受到社会工程学的攻击\n2. 每位用户有一把不同且唯一的密钥。\n\n**四次握手**\n\n请求方----------------------------------------------------------------认证方\nPMK已知---------------------------------------------------------------PMK已知\n生成SNonce------------------------------------------------------------生成ANonce\nMessage 1: EAPOL-Key(ANonce, Unicast)<----------------------------------\n派生PTK\nMessage 2: EAPOL-Key(SNonce, Unicast, MIC)----------------------------->\n----------------------------------------------------------------------派生PTK，如果需要则生成GTK\nMessage 3: EAPOL-Key(Install PTK, Unicast, MIC, Encrypted GTK)<---------\nMessage 4: EAPL-Key(Unicast, MIC)-------------------------------------->\n安装PTK和GTK-----------------------------------------------------------安装PTK\n\n最终的密钥为成对瞬时密钥（PTK）和组临时密钥（GTK）。PTK用于加密解密单播流量；GTK用于加密解密广播和多播流量。\n\nTKIP加密是正对WEP的加强版；CCMP加密优于TKIP；GCMP是更新的加密方式，无法向后兼容，接入点和客户端需要升级硬件。\n","slug":"CWNA-无线局域网安全体系结构-二","published":1,"updated":"2022-02-28T10:35:27.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3y001q18jxc9mi7677","content":"<h3 id=\"强健安全机制\"><a href=\"#强健安全机制\" class=\"headerlink\" title=\"强健安全机制\"></a>强健安全机制</h3><p>IEEE802.11-2016标准定义802.1X/EAP作为企业无线网络的身份验证机制；<br>定义预共享密钥或密码短语作为家用无线网络的身份验证机制。</p>\n<p><strong>强健安全网络</strong><br>IEEE802.11-2016定义了强健安全网络（RSN）和强健安全网络关联（RSNA）。<br>两台终端必须验证彼此的身份并建立关联，且通过四次握手过程生成动态加密密钥，这个关联称为RSNA</p>\n<p><strong>身份验证与授权</strong><br>身份验证必须先于授权进行。</p>\n<p><strong>预共享密钥身份验证</strong><br>WPA/WPA2个人版支持最终用户输入长度为8~63个字符的简单ASCII字符串。</p>\n<p>强健安全网络使用预共享密钥长度为256位，以十六进制则表示为64个字符。接入点和所有客户端都会配置预共享密钥，它是一种静态密钥。</p>\n<p>系统的密码短语-预共享密钥映射（passphrase-to-PSK mapping)函数负责将密码短语转换位256位的预共享密钥。它旨在方便普通家庭<br>用户配置密码短语。</p>\n<p>256位预共享密钥可以充当成对主密钥（PMK）。PMK位四次握手提供种子，四次握手用于生成动态加密密钥。因此，WPA/WPA2个人半使用的<br>预共享密钥实际上与PMK完全相同。</p>\n<p><strong>专有预共享密钥身份验证</strong><br>WPA/WPA2的密码短语是静态的，很容易受社会工程学攻击。</p>\n<p>专有预共享密钥身份验证位每个用户设置唯一的密码，为每个用户或每台设备提供唯一的预共享密钥功能。<br>如果摸一个预共享密钥泄漏，管理员只需撤销这一个密钥，不必重新配置所有接入点和最终用户设备。</p>\n<p><strong>对等实体同时验证</strong><br>SAE交换期间，802.11终端之间不会传输密码短语。<br>它以蜻蜓密钥交换（Dragonfly key exchange）为基础，采用零知识证明（zero-knowledge proof）密钥交换，用户或设备必须在不透露<br>密码的情况下证明自己掌握密码。</p>\n<p><strong>802.1X/EAP框架</strong><br>EAP类型众多，它是一种二层身份验证协议。<br>802.1X是基于端口的网络访问控制标准。既能用于无线环境，也能用于有线环境。</p>\n<p>802.1X授权框架主要包括请求方，认证方、认证服务器3个要素。<br>请求方， 要求身份验证并访问网络资源的主机。 通常是手机或平板。<br>认证方， 允许或拒绝流量通过其端口的设备。 通常是接入点或无线局域网控制器。<br>认证服务器， 验证请求方提供的凭证，并将请求方是否获得授权的结果通知认证方。认证服务器一般是 RADIUS服务器。</p>\n<p>802.1X/EAP帧交换过程</p>\n<p>请求方—————————————-认证方——————————————认证服务器</p>\n<ol>\n<li>802.11关联请求 ———————-&gt;    ———-受控端口和非受控端口关闭—-</li>\n<li>EAPO-start —————————&gt;    ————受控端口和非受控端口关闭—</li>\n<li>EAP-request/identity&lt;————-    ————非受控端口开启—————-</li>\n<li>EAP-response/identity————-&gt; 5. RAIDUS-access-request————-&gt;</li>\n<li>EAP-challenge request&lt;————- 6. RADIUS-access-challenge———-&gt;</li>\n<li>EAP-challenge response————-&gt;9. RADIUS-access-request————-&gt;</li>\n<li>EAP-success&lt;—————————10. RADIUS-access-accept&lt;—————</li>\n<li>创建动态加密密钥的四次握手&lt;——-&gt;</li>\n<li>受控端口开启，允许访问网络。</li>\n</ol>\n<p>802.1X框架与EAP相互协作，提供验证用户和设备身份以及授权客户端访问网络资源的必要机制。</p>\n<p>动态密钥的优点：</p>\n<ol>\n<li>不会受到社会工程学的攻击</li>\n<li>每位用户有一把不同且唯一的密钥。</li>\n</ol>\n<p><strong>四次握手</strong></p>\n<p>请求方————————————————————————————————认证方<br>PMK已知———————————————————————————————-PMK已知<br>生成SNonce——————————————————————————————生成ANonce<br>Message 1: EAPOL-Key(ANonce, Unicast)&lt;—————————————————<br>派生PTK<br>Message 2: EAPOL-Key(SNonce, Unicast, MIC)——————————————-&gt;<br>———————————————————————————————————派生PTK，如果需要则生成GTK<br>Message 3: EAPOL-Key(Install PTK, Unicast, MIC, Encrypted GTK)&lt;————-<br>Message 4: EAPL-Key(Unicast, MIC)———————————————————&gt;<br>安装PTK和GTK—————————————————————————————-安装PTK</p>\n<p>最终的密钥为成对瞬时密钥（PTK）和组临时密钥（GTK）。PTK用于加密解密单播流量；GTK用于加密解密广播和多播流量。</p>\n<p>TKIP加密是正对WEP的加强版；CCMP加密优于TKIP；GCMP是更新的加密方式，无法向后兼容，接入点和客户端需要升级硬件。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"强健安全机制\"><a href=\"#强健安全机制\" class=\"headerlink\" title=\"强健安全机制\"></a>强健安全机制</h3><p>IEEE802.11-2016标准定义802.1X/EAP作为企业无线网络的身份验证机制；<br>定义预共享密钥或密码短语作为家用无线网络的身份验证机制。</p>\n<p><strong>强健安全网络</strong><br>IEEE802.11-2016定义了强健安全网络（RSN）和强健安全网络关联（RSNA）。<br>两台终端必须验证彼此的身份并建立关联，且通过四次握手过程生成动态加密密钥，这个关联称为RSNA</p>\n<p><strong>身份验证与授权</strong><br>身份验证必须先于授权进行。</p>\n<p><strong>预共享密钥身份验证</strong><br>WPA/WPA2个人版支持最终用户输入长度为8~63个字符的简单ASCII字符串。</p>\n<p>强健安全网络使用预共享密钥长度为256位，以十六进制则表示为64个字符。接入点和所有客户端都会配置预共享密钥，它是一种静态密钥。</p>\n<p>系统的密码短语-预共享密钥映射（passphrase-to-PSK mapping)函数负责将密码短语转换位256位的预共享密钥。它旨在方便普通家庭<br>用户配置密码短语。</p>\n<p>256位预共享密钥可以充当成对主密钥（PMK）。PMK位四次握手提供种子，四次握手用于生成动态加密密钥。因此，WPA/WPA2个人半使用的<br>预共享密钥实际上与PMK完全相同。</p>\n<p><strong>专有预共享密钥身份验证</strong><br>WPA/WPA2的密码短语是静态的，很容易受社会工程学攻击。</p>\n<p>专有预共享密钥身份验证位每个用户设置唯一的密码，为每个用户或每台设备提供唯一的预共享密钥功能。<br>如果摸一个预共享密钥泄漏，管理员只需撤销这一个密钥，不必重新配置所有接入点和最终用户设备。</p>\n<p><strong>对等实体同时验证</strong><br>SAE交换期间，802.11终端之间不会传输密码短语。<br>它以蜻蜓密钥交换（Dragonfly key exchange）为基础，采用零知识证明（zero-knowledge proof）密钥交换，用户或设备必须在不透露<br>密码的情况下证明自己掌握密码。</p>\n<p><strong>802.1X/EAP框架</strong><br>EAP类型众多，它是一种二层身份验证协议。<br>802.1X是基于端口的网络访问控制标准。既能用于无线环境，也能用于有线环境。</p>\n<p>802.1X授权框架主要包括请求方，认证方、认证服务器3个要素。<br>请求方， 要求身份验证并访问网络资源的主机。 通常是手机或平板。<br>认证方， 允许或拒绝流量通过其端口的设备。 通常是接入点或无线局域网控制器。<br>认证服务器， 验证请求方提供的凭证，并将请求方是否获得授权的结果通知认证方。认证服务器一般是 RADIUS服务器。</p>\n<p>802.1X/EAP帧交换过程</p>\n<p>请求方—————————————-认证方——————————————认证服务器</p>\n<ol>\n<li>802.11关联请求 ———————-&gt;    ———-受控端口和非受控端口关闭—-</li>\n<li>EAPO-start —————————&gt;    ————受控端口和非受控端口关闭—</li>\n<li>EAP-request/identity&lt;————-    ————非受控端口开启—————-</li>\n<li>EAP-response/identity————-&gt; 5. RAIDUS-access-request————-&gt;</li>\n<li>EAP-challenge request&lt;————- 6. RADIUS-access-challenge———-&gt;</li>\n<li>EAP-challenge response————-&gt;9. RADIUS-access-request————-&gt;</li>\n<li>EAP-success&lt;—————————10. RADIUS-access-accept&lt;—————</li>\n<li>创建动态加密密钥的四次握手&lt;——-&gt;</li>\n<li>受控端口开启，允许访问网络。</li>\n</ol>\n<p>802.1X框架与EAP相互协作，提供验证用户和设备身份以及授权客户端访问网络资源的必要机制。</p>\n<p>动态密钥的优点：</p>\n<ol>\n<li>不会受到社会工程学的攻击</li>\n<li>每位用户有一把不同且唯一的密钥。</li>\n</ol>\n<p><strong>四次握手</strong></p>\n<p>请求方————————————————————————————————认证方<br>PMK已知———————————————————————————————-PMK已知<br>生成SNonce——————————————————————————————生成ANonce<br>Message 1: EAPOL-Key(ANonce, Unicast)&lt;—————————————————<br>派生PTK<br>Message 2: EAPOL-Key(SNonce, Unicast, MIC)——————————————-&gt;<br>———————————————————————————————————派生PTK，如果需要则生成GTK<br>Message 3: EAPOL-Key(Install PTK, Unicast, MIC, Encrypted GTK)&lt;————-<br>Message 4: EAPL-Key(Unicast, MIC)———————————————————&gt;<br>安装PTK和GTK—————————————————————————————-安装PTK</p>\n<p>最终的密钥为成对瞬时密钥（PTK）和组临时密钥（GTK）。PTK用于加密解密单播流量；GTK用于加密解密广播和多播流量。</p>\n<p>TKIP加密是正对WEP的加强版；CCMP加密优于TKIP；GCMP是更新的加密方式，无法向后兼容，接入点和客户端需要升级硬件。</p>\n"},{"title":"CWNA:无线局域网安全体系结构","date":"2022-02-25T08:22:49.000Z","_content":"\n无线局域网安全基础知识\n> 数据隐私与完整性\n> 身份验证、授权与记账\n> 分段\n> 监控与策略\n\n遗留安全机制\n> 遗留的身份验证机制\n> 静态WEP加密\n> MAC过滤\n> SSID隐藏\n\n强健安全机制\n> 强健安全网络\n> 身份验证与授权\n> 预共享密钥身份验证\n> 专有的预共享密钥身份验证\n> 对等实体同时验证\n> 802.1X/EAP框架\n> EAP类型\n> 动态加密密钥生成\n> 四次握手\n> 无线局域网加密\n> TKIP加密\n> CCMP加密\n> CGMP加密\n\n流量分段\n> 虚拟局域网\n> 基于角色的访问控制\n\nWPA3\n\n虚拟专用网安全\n> VPN基础知识\n> 三层VPN\n> SSL VPN\n> VPN部署\n\n### 无线局域网安全基础知识\n考虑射频信号传输的无缚性和开放性，为确保数据隐私，采用强有力的加密机制必不可少。\n\n**数据隐私与完整性**\n在计算机行业中，将明文转换为密文的过程通常称为加密。\n将密文还原称明文的过程称为解密。\n\nARC4算法是一种流密码。\nAES算法安全性优于ARC4流密码的分组密码。\n\n\nWEP采用完整性校验值（ICV）\nTKIP采用消息完整性校验（MIC）\nCCMP采用消息完整性校验（MIC），不过安全性由于TKIP或WEP的数据完整性机制。\n\n**身份验证、授权与记账（AAA）**\n身份验证，验证身份和凭证是否有效。\n\n授权，决定是否给予用户或设备访问网络资源的权限。\n\n记账，跟踪用户或设备使用网络资源的情况。\n\n**分段**\n目的是在网络中分隔用户流量。\n分段能结合基于角色的访问控制使用。\n\n**监控与策略**\n监控无线网络的性能；\n监控无线网络的攻击和入侵。\n\n### 遗留安全机制\n遗留的安全机制早已破解。\n\n**遗留的身份验证机制**\n802.11原始标准定义了两种身份验证机制：开放系统身份验证  和  共享密钥身份验证。\n\n遗留的身份验证机制与其说是验证用户身份，不如说是验证功能，其目的是确定两台设备是否为合法的802.11设备。\n\n共享密钥身份验证采用WEP验证客户端都能通过验证，并关联到接入点后获得网络资源的访问权限，需要4次身份验证帧：\n1）客户端向接入点发送身份验证请求帧；\n2）接入点向客户端发送包含明文质询消息的身份验证响应帧；\n3）客户端加密明文质询消息，将其封装到另一个身份验证请求帧并发生给接入点。\n4）接入点解密客户端质询消息，并与原质询消息比较。\n如果二者匹配，验证成功；\n如果二者不匹配，拒绝客户端的身份验证请求。\n\n安全隐患：任何人只有截获接入点的明文质询消息以及客户端返回的加密质询消息，就可能提取静态WEP密钥。攻击者一旦破解WEP密钥，\n就可以之间破解数据帧并之间访问网络，网络将无密码可言。\n\n**静态WEP加密**\nWEP旨在实现3个目标：\n机密性，在传输前加密数据以提供隐私性。\n访问控制，一种简单的授权形式。\n数据完整性，加密前需要计算数据完整性和（ICV），防止数据遭到篡改。\n\n64位WEP称为WEP-40, 由40位静态密钥和24位初始化向量构成。 由10个16进制或5个ASCII字符构成。\n128位WEP称为WEP-104, 由104位静态密钥和24位出生向量构成。由26个16进制或13个ASCII字符构成。\n\n客户端和接入点最多能配置4把独立的静态WEP密钥，用户可选择一把作为默认的静态密钥。 可以采用不同的密钥分别加密发送流量和接收流量。\n\nWEP存在大量安全隐患，4种主要的攻击：\nIV冲突攻击， 由于24位的IV以明文形式传输且每一帧的IV都不同，如果采用WEP加密的流量大，那么IV在一定时间内必定重复。如果冲突发送，攻击者很容易破解密钥。\n\n弱密钥攻击， ARC4会生成一部分弱IV密钥。通过恢复已知的弱IV密钥，攻击者很容易破解密码。\n\n回注攻击， 对流量较少的网络，攻击者利用黑客工具发动数据包回注攻击，以加快收集弱IV密钥的速率。\n\n比特翻转攻击， ICV数据完整性校验安全性较差，经过WEP加密的数据包可能遭到篡改。\n\n**MAC过滤**\n每块网卡有唯一的物理地址，MAC地址。\n所有的MAC过滤都是特定于供应商的。\nMAC地址可以欺骗或假冒。\n\n由于MAC地址容易遭到欺骗且配置MAC过滤器比较烦琐，因此MAC过滤并非包含企业无线网的可靠手段。\n\n**SSID隐藏**\n多少接入点提供封闭网络，隐藏SSID或隐身模式的设置，启用后就能隐藏无线网络的名称。 这时信标帧的SSID字段位空。\n\n启用封闭网络的接入点仍然会响应发送定向探询请求帧（包含特定SSID）的客户端。如此一来，合法的用户仍然可以通过身份验证并关联到接入点，\n而没有配置正确SSID的客户端无法通过身份验证或关联到客户端。\n\n只有使用合适的工具，通常只需要几秒的时间就可以发送隐藏的SSID。强烈建议不要隐藏SSID。\n","source":"_posts/CWNA-无线局域网安全体系结构.md","raw":"---\ntitle: 'CWNA:无线局域网安全体系结构'\ndate: 2022-02-25 16:22:49\ntags: 'Wi-Fi'\n---\n\n无线局域网安全基础知识\n> 数据隐私与完整性\n> 身份验证、授权与记账\n> 分段\n> 监控与策略\n\n遗留安全机制\n> 遗留的身份验证机制\n> 静态WEP加密\n> MAC过滤\n> SSID隐藏\n\n强健安全机制\n> 强健安全网络\n> 身份验证与授权\n> 预共享密钥身份验证\n> 专有的预共享密钥身份验证\n> 对等实体同时验证\n> 802.1X/EAP框架\n> EAP类型\n> 动态加密密钥生成\n> 四次握手\n> 无线局域网加密\n> TKIP加密\n> CCMP加密\n> CGMP加密\n\n流量分段\n> 虚拟局域网\n> 基于角色的访问控制\n\nWPA3\n\n虚拟专用网安全\n> VPN基础知识\n> 三层VPN\n> SSL VPN\n> VPN部署\n\n### 无线局域网安全基础知识\n考虑射频信号传输的无缚性和开放性，为确保数据隐私，采用强有力的加密机制必不可少。\n\n**数据隐私与完整性**\n在计算机行业中，将明文转换为密文的过程通常称为加密。\n将密文还原称明文的过程称为解密。\n\nARC4算法是一种流密码。\nAES算法安全性优于ARC4流密码的分组密码。\n\n\nWEP采用完整性校验值（ICV）\nTKIP采用消息完整性校验（MIC）\nCCMP采用消息完整性校验（MIC），不过安全性由于TKIP或WEP的数据完整性机制。\n\n**身份验证、授权与记账（AAA）**\n身份验证，验证身份和凭证是否有效。\n\n授权，决定是否给予用户或设备访问网络资源的权限。\n\n记账，跟踪用户或设备使用网络资源的情况。\n\n**分段**\n目的是在网络中分隔用户流量。\n分段能结合基于角色的访问控制使用。\n\n**监控与策略**\n监控无线网络的性能；\n监控无线网络的攻击和入侵。\n\n### 遗留安全机制\n遗留的安全机制早已破解。\n\n**遗留的身份验证机制**\n802.11原始标准定义了两种身份验证机制：开放系统身份验证  和  共享密钥身份验证。\n\n遗留的身份验证机制与其说是验证用户身份，不如说是验证功能，其目的是确定两台设备是否为合法的802.11设备。\n\n共享密钥身份验证采用WEP验证客户端都能通过验证，并关联到接入点后获得网络资源的访问权限，需要4次身份验证帧：\n1）客户端向接入点发送身份验证请求帧；\n2）接入点向客户端发送包含明文质询消息的身份验证响应帧；\n3）客户端加密明文质询消息，将其封装到另一个身份验证请求帧并发生给接入点。\n4）接入点解密客户端质询消息，并与原质询消息比较。\n如果二者匹配，验证成功；\n如果二者不匹配，拒绝客户端的身份验证请求。\n\n安全隐患：任何人只有截获接入点的明文质询消息以及客户端返回的加密质询消息，就可能提取静态WEP密钥。攻击者一旦破解WEP密钥，\n就可以之间破解数据帧并之间访问网络，网络将无密码可言。\n\n**静态WEP加密**\nWEP旨在实现3个目标：\n机密性，在传输前加密数据以提供隐私性。\n访问控制，一种简单的授权形式。\n数据完整性，加密前需要计算数据完整性和（ICV），防止数据遭到篡改。\n\n64位WEP称为WEP-40, 由40位静态密钥和24位初始化向量构成。 由10个16进制或5个ASCII字符构成。\n128位WEP称为WEP-104, 由104位静态密钥和24位出生向量构成。由26个16进制或13个ASCII字符构成。\n\n客户端和接入点最多能配置4把独立的静态WEP密钥，用户可选择一把作为默认的静态密钥。 可以采用不同的密钥分别加密发送流量和接收流量。\n\nWEP存在大量安全隐患，4种主要的攻击：\nIV冲突攻击， 由于24位的IV以明文形式传输且每一帧的IV都不同，如果采用WEP加密的流量大，那么IV在一定时间内必定重复。如果冲突发送，攻击者很容易破解密钥。\n\n弱密钥攻击， ARC4会生成一部分弱IV密钥。通过恢复已知的弱IV密钥，攻击者很容易破解密码。\n\n回注攻击， 对流量较少的网络，攻击者利用黑客工具发动数据包回注攻击，以加快收集弱IV密钥的速率。\n\n比特翻转攻击， ICV数据完整性校验安全性较差，经过WEP加密的数据包可能遭到篡改。\n\n**MAC过滤**\n每块网卡有唯一的物理地址，MAC地址。\n所有的MAC过滤都是特定于供应商的。\nMAC地址可以欺骗或假冒。\n\n由于MAC地址容易遭到欺骗且配置MAC过滤器比较烦琐，因此MAC过滤并非包含企业无线网的可靠手段。\n\n**SSID隐藏**\n多少接入点提供封闭网络，隐藏SSID或隐身模式的设置，启用后就能隐藏无线网络的名称。 这时信标帧的SSID字段位空。\n\n启用封闭网络的接入点仍然会响应发送定向探询请求帧（包含特定SSID）的客户端。如此一来，合法的用户仍然可以通过身份验证并关联到接入点，\n而没有配置正确SSID的客户端无法通过身份验证或关联到客户端。\n\n只有使用合适的工具，通常只需要几秒的时间就可以发送隐藏的SSID。强烈建议不要隐藏SSID。\n","slug":"CWNA-无线局域网安全体系结构","published":1,"updated":"2022-02-28T08:28:11.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud3z001s18jx3rbt1d7l","content":"<p>无线局域网安全基础知识</p>\n<blockquote>\n<p>数据隐私与完整性<br>身份验证、授权与记账<br>分段<br>监控与策略</p>\n</blockquote>\n<p>遗留安全机制</p>\n<blockquote>\n<p>遗留的身份验证机制<br>静态WEP加密<br>MAC过滤<br>SSID隐藏</p>\n</blockquote>\n<p>强健安全机制</p>\n<blockquote>\n<p>强健安全网络<br>身份验证与授权<br>预共享密钥身份验证<br>专有的预共享密钥身份验证<br>对等实体同时验证<br>802.1X/EAP框架<br>EAP类型<br>动态加密密钥生成<br>四次握手<br>无线局域网加密<br>TKIP加密<br>CCMP加密<br>CGMP加密</p>\n</blockquote>\n<p>流量分段</p>\n<blockquote>\n<p>虚拟局域网<br>基于角色的访问控制</p>\n</blockquote>\n<p>WPA3</p>\n<p>虚拟专用网安全</p>\n<blockquote>\n<p>VPN基础知识<br>三层VPN<br>SSL VPN<br>VPN部署</p>\n</blockquote>\n<h3 id=\"无线局域网安全基础知识\"><a href=\"#无线局域网安全基础知识\" class=\"headerlink\" title=\"无线局域网安全基础知识\"></a>无线局域网安全基础知识</h3><p>考虑射频信号传输的无缚性和开放性，为确保数据隐私，采用强有力的加密机制必不可少。</p>\n<p><strong>数据隐私与完整性</strong><br>在计算机行业中，将明文转换为密文的过程通常称为加密。<br>将密文还原称明文的过程称为解密。</p>\n<p>ARC4算法是一种流密码。<br>AES算法安全性优于ARC4流密码的分组密码。</p>\n<p>WEP采用完整性校验值（ICV）<br>TKIP采用消息完整性校验（MIC）<br>CCMP采用消息完整性校验（MIC），不过安全性由于TKIP或WEP的数据完整性机制。</p>\n<p><strong>身份验证、授权与记账（AAA）</strong><br>身份验证，验证身份和凭证是否有效。</p>\n<p>授权，决定是否给予用户或设备访问网络资源的权限。</p>\n<p>记账，跟踪用户或设备使用网络资源的情况。</p>\n<p><strong>分段</strong><br>目的是在网络中分隔用户流量。<br>分段能结合基于角色的访问控制使用。</p>\n<p><strong>监控与策略</strong><br>监控无线网络的性能；<br>监控无线网络的攻击和入侵。</p>\n<h3 id=\"遗留安全机制\"><a href=\"#遗留安全机制\" class=\"headerlink\" title=\"遗留安全机制\"></a>遗留安全机制</h3><p>遗留的安全机制早已破解。</p>\n<p><strong>遗留的身份验证机制</strong><br>802.11原始标准定义了两种身份验证机制：开放系统身份验证  和  共享密钥身份验证。</p>\n<p>遗留的身份验证机制与其说是验证用户身份，不如说是验证功能，其目的是确定两台设备是否为合法的802.11设备。</p>\n<p>共享密钥身份验证采用WEP验证客户端都能通过验证，并关联到接入点后获得网络资源的访问权限，需要4次身份验证帧：<br>1）客户端向接入点发送身份验证请求帧；<br>2）接入点向客户端发送包含明文质询消息的身份验证响应帧；<br>3）客户端加密明文质询消息，将其封装到另一个身份验证请求帧并发生给接入点。<br>4）接入点解密客户端质询消息，并与原质询消息比较。<br>如果二者匹配，验证成功；<br>如果二者不匹配，拒绝客户端的身份验证请求。</p>\n<p>安全隐患：任何人只有截获接入点的明文质询消息以及客户端返回的加密质询消息，就可能提取静态WEP密钥。攻击者一旦破解WEP密钥，<br>就可以之间破解数据帧并之间访问网络，网络将无密码可言。</p>\n<p><strong>静态WEP加密</strong><br>WEP旨在实现3个目标：<br>机密性，在传输前加密数据以提供隐私性。<br>访问控制，一种简单的授权形式。<br>数据完整性，加密前需要计算数据完整性和（ICV），防止数据遭到篡改。</p>\n<p>64位WEP称为WEP-40, 由40位静态密钥和24位初始化向量构成。 由10个16进制或5个ASCII字符构成。<br>128位WEP称为WEP-104, 由104位静态密钥和24位出生向量构成。由26个16进制或13个ASCII字符构成。</p>\n<p>客户端和接入点最多能配置4把独立的静态WEP密钥，用户可选择一把作为默认的静态密钥。 可以采用不同的密钥分别加密发送流量和接收流量。</p>\n<p>WEP存在大量安全隐患，4种主要的攻击：<br>IV冲突攻击， 由于24位的IV以明文形式传输且每一帧的IV都不同，如果采用WEP加密的流量大，那么IV在一定时间内必定重复。如果冲突发送，攻击者很容易破解密钥。</p>\n<p>弱密钥攻击， ARC4会生成一部分弱IV密钥。通过恢复已知的弱IV密钥，攻击者很容易破解密码。</p>\n<p>回注攻击， 对流量较少的网络，攻击者利用黑客工具发动数据包回注攻击，以加快收集弱IV密钥的速率。</p>\n<p>比特翻转攻击， ICV数据完整性校验安全性较差，经过WEP加密的数据包可能遭到篡改。</p>\n<p><strong>MAC过滤</strong><br>每块网卡有唯一的物理地址，MAC地址。<br>所有的MAC过滤都是特定于供应商的。<br>MAC地址可以欺骗或假冒。</p>\n<p>由于MAC地址容易遭到欺骗且配置MAC过滤器比较烦琐，因此MAC过滤并非包含企业无线网的可靠手段。</p>\n<p><strong>SSID隐藏</strong><br>多少接入点提供封闭网络，隐藏SSID或隐身模式的设置，启用后就能隐藏无线网络的名称。 这时信标帧的SSID字段位空。</p>\n<p>启用封闭网络的接入点仍然会响应发送定向探询请求帧（包含特定SSID）的客户端。如此一来，合法的用户仍然可以通过身份验证并关联到接入点，<br>而没有配置正确SSID的客户端无法通过身份验证或关联到客户端。</p>\n<p>只有使用合适的工具，通常只需要几秒的时间就可以发送隐藏的SSID。强烈建议不要隐藏SSID。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>无线局域网安全基础知识</p>\n<blockquote>\n<p>数据隐私与完整性<br>身份验证、授权与记账<br>分段<br>监控与策略</p>\n</blockquote>\n<p>遗留安全机制</p>\n<blockquote>\n<p>遗留的身份验证机制<br>静态WEP加密<br>MAC过滤<br>SSID隐藏</p>\n</blockquote>\n<p>强健安全机制</p>\n<blockquote>\n<p>强健安全网络<br>身份验证与授权<br>预共享密钥身份验证<br>专有的预共享密钥身份验证<br>对等实体同时验证<br>802.1X/EAP框架<br>EAP类型<br>动态加密密钥生成<br>四次握手<br>无线局域网加密<br>TKIP加密<br>CCMP加密<br>CGMP加密</p>\n</blockquote>\n<p>流量分段</p>\n<blockquote>\n<p>虚拟局域网<br>基于角色的访问控制</p>\n</blockquote>\n<p>WPA3</p>\n<p>虚拟专用网安全</p>\n<blockquote>\n<p>VPN基础知识<br>三层VPN<br>SSL VPN<br>VPN部署</p>\n</blockquote>\n<h3 id=\"无线局域网安全基础知识\"><a href=\"#无线局域网安全基础知识\" class=\"headerlink\" title=\"无线局域网安全基础知识\"></a>无线局域网安全基础知识</h3><p>考虑射频信号传输的无缚性和开放性，为确保数据隐私，采用强有力的加密机制必不可少。</p>\n<p><strong>数据隐私与完整性</strong><br>在计算机行业中，将明文转换为密文的过程通常称为加密。<br>将密文还原称明文的过程称为解密。</p>\n<p>ARC4算法是一种流密码。<br>AES算法安全性优于ARC4流密码的分组密码。</p>\n<p>WEP采用完整性校验值（ICV）<br>TKIP采用消息完整性校验（MIC）<br>CCMP采用消息完整性校验（MIC），不过安全性由于TKIP或WEP的数据完整性机制。</p>\n<p><strong>身份验证、授权与记账（AAA）</strong><br>身份验证，验证身份和凭证是否有效。</p>\n<p>授权，决定是否给予用户或设备访问网络资源的权限。</p>\n<p>记账，跟踪用户或设备使用网络资源的情况。</p>\n<p><strong>分段</strong><br>目的是在网络中分隔用户流量。<br>分段能结合基于角色的访问控制使用。</p>\n<p><strong>监控与策略</strong><br>监控无线网络的性能；<br>监控无线网络的攻击和入侵。</p>\n<h3 id=\"遗留安全机制\"><a href=\"#遗留安全机制\" class=\"headerlink\" title=\"遗留安全机制\"></a>遗留安全机制</h3><p>遗留的安全机制早已破解。</p>\n<p><strong>遗留的身份验证机制</strong><br>802.11原始标准定义了两种身份验证机制：开放系统身份验证  和  共享密钥身份验证。</p>\n<p>遗留的身份验证机制与其说是验证用户身份，不如说是验证功能，其目的是确定两台设备是否为合法的802.11设备。</p>\n<p>共享密钥身份验证采用WEP验证客户端都能通过验证，并关联到接入点后获得网络资源的访问权限，需要4次身份验证帧：<br>1）客户端向接入点发送身份验证请求帧；<br>2）接入点向客户端发送包含明文质询消息的身份验证响应帧；<br>3）客户端加密明文质询消息，将其封装到另一个身份验证请求帧并发生给接入点。<br>4）接入点解密客户端质询消息，并与原质询消息比较。<br>如果二者匹配，验证成功；<br>如果二者不匹配，拒绝客户端的身份验证请求。</p>\n<p>安全隐患：任何人只有截获接入点的明文质询消息以及客户端返回的加密质询消息，就可能提取静态WEP密钥。攻击者一旦破解WEP密钥，<br>就可以之间破解数据帧并之间访问网络，网络将无密码可言。</p>\n<p><strong>静态WEP加密</strong><br>WEP旨在实现3个目标：<br>机密性，在传输前加密数据以提供隐私性。<br>访问控制，一种简单的授权形式。<br>数据完整性，加密前需要计算数据完整性和（ICV），防止数据遭到篡改。</p>\n<p>64位WEP称为WEP-40, 由40位静态密钥和24位初始化向量构成。 由10个16进制或5个ASCII字符构成。<br>128位WEP称为WEP-104, 由104位静态密钥和24位出生向量构成。由26个16进制或13个ASCII字符构成。</p>\n<p>客户端和接入点最多能配置4把独立的静态WEP密钥，用户可选择一把作为默认的静态密钥。 可以采用不同的密钥分别加密发送流量和接收流量。</p>\n<p>WEP存在大量安全隐患，4种主要的攻击：<br>IV冲突攻击， 由于24位的IV以明文形式传输且每一帧的IV都不同，如果采用WEP加密的流量大，那么IV在一定时间内必定重复。如果冲突发送，攻击者很容易破解密钥。</p>\n<p>弱密钥攻击， ARC4会生成一部分弱IV密钥。通过恢复已知的弱IV密钥，攻击者很容易破解密码。</p>\n<p>回注攻击， 对流量较少的网络，攻击者利用黑客工具发动数据包回注攻击，以加快收集弱IV密钥的速率。</p>\n<p>比特翻转攻击， ICV数据完整性校验安全性较差，经过WEP加密的数据包可能遭到篡改。</p>\n<p><strong>MAC过滤</strong><br>每块网卡有唯一的物理地址，MAC地址。<br>所有的MAC过滤都是特定于供应商的。<br>MAC地址可以欺骗或假冒。</p>\n<p>由于MAC地址容易遭到欺骗且配置MAC过滤器比较烦琐，因此MAC过滤并非包含企业无线网的可靠手段。</p>\n<p><strong>SSID隐藏</strong><br>多少接入点提供封闭网络，隐藏SSID或隐身模式的设置，启用后就能隐藏无线网络的名称。 这时信标帧的SSID字段位空。</p>\n<p>启用封闭网络的接入点仍然会响应发送定向探询请求帧（包含特定SSID）的客户端。如此一来，合法的用户仍然可以通过身份验证并关联到接入点，<br>而没有配置正确SSID的客户端无法通过身份验证或关联到客户端。</p>\n<p>只有使用合适的工具，通常只需要几秒的时间就可以发送隐藏的SSID。强烈建议不要隐藏SSID。</p>\n"},{"title":"CWNA:无线局域网拓扑(二)","date":"2022-02-09T05:10:14.000Z","_content":"\n### 802.11服务集\nIEEE802.11-2016标准定义了多种称为服务集的802.11拓扑，他们描述了无线接口相互通信的方式。包括：\n> 基本服务集（BSS）\n> 扩展服务集（ESS）\n> 独立基本服务集（IBSS）\n> 个人基本服务集（PBSS）\n> 网状基本服务集（MBSS）\n> QoS基本服务集（QBSS）\n\n#### 服务集标识符\n服务集标识符(SSID),用于标识802.11无线网络的逻辑名。SSID由最多32个字符组成，并且区分大小写。\n大多数接入点提供了**隐藏SSID**的选项，隐藏后的网络名称只对合法的最终用户可见。\n为了客户端的无缝漫游，接入点必须通告使用具有相同安全性配置的同一个SSID。\n\n#### 基本服务集（BSS)\n无线局域网的基础拓扑结构。通常包括一个接入点和若干客户端。\n称为基本服务集的终端之间建立二层连接，称为相互关联。\n多数无线局域网供应商提供了客户端隔离功能，以阻止关联到接入点的客户端之间进行对等通信。\n\n#### 基本服务区\n接入点的实际覆盖区域。它是能够进行有效通信的区域。\n由于不同客户端对RSSI的解读有所不同，可以认为基本服务区的有效范围与加入基本服务集的客户端有关。\n\n\n#### 基本服务集标识符\n接入点无线接口的48位（6字节）MAC地址称为基本服务集标识符(BSSID)。\n每个基本服务集通过唯一的标识符标识，BSSID\nBSS切换，客户端从一个基本服务集移到另一个基本服务集的漫游过程。\nSSID是用户配置的无线局域网的逻辑名，BSSID是硬件制造商生产的无线接口的二层MAC地址。\n\n#### 多个基本服务集标识符\n可以通过子接口为无线接口创建多个BSSID，多BSSID在接入点无线接口原始MAC地址的基础上递增。\n不少无线局域网供应商支持单个接入点无线接口传输多达16个SSID。SSID过多，会增大MAC子层的开销，进而影响整体性能。\n\n#### 扩展服务集\n如果将基本服务集比作802.11拓扑的基石，那么扩展服务集（ESS）就是由基石垒起的整栋大厦。\n扩展服务集，由两个或多个基本服务集构成，这些基本服务集采用相同的配置，通过分布系统介质连接在一起。\n扩展服务区，是扩展基本服务集覆盖的区域，所有客户端都能在扩展服务区内通信和漫游。\n扩展服务集的逻辑名为 扩展服务集标识符（ESSID), 它与SSID是同义词。\n\n#### 独立基本服务集\nIBSS仅由客户端构成，不存在接入点。\n客户端之间直接传输帧，不会通过转发。所有客户端的帧交换都是对等的。\nIBSS钟的所有客户端必须竞争半双工介质的使用权，且在任何给定的时间内，只有一个客户端可以传输数据。\n为了确保通信的成功进行，IBSS中的所有客户端必须使用相同的频率信道传输数据，且构成IBSS的所有独立无线终端必须共享同一个SSID。\n首先发起IBSS的客户端会随机生成一个MAC地址格式的BSSID，它是一个虚拟MAC地址，充当IBSS的二层标识符。\n\n#### 个人基本服务集\nPBSS是一种支持802.11ad终端直接交换数据的802.11拓扑。只能由使用60GHz频段传输数据的802.11ad兼容无线接口创建。\n\n#### 网状基本服务集\n802.11-2016标准定义了网状基本服务集（MBSS）\n以无线方式分发网络流量。相当于二层路由。\n\n#### Qos基本服务集\nWiFi联盟规定，802.11产品必须支持QoS机制才能取得WMM认证。因此，大多数基本服务集可视为QBSS\n\n### 802.11配置模式\n**接入点模式** 通常称为AP\n接入点模式，用作分布系统的入口\n网状模式，也称中继器模式，作为无线回程无线接口使用。\n传感器模式，又称监控模式或扫描模式，用于无线入侵防御系统体系结构中。\n桥接模式，又称无线网桥。\n工作组网桥模式，为连接的802.3有线客户端提供无线回程。\n接入点被配置为客户端模式，充当客户设备，然后关联到其他接入点。\n\n\n**客户端模式**\n基础设施模式（infrastructure mode），经由接入点进行通信。它是客户设备的默认模式。通常称为STA\n自组织模式（ad hoc mode)，对等模式。 通常称为P2P\n\n","source":"_posts/CWNA-无线局域网拓扑-二.md","raw":"---\ntitle: 'CWNA:无线局域网拓扑(二)'\ndate: 2022-02-09 13:10:14\ntags: 'Wi-Fi'\n---\n\n### 802.11服务集\nIEEE802.11-2016标准定义了多种称为服务集的802.11拓扑，他们描述了无线接口相互通信的方式。包括：\n> 基本服务集（BSS）\n> 扩展服务集（ESS）\n> 独立基本服务集（IBSS）\n> 个人基本服务集（PBSS）\n> 网状基本服务集（MBSS）\n> QoS基本服务集（QBSS）\n\n#### 服务集标识符\n服务集标识符(SSID),用于标识802.11无线网络的逻辑名。SSID由最多32个字符组成，并且区分大小写。\n大多数接入点提供了**隐藏SSID**的选项，隐藏后的网络名称只对合法的最终用户可见。\n为了客户端的无缝漫游，接入点必须通告使用具有相同安全性配置的同一个SSID。\n\n#### 基本服务集（BSS)\n无线局域网的基础拓扑结构。通常包括一个接入点和若干客户端。\n称为基本服务集的终端之间建立二层连接，称为相互关联。\n多数无线局域网供应商提供了客户端隔离功能，以阻止关联到接入点的客户端之间进行对等通信。\n\n#### 基本服务区\n接入点的实际覆盖区域。它是能够进行有效通信的区域。\n由于不同客户端对RSSI的解读有所不同，可以认为基本服务区的有效范围与加入基本服务集的客户端有关。\n\n\n#### 基本服务集标识符\n接入点无线接口的48位（6字节）MAC地址称为基本服务集标识符(BSSID)。\n每个基本服务集通过唯一的标识符标识，BSSID\nBSS切换，客户端从一个基本服务集移到另一个基本服务集的漫游过程。\nSSID是用户配置的无线局域网的逻辑名，BSSID是硬件制造商生产的无线接口的二层MAC地址。\n\n#### 多个基本服务集标识符\n可以通过子接口为无线接口创建多个BSSID，多BSSID在接入点无线接口原始MAC地址的基础上递增。\n不少无线局域网供应商支持单个接入点无线接口传输多达16个SSID。SSID过多，会增大MAC子层的开销，进而影响整体性能。\n\n#### 扩展服务集\n如果将基本服务集比作802.11拓扑的基石，那么扩展服务集（ESS）就是由基石垒起的整栋大厦。\n扩展服务集，由两个或多个基本服务集构成，这些基本服务集采用相同的配置，通过分布系统介质连接在一起。\n扩展服务区，是扩展基本服务集覆盖的区域，所有客户端都能在扩展服务区内通信和漫游。\n扩展服务集的逻辑名为 扩展服务集标识符（ESSID), 它与SSID是同义词。\n\n#### 独立基本服务集\nIBSS仅由客户端构成，不存在接入点。\n客户端之间直接传输帧，不会通过转发。所有客户端的帧交换都是对等的。\nIBSS钟的所有客户端必须竞争半双工介质的使用权，且在任何给定的时间内，只有一个客户端可以传输数据。\n为了确保通信的成功进行，IBSS中的所有客户端必须使用相同的频率信道传输数据，且构成IBSS的所有独立无线终端必须共享同一个SSID。\n首先发起IBSS的客户端会随机生成一个MAC地址格式的BSSID，它是一个虚拟MAC地址，充当IBSS的二层标识符。\n\n#### 个人基本服务集\nPBSS是一种支持802.11ad终端直接交换数据的802.11拓扑。只能由使用60GHz频段传输数据的802.11ad兼容无线接口创建。\n\n#### 网状基本服务集\n802.11-2016标准定义了网状基本服务集（MBSS）\n以无线方式分发网络流量。相当于二层路由。\n\n#### Qos基本服务集\nWiFi联盟规定，802.11产品必须支持QoS机制才能取得WMM认证。因此，大多数基本服务集可视为QBSS\n\n### 802.11配置模式\n**接入点模式** 通常称为AP\n接入点模式，用作分布系统的入口\n网状模式，也称中继器模式，作为无线回程无线接口使用。\n传感器模式，又称监控模式或扫描模式，用于无线入侵防御系统体系结构中。\n桥接模式，又称无线网桥。\n工作组网桥模式，为连接的802.3有线客户端提供无线回程。\n接入点被配置为客户端模式，充当客户设备，然后关联到其他接入点。\n\n\n**客户端模式**\n基础设施模式（infrastructure mode），经由接入点进行通信。它是客户设备的默认模式。通常称为STA\n自组织模式（ad hoc mode)，对等模式。 通常称为P2P\n\n","slug":"CWNA-无线局域网拓扑-二","published":1,"updated":"2022-02-09T10:56:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud40001u18jxhxxr6gln","content":"<h3 id=\"802-11服务集\"><a href=\"#802-11服务集\" class=\"headerlink\" title=\"802.11服务集\"></a>802.11服务集</h3><p>IEEE802.11-2016标准定义了多种称为服务集的802.11拓扑，他们描述了无线接口相互通信的方式。包括：</p>\n<blockquote>\n<p>基本服务集（BSS）<br>扩展服务集（ESS）<br>独立基本服务集（IBSS）<br>个人基本服务集（PBSS）<br>网状基本服务集（MBSS）<br>QoS基本服务集（QBSS）</p>\n</blockquote>\n<h4 id=\"服务集标识符\"><a href=\"#服务集标识符\" class=\"headerlink\" title=\"服务集标识符\"></a>服务集标识符</h4><p>服务集标识符(SSID),用于标识802.11无线网络的逻辑名。SSID由最多32个字符组成，并且区分大小写。<br>大多数接入点提供了<strong>隐藏SSID</strong>的选项，隐藏后的网络名称只对合法的最终用户可见。<br>为了客户端的无缝漫游，接入点必须通告使用具有相同安全性配置的同一个SSID。</p>\n<h4 id=\"基本服务集（BSS\"><a href=\"#基本服务集（BSS\" class=\"headerlink\" title=\"基本服务集（BSS)\"></a>基本服务集（BSS)</h4><p>无线局域网的基础拓扑结构。通常包括一个接入点和若干客户端。<br>称为基本服务集的终端之间建立二层连接，称为相互关联。<br>多数无线局域网供应商提供了客户端隔离功能，以阻止关联到接入点的客户端之间进行对等通信。</p>\n<h4 id=\"基本服务区\"><a href=\"#基本服务区\" class=\"headerlink\" title=\"基本服务区\"></a>基本服务区</h4><p>接入点的实际覆盖区域。它是能够进行有效通信的区域。<br>由于不同客户端对RSSI的解读有所不同，可以认为基本服务区的有效范围与加入基本服务集的客户端有关。</p>\n<h4 id=\"基本服务集标识符\"><a href=\"#基本服务集标识符\" class=\"headerlink\" title=\"基本服务集标识符\"></a>基本服务集标识符</h4><p>接入点无线接口的48位（6字节）MAC地址称为基本服务集标识符(BSSID)。<br>每个基本服务集通过唯一的标识符标识，BSSID<br>BSS切换，客户端从一个基本服务集移到另一个基本服务集的漫游过程。<br>SSID是用户配置的无线局域网的逻辑名，BSSID是硬件制造商生产的无线接口的二层MAC地址。</p>\n<h4 id=\"多个基本服务集标识符\"><a href=\"#多个基本服务集标识符\" class=\"headerlink\" title=\"多个基本服务集标识符\"></a>多个基本服务集标识符</h4><p>可以通过子接口为无线接口创建多个BSSID，多BSSID在接入点无线接口原始MAC地址的基础上递增。<br>不少无线局域网供应商支持单个接入点无线接口传输多达16个SSID。SSID过多，会增大MAC子层的开销，进而影响整体性能。</p>\n<h4 id=\"扩展服务集\"><a href=\"#扩展服务集\" class=\"headerlink\" title=\"扩展服务集\"></a>扩展服务集</h4><p>如果将基本服务集比作802.11拓扑的基石，那么扩展服务集（ESS）就是由基石垒起的整栋大厦。<br>扩展服务集，由两个或多个基本服务集构成，这些基本服务集采用相同的配置，通过分布系统介质连接在一起。<br>扩展服务区，是扩展基本服务集覆盖的区域，所有客户端都能在扩展服务区内通信和漫游。<br>扩展服务集的逻辑名为 扩展服务集标识符（ESSID), 它与SSID是同义词。</p>\n<h4 id=\"独立基本服务集\"><a href=\"#独立基本服务集\" class=\"headerlink\" title=\"独立基本服务集\"></a>独立基本服务集</h4><p>IBSS仅由客户端构成，不存在接入点。<br>客户端之间直接传输帧，不会通过转发。所有客户端的帧交换都是对等的。<br>IBSS钟的所有客户端必须竞争半双工介质的使用权，且在任何给定的时间内，只有一个客户端可以传输数据。<br>为了确保通信的成功进行，IBSS中的所有客户端必须使用相同的频率信道传输数据，且构成IBSS的所有独立无线终端必须共享同一个SSID。<br>首先发起IBSS的客户端会随机生成一个MAC地址格式的BSSID，它是一个虚拟MAC地址，充当IBSS的二层标识符。</p>\n<h4 id=\"个人基本服务集\"><a href=\"#个人基本服务集\" class=\"headerlink\" title=\"个人基本服务集\"></a>个人基本服务集</h4><p>PBSS是一种支持802.11ad终端直接交换数据的802.11拓扑。只能由使用60GHz频段传输数据的802.11ad兼容无线接口创建。</p>\n<h4 id=\"网状基本服务集\"><a href=\"#网状基本服务集\" class=\"headerlink\" title=\"网状基本服务集\"></a>网状基本服务集</h4><p>802.11-2016标准定义了网状基本服务集（MBSS）<br>以无线方式分发网络流量。相当于二层路由。</p>\n<h4 id=\"Qos基本服务集\"><a href=\"#Qos基本服务集\" class=\"headerlink\" title=\"Qos基本服务集\"></a>Qos基本服务集</h4><p>WiFi联盟规定，802.11产品必须支持QoS机制才能取得WMM认证。因此，大多数基本服务集可视为QBSS</p>\n<h3 id=\"802-11配置模式\"><a href=\"#802-11配置模式\" class=\"headerlink\" title=\"802.11配置模式\"></a>802.11配置模式</h3><p><strong>接入点模式</strong> 通常称为AP<br>接入点模式，用作分布系统的入口<br>网状模式，也称中继器模式，作为无线回程无线接口使用。<br>传感器模式，又称监控模式或扫描模式，用于无线入侵防御系统体系结构中。<br>桥接模式，又称无线网桥。<br>工作组网桥模式，为连接的802.3有线客户端提供无线回程。<br>接入点被配置为客户端模式，充当客户设备，然后关联到其他接入点。</p>\n<p><strong>客户端模式</strong><br>基础设施模式（infrastructure mode），经由接入点进行通信。它是客户设备的默认模式。通常称为STA<br>自组织模式（ad hoc mode)，对等模式。 通常称为P2P</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"802-11服务集\"><a href=\"#802-11服务集\" class=\"headerlink\" title=\"802.11服务集\"></a>802.11服务集</h3><p>IEEE802.11-2016标准定义了多种称为服务集的802.11拓扑，他们描述了无线接口相互通信的方式。包括：</p>\n<blockquote>\n<p>基本服务集（BSS）<br>扩展服务集（ESS）<br>独立基本服务集（IBSS）<br>个人基本服务集（PBSS）<br>网状基本服务集（MBSS）<br>QoS基本服务集（QBSS）</p>\n</blockquote>\n<h4 id=\"服务集标识符\"><a href=\"#服务集标识符\" class=\"headerlink\" title=\"服务集标识符\"></a>服务集标识符</h4><p>服务集标识符(SSID),用于标识802.11无线网络的逻辑名。SSID由最多32个字符组成，并且区分大小写。<br>大多数接入点提供了<strong>隐藏SSID</strong>的选项，隐藏后的网络名称只对合法的最终用户可见。<br>为了客户端的无缝漫游，接入点必须通告使用具有相同安全性配置的同一个SSID。</p>\n<h4 id=\"基本服务集（BSS\"><a href=\"#基本服务集（BSS\" class=\"headerlink\" title=\"基本服务集（BSS)\"></a>基本服务集（BSS)</h4><p>无线局域网的基础拓扑结构。通常包括一个接入点和若干客户端。<br>称为基本服务集的终端之间建立二层连接，称为相互关联。<br>多数无线局域网供应商提供了客户端隔离功能，以阻止关联到接入点的客户端之间进行对等通信。</p>\n<h4 id=\"基本服务区\"><a href=\"#基本服务区\" class=\"headerlink\" title=\"基本服务区\"></a>基本服务区</h4><p>接入点的实际覆盖区域。它是能够进行有效通信的区域。<br>由于不同客户端对RSSI的解读有所不同，可以认为基本服务区的有效范围与加入基本服务集的客户端有关。</p>\n<h4 id=\"基本服务集标识符\"><a href=\"#基本服务集标识符\" class=\"headerlink\" title=\"基本服务集标识符\"></a>基本服务集标识符</h4><p>接入点无线接口的48位（6字节）MAC地址称为基本服务集标识符(BSSID)。<br>每个基本服务集通过唯一的标识符标识，BSSID<br>BSS切换，客户端从一个基本服务集移到另一个基本服务集的漫游过程。<br>SSID是用户配置的无线局域网的逻辑名，BSSID是硬件制造商生产的无线接口的二层MAC地址。</p>\n<h4 id=\"多个基本服务集标识符\"><a href=\"#多个基本服务集标识符\" class=\"headerlink\" title=\"多个基本服务集标识符\"></a>多个基本服务集标识符</h4><p>可以通过子接口为无线接口创建多个BSSID，多BSSID在接入点无线接口原始MAC地址的基础上递增。<br>不少无线局域网供应商支持单个接入点无线接口传输多达16个SSID。SSID过多，会增大MAC子层的开销，进而影响整体性能。</p>\n<h4 id=\"扩展服务集\"><a href=\"#扩展服务集\" class=\"headerlink\" title=\"扩展服务集\"></a>扩展服务集</h4><p>如果将基本服务集比作802.11拓扑的基石，那么扩展服务集（ESS）就是由基石垒起的整栋大厦。<br>扩展服务集，由两个或多个基本服务集构成，这些基本服务集采用相同的配置，通过分布系统介质连接在一起。<br>扩展服务区，是扩展基本服务集覆盖的区域，所有客户端都能在扩展服务区内通信和漫游。<br>扩展服务集的逻辑名为 扩展服务集标识符（ESSID), 它与SSID是同义词。</p>\n<h4 id=\"独立基本服务集\"><a href=\"#独立基本服务集\" class=\"headerlink\" title=\"独立基本服务集\"></a>独立基本服务集</h4><p>IBSS仅由客户端构成，不存在接入点。<br>客户端之间直接传输帧，不会通过转发。所有客户端的帧交换都是对等的。<br>IBSS钟的所有客户端必须竞争半双工介质的使用权，且在任何给定的时间内，只有一个客户端可以传输数据。<br>为了确保通信的成功进行，IBSS中的所有客户端必须使用相同的频率信道传输数据，且构成IBSS的所有独立无线终端必须共享同一个SSID。<br>首先发起IBSS的客户端会随机生成一个MAC地址格式的BSSID，它是一个虚拟MAC地址，充当IBSS的二层标识符。</p>\n<h4 id=\"个人基本服务集\"><a href=\"#个人基本服务集\" class=\"headerlink\" title=\"个人基本服务集\"></a>个人基本服务集</h4><p>PBSS是一种支持802.11ad终端直接交换数据的802.11拓扑。只能由使用60GHz频段传输数据的802.11ad兼容无线接口创建。</p>\n<h4 id=\"网状基本服务集\"><a href=\"#网状基本服务集\" class=\"headerlink\" title=\"网状基本服务集\"></a>网状基本服务集</h4><p>802.11-2016标准定义了网状基本服务集（MBSS）<br>以无线方式分发网络流量。相当于二层路由。</p>\n<h4 id=\"Qos基本服务集\"><a href=\"#Qos基本服务集\" class=\"headerlink\" title=\"Qos基本服务集\"></a>Qos基本服务集</h4><p>WiFi联盟规定，802.11产品必须支持QoS机制才能取得WMM认证。因此，大多数基本服务集可视为QBSS</p>\n<h3 id=\"802-11配置模式\"><a href=\"#802-11配置模式\" class=\"headerlink\" title=\"802.11配置模式\"></a>802.11配置模式</h3><p><strong>接入点模式</strong> 通常称为AP<br>接入点模式，用作分布系统的入口<br>网状模式，也称中继器模式，作为无线回程无线接口使用。<br>传感器模式，又称监控模式或扫描模式，用于无线入侵防御系统体系结构中。<br>桥接模式，又称无线网桥。<br>工作组网桥模式，为连接的802.3有线客户端提供无线回程。<br>接入点被配置为客户端模式，充当客户设备，然后关联到其他接入点。</p>\n<p><strong>客户端模式</strong><br>基础设施模式（infrastructure mode），经由接入点进行通信。它是客户设备的默认模式。通常称为STA<br>自组织模式（ad hoc mode)，对等模式。 通常称为P2P</p>\n"},{"title":"CWNA:无线局域网拓扑","date":"2022-02-09T01:38:34.000Z","_content":"\n### 无线网络拓扑\n> 无线广域网\n> 无线城域网\n> 无线个域网\n> 无线局域网\n\n### 802.11终端\n> 客户端\n> 接入点\n> 集成服务\n> 分布系统\n> 无线分布系统\n\n### 802.11服务集\n> 服务集标识符\n> 基本服务集\n> 基本服务区\n> 基本服务集标识符\n> 多个基本服务集标识符\n> 扩展服务集\n> 独立基本服务集\n> 个人基本服务集\n> 网状基本服务集\n> Qos基本服务集\n\n### 802.11配置模式\n> 接入点模式\n> 客户端模式\n\n\n#### 无线广域网（WWAN)\n覆盖广阔的区域，蜂窝电话技术是其中的代表。\nWi-Fi技术和蜂窝技术的融合共存正逐步称为现实。\n\n\n#### 无线城域网（WMAN)\n为都市圈提供射频覆盖，基本上已经搁浅。\n\n#### 无线个域网（WPAN)\n用户附近各个设备之间的互联。计算机，游戏设备，平板电脑，智能手机等。\n蓝牙和红外是最常见的无线个域网技术。\n802.11无线接口用于无线个域网的最佳范例是对等连接技术。\n\n#### 无线局域网（WLAN)\n为建筑物和校园环境提供网络连接。\n802.11技术定义里无线局域网技术。\n\n#### 802.11终端\n所有终端通过唯一MAC地址标识。\nIEEE802.11-2016标准指定了终端在各种802.11拓扑中使用的体系结构服务。下面是MAC子层的3种802.11服务。\n**终端服务**  所有802.11终端（客户端和接入点）均提供以下服务。\n> 身份验证\n> 接触身份验证\n> 数据机密性\n> MSDU传输\n> 动态频率选择(DFS)\n> 发射功率控制(TPC)\n> 上层计时器同步\n> Qos流量调度\n> 无线电测量\n> 动态终端启用(DSE)\n\n**分布系统服务** 仅有接入点和网状门户使用分布系统服务(DSS),用于管理客户端关联，重关联，取消关联等。\n\n**PBSS控制点服务** 专门为构成个人基本服务集的802.11ad无线接口而定义。\n\n**客户端**\n与接入点相对的一种工作模式。计算机，平板电脑，智能手机等许多设备都能使用客户端无线接口，接入接入点后访问网络。\n\n**接入点**\n接入点与客户端在功能上完全相同，关键的区别在门户功能。\n门户功能 又称 分布系统接入功能（DSAF），允许关联到接入点的客户端经由无线介质与其他物理介质交换数据。\n802.11接入点维护关联客户端的关联表，以定向流量转发。\n\n**集成服务**\nIEEE 802.11-2016定义了集成服务(IS), 通过门户在分布系统与无线局域网之间传输MAC服务数据单位（MSDU)。\n也就是传输数据帧净荷，即数据内容不变，帧格式转变。\n\n**分布系统**\n接入点通常作为门户，多个接入点之间通常通过以太网连接构成分布系统。\n多数情况下，有线网是分布系统的最佳选择。\n\n**无线分布系统**\n通过无线回程将接入点连接在一起。\n不易布线的情况，网状回程网络有时候就是更好的选择。\n","source":"_posts/CWNA-无线局域网拓扑.md","raw":"---\ntitle: 'CWNA:无线局域网拓扑'\ndate: 2022-02-09 09:38:34\ntags: 'Wi-Fi'\n---\n\n### 无线网络拓扑\n> 无线广域网\n> 无线城域网\n> 无线个域网\n> 无线局域网\n\n### 802.11终端\n> 客户端\n> 接入点\n> 集成服务\n> 分布系统\n> 无线分布系统\n\n### 802.11服务集\n> 服务集标识符\n> 基本服务集\n> 基本服务区\n> 基本服务集标识符\n> 多个基本服务集标识符\n> 扩展服务集\n> 独立基本服务集\n> 个人基本服务集\n> 网状基本服务集\n> Qos基本服务集\n\n### 802.11配置模式\n> 接入点模式\n> 客户端模式\n\n\n#### 无线广域网（WWAN)\n覆盖广阔的区域，蜂窝电话技术是其中的代表。\nWi-Fi技术和蜂窝技术的融合共存正逐步称为现实。\n\n\n#### 无线城域网（WMAN)\n为都市圈提供射频覆盖，基本上已经搁浅。\n\n#### 无线个域网（WPAN)\n用户附近各个设备之间的互联。计算机，游戏设备，平板电脑，智能手机等。\n蓝牙和红外是最常见的无线个域网技术。\n802.11无线接口用于无线个域网的最佳范例是对等连接技术。\n\n#### 无线局域网（WLAN)\n为建筑物和校园环境提供网络连接。\n802.11技术定义里无线局域网技术。\n\n#### 802.11终端\n所有终端通过唯一MAC地址标识。\nIEEE802.11-2016标准指定了终端在各种802.11拓扑中使用的体系结构服务。下面是MAC子层的3种802.11服务。\n**终端服务**  所有802.11终端（客户端和接入点）均提供以下服务。\n> 身份验证\n> 接触身份验证\n> 数据机密性\n> MSDU传输\n> 动态频率选择(DFS)\n> 发射功率控制(TPC)\n> 上层计时器同步\n> Qos流量调度\n> 无线电测量\n> 动态终端启用(DSE)\n\n**分布系统服务** 仅有接入点和网状门户使用分布系统服务(DSS),用于管理客户端关联，重关联，取消关联等。\n\n**PBSS控制点服务** 专门为构成个人基本服务集的802.11ad无线接口而定义。\n\n**客户端**\n与接入点相对的一种工作模式。计算机，平板电脑，智能手机等许多设备都能使用客户端无线接口，接入接入点后访问网络。\n\n**接入点**\n接入点与客户端在功能上完全相同，关键的区别在门户功能。\n门户功能 又称 分布系统接入功能（DSAF），允许关联到接入点的客户端经由无线介质与其他物理介质交换数据。\n802.11接入点维护关联客户端的关联表，以定向流量转发。\n\n**集成服务**\nIEEE 802.11-2016定义了集成服务(IS), 通过门户在分布系统与无线局域网之间传输MAC服务数据单位（MSDU)。\n也就是传输数据帧净荷，即数据内容不变，帧格式转变。\n\n**分布系统**\n接入点通常作为门户，多个接入点之间通常通过以太网连接构成分布系统。\n多数情况下，有线网是分布系统的最佳选择。\n\n**无线分布系统**\n通过无线回程将接入点连接在一起。\n不易布线的情况，网状回程网络有时候就是更好的选择。\n","slug":"CWNA-无线局域网拓扑","published":1,"updated":"2022-02-09T04:58:33.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud41001w18jx47c7fbq8","content":"<h3 id=\"无线网络拓扑\"><a href=\"#无线网络拓扑\" class=\"headerlink\" title=\"无线网络拓扑\"></a>无线网络拓扑</h3><blockquote>\n<p>无线广域网<br>无线城域网<br>无线个域网<br>无线局域网</p>\n</blockquote>\n<h3 id=\"802-11终端\"><a href=\"#802-11终端\" class=\"headerlink\" title=\"802.11终端\"></a>802.11终端</h3><blockquote>\n<p>客户端<br>接入点<br>集成服务<br>分布系统<br>无线分布系统</p>\n</blockquote>\n<h3 id=\"802-11服务集\"><a href=\"#802-11服务集\" class=\"headerlink\" title=\"802.11服务集\"></a>802.11服务集</h3><blockquote>\n<p>服务集标识符<br>基本服务集<br>基本服务区<br>基本服务集标识符<br>多个基本服务集标识符<br>扩展服务集<br>独立基本服务集<br>个人基本服务集<br>网状基本服务集<br>Qos基本服务集</p>\n</blockquote>\n<h3 id=\"802-11配置模式\"><a href=\"#802-11配置模式\" class=\"headerlink\" title=\"802.11配置模式\"></a>802.11配置模式</h3><blockquote>\n<p>接入点模式<br>客户端模式</p>\n</blockquote>\n<h4 id=\"无线广域网（WWAN\"><a href=\"#无线广域网（WWAN\" class=\"headerlink\" title=\"无线广域网（WWAN)\"></a>无线广域网（WWAN)</h4><p>覆盖广阔的区域，蜂窝电话技术是其中的代表。<br>Wi-Fi技术和蜂窝技术的融合共存正逐步称为现实。</p>\n<h4 id=\"无线城域网（WMAN\"><a href=\"#无线城域网（WMAN\" class=\"headerlink\" title=\"无线城域网（WMAN)\"></a>无线城域网（WMAN)</h4><p>为都市圈提供射频覆盖，基本上已经搁浅。</p>\n<h4 id=\"无线个域网（WPAN\"><a href=\"#无线个域网（WPAN\" class=\"headerlink\" title=\"无线个域网（WPAN)\"></a>无线个域网（WPAN)</h4><p>用户附近各个设备之间的互联。计算机，游戏设备，平板电脑，智能手机等。<br>蓝牙和红外是最常见的无线个域网技术。<br>802.11无线接口用于无线个域网的最佳范例是对等连接技术。</p>\n<h4 id=\"无线局域网（WLAN\"><a href=\"#无线局域网（WLAN\" class=\"headerlink\" title=\"无线局域网（WLAN)\"></a>无线局域网（WLAN)</h4><p>为建筑物和校园环境提供网络连接。<br>802.11技术定义里无线局域网技术。</p>\n<h4 id=\"802-11终端-1\"><a href=\"#802-11终端-1\" class=\"headerlink\" title=\"802.11终端\"></a>802.11终端</h4><p>所有终端通过唯一MAC地址标识。<br>IEEE802.11-2016标准指定了终端在各种802.11拓扑中使用的体系结构服务。下面是MAC子层的3种802.11服务。<br><strong>终端服务</strong>  所有802.11终端（客户端和接入点）均提供以下服务。</p>\n<blockquote>\n<p>身份验证<br>接触身份验证<br>数据机密性<br>MSDU传输<br>动态频率选择(DFS)<br>发射功率控制(TPC)<br>上层计时器同步<br>Qos流量调度<br>无线电测量<br>动态终端启用(DSE)</p>\n</blockquote>\n<p><strong>分布系统服务</strong> 仅有接入点和网状门户使用分布系统服务(DSS),用于管理客户端关联，重关联，取消关联等。</p>\n<p><strong>PBSS控制点服务</strong> 专门为构成个人基本服务集的802.11ad无线接口而定义。</p>\n<p><strong>客户端</strong><br>与接入点相对的一种工作模式。计算机，平板电脑，智能手机等许多设备都能使用客户端无线接口，接入接入点后访问网络。</p>\n<p><strong>接入点</strong><br>接入点与客户端在功能上完全相同，关键的区别在门户功能。<br>门户功能 又称 分布系统接入功能（DSAF），允许关联到接入点的客户端经由无线介质与其他物理介质交换数据。<br>802.11接入点维护关联客户端的关联表，以定向流量转发。</p>\n<p><strong>集成服务</strong><br>IEEE 802.11-2016定义了集成服务(IS), 通过门户在分布系统与无线局域网之间传输MAC服务数据单位（MSDU)。<br>也就是传输数据帧净荷，即数据内容不变，帧格式转变。</p>\n<p><strong>分布系统</strong><br>接入点通常作为门户，多个接入点之间通常通过以太网连接构成分布系统。<br>多数情况下，有线网是分布系统的最佳选择。</p>\n<p><strong>无线分布系统</strong><br>通过无线回程将接入点连接在一起。<br>不易布线的情况，网状回程网络有时候就是更好的选择。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"无线网络拓扑\"><a href=\"#无线网络拓扑\" class=\"headerlink\" title=\"无线网络拓扑\"></a>无线网络拓扑</h3><blockquote>\n<p>无线广域网<br>无线城域网<br>无线个域网<br>无线局域网</p>\n</blockquote>\n<h3 id=\"802-11终端\"><a href=\"#802-11终端\" class=\"headerlink\" title=\"802.11终端\"></a>802.11终端</h3><blockquote>\n<p>客户端<br>接入点<br>集成服务<br>分布系统<br>无线分布系统</p>\n</blockquote>\n<h3 id=\"802-11服务集\"><a href=\"#802-11服务集\" class=\"headerlink\" title=\"802.11服务集\"></a>802.11服务集</h3><blockquote>\n<p>服务集标识符<br>基本服务集<br>基本服务区<br>基本服务集标识符<br>多个基本服务集标识符<br>扩展服务集<br>独立基本服务集<br>个人基本服务集<br>网状基本服务集<br>Qos基本服务集</p>\n</blockquote>\n<h3 id=\"802-11配置模式\"><a href=\"#802-11配置模式\" class=\"headerlink\" title=\"802.11配置模式\"></a>802.11配置模式</h3><blockquote>\n<p>接入点模式<br>客户端模式</p>\n</blockquote>\n<h4 id=\"无线广域网（WWAN\"><a href=\"#无线广域网（WWAN\" class=\"headerlink\" title=\"无线广域网（WWAN)\"></a>无线广域网（WWAN)</h4><p>覆盖广阔的区域，蜂窝电话技术是其中的代表。<br>Wi-Fi技术和蜂窝技术的融合共存正逐步称为现实。</p>\n<h4 id=\"无线城域网（WMAN\"><a href=\"#无线城域网（WMAN\" class=\"headerlink\" title=\"无线城域网（WMAN)\"></a>无线城域网（WMAN)</h4><p>为都市圈提供射频覆盖，基本上已经搁浅。</p>\n<h4 id=\"无线个域网（WPAN\"><a href=\"#无线个域网（WPAN\" class=\"headerlink\" title=\"无线个域网（WPAN)\"></a>无线个域网（WPAN)</h4><p>用户附近各个设备之间的互联。计算机，游戏设备，平板电脑，智能手机等。<br>蓝牙和红外是最常见的无线个域网技术。<br>802.11无线接口用于无线个域网的最佳范例是对等连接技术。</p>\n<h4 id=\"无线局域网（WLAN\"><a href=\"#无线局域网（WLAN\" class=\"headerlink\" title=\"无线局域网（WLAN)\"></a>无线局域网（WLAN)</h4><p>为建筑物和校园环境提供网络连接。<br>802.11技术定义里无线局域网技术。</p>\n<h4 id=\"802-11终端-1\"><a href=\"#802-11终端-1\" class=\"headerlink\" title=\"802.11终端\"></a>802.11终端</h4><p>所有终端通过唯一MAC地址标识。<br>IEEE802.11-2016标准指定了终端在各种802.11拓扑中使用的体系结构服务。下面是MAC子层的3种802.11服务。<br><strong>终端服务</strong>  所有802.11终端（客户端和接入点）均提供以下服务。</p>\n<blockquote>\n<p>身份验证<br>接触身份验证<br>数据机密性<br>MSDU传输<br>动态频率选择(DFS)<br>发射功率控制(TPC)<br>上层计时器同步<br>Qos流量调度<br>无线电测量<br>动态终端启用(DSE)</p>\n</blockquote>\n<p><strong>分布系统服务</strong> 仅有接入点和网状门户使用分布系统服务(DSS),用于管理客户端关联，重关联，取消关联等。</p>\n<p><strong>PBSS控制点服务</strong> 专门为构成个人基本服务集的802.11ad无线接口而定义。</p>\n<p><strong>客户端</strong><br>与接入点相对的一种工作模式。计算机，平板电脑，智能手机等许多设备都能使用客户端无线接口，接入接入点后访问网络。</p>\n<p><strong>接入点</strong><br>接入点与客户端在功能上完全相同，关键的区别在门户功能。<br>门户功能 又称 分布系统接入功能（DSAF），允许关联到接入点的客户端经由无线介质与其他物理介质交换数据。<br>802.11接入点维护关联客户端的关联表，以定向流量转发。</p>\n<p><strong>集成服务</strong><br>IEEE 802.11-2016定义了集成服务(IS), 通过门户在分布系统与无线局域网之间传输MAC服务数据单位（MSDU)。<br>也就是传输数据帧净荷，即数据内容不变，帧格式转变。</p>\n<p><strong>分布系统</strong><br>接入点通常作为门户，多个接入点之间通常通过以太网连接构成分布系统。<br>多数情况下，有线网是分布系统的最佳选择。</p>\n<p><strong>无线分布系统</strong><br>通过无线回程将接入点连接在一起。<br>不易布线的情况，网状回程网络有时候就是更好的选择。</p>\n"},{"title":"CWNA:无线局域网故障排除(一)","date":"2022-02-24T01:40:31.000Z","_content":"### 第一层问题故障排除\n大多数网络问题通常出现在物理层。\n\n**无线局域网设计**\n如果通过无线局域网传输数据，则覆盖至少要达到-70dBm;\n如果通过无线局域网传输语音，则覆盖至少要达到-65dBm;\n接入点无线接口的接收灵敏度通常远高于客户设备，所以应该从客户设备的角度测量并验证接收信号强度。\n同信道干扰是造成无谓的占用时长消耗的首要原因。\n调低发射功率同样能减少同信道干扰。\n\n**发射功率**\n不宜设置过大，过大会引发同信道干扰和容量无法满足等问题。\n\n**射频干扰**\n干扰设备的功率可能超过能量检测的阈值并阻止802.11无线接口传输数据，导致无线局域网瘫痪。\n如果802.11帧传输因射频干扰而损坏，将导致重传率过高，从而显著降低吞吐量。\n\n1.窄带干扰\n在一个很小的频段宽度上的干扰。\n\n2.宽带干扰\n在一个较宽的频段上的干扰。\n\n3.全频段干扰\n与跳频扩频通信相关的干扰。\n如果同一区域内有多个2.4GHz接入点使用信道1、6、11传输数据，则必然会与蓝牙发射机相互干扰。\n\n**驱动程序**\n确保升级到最新的驱动程序。\n\n**以太网供电**\n接入点随机重启的原因往往是功率预算不足。\n\n**固件漏洞**\n尽量采用最新的固件\n\n### 第二层问题故障排除\n进行无线局域网故障排除时，监控二层重传指标至关重要。\n\n**二层重传**\n导致无线局域网性能下降的罪魁祸首是发生在MAC子层的二层重传。\n无论哪种重传都会产生额外的MAC子层开销，导致半双工介质的占用时长消耗增加。\n\n二层重传增加介质占用时长，降低吞吐量。\n二层重传引发流量交付出现延迟或抖动。对应时敏应用产生明显影响。\n\n延迟指到达时间延缓；抖动指部分数据包与所有数据包平均延迟的时间差。\n\n二层重传是多种因素共同作用的结果。多径、射频干扰、低信噪比、隐藏节点、功率设置失配、邻信道干扰等。\n\n**信噪比**\n信噪比高于25dB表明信号质量较好；\n信噪比低于10dB表明信号质量较差；\n\n为了确保帧传输成功，许多供应商建议数据无线局域网的信噪比至少达到20dB，语音无线局域网至少达到25dB。\n\n**邻信道干扰**\n编号相邻的信道之间频率重叠导致的干扰。\n\n**隐藏节点**\n如果只有接入点能侦听到某个客户端的传输，而基本服务集中其他客户端无法侦听到该客户端的传输，则会出现隐藏节点问题。\n\n协议分析仪是确定隐藏节点的有力工具。如果协议分析仪发现某个客户端的MAC地址重传率高于其他客户端，则该客户端很有可能是隐藏节点。\n\n隐藏节点通过执行RTS/CTS来保留介质并迫使其他所有客户端停止传输，从而减少冲突和重传次数。\n\nRTS/CTS也会降低吞吐量，但疑似隐藏节点执行RTS/CTS时，由于减少冲突和重传，吞吐量反而会提高。\n\n解决隐藏节点的方法：\n1.使用RTS/CTS\n2.增加所有客户端的功率\n3.移走障碍物\n4.移走隐藏节点\n5.增加接入点\n\n**功率失配**\n客户端移动到覆盖区的外缘时，客户端可以侦听到接入点，但接入点无法侦听到客户端，引发功率失配问题。更多的发生在室外环境。\n\n为确定是否存在接入点/客户端功率失配问题，可以利用协议分析仪进行监听。如果在接入点附近监听时发现客户端的帧传输损坏，而在客户端附近监听没有发现\n帧传输损坏，则说明存在接入点/客户端功率失配问题。\n\n接入点功率过大，往往会导致功率失配。\n\n功率失配的更大问题往往是客户端的发射功率高于室内环境中部署的接入点。而且客户端通常处于移动状态，导致通信的干扰等。\n\n启用802.11k的接入点可以通知关联的客户端使用发射功率控制（TPC）功能来动态调整发射振幅，以便接入点和客户端功率匹配。这会显著减少客户端引起的\n通信的干扰。启用TPC，部分遗留客户端可能无法连接到接入点。\n\n**多径**\n对遗留的802.11a/b/g设备而言，多径堪称梦魇。\n对于利用多输入多输出（MIMO）天线和最大合并比（MRC）信号处理技术的802.11n/ac传输来说，多径反而具有积极效果。\n","source":"_posts/CWNA-无线局域网故障排除-一.md","raw":"---\ntitle: 'CWNA:无线局域网故障排除(一)'\ndate: 2022-02-24 09:40:31\ntags: 'Wi-Fi'\n---\n### 第一层问题故障排除\n大多数网络问题通常出现在物理层。\n\n**无线局域网设计**\n如果通过无线局域网传输数据，则覆盖至少要达到-70dBm;\n如果通过无线局域网传输语音，则覆盖至少要达到-65dBm;\n接入点无线接口的接收灵敏度通常远高于客户设备，所以应该从客户设备的角度测量并验证接收信号强度。\n同信道干扰是造成无谓的占用时长消耗的首要原因。\n调低发射功率同样能减少同信道干扰。\n\n**发射功率**\n不宜设置过大，过大会引发同信道干扰和容量无法满足等问题。\n\n**射频干扰**\n干扰设备的功率可能超过能量检测的阈值并阻止802.11无线接口传输数据，导致无线局域网瘫痪。\n如果802.11帧传输因射频干扰而损坏，将导致重传率过高，从而显著降低吞吐量。\n\n1.窄带干扰\n在一个很小的频段宽度上的干扰。\n\n2.宽带干扰\n在一个较宽的频段上的干扰。\n\n3.全频段干扰\n与跳频扩频通信相关的干扰。\n如果同一区域内有多个2.4GHz接入点使用信道1、6、11传输数据，则必然会与蓝牙发射机相互干扰。\n\n**驱动程序**\n确保升级到最新的驱动程序。\n\n**以太网供电**\n接入点随机重启的原因往往是功率预算不足。\n\n**固件漏洞**\n尽量采用最新的固件\n\n### 第二层问题故障排除\n进行无线局域网故障排除时，监控二层重传指标至关重要。\n\n**二层重传**\n导致无线局域网性能下降的罪魁祸首是发生在MAC子层的二层重传。\n无论哪种重传都会产生额外的MAC子层开销，导致半双工介质的占用时长消耗增加。\n\n二层重传增加介质占用时长，降低吞吐量。\n二层重传引发流量交付出现延迟或抖动。对应时敏应用产生明显影响。\n\n延迟指到达时间延缓；抖动指部分数据包与所有数据包平均延迟的时间差。\n\n二层重传是多种因素共同作用的结果。多径、射频干扰、低信噪比、隐藏节点、功率设置失配、邻信道干扰等。\n\n**信噪比**\n信噪比高于25dB表明信号质量较好；\n信噪比低于10dB表明信号质量较差；\n\n为了确保帧传输成功，许多供应商建议数据无线局域网的信噪比至少达到20dB，语音无线局域网至少达到25dB。\n\n**邻信道干扰**\n编号相邻的信道之间频率重叠导致的干扰。\n\n**隐藏节点**\n如果只有接入点能侦听到某个客户端的传输，而基本服务集中其他客户端无法侦听到该客户端的传输，则会出现隐藏节点问题。\n\n协议分析仪是确定隐藏节点的有力工具。如果协议分析仪发现某个客户端的MAC地址重传率高于其他客户端，则该客户端很有可能是隐藏节点。\n\n隐藏节点通过执行RTS/CTS来保留介质并迫使其他所有客户端停止传输，从而减少冲突和重传次数。\n\nRTS/CTS也会降低吞吐量，但疑似隐藏节点执行RTS/CTS时，由于减少冲突和重传，吞吐量反而会提高。\n\n解决隐藏节点的方法：\n1.使用RTS/CTS\n2.增加所有客户端的功率\n3.移走障碍物\n4.移走隐藏节点\n5.增加接入点\n\n**功率失配**\n客户端移动到覆盖区的外缘时，客户端可以侦听到接入点，但接入点无法侦听到客户端，引发功率失配问题。更多的发生在室外环境。\n\n为确定是否存在接入点/客户端功率失配问题，可以利用协议分析仪进行监听。如果在接入点附近监听时发现客户端的帧传输损坏，而在客户端附近监听没有发现\n帧传输损坏，则说明存在接入点/客户端功率失配问题。\n\n接入点功率过大，往往会导致功率失配。\n\n功率失配的更大问题往往是客户端的发射功率高于室内环境中部署的接入点。而且客户端通常处于移动状态，导致通信的干扰等。\n\n启用802.11k的接入点可以通知关联的客户端使用发射功率控制（TPC）功能来动态调整发射振幅，以便接入点和客户端功率匹配。这会显著减少客户端引起的\n通信的干扰。启用TPC，部分遗留客户端可能无法连接到接入点。\n\n**多径**\n对遗留的802.11a/b/g设备而言，多径堪称梦魇。\n对于利用多输入多输出（MIMO）天线和最大合并比（MRC）信号处理技术的802.11n/ac传输来说，多径反而具有积极效果。\n","slug":"CWNA-无线局域网故障排除-一","published":1,"updated":"2022-02-24T03:29:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud42001y18jx7jmo5fik","content":"<h3 id=\"第一层问题故障排除\"><a href=\"#第一层问题故障排除\" class=\"headerlink\" title=\"第一层问题故障排除\"></a>第一层问题故障排除</h3><p>大多数网络问题通常出现在物理层。</p>\n<p><strong>无线局域网设计</strong><br>如果通过无线局域网传输数据，则覆盖至少要达到-70dBm;<br>如果通过无线局域网传输语音，则覆盖至少要达到-65dBm;<br>接入点无线接口的接收灵敏度通常远高于客户设备，所以应该从客户设备的角度测量并验证接收信号强度。<br>同信道干扰是造成无谓的占用时长消耗的首要原因。<br>调低发射功率同样能减少同信道干扰。</p>\n<p><strong>发射功率</strong><br>不宜设置过大，过大会引发同信道干扰和容量无法满足等问题。</p>\n<p><strong>射频干扰</strong><br>干扰设备的功率可能超过能量检测的阈值并阻止802.11无线接口传输数据，导致无线局域网瘫痪。<br>如果802.11帧传输因射频干扰而损坏，将导致重传率过高，从而显著降低吞吐量。</p>\n<p>1.窄带干扰<br>在一个很小的频段宽度上的干扰。</p>\n<p>2.宽带干扰<br>在一个较宽的频段上的干扰。</p>\n<p>3.全频段干扰<br>与跳频扩频通信相关的干扰。<br>如果同一区域内有多个2.4GHz接入点使用信道1、6、11传输数据，则必然会与蓝牙发射机相互干扰。</p>\n<p><strong>驱动程序</strong><br>确保升级到最新的驱动程序。</p>\n<p><strong>以太网供电</strong><br>接入点随机重启的原因往往是功率预算不足。</p>\n<p><strong>固件漏洞</strong><br>尽量采用最新的固件</p>\n<h3 id=\"第二层问题故障排除\"><a href=\"#第二层问题故障排除\" class=\"headerlink\" title=\"第二层问题故障排除\"></a>第二层问题故障排除</h3><p>进行无线局域网故障排除时，监控二层重传指标至关重要。</p>\n<p><strong>二层重传</strong><br>导致无线局域网性能下降的罪魁祸首是发生在MAC子层的二层重传。<br>无论哪种重传都会产生额外的MAC子层开销，导致半双工介质的占用时长消耗增加。</p>\n<p>二层重传增加介质占用时长，降低吞吐量。<br>二层重传引发流量交付出现延迟或抖动。对应时敏应用产生明显影响。</p>\n<p>延迟指到达时间延缓；抖动指部分数据包与所有数据包平均延迟的时间差。</p>\n<p>二层重传是多种因素共同作用的结果。多径、射频干扰、低信噪比、隐藏节点、功率设置失配、邻信道干扰等。</p>\n<p><strong>信噪比</strong><br>信噪比高于25dB表明信号质量较好；<br>信噪比低于10dB表明信号质量较差；</p>\n<p>为了确保帧传输成功，许多供应商建议数据无线局域网的信噪比至少达到20dB，语音无线局域网至少达到25dB。</p>\n<p><strong>邻信道干扰</strong><br>编号相邻的信道之间频率重叠导致的干扰。</p>\n<p><strong>隐藏节点</strong><br>如果只有接入点能侦听到某个客户端的传输，而基本服务集中其他客户端无法侦听到该客户端的传输，则会出现隐藏节点问题。</p>\n<p>协议分析仪是确定隐藏节点的有力工具。如果协议分析仪发现某个客户端的MAC地址重传率高于其他客户端，则该客户端很有可能是隐藏节点。</p>\n<p>隐藏节点通过执行RTS/CTS来保留介质并迫使其他所有客户端停止传输，从而减少冲突和重传次数。</p>\n<p>RTS/CTS也会降低吞吐量，但疑似隐藏节点执行RTS/CTS时，由于减少冲突和重传，吞吐量反而会提高。</p>\n<p>解决隐藏节点的方法：<br>1.使用RTS/CTS<br>2.增加所有客户端的功率<br>3.移走障碍物<br>4.移走隐藏节点<br>5.增加接入点</p>\n<p><strong>功率失配</strong><br>客户端移动到覆盖区的外缘时，客户端可以侦听到接入点，但接入点无法侦听到客户端，引发功率失配问题。更多的发生在室外环境。</p>\n<p>为确定是否存在接入点/客户端功率失配问题，可以利用协议分析仪进行监听。如果在接入点附近监听时发现客户端的帧传输损坏，而在客户端附近监听没有发现<br>帧传输损坏，则说明存在接入点/客户端功率失配问题。</p>\n<p>接入点功率过大，往往会导致功率失配。</p>\n<p>功率失配的更大问题往往是客户端的发射功率高于室内环境中部署的接入点。而且客户端通常处于移动状态，导致通信的干扰等。</p>\n<p>启用802.11k的接入点可以通知关联的客户端使用发射功率控制（TPC）功能来动态调整发射振幅，以便接入点和客户端功率匹配。这会显著减少客户端引起的<br>通信的干扰。启用TPC，部分遗留客户端可能无法连接到接入点。</p>\n<p><strong>多径</strong><br>对遗留的802.11a/b/g设备而言，多径堪称梦魇。<br>对于利用多输入多输出（MIMO）天线和最大合并比（MRC）信号处理技术的802.11n/ac传输来说，多径反而具有积极效果。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"第一层问题故障排除\"><a href=\"#第一层问题故障排除\" class=\"headerlink\" title=\"第一层问题故障排除\"></a>第一层问题故障排除</h3><p>大多数网络问题通常出现在物理层。</p>\n<p><strong>无线局域网设计</strong><br>如果通过无线局域网传输数据，则覆盖至少要达到-70dBm;<br>如果通过无线局域网传输语音，则覆盖至少要达到-65dBm;<br>接入点无线接口的接收灵敏度通常远高于客户设备，所以应该从客户设备的角度测量并验证接收信号强度。<br>同信道干扰是造成无谓的占用时长消耗的首要原因。<br>调低发射功率同样能减少同信道干扰。</p>\n<p><strong>发射功率</strong><br>不宜设置过大，过大会引发同信道干扰和容量无法满足等问题。</p>\n<p><strong>射频干扰</strong><br>干扰设备的功率可能超过能量检测的阈值并阻止802.11无线接口传输数据，导致无线局域网瘫痪。<br>如果802.11帧传输因射频干扰而损坏，将导致重传率过高，从而显著降低吞吐量。</p>\n<p>1.窄带干扰<br>在一个很小的频段宽度上的干扰。</p>\n<p>2.宽带干扰<br>在一个较宽的频段上的干扰。</p>\n<p>3.全频段干扰<br>与跳频扩频通信相关的干扰。<br>如果同一区域内有多个2.4GHz接入点使用信道1、6、11传输数据，则必然会与蓝牙发射机相互干扰。</p>\n<p><strong>驱动程序</strong><br>确保升级到最新的驱动程序。</p>\n<p><strong>以太网供电</strong><br>接入点随机重启的原因往往是功率预算不足。</p>\n<p><strong>固件漏洞</strong><br>尽量采用最新的固件</p>\n<h3 id=\"第二层问题故障排除\"><a href=\"#第二层问题故障排除\" class=\"headerlink\" title=\"第二层问题故障排除\"></a>第二层问题故障排除</h3><p>进行无线局域网故障排除时，监控二层重传指标至关重要。</p>\n<p><strong>二层重传</strong><br>导致无线局域网性能下降的罪魁祸首是发生在MAC子层的二层重传。<br>无论哪种重传都会产生额外的MAC子层开销，导致半双工介质的占用时长消耗增加。</p>\n<p>二层重传增加介质占用时长，降低吞吐量。<br>二层重传引发流量交付出现延迟或抖动。对应时敏应用产生明显影响。</p>\n<p>延迟指到达时间延缓；抖动指部分数据包与所有数据包平均延迟的时间差。</p>\n<p>二层重传是多种因素共同作用的结果。多径、射频干扰、低信噪比、隐藏节点、功率设置失配、邻信道干扰等。</p>\n<p><strong>信噪比</strong><br>信噪比高于25dB表明信号质量较好；<br>信噪比低于10dB表明信号质量较差；</p>\n<p>为了确保帧传输成功，许多供应商建议数据无线局域网的信噪比至少达到20dB，语音无线局域网至少达到25dB。</p>\n<p><strong>邻信道干扰</strong><br>编号相邻的信道之间频率重叠导致的干扰。</p>\n<p><strong>隐藏节点</strong><br>如果只有接入点能侦听到某个客户端的传输，而基本服务集中其他客户端无法侦听到该客户端的传输，则会出现隐藏节点问题。</p>\n<p>协议分析仪是确定隐藏节点的有力工具。如果协议分析仪发现某个客户端的MAC地址重传率高于其他客户端，则该客户端很有可能是隐藏节点。</p>\n<p>隐藏节点通过执行RTS/CTS来保留介质并迫使其他所有客户端停止传输，从而减少冲突和重传次数。</p>\n<p>RTS/CTS也会降低吞吐量，但疑似隐藏节点执行RTS/CTS时，由于减少冲突和重传，吞吐量反而会提高。</p>\n<p>解决隐藏节点的方法：<br>1.使用RTS/CTS<br>2.增加所有客户端的功率<br>3.移走障碍物<br>4.移走隐藏节点<br>5.增加接入点</p>\n<p><strong>功率失配</strong><br>客户端移动到覆盖区的外缘时，客户端可以侦听到接入点，但接入点无法侦听到客户端，引发功率失配问题。更多的发生在室外环境。</p>\n<p>为确定是否存在接入点/客户端功率失配问题，可以利用协议分析仪进行监听。如果在接入点附近监听时发现客户端的帧传输损坏，而在客户端附近监听没有发现<br>帧传输损坏，则说明存在接入点/客户端功率失配问题。</p>\n<p>接入点功率过大，往往会导致功率失配。</p>\n<p>功率失配的更大问题往往是客户端的发射功率高于室内环境中部署的接入点。而且客户端通常处于移动状态，导致通信的干扰等。</p>\n<p>启用802.11k的接入点可以通知关联的客户端使用发射功率控制（TPC）功能来动态调整发射振幅，以便接入点和客户端功率匹配。这会显著减少客户端引起的<br>通信的干扰。启用TPC，部分遗留客户端可能无法连接到接入点。</p>\n<p><strong>多径</strong><br>对遗留的802.11a/b/g设备而言，多径堪称梦魇。<br>对于利用多输入多输出（MIMO）天线和最大合并比（MRC）信号处理技术的802.11n/ac传输来说，多径反而具有积极效果。</p>\n"},{"title":"CWNA:无线局域网故障排除","date":"2022-02-23T01:27:06.000Z","_content":"无线局域网故障排除的五大原则\n> 遵循故障排除最佳实践\n> 解决OSI模型存在的问题\n> 大多数Wi-Fi问题源自客户端\n> 合理的无线局域网设计可以降低问题出现的概率\n> 无线局域网总是众矢之的\n\n第一层问题故障排除\n> 无线局域网设计\n> 发射功率\n> 射频干扰\n> 驱动程序\n> 以太网供电\n> 固件漏洞\n\n第二层问题故障排除\n> 二层重传\n> 射频干扰\n> 低信噪比\n> 邻信道干扰\n> 隐藏节点\n> 功率失配\n> 多径\n\n安全问题故障排除\n> 预共享密钥身份验证\n> 802.1X/EAP身份验证\n> 虚拟专用网\n\n漫游问题故障排除\n信道利用率\n第三~七层问题故障排除\n\n无线局域网故障排除工具\n> 无线局域网发现工具\n> 频谱分析仪\n> 协议分析仪\n> 吞吐量测试工具\n> 标准的IP网络测试命令\n> 安全外壳\n\n---\n### 无线局域网故障排除的五大原则\n**遵循故障排除最佳实践（best practice)**\n提出问题并收集信息是故障排除最佳实践的基本原则。需要询问的基本问题有：\n1）问题何时发生？问题发生在哪个时段？是否发生在特定的时段？通过查看接入点、无线局域网控制器以及相关服务器日志文件，很容易获取这些信息。\n   根据最佳实践的要求，所有网络硬件必须正确配置网络时间协议和时区设置。\n2）问题出现在何处？问题普遍存在还是仅出现在某个区域？问题出现在一个楼层还是整栋大楼？问题只影响一个接入点还是影响整个接入点？确定问题\n   出现在何处有助于进一步收集解决问题所需的信息。\n3）有多少客户端受到影响？如果仅有一个客户端受到影响，那么可能制数简单的驱动程序问题或请求方配置不当；大多数连接问题与客户端设备有关，\n   或者影响一个客户端，或者影响多个客户端。\n4）问题是否复现？处理只出现一次或几次的问题或许更困难，因为对于重现的问题，收集数据要容易得多。\n5）网络配置最近是否方式变化？\n\n提出问题后，可以开始着手解决问题。遵循故障排除最佳实践：\n1）确认问题。\n2）复现问题。\n3）找出问题并隔离原因。\n4）解决问题。\n5）测试以验证问题是否解决。\n6）记录问题和解决方案。\n7）提供反馈。\n\n**解决OSI模型存在的问题**\n通常自底向上分析OSI模型排除故障。\n无线局域网应首先确定第一层和第二层是否存在问题。如果这两层工作正常，说明问题于Wi-Fi无关，应更多主要OSI模型更上层。\n\n与大多数网络技术一样，相当一部分问题出现在物理层。\n接入点未上电或客户端无线接口驱动程序存在问题，往往导致无法连接或性能不佳。\n射频信号干扰会影响无线局域网的性能和覆盖。\n\n\n如果确定物理层一切正常，接下来应查看数据链路层是否存在问题。\n发现，身份验证，关联，漫游等基本的802.11通信均在数据链路层的MAC子层进行。\nCCMP加密仅适用于802.11n HT和802.11ac VHT数据速率。\n\n**大多数Wi-Fi问题源自客户端**\n70%的问题与Wi-Fi客户端有关。\n\n**合理的无线局域网设计可以降低问题出现概率**\n**无线局域网总是众矢之的**\n如果物理层和数据链路层一切正常，就表明与Wi-Fi无关。但是用户无法访问网络，可能归咎于OSI第三层~七层的问题，但总会归咎于无线局域网。\n","source":"_posts/CWNA-无线局域网故障排除.md","raw":"---\ntitle: 'CWNA:无线局域网故障排除'\ndate: 2022-02-23 09:27:06\ntags: 'Wi-Fi'\n---\n无线局域网故障排除的五大原则\n> 遵循故障排除最佳实践\n> 解决OSI模型存在的问题\n> 大多数Wi-Fi问题源自客户端\n> 合理的无线局域网设计可以降低问题出现的概率\n> 无线局域网总是众矢之的\n\n第一层问题故障排除\n> 无线局域网设计\n> 发射功率\n> 射频干扰\n> 驱动程序\n> 以太网供电\n> 固件漏洞\n\n第二层问题故障排除\n> 二层重传\n> 射频干扰\n> 低信噪比\n> 邻信道干扰\n> 隐藏节点\n> 功率失配\n> 多径\n\n安全问题故障排除\n> 预共享密钥身份验证\n> 802.1X/EAP身份验证\n> 虚拟专用网\n\n漫游问题故障排除\n信道利用率\n第三~七层问题故障排除\n\n无线局域网故障排除工具\n> 无线局域网发现工具\n> 频谱分析仪\n> 协议分析仪\n> 吞吐量测试工具\n> 标准的IP网络测试命令\n> 安全外壳\n\n---\n### 无线局域网故障排除的五大原则\n**遵循故障排除最佳实践（best practice)**\n提出问题并收集信息是故障排除最佳实践的基本原则。需要询问的基本问题有：\n1）问题何时发生？问题发生在哪个时段？是否发生在特定的时段？通过查看接入点、无线局域网控制器以及相关服务器日志文件，很容易获取这些信息。\n   根据最佳实践的要求，所有网络硬件必须正确配置网络时间协议和时区设置。\n2）问题出现在何处？问题普遍存在还是仅出现在某个区域？问题出现在一个楼层还是整栋大楼？问题只影响一个接入点还是影响整个接入点？确定问题\n   出现在何处有助于进一步收集解决问题所需的信息。\n3）有多少客户端受到影响？如果仅有一个客户端受到影响，那么可能制数简单的驱动程序问题或请求方配置不当；大多数连接问题与客户端设备有关，\n   或者影响一个客户端，或者影响多个客户端。\n4）问题是否复现？处理只出现一次或几次的问题或许更困难，因为对于重现的问题，收集数据要容易得多。\n5）网络配置最近是否方式变化？\n\n提出问题后，可以开始着手解决问题。遵循故障排除最佳实践：\n1）确认问题。\n2）复现问题。\n3）找出问题并隔离原因。\n4）解决问题。\n5）测试以验证问题是否解决。\n6）记录问题和解决方案。\n7）提供反馈。\n\n**解决OSI模型存在的问题**\n通常自底向上分析OSI模型排除故障。\n无线局域网应首先确定第一层和第二层是否存在问题。如果这两层工作正常，说明问题于Wi-Fi无关，应更多主要OSI模型更上层。\n\n与大多数网络技术一样，相当一部分问题出现在物理层。\n接入点未上电或客户端无线接口驱动程序存在问题，往往导致无法连接或性能不佳。\n射频信号干扰会影响无线局域网的性能和覆盖。\n\n\n如果确定物理层一切正常，接下来应查看数据链路层是否存在问题。\n发现，身份验证，关联，漫游等基本的802.11通信均在数据链路层的MAC子层进行。\nCCMP加密仅适用于802.11n HT和802.11ac VHT数据速率。\n\n**大多数Wi-Fi问题源自客户端**\n70%的问题与Wi-Fi客户端有关。\n\n**合理的无线局域网设计可以降低问题出现概率**\n**无线局域网总是众矢之的**\n如果物理层和数据链路层一切正常，就表明与Wi-Fi无关。但是用户无法访问网络，可能归咎于OSI第三层~七层的问题，但总会归咎于无线局域网。\n","slug":"CWNA-无线局域网故障排除","published":1,"updated":"2022-02-24T03:29:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud42002018jx8qclhl8z","content":"<p>无线局域网故障排除的五大原则</p>\n<blockquote>\n<p>遵循故障排除最佳实践<br>解决OSI模型存在的问题<br>大多数Wi-Fi问题源自客户端<br>合理的无线局域网设计可以降低问题出现的概率<br>无线局域网总是众矢之的</p>\n</blockquote>\n<p>第一层问题故障排除</p>\n<blockquote>\n<p>无线局域网设计<br>发射功率<br>射频干扰<br>驱动程序<br>以太网供电<br>固件漏洞</p>\n</blockquote>\n<p>第二层问题故障排除</p>\n<blockquote>\n<p>二层重传<br>射频干扰<br>低信噪比<br>邻信道干扰<br>隐藏节点<br>功率失配<br>多径</p>\n</blockquote>\n<p>安全问题故障排除</p>\n<blockquote>\n<p>预共享密钥身份验证<br>802.1X/EAP身份验证<br>虚拟专用网</p>\n</blockquote>\n<p>漫游问题故障排除<br>信道利用率<br>第三~七层问题故障排除</p>\n<p>无线局域网故障排除工具</p>\n<blockquote>\n<p>无线局域网发现工具<br>频谱分析仪<br>协议分析仪<br>吞吐量测试工具<br>标准的IP网络测试命令<br>安全外壳</p>\n</blockquote>\n<hr>\n<h3 id=\"无线局域网故障排除的五大原则\"><a href=\"#无线局域网故障排除的五大原则\" class=\"headerlink\" title=\"无线局域网故障排除的五大原则\"></a>无线局域网故障排除的五大原则</h3><p><strong>遵循故障排除最佳实践（best practice)</strong><br>提出问题并收集信息是故障排除最佳实践的基本原则。需要询问的基本问题有：<br>1）问题何时发生？问题发生在哪个时段？是否发生在特定的时段？通过查看接入点、无线局域网控制器以及相关服务器日志文件，很容易获取这些信息。<br>   根据最佳实践的要求，所有网络硬件必须正确配置网络时间协议和时区设置。<br>2）问题出现在何处？问题普遍存在还是仅出现在某个区域？问题出现在一个楼层还是整栋大楼？问题只影响一个接入点还是影响整个接入点？确定问题<br>   出现在何处有助于进一步收集解决问题所需的信息。<br>3）有多少客户端受到影响？如果仅有一个客户端受到影响，那么可能制数简单的驱动程序问题或请求方配置不当；大多数连接问题与客户端设备有关，<br>   或者影响一个客户端，或者影响多个客户端。<br>4）问题是否复现？处理只出现一次或几次的问题或许更困难，因为对于重现的问题，收集数据要容易得多。<br>5）网络配置最近是否方式变化？</p>\n<p>提出问题后，可以开始着手解决问题。遵循故障排除最佳实践：<br>1）确认问题。<br>2）复现问题。<br>3）找出问题并隔离原因。<br>4）解决问题。<br>5）测试以验证问题是否解决。<br>6）记录问题和解决方案。<br>7）提供反馈。</p>\n<p><strong>解决OSI模型存在的问题</strong><br>通常自底向上分析OSI模型排除故障。<br>无线局域网应首先确定第一层和第二层是否存在问题。如果这两层工作正常，说明问题于Wi-Fi无关，应更多主要OSI模型更上层。</p>\n<p>与大多数网络技术一样，相当一部分问题出现在物理层。<br>接入点未上电或客户端无线接口驱动程序存在问题，往往导致无法连接或性能不佳。<br>射频信号干扰会影响无线局域网的性能和覆盖。</p>\n<p>如果确定物理层一切正常，接下来应查看数据链路层是否存在问题。<br>发现，身份验证，关联，漫游等基本的802.11通信均在数据链路层的MAC子层进行。<br>CCMP加密仅适用于802.11n HT和802.11ac VHT数据速率。</p>\n<p><strong>大多数Wi-Fi问题源自客户端</strong><br>70%的问题与Wi-Fi客户端有关。</p>\n<p><strong>合理的无线局域网设计可以降低问题出现概率</strong><br><strong>无线局域网总是众矢之的</strong><br>如果物理层和数据链路层一切正常，就表明与Wi-Fi无关。但是用户无法访问网络，可能归咎于OSI第三层~七层的问题，但总会归咎于无线局域网。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>无线局域网故障排除的五大原则</p>\n<blockquote>\n<p>遵循故障排除最佳实践<br>解决OSI模型存在的问题<br>大多数Wi-Fi问题源自客户端<br>合理的无线局域网设计可以降低问题出现的概率<br>无线局域网总是众矢之的</p>\n</blockquote>\n<p>第一层问题故障排除</p>\n<blockquote>\n<p>无线局域网设计<br>发射功率<br>射频干扰<br>驱动程序<br>以太网供电<br>固件漏洞</p>\n</blockquote>\n<p>第二层问题故障排除</p>\n<blockquote>\n<p>二层重传<br>射频干扰<br>低信噪比<br>邻信道干扰<br>隐藏节点<br>功率失配<br>多径</p>\n</blockquote>\n<p>安全问题故障排除</p>\n<blockquote>\n<p>预共享密钥身份验证<br>802.1X/EAP身份验证<br>虚拟专用网</p>\n</blockquote>\n<p>漫游问题故障排除<br>信道利用率<br>第三~七层问题故障排除</p>\n<p>无线局域网故障排除工具</p>\n<blockquote>\n<p>无线局域网发现工具<br>频谱分析仪<br>协议分析仪<br>吞吐量测试工具<br>标准的IP网络测试命令<br>安全外壳</p>\n</blockquote>\n<hr>\n<h3 id=\"无线局域网故障排除的五大原则\"><a href=\"#无线局域网故障排除的五大原则\" class=\"headerlink\" title=\"无线局域网故障排除的五大原则\"></a>无线局域网故障排除的五大原则</h3><p><strong>遵循故障排除最佳实践（best practice)</strong><br>提出问题并收集信息是故障排除最佳实践的基本原则。需要询问的基本问题有：<br>1）问题何时发生？问题发生在哪个时段？是否发生在特定的时段？通过查看接入点、无线局域网控制器以及相关服务器日志文件，很容易获取这些信息。<br>   根据最佳实践的要求，所有网络硬件必须正确配置网络时间协议和时区设置。<br>2）问题出现在何处？问题普遍存在还是仅出现在某个区域？问题出现在一个楼层还是整栋大楼？问题只影响一个接入点还是影响整个接入点？确定问题<br>   出现在何处有助于进一步收集解决问题所需的信息。<br>3）有多少客户端受到影响？如果仅有一个客户端受到影响，那么可能制数简单的驱动程序问题或请求方配置不当；大多数连接问题与客户端设备有关，<br>   或者影响一个客户端，或者影响多个客户端。<br>4）问题是否复现？处理只出现一次或几次的问题或许更困难，因为对于重现的问题，收集数据要容易得多。<br>5）网络配置最近是否方式变化？</p>\n<p>提出问题后，可以开始着手解决问题。遵循故障排除最佳实践：<br>1）确认问题。<br>2）复现问题。<br>3）找出问题并隔离原因。<br>4）解决问题。<br>5）测试以验证问题是否解决。<br>6）记录问题和解决方案。<br>7）提供反馈。</p>\n<p><strong>解决OSI模型存在的问题</strong><br>通常自底向上分析OSI模型排除故障。<br>无线局域网应首先确定第一层和第二层是否存在问题。如果这两层工作正常，说明问题于Wi-Fi无关，应更多主要OSI模型更上层。</p>\n<p>与大多数网络技术一样，相当一部分问题出现在物理层。<br>接入点未上电或客户端无线接口驱动程序存在问题，往往导致无法连接或性能不佳。<br>射频信号干扰会影响无线局域网的性能和覆盖。</p>\n<p>如果确定物理层一切正常，接下来应查看数据链路层是否存在问题。<br>发现，身份验证，关联，漫游等基本的802.11通信均在数据链路层的MAC子层进行。<br>CCMP加密仅适用于802.11n HT和802.11ac VHT数据速率。</p>\n<p><strong>大多数Wi-Fi问题源自客户端</strong><br>70%的问题与Wi-Fi客户端有关。</p>\n<p><strong>合理的无线局域网设计可以降低问题出现概率</strong><br><strong>无线局域网总是众矢之的</strong><br>如果物理层和数据链路层一切正常，就表明与Wi-Fi无关。但是用户无法访问网络，可能归咎于OSI第三层~七层的问题，但总会归咎于无线局域网。</p>\n"},{"title":"CWNA:无线攻击、入侵监控与安全策略","date":"2022-02-25T02:20:20.000Z","_content":"无线攻击\n> 非法无线设备\n> 对等攻击\n> 窃听\n> 加密破解\n> KRACK攻击\n> 身份验证攻击\n> MAC欺骗\n> 管理界面漏洞\n> 无线劫持\n> 拒绝服务攻击\n> 特定于供应商的攻击\n> 社会工程学攻击\n\n入侵监控\n> 无线入侵防御系统\n> 非法设备检测与抑制\n> 频谱分析仪\n\n无线安全策略\n> 一般性安全策略\n> 功能性安全策略\n> 法律合规性\n> 无线局域网安全策略建议\n\n### 无线攻击\n**非法无线设备**\n它是某种不安全的开发网关，入侵者可以借此进入企业希望保护的有线基础设施。\n大多数情况下，安装非法接入点的并非黑客，而是企业员工。\n自组织网络也可能充当入侵企业网络的跳板。\n\n**对等攻击**\n客户端隔离，可以用于防止对等攻击。\n\n**窃听**\n有随意窃听和恶意窃听两种方式。\n随意窃听，通过扫描获取周边无线网络信息。\n恶意窃听，通过802.11协议分析仪捕获无线通信以获取隐私数据。\n\n**加密破解**\n有线等效保密（WEP）是一种多年前就已遭到破解的802.11加密机制，互联网上有免费的破解工具可以快速破解。\n\n**KRACK攻击**\n针对WPA2协议中用于动态生成加密密钥的四次握手过程攻击，已经被新的固件修复。\n\n**身份验证攻击**\n如果攻击前获取WPA/WPA2密码短语并捕获四次握手过程，就能重新生成动态加密密钥，进而进行流量解密。\n\n**MAC欺骗**\nMAC地址过滤是一种安全方式，但是可以MAC地址欺骗的方式绕过这种安全机制。应采用多种安全方案体系。\n\n**无线劫持**\n无线劫持（wireless hijacking)又称双面恶魔攻击(evil twin attack)，步骤如下：\n攻击者创建相同SSID但不同信道的接入点；\n攻击者阻塞目标热点信道，迫使目标客户端漫游到自己创建的热点，实现二层劫持；\n攻击者热点为客户端分配DCHCP IP；\n攻击者热点桥接到自己的第二个无线接口；\n第二个无线接口接入原目标热点，这样就实现了在客户端和原目标热点之间传入攻击者设备。\n\n无线劫持的另一种形式称为Wi-Fi网络钓鱼攻击。\n\n唯一能阻止无线劫持的途径是部署相互身份验证解决方案802.1X/EAP。\n\n**拒绝服务攻击**\n利用合适的工具阻止合法用户访问网络资源，从而在一段时间内瘫痪无线局域网。\n主要是在物理层和数据链路层发起攻击。\n频谱分析仪和协议分析仪是检测攻击的最佳工具。\n\n**社会工程学攻击**\n一种诱使用户泄漏机密信息的技术，阻止社会工程学攻击的最后方法是严格贯彻安全策略，以防止机密外泄。\n\n","source":"_posts/CWNA-无线攻击、入侵监控与安全策略.md","raw":"---\ntitle: 'CWNA:无线攻击、入侵监控与安全策略'\ndate: 2022-02-25 10:20:20\ntags: 'Wi-Fi'\n---\n无线攻击\n> 非法无线设备\n> 对等攻击\n> 窃听\n> 加密破解\n> KRACK攻击\n> 身份验证攻击\n> MAC欺骗\n> 管理界面漏洞\n> 无线劫持\n> 拒绝服务攻击\n> 特定于供应商的攻击\n> 社会工程学攻击\n\n入侵监控\n> 无线入侵防御系统\n> 非法设备检测与抑制\n> 频谱分析仪\n\n无线安全策略\n> 一般性安全策略\n> 功能性安全策略\n> 法律合规性\n> 无线局域网安全策略建议\n\n### 无线攻击\n**非法无线设备**\n它是某种不安全的开发网关，入侵者可以借此进入企业希望保护的有线基础设施。\n大多数情况下，安装非法接入点的并非黑客，而是企业员工。\n自组织网络也可能充当入侵企业网络的跳板。\n\n**对等攻击**\n客户端隔离，可以用于防止对等攻击。\n\n**窃听**\n有随意窃听和恶意窃听两种方式。\n随意窃听，通过扫描获取周边无线网络信息。\n恶意窃听，通过802.11协议分析仪捕获无线通信以获取隐私数据。\n\n**加密破解**\n有线等效保密（WEP）是一种多年前就已遭到破解的802.11加密机制，互联网上有免费的破解工具可以快速破解。\n\n**KRACK攻击**\n针对WPA2协议中用于动态生成加密密钥的四次握手过程攻击，已经被新的固件修复。\n\n**身份验证攻击**\n如果攻击前获取WPA/WPA2密码短语并捕获四次握手过程，就能重新生成动态加密密钥，进而进行流量解密。\n\n**MAC欺骗**\nMAC地址过滤是一种安全方式，但是可以MAC地址欺骗的方式绕过这种安全机制。应采用多种安全方案体系。\n\n**无线劫持**\n无线劫持（wireless hijacking)又称双面恶魔攻击(evil twin attack)，步骤如下：\n攻击者创建相同SSID但不同信道的接入点；\n攻击者阻塞目标热点信道，迫使目标客户端漫游到自己创建的热点，实现二层劫持；\n攻击者热点为客户端分配DCHCP IP；\n攻击者热点桥接到自己的第二个无线接口；\n第二个无线接口接入原目标热点，这样就实现了在客户端和原目标热点之间传入攻击者设备。\n\n无线劫持的另一种形式称为Wi-Fi网络钓鱼攻击。\n\n唯一能阻止无线劫持的途径是部署相互身份验证解决方案802.1X/EAP。\n\n**拒绝服务攻击**\n利用合适的工具阻止合法用户访问网络资源，从而在一段时间内瘫痪无线局域网。\n主要是在物理层和数据链路层发起攻击。\n频谱分析仪和协议分析仪是检测攻击的最佳工具。\n\n**社会工程学攻击**\n一种诱使用户泄漏机密信息的技术，阻止社会工程学攻击的最后方法是严格贯彻安全策略，以防止机密外泄。\n\n","slug":"CWNA-无线攻击、入侵监控与安全策略","published":1,"updated":"2022-02-25T06:48:47.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud43002218jx49jwds9i","content":"<p>无线攻击</p>\n<blockquote>\n<p>非法无线设备<br>对等攻击<br>窃听<br>加密破解<br>KRACK攻击<br>身份验证攻击<br>MAC欺骗<br>管理界面漏洞<br>无线劫持<br>拒绝服务攻击<br>特定于供应商的攻击<br>社会工程学攻击</p>\n</blockquote>\n<p>入侵监控</p>\n<blockquote>\n<p>无线入侵防御系统<br>非法设备检测与抑制<br>频谱分析仪</p>\n</blockquote>\n<p>无线安全策略</p>\n<blockquote>\n<p>一般性安全策略<br>功能性安全策略<br>法律合规性<br>无线局域网安全策略建议</p>\n</blockquote>\n<h3 id=\"无线攻击\"><a href=\"#无线攻击\" class=\"headerlink\" title=\"无线攻击\"></a>无线攻击</h3><p><strong>非法无线设备</strong><br>它是某种不安全的开发网关，入侵者可以借此进入企业希望保护的有线基础设施。<br>大多数情况下，安装非法接入点的并非黑客，而是企业员工。<br>自组织网络也可能充当入侵企业网络的跳板。</p>\n<p><strong>对等攻击</strong><br>客户端隔离，可以用于防止对等攻击。</p>\n<p><strong>窃听</strong><br>有随意窃听和恶意窃听两种方式。<br>随意窃听，通过扫描获取周边无线网络信息。<br>恶意窃听，通过802.11协议分析仪捕获无线通信以获取隐私数据。</p>\n<p><strong>加密破解</strong><br>有线等效保密（WEP）是一种多年前就已遭到破解的802.11加密机制，互联网上有免费的破解工具可以快速破解。</p>\n<p><strong>KRACK攻击</strong><br>针对WPA2协议中用于动态生成加密密钥的四次握手过程攻击，已经被新的固件修复。</p>\n<p><strong>身份验证攻击</strong><br>如果攻击前获取WPA/WPA2密码短语并捕获四次握手过程，就能重新生成动态加密密钥，进而进行流量解密。</p>\n<p><strong>MAC欺骗</strong><br>MAC地址过滤是一种安全方式，但是可以MAC地址欺骗的方式绕过这种安全机制。应采用多种安全方案体系。</p>\n<p><strong>无线劫持</strong><br>无线劫持（wireless hijacking)又称双面恶魔攻击(evil twin attack)，步骤如下：<br>攻击者创建相同SSID但不同信道的接入点；<br>攻击者阻塞目标热点信道，迫使目标客户端漫游到自己创建的热点，实现二层劫持；<br>攻击者热点为客户端分配DCHCP IP；<br>攻击者热点桥接到自己的第二个无线接口；<br>第二个无线接口接入原目标热点，这样就实现了在客户端和原目标热点之间传入攻击者设备。</p>\n<p>无线劫持的另一种形式称为Wi-Fi网络钓鱼攻击。</p>\n<p>唯一能阻止无线劫持的途径是部署相互身份验证解决方案802.1X/EAP。</p>\n<p><strong>拒绝服务攻击</strong><br>利用合适的工具阻止合法用户访问网络资源，从而在一段时间内瘫痪无线局域网。<br>主要是在物理层和数据链路层发起攻击。<br>频谱分析仪和协议分析仪是检测攻击的最佳工具。</p>\n<p><strong>社会工程学攻击</strong><br>一种诱使用户泄漏机密信息的技术，阻止社会工程学攻击的最后方法是严格贯彻安全策略，以防止机密外泄。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>无线攻击</p>\n<blockquote>\n<p>非法无线设备<br>对等攻击<br>窃听<br>加密破解<br>KRACK攻击<br>身份验证攻击<br>MAC欺骗<br>管理界面漏洞<br>无线劫持<br>拒绝服务攻击<br>特定于供应商的攻击<br>社会工程学攻击</p>\n</blockquote>\n<p>入侵监控</p>\n<blockquote>\n<p>无线入侵防御系统<br>非法设备检测与抑制<br>频谱分析仪</p>\n</blockquote>\n<p>无线安全策略</p>\n<blockquote>\n<p>一般性安全策略<br>功能性安全策略<br>法律合规性<br>无线局域网安全策略建议</p>\n</blockquote>\n<h3 id=\"无线攻击\"><a href=\"#无线攻击\" class=\"headerlink\" title=\"无线攻击\"></a>无线攻击</h3><p><strong>非法无线设备</strong><br>它是某种不安全的开发网关，入侵者可以借此进入企业希望保护的有线基础设施。<br>大多数情况下，安装非法接入点的并非黑客，而是企业员工。<br>自组织网络也可能充当入侵企业网络的跳板。</p>\n<p><strong>对等攻击</strong><br>客户端隔离，可以用于防止对等攻击。</p>\n<p><strong>窃听</strong><br>有随意窃听和恶意窃听两种方式。<br>随意窃听，通过扫描获取周边无线网络信息。<br>恶意窃听，通过802.11协议分析仪捕获无线通信以获取隐私数据。</p>\n<p><strong>加密破解</strong><br>有线等效保密（WEP）是一种多年前就已遭到破解的802.11加密机制，互联网上有免费的破解工具可以快速破解。</p>\n<p><strong>KRACK攻击</strong><br>针对WPA2协议中用于动态生成加密密钥的四次握手过程攻击，已经被新的固件修复。</p>\n<p><strong>身份验证攻击</strong><br>如果攻击前获取WPA/WPA2密码短语并捕获四次握手过程，就能重新生成动态加密密钥，进而进行流量解密。</p>\n<p><strong>MAC欺骗</strong><br>MAC地址过滤是一种安全方式，但是可以MAC地址欺骗的方式绕过这种安全机制。应采用多种安全方案体系。</p>\n<p><strong>无线劫持</strong><br>无线劫持（wireless hijacking)又称双面恶魔攻击(evil twin attack)，步骤如下：<br>攻击者创建相同SSID但不同信道的接入点；<br>攻击者阻塞目标热点信道，迫使目标客户端漫游到自己创建的热点，实现二层劫持；<br>攻击者热点为客户端分配DCHCP IP；<br>攻击者热点桥接到自己的第二个无线接口；<br>第二个无线接口接入原目标热点，这样就实现了在客户端和原目标热点之间传入攻击者设备。</p>\n<p>无线劫持的另一种形式称为Wi-Fi网络钓鱼攻击。</p>\n<p>唯一能阻止无线劫持的途径是部署相互身份验证解决方案802.1X/EAP。</p>\n<p><strong>拒绝服务攻击</strong><br>利用合适的工具阻止合法用户访问网络资源，从而在一段时间内瘫痪无线局域网。<br>主要是在物理层和数据链路层发起攻击。<br>频谱分析仪和协议分析仪是检测攻击的最佳工具。</p>\n<p><strong>社会工程学攻击</strong><br>一种诱使用户泄漏机密信息的技术，阻止社会工程学攻击的最后方法是严格贯彻安全策略，以防止机密外泄。</p>\n"},{"title":"CWNA:无线网络与扩频技术","date":"2022-01-26T07:40:18.000Z","_content":"\n### 正交频分复用\n正交频分复用(OFDM),被广泛用于有线和无线通信。\nIEEE 802.11-2016规定 OFDM使用5GHz频段传输数据； ERP-OFDM 使用2.4GHz频段传输数据。\n\n20MHz OFDM信道包括64个副载波，其中\n12个副载波充当保护频带，不做数据传输之用。\n48个副载波用于传输调制数据。\n4个副载波称为导频载波，用于发射机和接收机之间的动态校准。\n每个副载波的宽度为312.5KHz，副载波之间间隔正交。\n\n**卷积编码**\n为了增强抗窄带干扰的能力，OFDM采用卷积码作为纠错码。\n\n**调制**\n星座图（constellation diagram)是一种二维图，通常表示QAM调制。\n横轴通常是相移\n纵轴通常是幅移\n16-QAM   4x4\n\n### 正交频分多址\nOFDMA技术将信道划分为较小的子信道， 以便同时进行多用户传输。\n\n### 工业科学和医疗频段（ISM）\n902~928MHz (26MHz宽)\n2.4GHz~2.5GHz(100MHz宽)\n5.725~5.875GHz(150MHz宽)\n\n802.11-2016标准规定，无线局域网可以使用该频段的14条信道传输数据，但各国信道分配可能不同。\n5.8GHz ISM频段比U-NII-3频段宽25MHz\n\n### 非授权国家信息基础设施频段\n使用5GHz U-NII频段传输数据的802.11无线接口如下：\n801.11a OFDM\n802.11n HT\n802.11ac VHT\n802.11-2016标准规定，无线局域网可以使用全部的4个U-NII频段，总共25条信道传输数据，但各国信道分配和功率管理不同。\n\n**U-NII-1频段**\nU-NII-1频段即U-NII低频段，为5.150GHz~5.250GHz的100MHz，4条20MHz信道。\n\n**U-NII-2A频段**\nU-NII-2A频段即原来的U-NII-2频段，为5.250~5.350GHz，宽度为100MHz，4条20MHz信道。\n\n**U-NII-2C频段**\nU-NII-2C频段即原来的U-NII-2扩展频段，5.470~5.725GHz，宽度为255MHz，11条20MHz信道。\n使用该频段的802.11无线接口必须支持DFS \n\n**U-NII-3频段**\nU-NII-3频段即NII高频段，为5.725~5.850GHz，宽度125MHz。\n\n\n","source":"_posts/CWNA-无线网络与扩频技术-2.md","raw":"---\ntitle: 'CWNA:无线网络与扩频技术'\ndate: 2022-01-26 15:40:18\ntags: 'Wi-Fi'\n---\n\n### 正交频分复用\n正交频分复用(OFDM),被广泛用于有线和无线通信。\nIEEE 802.11-2016规定 OFDM使用5GHz频段传输数据； ERP-OFDM 使用2.4GHz频段传输数据。\n\n20MHz OFDM信道包括64个副载波，其中\n12个副载波充当保护频带，不做数据传输之用。\n48个副载波用于传输调制数据。\n4个副载波称为导频载波，用于发射机和接收机之间的动态校准。\n每个副载波的宽度为312.5KHz，副载波之间间隔正交。\n\n**卷积编码**\n为了增强抗窄带干扰的能力，OFDM采用卷积码作为纠错码。\n\n**调制**\n星座图（constellation diagram)是一种二维图，通常表示QAM调制。\n横轴通常是相移\n纵轴通常是幅移\n16-QAM   4x4\n\n### 正交频分多址\nOFDMA技术将信道划分为较小的子信道， 以便同时进行多用户传输。\n\n### 工业科学和医疗频段（ISM）\n902~928MHz (26MHz宽)\n2.4GHz~2.5GHz(100MHz宽)\n5.725~5.875GHz(150MHz宽)\n\n802.11-2016标准规定，无线局域网可以使用该频段的14条信道传输数据，但各国信道分配可能不同。\n5.8GHz ISM频段比U-NII-3频段宽25MHz\n\n### 非授权国家信息基础设施频段\n使用5GHz U-NII频段传输数据的802.11无线接口如下：\n801.11a OFDM\n802.11n HT\n802.11ac VHT\n802.11-2016标准规定，无线局域网可以使用全部的4个U-NII频段，总共25条信道传输数据，但各国信道分配和功率管理不同。\n\n**U-NII-1频段**\nU-NII-1频段即U-NII低频段，为5.150GHz~5.250GHz的100MHz，4条20MHz信道。\n\n**U-NII-2A频段**\nU-NII-2A频段即原来的U-NII-2频段，为5.250~5.350GHz，宽度为100MHz，4条20MHz信道。\n\n**U-NII-2C频段**\nU-NII-2C频段即原来的U-NII-2扩展频段，5.470~5.725GHz，宽度为255MHz，11条20MHz信道。\n使用该频段的802.11无线接口必须支持DFS \n\n**U-NII-3频段**\nU-NII-3频段即NII高频段，为5.725~5.850GHz，宽度125MHz。\n\n\n","slug":"CWNA-无线网络与扩频技术-2","published":1,"updated":"2022-01-26T09:18:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud45002418jxd05a3h8p","content":"<h3 id=\"正交频分复用\"><a href=\"#正交频分复用\" class=\"headerlink\" title=\"正交频分复用\"></a>正交频分复用</h3><p>正交频分复用(OFDM),被广泛用于有线和无线通信。<br>IEEE 802.11-2016规定 OFDM使用5GHz频段传输数据； ERP-OFDM 使用2.4GHz频段传输数据。</p>\n<p>20MHz OFDM信道包括64个副载波，其中<br>12个副载波充当保护频带，不做数据传输之用。<br>48个副载波用于传输调制数据。<br>4个副载波称为导频载波，用于发射机和接收机之间的动态校准。<br>每个副载波的宽度为312.5KHz，副载波之间间隔正交。</p>\n<p><strong>卷积编码</strong><br>为了增强抗窄带干扰的能力，OFDM采用卷积码作为纠错码。</p>\n<p><strong>调制</strong><br>星座图（constellation diagram)是一种二维图，通常表示QAM调制。<br>横轴通常是相移<br>纵轴通常是幅移<br>16-QAM   4x4</p>\n<h3 id=\"正交频分多址\"><a href=\"#正交频分多址\" class=\"headerlink\" title=\"正交频分多址\"></a>正交频分多址</h3><p>OFDMA技术将信道划分为较小的子信道， 以便同时进行多用户传输。</p>\n<h3 id=\"工业科学和医疗频段（ISM）\"><a href=\"#工业科学和医疗频段（ISM）\" class=\"headerlink\" title=\"工业科学和医疗频段（ISM）\"></a>工业科学和医疗频段（ISM）</h3><p>902~928MHz (26MHz宽)<br>2.4GHz~2.5GHz(100MHz宽)<br>5.725~5.875GHz(150MHz宽)</p>\n<p>802.11-2016标准规定，无线局域网可以使用该频段的14条信道传输数据，但各国信道分配可能不同。<br>5.8GHz ISM频段比U-NII-3频段宽25MHz</p>\n<h3 id=\"非授权国家信息基础设施频段\"><a href=\"#非授权国家信息基础设施频段\" class=\"headerlink\" title=\"非授权国家信息基础设施频段\"></a>非授权国家信息基础设施频段</h3><p>使用5GHz U-NII频段传输数据的802.11无线接口如下：<br>801.11a OFDM<br>802.11n HT<br>802.11ac VHT<br>802.11-2016标准规定，无线局域网可以使用全部的4个U-NII频段，总共25条信道传输数据，但各国信道分配和功率管理不同。</p>\n<p><strong>U-NII-1频段</strong><br>U-NII-1频段即U-NII低频段，为5.150GHz~5.250GHz的100MHz，4条20MHz信道。</p>\n<p><strong>U-NII-2A频段</strong><br>U-NII-2A频段即原来的U-NII-2频段，为5.250~5.350GHz，宽度为100MHz，4条20MHz信道。</p>\n<p><strong>U-NII-2C频段</strong><br>U-NII-2C频段即原来的U-NII-2扩展频段，5.470~5.725GHz，宽度为255MHz，11条20MHz信道。<br>使用该频段的802.11无线接口必须支持DFS </p>\n<p><strong>U-NII-3频段</strong><br>U-NII-3频段即NII高频段，为5.725~5.850GHz，宽度125MHz。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"正交频分复用\"><a href=\"#正交频分复用\" class=\"headerlink\" title=\"正交频分复用\"></a>正交频分复用</h3><p>正交频分复用(OFDM),被广泛用于有线和无线通信。<br>IEEE 802.11-2016规定 OFDM使用5GHz频段传输数据； ERP-OFDM 使用2.4GHz频段传输数据。</p>\n<p>20MHz OFDM信道包括64个副载波，其中<br>12个副载波充当保护频带，不做数据传输之用。<br>48个副载波用于传输调制数据。<br>4个副载波称为导频载波，用于发射机和接收机之间的动态校准。<br>每个副载波的宽度为312.5KHz，副载波之间间隔正交。</p>\n<p><strong>卷积编码</strong><br>为了增强抗窄带干扰的能力，OFDM采用卷积码作为纠错码。</p>\n<p><strong>调制</strong><br>星座图（constellation diagram)是一种二维图，通常表示QAM调制。<br>横轴通常是相移<br>纵轴通常是幅移<br>16-QAM   4x4</p>\n<h3 id=\"正交频分多址\"><a href=\"#正交频分多址\" class=\"headerlink\" title=\"正交频分多址\"></a>正交频分多址</h3><p>OFDMA技术将信道划分为较小的子信道， 以便同时进行多用户传输。</p>\n<h3 id=\"工业科学和医疗频段（ISM）\"><a href=\"#工业科学和医疗频段（ISM）\" class=\"headerlink\" title=\"工业科学和医疗频段（ISM）\"></a>工业科学和医疗频段（ISM）</h3><p>902~928MHz (26MHz宽)<br>2.4GHz~2.5GHz(100MHz宽)<br>5.725~5.875GHz(150MHz宽)</p>\n<p>802.11-2016标准规定，无线局域网可以使用该频段的14条信道传输数据，但各国信道分配可能不同。<br>5.8GHz ISM频段比U-NII-3频段宽25MHz</p>\n<h3 id=\"非授权国家信息基础设施频段\"><a href=\"#非授权国家信息基础设施频段\" class=\"headerlink\" title=\"非授权国家信息基础设施频段\"></a>非授权国家信息基础设施频段</h3><p>使用5GHz U-NII频段传输数据的802.11无线接口如下：<br>801.11a OFDM<br>802.11n HT<br>802.11ac VHT<br>802.11-2016标准规定，无线局域网可以使用全部的4个U-NII频段，总共25条信道传输数据，但各国信道分配和功率管理不同。</p>\n<p><strong>U-NII-1频段</strong><br>U-NII-1频段即U-NII低频段，为5.150GHz~5.250GHz的100MHz，4条20MHz信道。</p>\n<p><strong>U-NII-2A频段</strong><br>U-NII-2A频段即原来的U-NII-2频段，为5.250~5.350GHz，宽度为100MHz，4条20MHz信道。</p>\n<p><strong>U-NII-2C频段</strong><br>U-NII-2C频段即原来的U-NII-2扩展频段，5.470~5.725GHz，宽度为255MHz，11条20MHz信道。<br>使用该频段的802.11无线接口必须支持DFS </p>\n<p><strong>U-NII-3频段</strong><br>U-NII-3频段即NII高频段，为5.725~5.850GHz，宽度125MHz。</p>\n"},{"title":"CWNA:无线网络与扩频技术","date":"2022-01-18T06:56:14.000Z","_content":"\n窄带与扩频\n> 多径干扰\n\n跳频扩频\n> 跳变序列\n> 驻留时间\n> 跳变时间\n> 调制\n\n直接序列扩频\n> DSSS数据编码\n> 调制\n\n正交频分复用\n> 卷积编码\n> 调制\n\n正交频分多址\n工业、科学和医疗频段\n非授权国家信息基础设施频段\n> U-NII-1频段\n> U-NII-2A频段\n> U-NII-2C频段\n> U-NII-3频段\n> 今后的U-NII频段\n\n3.6GHz频段\n4.9GHz频段\n未来的Wi-Fi频段\n> 1GHz一下频段\n> 60GHz频段\n> 空白电视频段\n\n2.4GHz信道\n5GHz信道\n> 5G长期演进技术\n\n邻信道、非邻信道与重叠信道\n吞吐量与带宽\n通信系统恢复能力\n> 802.11aj-2018\n\n### 窄带与扩频\n射频传输方式主要分为窄带和扩频两类。\n窄带：使用极窄的带宽发送携带的数据。   // 针对该频率范围的蓄意干扰或非蓄意干扰很容易破坏信号。\n扩频：使用超出实际所需的带宽发送数据。 // 抗干扰较强。\n\n### 跳频扩频\nFHSS:在一段时间内使用一个特定的频率传输数据，这段时间称为驻留时间。\n大致工作方式：首先使用一个很小的频率载波空间传输数据，然后跳变到另一个很小的频率载波空间传输数据，再跳到第三个频率载波空间。\n\n**跳变序列**\n跳频使用信道的跳变方式。跳变序列结束后将重复。\n所有FHSS发射机和接收机必须同时在同一载波跳上同步。FHSS接入点可以配置802.11原始标准定义的跳变序列，跳变序列信息通过信标管理帧发送给客户端。\n\n**驻留时间**\n在切换到跳变序列中下一个频率之前，FHSS系统使用特定频率传输数据的时间，称为驻留时间。\n\n**跳变时间**\n发射机从一个频率切换到另一个频率所需的时间。\n跳变时间通常200~300us，与100~200ms的典型驻留时间相比很短。\n跳变时间属于开销时间。一般而言，跳变越少吞吐量越高。\n跳变可以增强抗干扰，跳变越少越易受到干扰。\n\n### 直接序列扩频\n直接序列扩频(DSSS)，是802.11定义的原始标准。它仅使用一条信道进行通信。\n\n**DSSS数据编码**\n无线通信极易收到干扰，为此无线系统将每个数据比特编码为多个比特进行传输，称为处理增益。\n系统将一个数据比特转换为一系列称为码片的比特。\n单个数据比特转换为码片序列的过程称为展宽或码片成形。\n接收端将码片序列转换为单个比特的过程称为解扩。\n巴克码的11个比特中9个损坏，接收端无线接口仍然能够解析码片序列，并恢复出原始数据。\n\n**调制**\n使用展宽技术编码后，发射机需要调制数据以产生包含码片的载波信号。\n\n802.11和802.11b使用的编码与调制技术\n\n|编码方式|数据速率|编码方式|码片长度|编码比特|调制方式|\n|:----------:|:------:|:------:|:------:|:------:|\n|DSSS|1Mbps|巴克码|11|1|DBPSK|\n|DSSS|2Mbps|巴克码|11|1|DQPSK|\n|HR-DSSS|5.5Mbps|CCK|8|4|DQPSK|\n|HR-DSSS|11Mbps|CCK|8|8|DQPSK|\n\n（后续，OFDM）\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/CWNA-无线网络与扩频技术.md","raw":"---\ntitle: 'CWNA:无线网络与扩频技术'\ndate: 2022-01-18 14:56:14\ntags: 'Wi-Fi'\n---\n\n窄带与扩频\n> 多径干扰\n\n跳频扩频\n> 跳变序列\n> 驻留时间\n> 跳变时间\n> 调制\n\n直接序列扩频\n> DSSS数据编码\n> 调制\n\n正交频分复用\n> 卷积编码\n> 调制\n\n正交频分多址\n工业、科学和医疗频段\n非授权国家信息基础设施频段\n> U-NII-1频段\n> U-NII-2A频段\n> U-NII-2C频段\n> U-NII-3频段\n> 今后的U-NII频段\n\n3.6GHz频段\n4.9GHz频段\n未来的Wi-Fi频段\n> 1GHz一下频段\n> 60GHz频段\n> 空白电视频段\n\n2.4GHz信道\n5GHz信道\n> 5G长期演进技术\n\n邻信道、非邻信道与重叠信道\n吞吐量与带宽\n通信系统恢复能力\n> 802.11aj-2018\n\n### 窄带与扩频\n射频传输方式主要分为窄带和扩频两类。\n窄带：使用极窄的带宽发送携带的数据。   // 针对该频率范围的蓄意干扰或非蓄意干扰很容易破坏信号。\n扩频：使用超出实际所需的带宽发送数据。 // 抗干扰较强。\n\n### 跳频扩频\nFHSS:在一段时间内使用一个特定的频率传输数据，这段时间称为驻留时间。\n大致工作方式：首先使用一个很小的频率载波空间传输数据，然后跳变到另一个很小的频率载波空间传输数据，再跳到第三个频率载波空间。\n\n**跳变序列**\n跳频使用信道的跳变方式。跳变序列结束后将重复。\n所有FHSS发射机和接收机必须同时在同一载波跳上同步。FHSS接入点可以配置802.11原始标准定义的跳变序列，跳变序列信息通过信标管理帧发送给客户端。\n\n**驻留时间**\n在切换到跳变序列中下一个频率之前，FHSS系统使用特定频率传输数据的时间，称为驻留时间。\n\n**跳变时间**\n发射机从一个频率切换到另一个频率所需的时间。\n跳变时间通常200~300us，与100~200ms的典型驻留时间相比很短。\n跳变时间属于开销时间。一般而言，跳变越少吞吐量越高。\n跳变可以增强抗干扰，跳变越少越易受到干扰。\n\n### 直接序列扩频\n直接序列扩频(DSSS)，是802.11定义的原始标准。它仅使用一条信道进行通信。\n\n**DSSS数据编码**\n无线通信极易收到干扰，为此无线系统将每个数据比特编码为多个比特进行传输，称为处理增益。\n系统将一个数据比特转换为一系列称为码片的比特。\n单个数据比特转换为码片序列的过程称为展宽或码片成形。\n接收端将码片序列转换为单个比特的过程称为解扩。\n巴克码的11个比特中9个损坏，接收端无线接口仍然能够解析码片序列，并恢复出原始数据。\n\n**调制**\n使用展宽技术编码后，发射机需要调制数据以产生包含码片的载波信号。\n\n802.11和802.11b使用的编码与调制技术\n\n|编码方式|数据速率|编码方式|码片长度|编码比特|调制方式|\n|:----------:|:------:|:------:|:------:|:------:|\n|DSSS|1Mbps|巴克码|11|1|DBPSK|\n|DSSS|2Mbps|巴克码|11|1|DQPSK|\n|HR-DSSS|5.5Mbps|CCK|8|4|DQPSK|\n|HR-DSSS|11Mbps|CCK|8|8|DQPSK|\n\n（后续，OFDM）\n\n\n\n\n\n\n\n\n\n\n","slug":"CWNA-无线网络与扩频技术","published":1,"updated":"2022-01-20T06:52:43.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud46002618jx2wz263li","content":"<p>窄带与扩频</p>\n<blockquote>\n<p>多径干扰</p>\n</blockquote>\n<p>跳频扩频</p>\n<blockquote>\n<p>跳变序列<br>驻留时间<br>跳变时间<br>调制</p>\n</blockquote>\n<p>直接序列扩频</p>\n<blockquote>\n<p>DSSS数据编码<br>调制</p>\n</blockquote>\n<p>正交频分复用</p>\n<blockquote>\n<p>卷积编码<br>调制</p>\n</blockquote>\n<p>正交频分多址<br>工业、科学和医疗频段<br>非授权国家信息基础设施频段</p>\n<blockquote>\n<p>U-NII-1频段<br>U-NII-2A频段<br>U-NII-2C频段<br>U-NII-3频段<br>今后的U-NII频段</p>\n</blockquote>\n<p>3.6GHz频段<br>4.9GHz频段<br>未来的Wi-Fi频段</p>\n<blockquote>\n<p>1GHz一下频段<br>60GHz频段<br>空白电视频段</p>\n</blockquote>\n<p>2.4GHz信道<br>5GHz信道</p>\n<blockquote>\n<p>5G长期演进技术</p>\n</blockquote>\n<p>邻信道、非邻信道与重叠信道<br>吞吐量与带宽<br>通信系统恢复能力</p>\n<blockquote>\n<p>802.11aj-2018</p>\n</blockquote>\n<h3 id=\"窄带与扩频\"><a href=\"#窄带与扩频\" class=\"headerlink\" title=\"窄带与扩频\"></a>窄带与扩频</h3><p>射频传输方式主要分为窄带和扩频两类。<br>窄带：使用极窄的带宽发送携带的数据。   // 针对该频率范围的蓄意干扰或非蓄意干扰很容易破坏信号。<br>扩频：使用超出实际所需的带宽发送数据。 // 抗干扰较强。</p>\n<h3 id=\"跳频扩频\"><a href=\"#跳频扩频\" class=\"headerlink\" title=\"跳频扩频\"></a>跳频扩频</h3><p>FHSS:在一段时间内使用一个特定的频率传输数据，这段时间称为驻留时间。<br>大致工作方式：首先使用一个很小的频率载波空间传输数据，然后跳变到另一个很小的频率载波空间传输数据，再跳到第三个频率载波空间。</p>\n<p><strong>跳变序列</strong><br>跳频使用信道的跳变方式。跳变序列结束后将重复。<br>所有FHSS发射机和接收机必须同时在同一载波跳上同步。FHSS接入点可以配置802.11原始标准定义的跳变序列，跳变序列信息通过信标管理帧发送给客户端。</p>\n<p><strong>驻留时间</strong><br>在切换到跳变序列中下一个频率之前，FHSS系统使用特定频率传输数据的时间，称为驻留时间。</p>\n<p><strong>跳变时间</strong><br>发射机从一个频率切换到另一个频率所需的时间。<br>跳变时间通常200~300us，与100~200ms的典型驻留时间相比很短。<br>跳变时间属于开销时间。一般而言，跳变越少吞吐量越高。<br>跳变可以增强抗干扰，跳变越少越易受到干扰。</p>\n<h3 id=\"直接序列扩频\"><a href=\"#直接序列扩频\" class=\"headerlink\" title=\"直接序列扩频\"></a>直接序列扩频</h3><p>直接序列扩频(DSSS)，是802.11定义的原始标准。它仅使用一条信道进行通信。</p>\n<p><strong>DSSS数据编码</strong><br>无线通信极易收到干扰，为此无线系统将每个数据比特编码为多个比特进行传输，称为处理增益。<br>系统将一个数据比特转换为一系列称为码片的比特。<br>单个数据比特转换为码片序列的过程称为展宽或码片成形。<br>接收端将码片序列转换为单个比特的过程称为解扩。<br>巴克码的11个比特中9个损坏，接收端无线接口仍然能够解析码片序列，并恢复出原始数据。</p>\n<p><strong>调制</strong><br>使用展宽技术编码后，发射机需要调制数据以产生包含码片的载波信号。</p>\n<p>802.11和802.11b使用的编码与调制技术</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">编码方式</th>\n<th style=\"text-align:center\">数据速率</th>\n<th style=\"text-align:center\">编码方式</th>\n<th style=\"text-align:center\">码片长度</th>\n<th style=\"text-align:center\">编码比特</th>\n<th>调制方式</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">DSSS</td>\n<td style=\"text-align:center\">1Mbps</td>\n<td style=\"text-align:center\">巴克码</td>\n<td style=\"text-align:center\">11</td>\n<td style=\"text-align:center\">1</td>\n<td>DBPSK</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">DSSS</td>\n<td style=\"text-align:center\">2Mbps</td>\n<td style=\"text-align:center\">巴克码</td>\n<td style=\"text-align:center\">11</td>\n<td style=\"text-align:center\">1</td>\n<td>DQPSK</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">HR-DSSS</td>\n<td style=\"text-align:center\">5.5Mbps</td>\n<td style=\"text-align:center\">CCK</td>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">4</td>\n<td>DQPSK</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">HR-DSSS</td>\n<td style=\"text-align:center\">11Mbps</td>\n<td style=\"text-align:center\">CCK</td>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">8</td>\n<td>DQPSK</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>（后续，OFDM）</p>\n","site":{"data":{}},"excerpt":"","more":"<p>窄带与扩频</p>\n<blockquote>\n<p>多径干扰</p>\n</blockquote>\n<p>跳频扩频</p>\n<blockquote>\n<p>跳变序列<br>驻留时间<br>跳变时间<br>调制</p>\n</blockquote>\n<p>直接序列扩频</p>\n<blockquote>\n<p>DSSS数据编码<br>调制</p>\n</blockquote>\n<p>正交频分复用</p>\n<blockquote>\n<p>卷积编码<br>调制</p>\n</blockquote>\n<p>正交频分多址<br>工业、科学和医疗频段<br>非授权国家信息基础设施频段</p>\n<blockquote>\n<p>U-NII-1频段<br>U-NII-2A频段<br>U-NII-2C频段<br>U-NII-3频段<br>今后的U-NII频段</p>\n</blockquote>\n<p>3.6GHz频段<br>4.9GHz频段<br>未来的Wi-Fi频段</p>\n<blockquote>\n<p>1GHz一下频段<br>60GHz频段<br>空白电视频段</p>\n</blockquote>\n<p>2.4GHz信道<br>5GHz信道</p>\n<blockquote>\n<p>5G长期演进技术</p>\n</blockquote>\n<p>邻信道、非邻信道与重叠信道<br>吞吐量与带宽<br>通信系统恢复能力</p>\n<blockquote>\n<p>802.11aj-2018</p>\n</blockquote>\n<h3 id=\"窄带与扩频\"><a href=\"#窄带与扩频\" class=\"headerlink\" title=\"窄带与扩频\"></a>窄带与扩频</h3><p>射频传输方式主要分为窄带和扩频两类。<br>窄带：使用极窄的带宽发送携带的数据。   // 针对该频率范围的蓄意干扰或非蓄意干扰很容易破坏信号。<br>扩频：使用超出实际所需的带宽发送数据。 // 抗干扰较强。</p>\n<h3 id=\"跳频扩频\"><a href=\"#跳频扩频\" class=\"headerlink\" title=\"跳频扩频\"></a>跳频扩频</h3><p>FHSS:在一段时间内使用一个特定的频率传输数据，这段时间称为驻留时间。<br>大致工作方式：首先使用一个很小的频率载波空间传输数据，然后跳变到另一个很小的频率载波空间传输数据，再跳到第三个频率载波空间。</p>\n<p><strong>跳变序列</strong><br>跳频使用信道的跳变方式。跳变序列结束后将重复。<br>所有FHSS发射机和接收机必须同时在同一载波跳上同步。FHSS接入点可以配置802.11原始标准定义的跳变序列，跳变序列信息通过信标管理帧发送给客户端。</p>\n<p><strong>驻留时间</strong><br>在切换到跳变序列中下一个频率之前，FHSS系统使用特定频率传输数据的时间，称为驻留时间。</p>\n<p><strong>跳变时间</strong><br>发射机从一个频率切换到另一个频率所需的时间。<br>跳变时间通常200~300us，与100~200ms的典型驻留时间相比很短。<br>跳变时间属于开销时间。一般而言，跳变越少吞吐量越高。<br>跳变可以增强抗干扰，跳变越少越易受到干扰。</p>\n<h3 id=\"直接序列扩频\"><a href=\"#直接序列扩频\" class=\"headerlink\" title=\"直接序列扩频\"></a>直接序列扩频</h3><p>直接序列扩频(DSSS)，是802.11定义的原始标准。它仅使用一条信道进行通信。</p>\n<p><strong>DSSS数据编码</strong><br>无线通信极易收到干扰，为此无线系统将每个数据比特编码为多个比特进行传输，称为处理增益。<br>系统将一个数据比特转换为一系列称为码片的比特。<br>单个数据比特转换为码片序列的过程称为展宽或码片成形。<br>接收端将码片序列转换为单个比特的过程称为解扩。<br>巴克码的11个比特中9个损坏，接收端无线接口仍然能够解析码片序列，并恢复出原始数据。</p>\n<p><strong>调制</strong><br>使用展宽技术编码后，发射机需要调制数据以产生包含码片的载波信号。</p>\n<p>802.11和802.11b使用的编码与调制技术</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">编码方式</th>\n<th style=\"text-align:center\">数据速率</th>\n<th style=\"text-align:center\">编码方式</th>\n<th style=\"text-align:center\">码片长度</th>\n<th style=\"text-align:center\">编码比特</th>\n<th>调制方式</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">DSSS</td>\n<td style=\"text-align:center\">1Mbps</td>\n<td style=\"text-align:center\">巴克码</td>\n<td style=\"text-align:center\">11</td>\n<td style=\"text-align:center\">1</td>\n<td>DBPSK</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">DSSS</td>\n<td style=\"text-align:center\">2Mbps</td>\n<td style=\"text-align:center\">巴克码</td>\n<td style=\"text-align:center\">11</td>\n<td style=\"text-align:center\">1</td>\n<td>DQPSK</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">HR-DSSS</td>\n<td style=\"text-align:center\">5.5Mbps</td>\n<td style=\"text-align:center\">CCK</td>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">4</td>\n<td>DQPSK</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">HR-DSSS</td>\n<td style=\"text-align:center\">11Mbps</td>\n<td style=\"text-align:center\">CCK</td>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">8</td>\n<td>DQPSK</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>（后续，OFDM）</p>\n"},{"title":"CWNA:无线网络与扩频技术（三）","date":"2022-01-26T11:45:45.000Z","_content":"\n### 2.4GHz信道\nIEEE将2.4GHz ISM频段划分为14条独立的信道。\n\nTable-2.4GHz信道规划\n\n|信道编号|中心频率(GHz)|\n|:----------:|:------:|\n|1|2.412|\n|2|2.417|\n|3|2.422|\n|4|2.427|\n|5|2.432|\n|6|2.437|\n|7|2.442|\n|8|2.447|\n|9|2.452|\n|10|2.457|\n|11|2.462|\n|12|2.467|\n|13|2.472|\n|14|**2.484**|\n\n802.11 DSSS 和 802.11 HR-DSSS使用的是22MHz的信道\n信道中心频率间隔5MHz\nOFDM技术使用的是20MHz的信道带宽。\n2.4G一般有三个不重叠信道：1，6，11   或 2,7,12 或 3，8，13\n\n\n### 5GHz信道\n信道中心频率 = 信道编号 X 5 + 5000\n例如：\n36 X 5 + 5000 = 5180MHz\n\n**5GHz 信道**\n36，40，44，48，52，56，60，64，100，104，108，112，116，120，124，128，132，136，140，144，149，153，157，161，165，，169，173，177，181\n\n### 非重叠信道\n802.11 DSSS信道中心频率必须相隔30MHz，认为互不重叠；\n802.11b HR-DSSS和 802.11g ERP信道中心频率必须相隔25MHz认为互不重叠；\n5G OFDM信道中心频率之间必须相关20MHz，认为互不重叠；\n\n\n### 邻信道干扰\n用于描述信道复用设计不当导致的频率空间重叠。\n\n### 吞吐量与带宽\n影响数据吞吐量的因素有：\n> 带宽\n> 数据编码\n> 调制\n> 介质争用\n> 加密\n\n\n数据编码和调制方式决定了数据速率，数据速率有时又称为数据带宽。\n例如：\n802.11a OFDM无线接口能以6，9，12，18，24，36，48，54Mbps的速率传输数据，但所有的U-NII信道的频率带宽相同，速率不同时由\n数据编码和调试方式不同。\n\n\n802.11网络采用带冲突避免的载波监听多路访问（CSMA/CA）作为介质访问方式，以确保在任何给定的时间，只有一台无线设备可以使用介质传输数据。\n\n802.11 a/b/g实际数总吞吐量一般不会超过数据速率的50%；  CSMA/CA 产生的介质争用开销通常为带宽的50%\n802.11 n/ac传输，实际吞吐量为数据速率的60%~70%；  CSMA/CA 产生的介质争用开销通常为带宽的35%\n\nRTS/CTS 机制也会增加通信开销，影响系统吞吐量。\n\n\n\n\n","source":"_posts/CWNA-无线网络与扩频技术（三）.md","raw":"---\ntitle: 'CWNA:无线网络与扩频技术（三）'\ndate: 2022-01-26 19:45:45\ntags: 'Wi-Fi'\n---\n\n### 2.4GHz信道\nIEEE将2.4GHz ISM频段划分为14条独立的信道。\n\nTable-2.4GHz信道规划\n\n|信道编号|中心频率(GHz)|\n|:----------:|:------:|\n|1|2.412|\n|2|2.417|\n|3|2.422|\n|4|2.427|\n|5|2.432|\n|6|2.437|\n|7|2.442|\n|8|2.447|\n|9|2.452|\n|10|2.457|\n|11|2.462|\n|12|2.467|\n|13|2.472|\n|14|**2.484**|\n\n802.11 DSSS 和 802.11 HR-DSSS使用的是22MHz的信道\n信道中心频率间隔5MHz\nOFDM技术使用的是20MHz的信道带宽。\n2.4G一般有三个不重叠信道：1，6，11   或 2,7,12 或 3，8，13\n\n\n### 5GHz信道\n信道中心频率 = 信道编号 X 5 + 5000\n例如：\n36 X 5 + 5000 = 5180MHz\n\n**5GHz 信道**\n36，40，44，48，52，56，60，64，100，104，108，112，116，120，124，128，132，136，140，144，149，153，157，161，165，，169，173，177，181\n\n### 非重叠信道\n802.11 DSSS信道中心频率必须相隔30MHz，认为互不重叠；\n802.11b HR-DSSS和 802.11g ERP信道中心频率必须相隔25MHz认为互不重叠；\n5G OFDM信道中心频率之间必须相关20MHz，认为互不重叠；\n\n\n### 邻信道干扰\n用于描述信道复用设计不当导致的频率空间重叠。\n\n### 吞吐量与带宽\n影响数据吞吐量的因素有：\n> 带宽\n> 数据编码\n> 调制\n> 介质争用\n> 加密\n\n\n数据编码和调制方式决定了数据速率，数据速率有时又称为数据带宽。\n例如：\n802.11a OFDM无线接口能以6，9，12，18，24，36，48，54Mbps的速率传输数据，但所有的U-NII信道的频率带宽相同，速率不同时由\n数据编码和调试方式不同。\n\n\n802.11网络采用带冲突避免的载波监听多路访问（CSMA/CA）作为介质访问方式，以确保在任何给定的时间，只有一台无线设备可以使用介质传输数据。\n\n802.11 a/b/g实际数总吞吐量一般不会超过数据速率的50%；  CSMA/CA 产生的介质争用开销通常为带宽的50%\n802.11 n/ac传输，实际吞吐量为数据速率的60%~70%；  CSMA/CA 产生的介质争用开销通常为带宽的35%\n\nRTS/CTS 机制也会增加通信开销，影响系统吞吐量。\n\n\n\n\n","slug":"CWNA-无线网络与扩频技术（三）","published":1,"updated":"2022-01-26T12:29:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud47002818jx7chtaika","content":"<h3 id=\"2-4GHz信道\"><a href=\"#2-4GHz信道\" class=\"headerlink\" title=\"2.4GHz信道\"></a>2.4GHz信道</h3><p>IEEE将2.4GHz ISM频段划分为14条独立的信道。</p>\n<p>Table-2.4GHz信道规划</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">信道编号</th>\n<th style=\"text-align:center\">中心频率(GHz)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">2.412</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">2.417</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">2.422</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">2.427</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">2.432</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">2.437</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7</td>\n<td style=\"text-align:center\">2.442</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">2.447</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">9</td>\n<td style=\"text-align:center\">2.452</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">10</td>\n<td style=\"text-align:center\">2.457</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">11</td>\n<td style=\"text-align:center\">2.462</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">12</td>\n<td style=\"text-align:center\">2.467</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">13</td>\n<td style=\"text-align:center\">2.472</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">14</td>\n<td style=\"text-align:center\"><strong>2.484</strong></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>802.11 DSSS 和 802.11 HR-DSSS使用的是22MHz的信道<br>信道中心频率间隔5MHz<br>OFDM技术使用的是20MHz的信道带宽。<br>2.4G一般有三个不重叠信道：1，6，11   或 2,7,12 或 3，8，13</p>\n<h3 id=\"5GHz信道\"><a href=\"#5GHz信道\" class=\"headerlink\" title=\"5GHz信道\"></a>5GHz信道</h3><p>信道中心频率 = 信道编号 X 5 + 5000<br>例如：<br>36 X 5 + 5000 = 5180MHz</p>\n<p><strong>5GHz 信道</strong><br>36，40，44，48，52，56，60，64，100，104，108，112，116，120，124，128，132，136，140，144，149，153，157，161，165，，169，173，177，181</p>\n<h3 id=\"非重叠信道\"><a href=\"#非重叠信道\" class=\"headerlink\" title=\"非重叠信道\"></a>非重叠信道</h3><p>802.11 DSSS信道中心频率必须相隔30MHz，认为互不重叠；<br>802.11b HR-DSSS和 802.11g ERP信道中心频率必须相隔25MHz认为互不重叠；<br>5G OFDM信道中心频率之间必须相关20MHz，认为互不重叠；</p>\n<h3 id=\"邻信道干扰\"><a href=\"#邻信道干扰\" class=\"headerlink\" title=\"邻信道干扰\"></a>邻信道干扰</h3><p>用于描述信道复用设计不当导致的频率空间重叠。</p>\n<h3 id=\"吞吐量与带宽\"><a href=\"#吞吐量与带宽\" class=\"headerlink\" title=\"吞吐量与带宽\"></a>吞吐量与带宽</h3><p>影响数据吞吐量的因素有：</p>\n<blockquote>\n<p>带宽<br>数据编码<br>调制<br>介质争用<br>加密</p>\n</blockquote>\n<p>数据编码和调制方式决定了数据速率，数据速率有时又称为数据带宽。<br>例如：<br>802.11a OFDM无线接口能以6，9，12，18，24，36，48，54Mbps的速率传输数据，但所有的U-NII信道的频率带宽相同，速率不同时由<br>数据编码和调试方式不同。</p>\n<p>802.11网络采用带冲突避免的载波监听多路访问（CSMA/CA）作为介质访问方式，以确保在任何给定的时间，只有一台无线设备可以使用介质传输数据。</p>\n<p>802.11 a/b/g实际数总吞吐量一般不会超过数据速率的50%；  CSMA/CA 产生的介质争用开销通常为带宽的50%<br>802.11 n/ac传输，实际吞吐量为数据速率的60%~70%；  CSMA/CA 产生的介质争用开销通常为带宽的35%</p>\n<p>RTS/CTS 机制也会增加通信开销，影响系统吞吐量。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"2-4GHz信道\"><a href=\"#2-4GHz信道\" class=\"headerlink\" title=\"2.4GHz信道\"></a>2.4GHz信道</h3><p>IEEE将2.4GHz ISM频段划分为14条独立的信道。</p>\n<p>Table-2.4GHz信道规划</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">信道编号</th>\n<th style=\"text-align:center\">中心频率(GHz)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">2.412</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">2.417</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">2.422</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">2.427</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">2.432</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">6</td>\n<td style=\"text-align:center\">2.437</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7</td>\n<td style=\"text-align:center\">2.442</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">2.447</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">9</td>\n<td style=\"text-align:center\">2.452</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">10</td>\n<td style=\"text-align:center\">2.457</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">11</td>\n<td style=\"text-align:center\">2.462</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">12</td>\n<td style=\"text-align:center\">2.467</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">13</td>\n<td style=\"text-align:center\">2.472</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">14</td>\n<td style=\"text-align:center\"><strong>2.484</strong></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>802.11 DSSS 和 802.11 HR-DSSS使用的是22MHz的信道<br>信道中心频率间隔5MHz<br>OFDM技术使用的是20MHz的信道带宽。<br>2.4G一般有三个不重叠信道：1，6，11   或 2,7,12 或 3，8，13</p>\n<h3 id=\"5GHz信道\"><a href=\"#5GHz信道\" class=\"headerlink\" title=\"5GHz信道\"></a>5GHz信道</h3><p>信道中心频率 = 信道编号 X 5 + 5000<br>例如：<br>36 X 5 + 5000 = 5180MHz</p>\n<p><strong>5GHz 信道</strong><br>36，40，44，48，52，56，60，64，100，104，108，112，116，120，124，128，132，136，140，144，149，153，157，161，165，，169，173，177，181</p>\n<h3 id=\"非重叠信道\"><a href=\"#非重叠信道\" class=\"headerlink\" title=\"非重叠信道\"></a>非重叠信道</h3><p>802.11 DSSS信道中心频率必须相隔30MHz，认为互不重叠；<br>802.11b HR-DSSS和 802.11g ERP信道中心频率必须相隔25MHz认为互不重叠；<br>5G OFDM信道中心频率之间必须相关20MHz，认为互不重叠；</p>\n<h3 id=\"邻信道干扰\"><a href=\"#邻信道干扰\" class=\"headerlink\" title=\"邻信道干扰\"></a>邻信道干扰</h3><p>用于描述信道复用设计不当导致的频率空间重叠。</p>\n<h3 id=\"吞吐量与带宽\"><a href=\"#吞吐量与带宽\" class=\"headerlink\" title=\"吞吐量与带宽\"></a>吞吐量与带宽</h3><p>影响数据吞吐量的因素有：</p>\n<blockquote>\n<p>带宽<br>数据编码<br>调制<br>介质争用<br>加密</p>\n</blockquote>\n<p>数据编码和调制方式决定了数据速率，数据速率有时又称为数据带宽。<br>例如：<br>802.11a OFDM无线接口能以6，9，12，18，24，36，48，54Mbps的速率传输数据，但所有的U-NII信道的频率带宽相同，速率不同时由<br>数据编码和调试方式不同。</p>\n<p>802.11网络采用带冲突避免的载波监听多路访问（CSMA/CA）作为介质访问方式，以确保在任何给定的时间，只有一台无线设备可以使用介质传输数据。</p>\n<p>802.11 a/b/g实际数总吞吐量一般不会超过数据速率的50%；  CSMA/CA 产生的介质争用开销通常为带宽的50%<br>802.11 n/ac传输，实际吞吐量为数据速率的60%~70%；  CSMA/CA 产生的介质争用开销通常为带宽的35%</p>\n<p>RTS/CTS 机制也会增加通信开销，影响系统吞吐量。</p>\n"},{"title":"CWNA:标准、行业组织与通信基础知识概述","date":"2022-01-06T06:34:03.000Z","_content":"1.无线局域网的发展历程\n2.标准组织\n> 美国通信联邦委员会\n> 国际电信联盟无线电通信部门\n> 电气和电子工程师协会\n> 互联网工程任务组\n> Wi-Fi联盟\n> 国际标准化组织\n\n3.核心层、分布层与接入层\n4.通信基础知识\n> 通信术语\n> 载波信号\n> 键控法\n\n## 无线局域网的发展历程\n19世纪，迈克尔·法拉第、詹姆斯·克拉克·麦克斯韦、海因里希·鲁道夫·赫兹、尼古拉·特斯拉、大卫、爱德华·休斯、\n托马斯·爱迪生、古列尔莫·马可尼等许多发明家与科学家开始进行无线通信方面的实验。 \n\n1970年，第一种无线网络ALOHAnet在美国夏威夷大学诞生，这种网络以无线方式在夏威夷群岛之间传输数据。一般认\n为，ALOHAnet使用的技术奠定了802.3以太网CSMA/CD和802.11无线局域网CSMA/CA技术基础。 \n\n20世纪90年代，低速无线网络产品开始商用，多数工作在900MHz频段。1991年，IEEE开始讨论无线局域网技术的标准\n化问题。1997年，IEEE批准通过802.11原始标准。  \n\n1999年，IEEE批准通过数据速率较高的802.11b修正案。支持高达11Mbps的速率，无线局域网开始大规模商用。  \n\n802.11技术营销术语称为Wi-Fi，被全球数十亿人公认为无线局域网络的代名词。\n\n## 标准组织\n   各种标准组织共同对无线网络行业进行监管和规范。\n监管机构：\n   国际电信联盟无线电通信部门(ITU-R)以及美国联邦通信委员会(FCC)等监管机构负责制定规则，以约束用户使用无线电的行为。这\n些机构管理通信频率，功率电平，传输方法，共同致力于规范日益壮大的无线用户。\n\n标准组织：\n> 电气和电子工程师协会(IEEE)负责确保网络设备兼容与共存的标准。\n> 互联网工程任务组(IETF)负责制定互联网标准。\n> Wi-Fi联盟(Wi-Fi Alliance)对无线网络设备进行认证测试，以确保他们符合无线局域网通信协议,实现设备兼容。\n> 国际标准化组织(ISO)创建了开放系统互连模型。\n\n\n监管机构负责授权频谱和非授权频谱的管理。非授权频谱需要申请牌照。授权频谱和非授权频谱受6个方面的监管。\n> 频率\n> 带宽\n> 有意辐射器的最大功率\n> 最大等效全向辐射功率\n> 使用（室内与室外）\n> 频谱共享规则\n\n国际电信联盟无线电通信部门(ITU-R)承担全球频谱管理任务。致力于确保陆地、海洋与空中的通信活动不受干扰，通过\n5大行政区维护一个全球性的频率分配数据库。5大行政区：\n> 行政区A:美洲\n> 行政区B:西欧\n> 行政区C:东欧与北亚\n> 行政区D:非洲\n> 行政区E:亚洲与澳大拉西亚\n\n除行政区外，还设3个由地理界定的无线电监管区:\n> 监管区1:欧洲、中东与非洲\n> 监管区2:美洲\n> 监管区3:亚洲与大洋洲\n\n除了上述组织，各国设置自己的监管机构。\n\n\nOSI模型\n> 第七层        应用层\n> 第六层        表示层\n> 第五层        会话层\n> 第四层        传输层\n> 第三层        网络层\n> 第二层        数量链路层 : LLC子层和MAC子层\n> 第一层        物理层\n\n\n## 核心层、分布层与接入层\n网络的核心层：由高速主干网络构成，高速主干网相当于网络中的“高速公路”，其核心目标是在重要的数据中心和\n分布区域之间传输大量信息，如同高速公路连接城市与都会区一样。核心层既不负责流量路由，也不负责操作数据\n包，它的任务就是高速交换。\n\n网络的分布层：将流量路由或引导至较小的节点集群或领域。类似于中等速度在城市或都会区中分流交通流量省道。\n\n网络的接入层：以较低速度将流量直接床输给最终用户或末端节点，类似于直接到达最终地址的地方道路。\n\n记住，速度是个相对概念，核心层、分布层、接入层是相对的。\n\n\n## 通信基础知识\n通信术语\n> 单工：一个仅能发送，另一个仅能接收数据。例如调频广播\n> 半双工：两台设备都能发送接收数据，但同一时间只有一个设备可以传输。例如无线对讲机\n> 双工：两台设备可以同时发送接收数据。例如电话\n> 载波信号：一种高频信号，用于承载有效信号进行发射。\n> 振幅：波的高度，力度或能量。\n> 波长：两个连续波的相似点之间的距离。一般是波峰与波峰之间。\n> 频率：波传播的速度。一秒内产生的波的数量。周期的倒数。\n> 周期：传播一个波长距离的时间。\n> 相位：同频波之间的位置\n\n操作信号以表示多个数据的方法称为键控法(keying method)。\n> 幅移键控(ASK)\n> 频移键控(FSK)\n> 相移键控(PSK)\n\n\n\n## 网站资源\nWi-Fi联盟：https://www.wi-fi.org\nCWNP网站： https://www.cwnp.com\nRevolution Wi-Fi: http://www.revolutionwifi.net\nWirednot: https://wirednot.wordpress.com\n商业与个人博客链接：https://gcatewifi.wordpress.com\nWLPC网站：https://www.wlanpros.com\n\n\n\n","source":"_posts/CWNA-标准、行业组织与通信基础知识概述.md","raw":"---\ntitle: 'CWNA:标准、行业组织与通信基础知识概述'\ndate: 2022-01-06 14:34:03\ntags: 'Wi-Fi'\n---\n1.无线局域网的发展历程\n2.标准组织\n> 美国通信联邦委员会\n> 国际电信联盟无线电通信部门\n> 电气和电子工程师协会\n> 互联网工程任务组\n> Wi-Fi联盟\n> 国际标准化组织\n\n3.核心层、分布层与接入层\n4.通信基础知识\n> 通信术语\n> 载波信号\n> 键控法\n\n## 无线局域网的发展历程\n19世纪，迈克尔·法拉第、詹姆斯·克拉克·麦克斯韦、海因里希·鲁道夫·赫兹、尼古拉·特斯拉、大卫、爱德华·休斯、\n托马斯·爱迪生、古列尔莫·马可尼等许多发明家与科学家开始进行无线通信方面的实验。 \n\n1970年，第一种无线网络ALOHAnet在美国夏威夷大学诞生，这种网络以无线方式在夏威夷群岛之间传输数据。一般认\n为，ALOHAnet使用的技术奠定了802.3以太网CSMA/CD和802.11无线局域网CSMA/CA技术基础。 \n\n20世纪90年代，低速无线网络产品开始商用，多数工作在900MHz频段。1991年，IEEE开始讨论无线局域网技术的标准\n化问题。1997年，IEEE批准通过802.11原始标准。  \n\n1999年，IEEE批准通过数据速率较高的802.11b修正案。支持高达11Mbps的速率，无线局域网开始大规模商用。  \n\n802.11技术营销术语称为Wi-Fi，被全球数十亿人公认为无线局域网络的代名词。\n\n## 标准组织\n   各种标准组织共同对无线网络行业进行监管和规范。\n监管机构：\n   国际电信联盟无线电通信部门(ITU-R)以及美国联邦通信委员会(FCC)等监管机构负责制定规则，以约束用户使用无线电的行为。这\n些机构管理通信频率，功率电平，传输方法，共同致力于规范日益壮大的无线用户。\n\n标准组织：\n> 电气和电子工程师协会(IEEE)负责确保网络设备兼容与共存的标准。\n> 互联网工程任务组(IETF)负责制定互联网标准。\n> Wi-Fi联盟(Wi-Fi Alliance)对无线网络设备进行认证测试，以确保他们符合无线局域网通信协议,实现设备兼容。\n> 国际标准化组织(ISO)创建了开放系统互连模型。\n\n\n监管机构负责授权频谱和非授权频谱的管理。非授权频谱需要申请牌照。授权频谱和非授权频谱受6个方面的监管。\n> 频率\n> 带宽\n> 有意辐射器的最大功率\n> 最大等效全向辐射功率\n> 使用（室内与室外）\n> 频谱共享规则\n\n国际电信联盟无线电通信部门(ITU-R)承担全球频谱管理任务。致力于确保陆地、海洋与空中的通信活动不受干扰，通过\n5大行政区维护一个全球性的频率分配数据库。5大行政区：\n> 行政区A:美洲\n> 行政区B:西欧\n> 行政区C:东欧与北亚\n> 行政区D:非洲\n> 行政区E:亚洲与澳大拉西亚\n\n除行政区外，还设3个由地理界定的无线电监管区:\n> 监管区1:欧洲、中东与非洲\n> 监管区2:美洲\n> 监管区3:亚洲与大洋洲\n\n除了上述组织，各国设置自己的监管机构。\n\n\nOSI模型\n> 第七层        应用层\n> 第六层        表示层\n> 第五层        会话层\n> 第四层        传输层\n> 第三层        网络层\n> 第二层        数量链路层 : LLC子层和MAC子层\n> 第一层        物理层\n\n\n## 核心层、分布层与接入层\n网络的核心层：由高速主干网络构成，高速主干网相当于网络中的“高速公路”，其核心目标是在重要的数据中心和\n分布区域之间传输大量信息，如同高速公路连接城市与都会区一样。核心层既不负责流量路由，也不负责操作数据\n包，它的任务就是高速交换。\n\n网络的分布层：将流量路由或引导至较小的节点集群或领域。类似于中等速度在城市或都会区中分流交通流量省道。\n\n网络的接入层：以较低速度将流量直接床输给最终用户或末端节点，类似于直接到达最终地址的地方道路。\n\n记住，速度是个相对概念，核心层、分布层、接入层是相对的。\n\n\n## 通信基础知识\n通信术语\n> 单工：一个仅能发送，另一个仅能接收数据。例如调频广播\n> 半双工：两台设备都能发送接收数据，但同一时间只有一个设备可以传输。例如无线对讲机\n> 双工：两台设备可以同时发送接收数据。例如电话\n> 载波信号：一种高频信号，用于承载有效信号进行发射。\n> 振幅：波的高度，力度或能量。\n> 波长：两个连续波的相似点之间的距离。一般是波峰与波峰之间。\n> 频率：波传播的速度。一秒内产生的波的数量。周期的倒数。\n> 周期：传播一个波长距离的时间。\n> 相位：同频波之间的位置\n\n操作信号以表示多个数据的方法称为键控法(keying method)。\n> 幅移键控(ASK)\n> 频移键控(FSK)\n> 相移键控(PSK)\n\n\n\n## 网站资源\nWi-Fi联盟：https://www.wi-fi.org\nCWNP网站： https://www.cwnp.com\nRevolution Wi-Fi: http://www.revolutionwifi.net\nWirednot: https://wirednot.wordpress.com\n商业与个人博客链接：https://gcatewifi.wordpress.com\nWLPC网站：https://www.wlanpros.com\n\n\n\n","slug":"CWNA-标准、行业组织与通信基础知识概述","published":1,"updated":"2022-01-10T12:15:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud48002a18jxe8jlffib","content":"<p>1.无线局域网的发展历程<br>2.标准组织</p>\n<blockquote>\n<p>美国通信联邦委员会<br>国际电信联盟无线电通信部门<br>电气和电子工程师协会<br>互联网工程任务组<br>Wi-Fi联盟<br>国际标准化组织</p>\n</blockquote>\n<p>3.核心层、分布层与接入层<br>4.通信基础知识</p>\n<blockquote>\n<p>通信术语<br>载波信号<br>键控法</p>\n</blockquote>\n<h2 id=\"无线局域网的发展历程\"><a href=\"#无线局域网的发展历程\" class=\"headerlink\" title=\"无线局域网的发展历程\"></a>无线局域网的发展历程</h2><p>19世纪，迈克尔·法拉第、詹姆斯·克拉克·麦克斯韦、海因里希·鲁道夫·赫兹、尼古拉·特斯拉、大卫、爱德华·休斯、<br>托马斯·爱迪生、古列尔莫·马可尼等许多发明家与科学家开始进行无线通信方面的实验。 </p>\n<p>1970年，第一种无线网络ALOHAnet在美国夏威夷大学诞生，这种网络以无线方式在夏威夷群岛之间传输数据。一般认<br>为，ALOHAnet使用的技术奠定了802.3以太网CSMA/CD和802.11无线局域网CSMA/CA技术基础。 </p>\n<p>20世纪90年代，低速无线网络产品开始商用，多数工作在900MHz频段。1991年，IEEE开始讨论无线局域网技术的标准<br>化问题。1997年，IEEE批准通过802.11原始标准。  </p>\n<p>1999年，IEEE批准通过数据速率较高的802.11b修正案。支持高达11Mbps的速率，无线局域网开始大规模商用。  </p>\n<p>802.11技术营销术语称为Wi-Fi，被全球数十亿人公认为无线局域网络的代名词。</p>\n<h2 id=\"标准组织\"><a href=\"#标准组织\" class=\"headerlink\" title=\"标准组织\"></a>标准组织</h2><p>   各种标准组织共同对无线网络行业进行监管和规范。<br>监管机构：<br>   国际电信联盟无线电通信部门(ITU-R)以及美国联邦通信委员会(FCC)等监管机构负责制定规则，以约束用户使用无线电的行为。这<br>些机构管理通信频率，功率电平，传输方法，共同致力于规范日益壮大的无线用户。</p>\n<p>标准组织：</p>\n<blockquote>\n<p>电气和电子工程师协会(IEEE)负责确保网络设备兼容与共存的标准。<br>互联网工程任务组(IETF)负责制定互联网标准。<br>Wi-Fi联盟(Wi-Fi Alliance)对无线网络设备进行认证测试，以确保他们符合无线局域网通信协议,实现设备兼容。<br>国际标准化组织(ISO)创建了开放系统互连模型。</p>\n</blockquote>\n<p>监管机构负责授权频谱和非授权频谱的管理。非授权频谱需要申请牌照。授权频谱和非授权频谱受6个方面的监管。</p>\n<blockquote>\n<p>频率<br>带宽<br>有意辐射器的最大功率<br>最大等效全向辐射功率<br>使用（室内与室外）<br>频谱共享规则</p>\n</blockquote>\n<p>国际电信联盟无线电通信部门(ITU-R)承担全球频谱管理任务。致力于确保陆地、海洋与空中的通信活动不受干扰，通过<br>5大行政区维护一个全球性的频率分配数据库。5大行政区：</p>\n<blockquote>\n<p>行政区A:美洲<br>行政区B:西欧<br>行政区C:东欧与北亚<br>行政区D:非洲<br>行政区E:亚洲与澳大拉西亚</p>\n</blockquote>\n<p>除行政区外，还设3个由地理界定的无线电监管区:</p>\n<blockquote>\n<p>监管区1:欧洲、中东与非洲<br>监管区2:美洲<br>监管区3:亚洲与大洋洲</p>\n</blockquote>\n<p>除了上述组织，各国设置自己的监管机构。</p>\n<p>OSI模型</p>\n<blockquote>\n<p>第七层        应用层<br>第六层        表示层<br>第五层        会话层<br>第四层        传输层<br>第三层        网络层<br>第二层        数量链路层 : LLC子层和MAC子层<br>第一层        物理层</p>\n</blockquote>\n<h2 id=\"核心层、分布层与接入层\"><a href=\"#核心层、分布层与接入层\" class=\"headerlink\" title=\"核心层、分布层与接入层\"></a>核心层、分布层与接入层</h2><p>网络的核心层：由高速主干网络构成，高速主干网相当于网络中的“高速公路”，其核心目标是在重要的数据中心和<br>分布区域之间传输大量信息，如同高速公路连接城市与都会区一样。核心层既不负责流量路由，也不负责操作数据<br>包，它的任务就是高速交换。</p>\n<p>网络的分布层：将流量路由或引导至较小的节点集群或领域。类似于中等速度在城市或都会区中分流交通流量省道。</p>\n<p>网络的接入层：以较低速度将流量直接床输给最终用户或末端节点，类似于直接到达最终地址的地方道路。</p>\n<p>记住，速度是个相对概念，核心层、分布层、接入层是相对的。</p>\n<h2 id=\"通信基础知识\"><a href=\"#通信基础知识\" class=\"headerlink\" title=\"通信基础知识\"></a>通信基础知识</h2><p>通信术语</p>\n<blockquote>\n<p>单工：一个仅能发送，另一个仅能接收数据。例如调频广播<br>半双工：两台设备都能发送接收数据，但同一时间只有一个设备可以传输。例如无线对讲机<br>双工：两台设备可以同时发送接收数据。例如电话<br>载波信号：一种高频信号，用于承载有效信号进行发射。<br>振幅：波的高度，力度或能量。<br>波长：两个连续波的相似点之间的距离。一般是波峰与波峰之间。<br>频率：波传播的速度。一秒内产生的波的数量。周期的倒数。<br>周期：传播一个波长距离的时间。<br>相位：同频波之间的位置</p>\n</blockquote>\n<p>操作信号以表示多个数据的方法称为键控法(keying method)。</p>\n<blockquote>\n<p>幅移键控(ASK)<br>频移键控(FSK)<br>相移键控(PSK)</p>\n</blockquote>\n<h2 id=\"网站资源\"><a href=\"#网站资源\" class=\"headerlink\" title=\"网站资源\"></a>网站资源</h2><p>Wi-Fi联盟：<a href=\"https://www.wi-fi.org\">https://www.wi-fi.org</a><br>CWNP网站： <a href=\"https://www.cwnp.com\">https://www.cwnp.com</a><br>Revolution Wi-Fi: <a href=\"http://www.revolutionwifi.net\">http://www.revolutionwifi.net</a><br>Wirednot: <a href=\"https://wirednot.wordpress.com\">https://wirednot.wordpress.com</a><br>商业与个人博客链接：<a href=\"https://gcatewifi.wordpress.com\">https://gcatewifi.wordpress.com</a><br>WLPC网站：<a href=\"https://www.wlanpros.com\">https://www.wlanpros.com</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.无线局域网的发展历程<br>2.标准组织</p>\n<blockquote>\n<p>美国通信联邦委员会<br>国际电信联盟无线电通信部门<br>电气和电子工程师协会<br>互联网工程任务组<br>Wi-Fi联盟<br>国际标准化组织</p>\n</blockquote>\n<p>3.核心层、分布层与接入层<br>4.通信基础知识</p>\n<blockquote>\n<p>通信术语<br>载波信号<br>键控法</p>\n</blockquote>\n<h2 id=\"无线局域网的发展历程\"><a href=\"#无线局域网的发展历程\" class=\"headerlink\" title=\"无线局域网的发展历程\"></a>无线局域网的发展历程</h2><p>19世纪，迈克尔·法拉第、詹姆斯·克拉克·麦克斯韦、海因里希·鲁道夫·赫兹、尼古拉·特斯拉、大卫、爱德华·休斯、<br>托马斯·爱迪生、古列尔莫·马可尼等许多发明家与科学家开始进行无线通信方面的实验。 </p>\n<p>1970年，第一种无线网络ALOHAnet在美国夏威夷大学诞生，这种网络以无线方式在夏威夷群岛之间传输数据。一般认<br>为，ALOHAnet使用的技术奠定了802.3以太网CSMA/CD和802.11无线局域网CSMA/CA技术基础。 </p>\n<p>20世纪90年代，低速无线网络产品开始商用，多数工作在900MHz频段。1991年，IEEE开始讨论无线局域网技术的标准<br>化问题。1997年，IEEE批准通过802.11原始标准。  </p>\n<p>1999年，IEEE批准通过数据速率较高的802.11b修正案。支持高达11Mbps的速率，无线局域网开始大规模商用。  </p>\n<p>802.11技术营销术语称为Wi-Fi，被全球数十亿人公认为无线局域网络的代名词。</p>\n<h2 id=\"标准组织\"><a href=\"#标准组织\" class=\"headerlink\" title=\"标准组织\"></a>标准组织</h2><p>   各种标准组织共同对无线网络行业进行监管和规范。<br>监管机构：<br>   国际电信联盟无线电通信部门(ITU-R)以及美国联邦通信委员会(FCC)等监管机构负责制定规则，以约束用户使用无线电的行为。这<br>些机构管理通信频率，功率电平，传输方法，共同致力于规范日益壮大的无线用户。</p>\n<p>标准组织：</p>\n<blockquote>\n<p>电气和电子工程师协会(IEEE)负责确保网络设备兼容与共存的标准。<br>互联网工程任务组(IETF)负责制定互联网标准。<br>Wi-Fi联盟(Wi-Fi Alliance)对无线网络设备进行认证测试，以确保他们符合无线局域网通信协议,实现设备兼容。<br>国际标准化组织(ISO)创建了开放系统互连模型。</p>\n</blockquote>\n<p>监管机构负责授权频谱和非授权频谱的管理。非授权频谱需要申请牌照。授权频谱和非授权频谱受6个方面的监管。</p>\n<blockquote>\n<p>频率<br>带宽<br>有意辐射器的最大功率<br>最大等效全向辐射功率<br>使用（室内与室外）<br>频谱共享规则</p>\n</blockquote>\n<p>国际电信联盟无线电通信部门(ITU-R)承担全球频谱管理任务。致力于确保陆地、海洋与空中的通信活动不受干扰，通过<br>5大行政区维护一个全球性的频率分配数据库。5大行政区：</p>\n<blockquote>\n<p>行政区A:美洲<br>行政区B:西欧<br>行政区C:东欧与北亚<br>行政区D:非洲<br>行政区E:亚洲与澳大拉西亚</p>\n</blockquote>\n<p>除行政区外，还设3个由地理界定的无线电监管区:</p>\n<blockquote>\n<p>监管区1:欧洲、中东与非洲<br>监管区2:美洲<br>监管区3:亚洲与大洋洲</p>\n</blockquote>\n<p>除了上述组织，各国设置自己的监管机构。</p>\n<p>OSI模型</p>\n<blockquote>\n<p>第七层        应用层<br>第六层        表示层<br>第五层        会话层<br>第四层        传输层<br>第三层        网络层<br>第二层        数量链路层 : LLC子层和MAC子层<br>第一层        物理层</p>\n</blockquote>\n<h2 id=\"核心层、分布层与接入层\"><a href=\"#核心层、分布层与接入层\" class=\"headerlink\" title=\"核心层、分布层与接入层\"></a>核心层、分布层与接入层</h2><p>网络的核心层：由高速主干网络构成，高速主干网相当于网络中的“高速公路”，其核心目标是在重要的数据中心和<br>分布区域之间传输大量信息，如同高速公路连接城市与都会区一样。核心层既不负责流量路由，也不负责操作数据<br>包，它的任务就是高速交换。</p>\n<p>网络的分布层：将流量路由或引导至较小的节点集群或领域。类似于中等速度在城市或都会区中分流交通流量省道。</p>\n<p>网络的接入层：以较低速度将流量直接床输给最终用户或末端节点，类似于直接到达最终地址的地方道路。</p>\n<p>记住，速度是个相对概念，核心层、分布层、接入层是相对的。</p>\n<h2 id=\"通信基础知识\"><a href=\"#通信基础知识\" class=\"headerlink\" title=\"通信基础知识\"></a>通信基础知识</h2><p>通信术语</p>\n<blockquote>\n<p>单工：一个仅能发送，另一个仅能接收数据。例如调频广播<br>半双工：两台设备都能发送接收数据，但同一时间只有一个设备可以传输。例如无线对讲机<br>双工：两台设备可以同时发送接收数据。例如电话<br>载波信号：一种高频信号，用于承载有效信号进行发射。<br>振幅：波的高度，力度或能量。<br>波长：两个连续波的相似点之间的距离。一般是波峰与波峰之间。<br>频率：波传播的速度。一秒内产生的波的数量。周期的倒数。<br>周期：传播一个波长距离的时间。<br>相位：同频波之间的位置</p>\n</blockquote>\n<p>操作信号以表示多个数据的方法称为键控法(keying method)。</p>\n<blockquote>\n<p>幅移键控(ASK)<br>频移键控(FSK)<br>相移键控(PSK)</p>\n</blockquote>\n<h2 id=\"网站资源\"><a href=\"#网站资源\" class=\"headerlink\" title=\"网站资源\"></a>网站资源</h2><p>Wi-Fi联盟：<a href=\"https://www.wi-fi.org\">https://www.wi-fi.org</a><br>CWNP网站： <a href=\"https://www.cwnp.com\">https://www.cwnp.com</a><br>Revolution Wi-Fi: <a href=\"http://www.revolutionwifi.net\">http://www.revolutionwifi.net</a><br>Wirednot: <a href=\"https://wirednot.wordpress.com\">https://wirednot.wordpress.com</a><br>商业与个人博客链接：<a href=\"https://gcatewifi.wordpress.com\">https://gcatewifi.wordpress.com</a><br>WLPC网站：<a href=\"https://www.wlanpros.com\">https://www.wlanpros.com</a></p>\n"},{"title":"CWNA：射频组件、度量与数学计算","date":"2022-01-11T06:47:12.000Z","_content":"射频组件\n> 发射机\n> 天线\n> 接收机\n> 有意辐射器\n> 等效全向辐射功率\n\n功率单位与比较单位\n> 瓦特\n> 毫瓦\n> 分贝\n> 各向同性分贝\n> 偶极子分贝\n> 毫瓦分贝\n> 平方反比定律\n\n射频数学计算\n> 10与3规则\n> 射频数学计算小结\n\n本地噪声\n信噪比\n信干比\n接收信号强度指示\n链路预算\n衰落裕度/系统运行裕度\n\n通信的三项基本要求：\n> 两台或多台设备要求通信\n> 必须存在某种通信介质、手段或方法\n> 必须遵守一系列通信规则\n\n### 射频组件\n**发射机**\n计算机将数据传送给发射机，由发射机启动射频通信过程。\n\n**天线**\n通信系统中天线具备两种功能。\n与发射机相连，天线收集发射机传送的交流信号，并以特定于天线类型的模式将射频波引导或辐射出去。\n与接收机相连，天线捕捉空中的射频波，并以交流信号引导至接收机，在由接收机转换为比特和字节。\n\n增加天线功率输出的两种方法：\n增加发射机的输出功率\n引导或聚焦天线辐射出去的射频信号。\n\n**接收机**\n接收机获取天线收到的载波信号，并将已调信号转换为1和0，然后将数据交由计算机处理。\n\n**有意辐射器**\n发射机与天线之间的任何设备构成。IR的功率在提供天线输入的连接器处测定。\n\n**等效全向辐射功率**\n特定天线辐射出去的最大射频信号的强度。\n\n### 功率单位与比较单位\n覆盖和性能是802.11无线网络设计中的两个重要因素，切实掌握射频功率、比较单位与射频数学计算对于网络设计大有裨益。\n功率单位（绝对值）\n> 瓦特(W)\n> 毫瓦(mW)\n> 毫瓦分贝(dBm)\n\n比较单位(相对值)\n> 分贝(dB)\n> 各向同性分贝(dBi)\n> 偶极子分贝(dBd)\n\n**瓦特**\n瓦特(W)是基本的功率单位，得名于18世纪的苏格兰发明家詹姆斯·瓦特。\n**毫瓦**\n千分之一瓦。\n多数市内802.11设备的发射功率介于1mW和100mW之间。\n\n**分贝**\n分贝是比较单位而非功率单位，用于描述两个值之间的差异。\n$ B = log10(P1/P2) $\n$ dB = 10log10(P1/P2) $\n\n由于分贝在描述信号衰减和增益的时候比瓦特和毫瓦方便很多，因而广泛采用分贝描述。\n\n**各向同性分贝**\n与各项同性辐射器产生的功率相比，天线的功率增益称为各项同性分贝(dBi)\ndBi是天线增益的度量。\n\n**偶极子分贝**\ndBd描述某幅天线相对于偶极子天线信号的增益。\n\n**毫瓦分贝**\ndBm描述相对于1mW的分贝。\n$0dBm = 1mW$\n$20dBm = 100mW$\n\n由于自由空间路径损耗的影响，接收信号总是低于1mW. 即便极强的接收信号，功率也只有-40dBm,也就是0.0001mW(1mW的万分之一)\n大多数无线接口可以解析从-30dBm ~ -100dBm的接收信号。\n\n**平方反比定律**\n功率变化与距离变化的平方成反比。\n$$ 自由空间路径损耗 = 36.6 + 20xlog10(f) + 20xlog10(d)$$\n从该公式可知，距离越远损耗越大，频率越高损耗越大。\n\n（未完待续...)\n\n","source":"_posts/CWNA：射频组件、度量与数学计算.md","raw":"---\ntitle: CWNA：射频组件、度量与数学计算\ndate: 2022-01-11 14:47:12\ntags: 'Wi-Fi'\n---\n射频组件\n> 发射机\n> 天线\n> 接收机\n> 有意辐射器\n> 等效全向辐射功率\n\n功率单位与比较单位\n> 瓦特\n> 毫瓦\n> 分贝\n> 各向同性分贝\n> 偶极子分贝\n> 毫瓦分贝\n> 平方反比定律\n\n射频数学计算\n> 10与3规则\n> 射频数学计算小结\n\n本地噪声\n信噪比\n信干比\n接收信号强度指示\n链路预算\n衰落裕度/系统运行裕度\n\n通信的三项基本要求：\n> 两台或多台设备要求通信\n> 必须存在某种通信介质、手段或方法\n> 必须遵守一系列通信规则\n\n### 射频组件\n**发射机**\n计算机将数据传送给发射机，由发射机启动射频通信过程。\n\n**天线**\n通信系统中天线具备两种功能。\n与发射机相连，天线收集发射机传送的交流信号，并以特定于天线类型的模式将射频波引导或辐射出去。\n与接收机相连，天线捕捉空中的射频波，并以交流信号引导至接收机，在由接收机转换为比特和字节。\n\n增加天线功率输出的两种方法：\n增加发射机的输出功率\n引导或聚焦天线辐射出去的射频信号。\n\n**接收机**\n接收机获取天线收到的载波信号，并将已调信号转换为1和0，然后将数据交由计算机处理。\n\n**有意辐射器**\n发射机与天线之间的任何设备构成。IR的功率在提供天线输入的连接器处测定。\n\n**等效全向辐射功率**\n特定天线辐射出去的最大射频信号的强度。\n\n### 功率单位与比较单位\n覆盖和性能是802.11无线网络设计中的两个重要因素，切实掌握射频功率、比较单位与射频数学计算对于网络设计大有裨益。\n功率单位（绝对值）\n> 瓦特(W)\n> 毫瓦(mW)\n> 毫瓦分贝(dBm)\n\n比较单位(相对值)\n> 分贝(dB)\n> 各向同性分贝(dBi)\n> 偶极子分贝(dBd)\n\n**瓦特**\n瓦特(W)是基本的功率单位，得名于18世纪的苏格兰发明家詹姆斯·瓦特。\n**毫瓦**\n千分之一瓦。\n多数市内802.11设备的发射功率介于1mW和100mW之间。\n\n**分贝**\n分贝是比较单位而非功率单位，用于描述两个值之间的差异。\n$ B = log10(P1/P2) $\n$ dB = 10log10(P1/P2) $\n\n由于分贝在描述信号衰减和增益的时候比瓦特和毫瓦方便很多，因而广泛采用分贝描述。\n\n**各向同性分贝**\n与各项同性辐射器产生的功率相比，天线的功率增益称为各项同性分贝(dBi)\ndBi是天线增益的度量。\n\n**偶极子分贝**\ndBd描述某幅天线相对于偶极子天线信号的增益。\n\n**毫瓦分贝**\ndBm描述相对于1mW的分贝。\n$0dBm = 1mW$\n$20dBm = 100mW$\n\n由于自由空间路径损耗的影响，接收信号总是低于1mW. 即便极强的接收信号，功率也只有-40dBm,也就是0.0001mW(1mW的万分之一)\n大多数无线接口可以解析从-30dBm ~ -100dBm的接收信号。\n\n**平方反比定律**\n功率变化与距离变化的平方成反比。\n$$ 自由空间路径损耗 = 36.6 + 20xlog10(f) + 20xlog10(d)$$\n从该公式可知，距离越远损耗越大，频率越高损耗越大。\n\n（未完待续...)\n\n","slug":"CWNA：射频组件、度量与数学计算","published":1,"updated":"2022-01-11T10:28:36.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud48002c18jxfkniem0z","content":"<p>射频组件</p>\n<blockquote>\n<p>发射机<br>天线<br>接收机<br>有意辐射器<br>等效全向辐射功率</p>\n</blockquote>\n<p>功率单位与比较单位</p>\n<blockquote>\n<p>瓦特<br>毫瓦<br>分贝<br>各向同性分贝<br>偶极子分贝<br>毫瓦分贝<br>平方反比定律</p>\n</blockquote>\n<p>射频数学计算</p>\n<blockquote>\n<p>10与3规则<br>射频数学计算小结</p>\n</blockquote>\n<p>本地噪声<br>信噪比<br>信干比<br>接收信号强度指示<br>链路预算<br>衰落裕度/系统运行裕度</p>\n<p>通信的三项基本要求：</p>\n<blockquote>\n<p>两台或多台设备要求通信<br>必须存在某种通信介质、手段或方法<br>必须遵守一系列通信规则</p>\n</blockquote>\n<h3 id=\"射频组件\"><a href=\"#射频组件\" class=\"headerlink\" title=\"射频组件\"></a>射频组件</h3><p><strong>发射机</strong><br>计算机将数据传送给发射机，由发射机启动射频通信过程。</p>\n<p><strong>天线</strong><br>通信系统中天线具备两种功能。<br>与发射机相连，天线收集发射机传送的交流信号，并以特定于天线类型的模式将射频波引导或辐射出去。<br>与接收机相连，天线捕捉空中的射频波，并以交流信号引导至接收机，在由接收机转换为比特和字节。</p>\n<p>增加天线功率输出的两种方法：<br>增加发射机的输出功率<br>引导或聚焦天线辐射出去的射频信号。</p>\n<p><strong>接收机</strong><br>接收机获取天线收到的载波信号，并将已调信号转换为1和0，然后将数据交由计算机处理。</p>\n<p><strong>有意辐射器</strong><br>发射机与天线之间的任何设备构成。IR的功率在提供天线输入的连接器处测定。</p>\n<p><strong>等效全向辐射功率</strong><br>特定天线辐射出去的最大射频信号的强度。</p>\n<h3 id=\"功率单位与比较单位\"><a href=\"#功率单位与比较单位\" class=\"headerlink\" title=\"功率单位与比较单位\"></a>功率单位与比较单位</h3><p>覆盖和性能是802.11无线网络设计中的两个重要因素，切实掌握射频功率、比较单位与射频数学计算对于网络设计大有裨益。<br>功率单位（绝对值）</p>\n<blockquote>\n<p>瓦特(W)<br>毫瓦(mW)<br>毫瓦分贝(dBm)</p>\n</blockquote>\n<p>比较单位(相对值)</p>\n<blockquote>\n<p>分贝(dB)<br>各向同性分贝(dBi)<br>偶极子分贝(dBd)</p>\n</blockquote>\n<p><strong>瓦特</strong><br>瓦特(W)是基本的功率单位，得名于18世纪的苏格兰发明家詹姆斯·瓦特。<br><strong>毫瓦</strong><br>千分之一瓦。<br>多数市内802.11设备的发射功率介于1mW和100mW之间。</p>\n<p><strong>分贝</strong><br>分贝是比较单位而非功率单位，用于描述两个值之间的差异。<br>$ B = log10(P1/P2) $<br>$ dB = 10log10(P1/P2) $</p>\n<p>由于分贝在描述信号衰减和增益的时候比瓦特和毫瓦方便很多，因而广泛采用分贝描述。</p>\n<p><strong>各向同性分贝</strong><br>与各项同性辐射器产生的功率相比，天线的功率增益称为各项同性分贝(dBi)<br>dBi是天线增益的度量。</p>\n<p><strong>偶极子分贝</strong><br>dBd描述某幅天线相对于偶极子天线信号的增益。</p>\n<p><strong>毫瓦分贝</strong><br>dBm描述相对于1mW的分贝。<br>$0dBm = 1mW$<br>$20dBm = 100mW$</p>\n<p>由于自由空间路径损耗的影响，接收信号总是低于1mW. 即便极强的接收信号，功率也只有-40dBm,也就是0.0001mW(1mW的万分之一)<br>大多数无线接口可以解析从-30dBm ~ -100dBm的接收信号。</p>\n<p><strong>平方反比定律</strong><br>功率变化与距离变化的平方成反比。</p>\n<script type=\"math/tex; mode=display\">自由空间路径损耗 = 36.6 + 20xlog10(f) + 20xlog10(d)</script><p>从该公式可知，距离越远损耗越大，频率越高损耗越大。</p>\n<p>（未完待续…)</p>\n","site":{"data":{}},"excerpt":"","more":"<p>射频组件</p>\n<blockquote>\n<p>发射机<br>天线<br>接收机<br>有意辐射器<br>等效全向辐射功率</p>\n</blockquote>\n<p>功率单位与比较单位</p>\n<blockquote>\n<p>瓦特<br>毫瓦<br>分贝<br>各向同性分贝<br>偶极子分贝<br>毫瓦分贝<br>平方反比定律</p>\n</blockquote>\n<p>射频数学计算</p>\n<blockquote>\n<p>10与3规则<br>射频数学计算小结</p>\n</blockquote>\n<p>本地噪声<br>信噪比<br>信干比<br>接收信号强度指示<br>链路预算<br>衰落裕度/系统运行裕度</p>\n<p>通信的三项基本要求：</p>\n<blockquote>\n<p>两台或多台设备要求通信<br>必须存在某种通信介质、手段或方法<br>必须遵守一系列通信规则</p>\n</blockquote>\n<h3 id=\"射频组件\"><a href=\"#射频组件\" class=\"headerlink\" title=\"射频组件\"></a>射频组件</h3><p><strong>发射机</strong><br>计算机将数据传送给发射机，由发射机启动射频通信过程。</p>\n<p><strong>天线</strong><br>通信系统中天线具备两种功能。<br>与发射机相连，天线收集发射机传送的交流信号，并以特定于天线类型的模式将射频波引导或辐射出去。<br>与接收机相连，天线捕捉空中的射频波，并以交流信号引导至接收机，在由接收机转换为比特和字节。</p>\n<p>增加天线功率输出的两种方法：<br>增加发射机的输出功率<br>引导或聚焦天线辐射出去的射频信号。</p>\n<p><strong>接收机</strong><br>接收机获取天线收到的载波信号，并将已调信号转换为1和0，然后将数据交由计算机处理。</p>\n<p><strong>有意辐射器</strong><br>发射机与天线之间的任何设备构成。IR的功率在提供天线输入的连接器处测定。</p>\n<p><strong>等效全向辐射功率</strong><br>特定天线辐射出去的最大射频信号的强度。</p>\n<h3 id=\"功率单位与比较单位\"><a href=\"#功率单位与比较单位\" class=\"headerlink\" title=\"功率单位与比较单位\"></a>功率单位与比较单位</h3><p>覆盖和性能是802.11无线网络设计中的两个重要因素，切实掌握射频功率、比较单位与射频数学计算对于网络设计大有裨益。<br>功率单位（绝对值）</p>\n<blockquote>\n<p>瓦特(W)<br>毫瓦(mW)<br>毫瓦分贝(dBm)</p>\n</blockquote>\n<p>比较单位(相对值)</p>\n<blockquote>\n<p>分贝(dB)<br>各向同性分贝(dBi)<br>偶极子分贝(dBd)</p>\n</blockquote>\n<p><strong>瓦特</strong><br>瓦特(W)是基本的功率单位，得名于18世纪的苏格兰发明家詹姆斯·瓦特。<br><strong>毫瓦</strong><br>千分之一瓦。<br>多数市内802.11设备的发射功率介于1mW和100mW之间。</p>\n<p><strong>分贝</strong><br>分贝是比较单位而非功率单位，用于描述两个值之间的差异。<br>$ B = log10(P1/P2) $<br>$ dB = 10log10(P1/P2) $</p>\n<p>由于分贝在描述信号衰减和增益的时候比瓦特和毫瓦方便很多，因而广泛采用分贝描述。</p>\n<p><strong>各向同性分贝</strong><br>与各项同性辐射器产生的功率相比，天线的功率增益称为各项同性分贝(dBi)<br>dBi是天线增益的度量。</p>\n<p><strong>偶极子分贝</strong><br>dBd描述某幅天线相对于偶极子天线信号的增益。</p>\n<p><strong>毫瓦分贝</strong><br>dBm描述相对于1mW的分贝。<br>$0dBm = 1mW$<br>$20dBm = 100mW$</p>\n<p>由于自由空间路径损耗的影响，接收信号总是低于1mW. 即便极强的接收信号，功率也只有-40dBm,也就是0.0001mW(1mW的万分之一)<br>大多数无线接口可以解析从-30dBm ~ -100dBm的接收信号。</p>\n<p><strong>平方反比定律</strong><br>功率变化与距离变化的平方成反比。</p>\n<script type=\"math/tex; mode=display\">自由空间路径损耗 = 36.6 + 20xlog10(f) + 20xlog10(d)</script><p>从该公式可知，距离越远损耗越大，频率越高损耗越大。</p>\n<p>（未完待续…)</p>\n"},{"title":"GIT:delete history commit.","date":"2022-03-25T15:40:23.000Z","_content":"\nFollow the below steps to complete this task.\n[Warning]: This will remove your old commit history completely, You can’t recover it again.\n\n1，Create Orphan Branch – Create a new orphan branch in git repository. The newly created branch will not show in ‘git branch’ command.\ngit checkout --orphan temp_branch\n\n2，Add Files to Branch – Now add all files to newly created branch and commit them using following commands.\ngit add -A\ngit commit -am \"the first commit\"\n\n3，Delete master Branch – Now you can delete the master branch from your git repository.\ngit branch -D master\n\n4，Rename Current Branch – After deleting the master branch, let’s rename newly created branch name to master.\ngit branch -m master\n\n5，Push Changes – You have completed the changes to your local git repository. Finally, push your changes to remote (Github) repository forcefully.\ngit push -f origin master\n","source":"_posts/GIT-delete-history-commit.md","raw":"---\ntitle: 'GIT:delete history commit.'\ndate: 2022-03-25 23:40:23\ntags: 'git skills'\n---\n\nFollow the below steps to complete this task.\n[Warning]: This will remove your old commit history completely, You can’t recover it again.\n\n1，Create Orphan Branch – Create a new orphan branch in git repository. The newly created branch will not show in ‘git branch’ command.\ngit checkout --orphan temp_branch\n\n2，Add Files to Branch – Now add all files to newly created branch and commit them using following commands.\ngit add -A\ngit commit -am \"the first commit\"\n\n3，Delete master Branch – Now you can delete the master branch from your git repository.\ngit branch -D master\n\n4，Rename Current Branch – After deleting the master branch, let’s rename newly created branch name to master.\ngit branch -m master\n\n5，Push Changes – You have completed the changes to your local git repository. Finally, push your changes to remote (Github) repository forcefully.\ngit push -f origin master\n","slug":"GIT-delete-history-commit","published":1,"updated":"2022-03-25T15:41:37.694Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud49002e18jxd325fujl","content":"<p>Follow the below steps to complete this task.<br>[Warning]: This will remove your old commit history completely, You can’t recover it again.</p>\n<p>1，Create Orphan Branch – Create a new orphan branch in git repository. The newly created branch will not show in ‘git branch’ command.<br>git checkout —orphan temp_branch</p>\n<p>2，Add Files to Branch – Now add all files to newly created branch and commit them using following commands.<br>git add -A<br>git commit -am “the first commit”</p>\n<p>3，Delete master Branch – Now you can delete the master branch from your git repository.<br>git branch -D master</p>\n<p>4，Rename Current Branch – After deleting the master branch, let’s rename newly created branch name to master.<br>git branch -m master</p>\n<p>5，Push Changes – You have completed the changes to your local git repository. Finally, push your changes to remote (Github) repository forcefully.<br>git push -f origin master</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Follow the below steps to complete this task.<br>[Warning]: This will remove your old commit history completely, You can’t recover it again.</p>\n<p>1，Create Orphan Branch – Create a new orphan branch in git repository. The newly created branch will not show in ‘git branch’ command.<br>git checkout —orphan temp_branch</p>\n<p>2，Add Files to Branch – Now add all files to newly created branch and commit them using following commands.<br>git add -A<br>git commit -am “the first commit”</p>\n<p>3，Delete master Branch – Now you can delete the master branch from your git repository.<br>git branch -D master</p>\n<p>4，Rename Current Branch – After deleting the master branch, let’s rename newly created branch name to master.<br>git branch -m master</p>\n<p>5，Push Changes – You have completed the changes to your local git repository. Finally, push your changes to remote (Github) repository forcefully.<br>git push -f origin master</p>\n"},{"title":"Linux shell script 实践记录(一)","date":"2022-02-15T10:02:16.000Z","_content":"\n本文展示一个Linux shell scpript实例。其中涉及的的一些Linux和shell相关的知识的如下：\n1. shell script 首行语法\n2. shell 的注释方法及script的代码规范一般形式\n3. shell 条件语句\n4. shell scprit中调用另外一个shell script.\n5. while 循环\n6. 获取系统参数并保存变量，变量计数\n7. 输出重定向及文件名创建编号。\n8. 终端断开不杀脚本的方法\n9. Wi-Fi的连接操作等\n\n\n主shell script.\n\n```shell\n#!/bin/sh\n##ISSUE i simulation script.\n##Objects:Try to simulate the Wi-Fi interaction sequence to accelerate issue reproduce\n#Use method:\n#1. Make sure the Wi-Fi is enable when board power on.\n#2. adb push issue-i-test-tool /data/test/\n#3. adb shell \n#4. cd /data/test/\n#5. nohup sh issue_i_simulate_script.sh &\n\n#Stop Android framework\nstop\n\nrm -rf /data/dump_*\ncp ./hostapd_ap0.conf /data/vendor/wifi/hostapd/hostapd_ap0.conf\nchown wifi:wifi /data/vendor/wifi/wpa/wpa_supplicant.conf\nchown wifi:wifi /data/vendor/wifi/hostapd/hostapd_ap0.conf\n\ndmesg -C\nERR_NUM=0\nNUM=0\nif [ -e /data/test/kernel_log ]; then\n   rm -rf /data/test/kernel_log/*\n   echo \"kernel_log dir exitst\"\nelse\n    mkdir -p /data/test/kernel_log/\nfi\n\necho \"######## statrt new simulation #########\"\n\nwhile true\ndo\n    echo \"######## statrt new simulation #########\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    #Load 8997 driver\n    #insmod mlan.ko\n    #insmod moal.ko drv_mode=3 sta_name=wlan0 uap_name=ap cal_data=none cfg80211_wext=0xf fw_name=nxp/sdiouart_combo.bin\n    \n    #ifconfig wlan0 up\n    \n    ##Start wpa_supplicant\n    #/vendor/bin/hw/wpa_supplicant -Dnl80211 -iwlan0 -c/data/vendor/wifi/wpa/wpa_supplicant.conf &\n    #start wpa_supplicant\n    wpa_cli -i wlan0 disconnect\n\n    ##Set driver and FW debug level\n    mlanutl wlan0 drvdbg 0x800FF\n\tsleep 1\n\t##Set driver and FW debug level\n    mlanutl ap0 drvdbg 0x800FF\n    #cat /proc/kmsg > ./kernel_log/kernel_log.txt &\n    echo \"Set drvdbg 0x800FF and capture kernel log.\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    \n    ##Start scan every 10 seconds\n    sh /data/test/cycle_scan.sh $NUM &\n    \n    ##Start AP\n    ##hostapd hostap.conf\n    echo \"------START SOFT AP-----\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    start hostapd\n    \n    \n    media_state=$(cat /proc/mwlan/adapter0/wlan0/info  | grep -i media_state | cut -b 14-22)\n    echo \"$media_state\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    \n    NUM_CONNECT=0\n    ##Connect remote ap specified by ssid\n    while true\n    do\n        #wpa_cli -i wlan0 remove_net all\n        #wpa_cli -i wlan0 flush\n        #wpa_cli -i wlan0 add_network\n        #wpa_cli -i wlan0 set_network 0 ssid '\"SSID\"'\n        #wpa_cli -i wlan0 set_network 0 key_mgmt NONE\n        #wpa_cli -i wlan0 set_network 0 proto WPA2\n        #wpa_cli -i wlan0 set_network 0 pairwise GCMP-256 CCMP TKIP\n        #wpa_cli -i wlan0 set_network 0 group GCMP-256 CCMP TKIP\n        #wpa_cli -i wlan0 set_network 0 psk '\"password\"'\n        wpa_cli -i wlan0 select_network 0\n    \t\n        sleep 5\n        media_state=$(cat /proc/mwlan/adapter0/wlan0/info  | grep -i media_state | cut -b 14-22)\n        if [ \"$media_state\" == \"Disconnec\" ]; then\n            let NUM_CONNECT+=1\n            echo \"Try to connect again.NUM_CONNECT is $NUM_CONNECT\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        else\n            echo \"-----Connect success.-----\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    \t    break\n        fi\n    \n        if [ $NUM_CONNECT -gt 4 ]; then\n            echo \"Stop connect NUM_CONNECT is $NUM_CONNECT\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n            break\n        else\n            echo \"Continue connect\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        fi\n\n        sleep 8\n    done\n    \n    ##DHCP\n    \n    #dhclient -i wlan0\n    \n\t#Add some traffic\n\tiperf -c <IP> -i 1 -t 10\n\t\n    sleep 5\n\n    ##Stop AP\n    echo \"-----STOP AP-----\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    stop hostapd\n\n\t#Add some traffic\n\tiperf -c <IP> -i 1 -t 10\n\n    i=1\n    while(($i<6))\n    do\n\tmlanutl wlan0 verext 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        echo \"get verext info\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        #echo \"get verext info\" \n\tsleep 2\n        i=$(($i+1))\n    done\n    \n    \n    dmesg > kernel_log/kernel_log.txt\n \n    driver_state=$(cat /proc/mwlan/adapter0/wlan0/debug | grep -i driver_state | cut -b 14)\n    echo \"$driver_state\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n\n    ##Dump FW log\n    if [ -e /data/dump_*/file_sdio_DUMP ]; then\n        echo \"DUMP success\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        killall cycle_scan.sh\n        break\n    fi\n\n    if [ $driver_state != 0 ]; then\n        echo \"debug_dump\" > /proc/mwlan/adapter0/wlan0/config\n\t\tkillall cycle_scan.sh\n        break\n    else\n        killall cycle_scan.sh\n        #rm -rf /data/test/kernel_log/kernel_log_$NUM.txt\n        rm -rf /data/test/kernel_log/script_log_$NUM.txt\n        let NUM+=1\n    fi\n\n    echo \"Continue utimost circle.\"\n\ndone\n```\n\n被上面的script调用\n\n```shell\n#!/bin/sh\n#This script is used to trigger cycle scan\nERR_NUM=0\nNUM=0\nLOGNUM=$1\n\nwhile true\ndo\n    scan_result=$(wpa_cli -i wlan0 scan)\n    if [ \"$scan_result\" != \"OK\" ]; then\n\t\techo \"scan FAIL\" 2>&1 >> /data/test/kernel_log/script_log_$LOGNUM.txt\n        ERR_NUM=$[$ERR_NUM + 1]\n    else\n        echo \"scan OK\" 2>&1 >> /data/test/kernel_log/script_log_$LOGNUM.txt\n        ERR_NUM=0\n    fi\n\n    if [ $ERR_NUM -gt 10 ]; then\n        echo \"Continuos scan ERR_NUM is $ERR_NUM\" 2>&1 >> /data/test/kernel_log/script_log_$LOGNUM.txt\n        break\n    fi\n\n    echo \"scan NUM is $NUM\" 2>&1 >> /data/test/kernel_log/script_log_$LOGNUM.txt\n    let NUM+=1\n    sleep 8\ndone\n```","source":"_posts/Linux-shell-script-实践记录-一.md","raw":"---\ntitle: Linux shell script 实践记录(一)\ndate: 2022-02-15 18:02:16\ntags: 'Shell script'\n---\n\n本文展示一个Linux shell scpript实例。其中涉及的的一些Linux和shell相关的知识的如下：\n1. shell script 首行语法\n2. shell 的注释方法及script的代码规范一般形式\n3. shell 条件语句\n4. shell scprit中调用另外一个shell script.\n5. while 循环\n6. 获取系统参数并保存变量，变量计数\n7. 输出重定向及文件名创建编号。\n8. 终端断开不杀脚本的方法\n9. Wi-Fi的连接操作等\n\n\n主shell script.\n\n```shell\n#!/bin/sh\n##ISSUE i simulation script.\n##Objects:Try to simulate the Wi-Fi interaction sequence to accelerate issue reproduce\n#Use method:\n#1. Make sure the Wi-Fi is enable when board power on.\n#2. adb push issue-i-test-tool /data/test/\n#3. adb shell \n#4. cd /data/test/\n#5. nohup sh issue_i_simulate_script.sh &\n\n#Stop Android framework\nstop\n\nrm -rf /data/dump_*\ncp ./hostapd_ap0.conf /data/vendor/wifi/hostapd/hostapd_ap0.conf\nchown wifi:wifi /data/vendor/wifi/wpa/wpa_supplicant.conf\nchown wifi:wifi /data/vendor/wifi/hostapd/hostapd_ap0.conf\n\ndmesg -C\nERR_NUM=0\nNUM=0\nif [ -e /data/test/kernel_log ]; then\n   rm -rf /data/test/kernel_log/*\n   echo \"kernel_log dir exitst\"\nelse\n    mkdir -p /data/test/kernel_log/\nfi\n\necho \"######## statrt new simulation #########\"\n\nwhile true\ndo\n    echo \"######## statrt new simulation #########\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    #Load 8997 driver\n    #insmod mlan.ko\n    #insmod moal.ko drv_mode=3 sta_name=wlan0 uap_name=ap cal_data=none cfg80211_wext=0xf fw_name=nxp/sdiouart_combo.bin\n    \n    #ifconfig wlan0 up\n    \n    ##Start wpa_supplicant\n    #/vendor/bin/hw/wpa_supplicant -Dnl80211 -iwlan0 -c/data/vendor/wifi/wpa/wpa_supplicant.conf &\n    #start wpa_supplicant\n    wpa_cli -i wlan0 disconnect\n\n    ##Set driver and FW debug level\n    mlanutl wlan0 drvdbg 0x800FF\n\tsleep 1\n\t##Set driver and FW debug level\n    mlanutl ap0 drvdbg 0x800FF\n    #cat /proc/kmsg > ./kernel_log/kernel_log.txt &\n    echo \"Set drvdbg 0x800FF and capture kernel log.\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    \n    ##Start scan every 10 seconds\n    sh /data/test/cycle_scan.sh $NUM &\n    \n    ##Start AP\n    ##hostapd hostap.conf\n    echo \"------START SOFT AP-----\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    start hostapd\n    \n    \n    media_state=$(cat /proc/mwlan/adapter0/wlan0/info  | grep -i media_state | cut -b 14-22)\n    echo \"$media_state\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    \n    NUM_CONNECT=0\n    ##Connect remote ap specified by ssid\n    while true\n    do\n        #wpa_cli -i wlan0 remove_net all\n        #wpa_cli -i wlan0 flush\n        #wpa_cli -i wlan0 add_network\n        #wpa_cli -i wlan0 set_network 0 ssid '\"SSID\"'\n        #wpa_cli -i wlan0 set_network 0 key_mgmt NONE\n        #wpa_cli -i wlan0 set_network 0 proto WPA2\n        #wpa_cli -i wlan0 set_network 0 pairwise GCMP-256 CCMP TKIP\n        #wpa_cli -i wlan0 set_network 0 group GCMP-256 CCMP TKIP\n        #wpa_cli -i wlan0 set_network 0 psk '\"password\"'\n        wpa_cli -i wlan0 select_network 0\n    \t\n        sleep 5\n        media_state=$(cat /proc/mwlan/adapter0/wlan0/info  | grep -i media_state | cut -b 14-22)\n        if [ \"$media_state\" == \"Disconnec\" ]; then\n            let NUM_CONNECT+=1\n            echo \"Try to connect again.NUM_CONNECT is $NUM_CONNECT\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        else\n            echo \"-----Connect success.-----\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    \t    break\n        fi\n    \n        if [ $NUM_CONNECT -gt 4 ]; then\n            echo \"Stop connect NUM_CONNECT is $NUM_CONNECT\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n            break\n        else\n            echo \"Continue connect\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        fi\n\n        sleep 8\n    done\n    \n    ##DHCP\n    \n    #dhclient -i wlan0\n    \n\t#Add some traffic\n\tiperf -c <IP> -i 1 -t 10\n\t\n    sleep 5\n\n    ##Stop AP\n    echo \"-----STOP AP-----\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n    stop hostapd\n\n\t#Add some traffic\n\tiperf -c <IP> -i 1 -t 10\n\n    i=1\n    while(($i<6))\n    do\n\tmlanutl wlan0 verext 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        echo \"get verext info\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        #echo \"get verext info\" \n\tsleep 2\n        i=$(($i+1))\n    done\n    \n    \n    dmesg > kernel_log/kernel_log.txt\n \n    driver_state=$(cat /proc/mwlan/adapter0/wlan0/debug | grep -i driver_state | cut -b 14)\n    echo \"$driver_state\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n\n    ##Dump FW log\n    if [ -e /data/dump_*/file_sdio_DUMP ]; then\n        echo \"DUMP success\" 2>&1 >> /data/test/kernel_log/script_log_$NUM.txt\n        killall cycle_scan.sh\n        break\n    fi\n\n    if [ $driver_state != 0 ]; then\n        echo \"debug_dump\" > /proc/mwlan/adapter0/wlan0/config\n\t\tkillall cycle_scan.sh\n        break\n    else\n        killall cycle_scan.sh\n        #rm -rf /data/test/kernel_log/kernel_log_$NUM.txt\n        rm -rf /data/test/kernel_log/script_log_$NUM.txt\n        let NUM+=1\n    fi\n\n    echo \"Continue utimost circle.\"\n\ndone\n```\n\n被上面的script调用\n\n```shell\n#!/bin/sh\n#This script is used to trigger cycle scan\nERR_NUM=0\nNUM=0\nLOGNUM=$1\n\nwhile true\ndo\n    scan_result=$(wpa_cli -i wlan0 scan)\n    if [ \"$scan_result\" != \"OK\" ]; then\n\t\techo \"scan FAIL\" 2>&1 >> /data/test/kernel_log/script_log_$LOGNUM.txt\n        ERR_NUM=$[$ERR_NUM + 1]\n    else\n        echo \"scan OK\" 2>&1 >> /data/test/kernel_log/script_log_$LOGNUM.txt\n        ERR_NUM=0\n    fi\n\n    if [ $ERR_NUM -gt 10 ]; then\n        echo \"Continuos scan ERR_NUM is $ERR_NUM\" 2>&1 >> /data/test/kernel_log/script_log_$LOGNUM.txt\n        break\n    fi\n\n    echo \"scan NUM is $NUM\" 2>&1 >> /data/test/kernel_log/script_log_$LOGNUM.txt\n    let NUM+=1\n    sleep 8\ndone\n```","slug":"Linux-shell-script-实践记录-一","published":1,"updated":"2022-02-15T10:20:08.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud4a002g18jxf0slc86g","content":"<p>本文展示一个Linux shell scpript实例。其中涉及的的一些Linux和shell相关的知识的如下：</p>\n<ol>\n<li>shell script 首行语法</li>\n<li>shell 的注释方法及script的代码规范一般形式</li>\n<li>shell 条件语句</li>\n<li>shell scprit中调用另外一个shell script.</li>\n<li>while 循环</li>\n<li>获取系统参数并保存变量，变量计数</li>\n<li>输出重定向及文件名创建编号。</li>\n<li>终端断开不杀脚本的方法</li>\n<li>Wi-Fi的连接操作等</li>\n</ol>\n<p>主shell script.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/sh</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#ISSUE i simulation script.</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#Objects:Try to simulate the Wi-Fi interaction sequence to accelerate issue reproduce</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">Use method:</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">1. Make sure the Wi-Fi is <span class=\"built_in\">enable</span> when board power on.</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">2. adb push issue-i-test-tool /data/<span class=\"built_in\">test</span>/</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">3. adb shell</span> </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">4. <span class=\"built_in\">cd</span> /data/<span class=\"built_in\">test</span>/</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">5. nohup sh issue_i_simulate_script.sh &amp;</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">Stop Android framework</span></span><br><span class=\"line\">stop</span><br><span class=\"line\"></span><br><span class=\"line\">rm -rf /data/dump_*</span><br><span class=\"line\">cp ./hostapd_ap0.conf /data/vendor/wifi/hostapd/hostapd_ap0.conf</span><br><span class=\"line\">chown wifi:wifi /data/vendor/wifi/wpa/wpa_supplicant.conf</span><br><span class=\"line\">chown wifi:wifi /data/vendor/wifi/hostapd/hostapd_ap0.conf</span><br><span class=\"line\"></span><br><span class=\"line\">dmesg -C</span><br><span class=\"line\">ERR_NUM=0</span><br><span class=\"line\">NUM=0</span><br><span class=\"line\">if [ -e /data/test/kernel_log ]; then</span><br><span class=\"line\">   rm -rf /data/test/kernel_log/*</span><br><span class=\"line\">   echo &quot;kernel_log dir exitst&quot;</span><br><span class=\"line\">else</span><br><span class=\"line\">    mkdir -p /data/test/kernel_log/</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;######## statrt new simulation #########&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">while true</span><br><span class=\"line\">do</span><br><span class=\"line\">    echo &quot;######## statrt new simulation #########&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    #Load 8997 driver</span><br><span class=\"line\">    #insmod mlan.ko</span><br><span class=\"line\">    #insmod moal.ko drv_mode=3 sta_name=wlan0 uap_name=ap cal_data=none cfg80211_wext=0xf fw_name=nxp/sdiouart_combo.bin</span><br><span class=\"line\">    </span><br><span class=\"line\">    #ifconfig wlan0 up</span><br><span class=\"line\">    </span><br><span class=\"line\">    ##Start wpa_supplicant</span><br><span class=\"line\">    #/vendor/bin/hw/wpa_supplicant -Dnl80211 -iwlan0 -c/data/vendor/wifi/wpa/wpa_supplicant.conf &amp;</span><br><span class=\"line\">    #start wpa_supplicant</span><br><span class=\"line\">    wpa_cli -i wlan0 disconnect</span><br><span class=\"line\"></span><br><span class=\"line\">    ##Set driver and FW debug level</span><br><span class=\"line\">    mlanutl wlan0 drvdbg 0x800FF</span><br><span class=\"line\">\tsleep 1</span><br><span class=\"line\"><span class=\"meta\">\t#</span><span class=\"bash\"><span class=\"comment\">#Set driver and FW debug level</span></span></span><br><span class=\"line\">    mlanutl ap0 drvdbg 0x800FF</span><br><span class=\"line\">    #cat /proc/kmsg &gt; ./kernel_log/kernel_log.txt &amp;</span><br><span class=\"line\">    echo &quot;Set drvdbg 0x800FF and capture kernel log.&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    </span><br><span class=\"line\">    ##Start scan every 10 seconds</span><br><span class=\"line\">    sh /data/test/cycle_scan.sh $NUM &amp;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ##Start AP</span><br><span class=\"line\">    ##hostapd hostap.conf</span><br><span class=\"line\">    echo &quot;------START SOFT AP-----&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    start hostapd</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    media_state=$(cat /proc/mwlan/adapter0/wlan0/info  | grep -i media_state | cut -b 14-22)</span><br><span class=\"line\">    echo &quot;$media_state&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    </span><br><span class=\"line\">    NUM_CONNECT=0</span><br><span class=\"line\">    ##Connect remote ap specified by ssid</span><br><span class=\"line\">    while true</span><br><span class=\"line\">    do</span><br><span class=\"line\">        #wpa_cli -i wlan0 remove_net all</span><br><span class=\"line\">        #wpa_cli -i wlan0 flush</span><br><span class=\"line\">        #wpa_cli -i wlan0 add_network</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 ssid &#x27;&quot;SSID&quot;&#x27;</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 key_mgmt NONE</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 proto WPA2</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 pairwise GCMP-256 CCMP TKIP</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 group GCMP-256 CCMP TKIP</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 psk &#x27;&quot;password&quot;&#x27;</span><br><span class=\"line\">        wpa_cli -i wlan0 select_network 0</span><br><span class=\"line\">    \t</span><br><span class=\"line\">        sleep 5</span><br><span class=\"line\">        media_state=$(cat /proc/mwlan/adapter0/wlan0/info  | grep -i media_state | cut -b 14-22)</span><br><span class=\"line\">        if [ &quot;$media_state&quot; == &quot;Disconnec&quot; ]; then</span><br><span class=\"line\">            let NUM_CONNECT+=1</span><br><span class=\"line\">            echo &quot;Try to connect again.NUM_CONNECT is $NUM_CONNECT&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        else</span><br><span class=\"line\">            echo &quot;-----Connect success.-----&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    \t    break</span><br><span class=\"line\">        fi</span><br><span class=\"line\">    </span><br><span class=\"line\">        if [ $NUM_CONNECT -gt 4 ]; then</span><br><span class=\"line\">            echo &quot;Stop connect NUM_CONNECT is $NUM_CONNECT&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">            break</span><br><span class=\"line\">        else</span><br><span class=\"line\">            echo &quot;Continue connect&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        fi</span><br><span class=\"line\"></span><br><span class=\"line\">        sleep 8</span><br><span class=\"line\">    done</span><br><span class=\"line\">    </span><br><span class=\"line\">    ##DHCP</span><br><span class=\"line\">    </span><br><span class=\"line\">    #dhclient -i wlan0</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"meta\">\t#</span><span class=\"bash\">Add some traffic</span></span><br><span class=\"line\">\tiperf -c &lt;IP&gt; -i 1 -t 10</span><br><span class=\"line\">\t</span><br><span class=\"line\">    sleep 5</span><br><span class=\"line\"></span><br><span class=\"line\">    ##Stop AP</span><br><span class=\"line\">    echo &quot;-----STOP AP-----&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    stop hostapd</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">\t#</span><span class=\"bash\">Add some traffic</span></span><br><span class=\"line\">\tiperf -c &lt;IP&gt; -i 1 -t 10</span><br><span class=\"line\"></span><br><span class=\"line\">    i=1</span><br><span class=\"line\">    while(($i&lt;6))</span><br><span class=\"line\">    do</span><br><span class=\"line\">\tmlanutl wlan0 verext 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        echo &quot;get verext info&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        #echo &quot;get verext info&quot; </span><br><span class=\"line\">\tsleep 2</span><br><span class=\"line\">        i=$(($i+1))</span><br><span class=\"line\">    done</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    dmesg &gt; kernel_log/kernel_log.txt</span><br><span class=\"line\"> </span><br><span class=\"line\">    driver_state=$(cat /proc/mwlan/adapter0/wlan0/debug | grep -i driver_state | cut -b 14)</span><br><span class=\"line\">    echo &quot;$driver_state&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\"></span><br><span class=\"line\">    ##Dump FW log</span><br><span class=\"line\">    if [ -e /data/dump_*/file_sdio_DUMP ]; then</span><br><span class=\"line\">        echo &quot;DUMP success&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        killall cycle_scan.sh</span><br><span class=\"line\">        break</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    if [ $driver_state != 0 ]; then</span><br><span class=\"line\">        echo &quot;debug_dump&quot; &gt; /proc/mwlan/adapter0/wlan0/config</span><br><span class=\"line\">\t\tkillall cycle_scan.sh</span><br><span class=\"line\">        break</span><br><span class=\"line\">    else</span><br><span class=\"line\">        killall cycle_scan.sh</span><br><span class=\"line\">        #rm -rf /data/test/kernel_log/kernel_log_$NUM.txt</span><br><span class=\"line\">        rm -rf /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        let NUM+=1</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    echo &quot;Continue utimost circle.&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>\n<p>被上面的script调用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/sh</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">This script is used to trigger cycle scan</span></span><br><span class=\"line\">ERR_NUM=0</span><br><span class=\"line\">NUM=0</span><br><span class=\"line\">LOGNUM=$1</span><br><span class=\"line\"></span><br><span class=\"line\">while true</span><br><span class=\"line\">do</span><br><span class=\"line\">    scan_result=$(wpa_cli -i wlan0 scan)</span><br><span class=\"line\">    if [ &quot;$scan_result&quot; != &quot;OK&quot; ]; then</span><br><span class=\"line\">\t\techo &quot;scan FAIL&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$LOGNUM.txt</span><br><span class=\"line\">        ERR_NUM=$[$ERR_NUM + 1]</span><br><span class=\"line\">    else</span><br><span class=\"line\">        echo &quot;scan OK&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$LOGNUM.txt</span><br><span class=\"line\">        ERR_NUM=0</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    if [ $ERR_NUM -gt 10 ]; then</span><br><span class=\"line\">        echo &quot;Continuos scan ERR_NUM is $ERR_NUM&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$LOGNUM.txt</span><br><span class=\"line\">        break</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    echo &quot;scan NUM is $NUM&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$LOGNUM.txt</span><br><span class=\"line\">    let NUM+=1</span><br><span class=\"line\">    sleep 8</span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>本文展示一个Linux shell scpript实例。其中涉及的的一些Linux和shell相关的知识的如下：</p>\n<ol>\n<li>shell script 首行语法</li>\n<li>shell 的注释方法及script的代码规范一般形式</li>\n<li>shell 条件语句</li>\n<li>shell scprit中调用另外一个shell script.</li>\n<li>while 循环</li>\n<li>获取系统参数并保存变量，变量计数</li>\n<li>输出重定向及文件名创建编号。</li>\n<li>终端断开不杀脚本的方法</li>\n<li>Wi-Fi的连接操作等</li>\n</ol>\n<p>主shell script.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/sh</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#ISSUE i simulation script.</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#Objects:Try to simulate the Wi-Fi interaction sequence to accelerate issue reproduce</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">Use method:</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">1. Make sure the Wi-Fi is <span class=\"built_in\">enable</span> when board power on.</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">2. adb push issue-i-test-tool /data/<span class=\"built_in\">test</span>/</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">3. adb shell</span> </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">4. <span class=\"built_in\">cd</span> /data/<span class=\"built_in\">test</span>/</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">5. nohup sh issue_i_simulate_script.sh &amp;</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">Stop Android framework</span></span><br><span class=\"line\">stop</span><br><span class=\"line\"></span><br><span class=\"line\">rm -rf /data/dump_*</span><br><span class=\"line\">cp ./hostapd_ap0.conf /data/vendor/wifi/hostapd/hostapd_ap0.conf</span><br><span class=\"line\">chown wifi:wifi /data/vendor/wifi/wpa/wpa_supplicant.conf</span><br><span class=\"line\">chown wifi:wifi /data/vendor/wifi/hostapd/hostapd_ap0.conf</span><br><span class=\"line\"></span><br><span class=\"line\">dmesg -C</span><br><span class=\"line\">ERR_NUM=0</span><br><span class=\"line\">NUM=0</span><br><span class=\"line\">if [ -e /data/test/kernel_log ]; then</span><br><span class=\"line\">   rm -rf /data/test/kernel_log/*</span><br><span class=\"line\">   echo &quot;kernel_log dir exitst&quot;</span><br><span class=\"line\">else</span><br><span class=\"line\">    mkdir -p /data/test/kernel_log/</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;######## statrt new simulation #########&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">while true</span><br><span class=\"line\">do</span><br><span class=\"line\">    echo &quot;######## statrt new simulation #########&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    #Load 8997 driver</span><br><span class=\"line\">    #insmod mlan.ko</span><br><span class=\"line\">    #insmod moal.ko drv_mode=3 sta_name=wlan0 uap_name=ap cal_data=none cfg80211_wext=0xf fw_name=nxp/sdiouart_combo.bin</span><br><span class=\"line\">    </span><br><span class=\"line\">    #ifconfig wlan0 up</span><br><span class=\"line\">    </span><br><span class=\"line\">    ##Start wpa_supplicant</span><br><span class=\"line\">    #/vendor/bin/hw/wpa_supplicant -Dnl80211 -iwlan0 -c/data/vendor/wifi/wpa/wpa_supplicant.conf &amp;</span><br><span class=\"line\">    #start wpa_supplicant</span><br><span class=\"line\">    wpa_cli -i wlan0 disconnect</span><br><span class=\"line\"></span><br><span class=\"line\">    ##Set driver and FW debug level</span><br><span class=\"line\">    mlanutl wlan0 drvdbg 0x800FF</span><br><span class=\"line\">\tsleep 1</span><br><span class=\"line\"><span class=\"meta\">\t#</span><span class=\"bash\"><span class=\"comment\">#Set driver and FW debug level</span></span></span><br><span class=\"line\">    mlanutl ap0 drvdbg 0x800FF</span><br><span class=\"line\">    #cat /proc/kmsg &gt; ./kernel_log/kernel_log.txt &amp;</span><br><span class=\"line\">    echo &quot;Set drvdbg 0x800FF and capture kernel log.&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    </span><br><span class=\"line\">    ##Start scan every 10 seconds</span><br><span class=\"line\">    sh /data/test/cycle_scan.sh $NUM &amp;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ##Start AP</span><br><span class=\"line\">    ##hostapd hostap.conf</span><br><span class=\"line\">    echo &quot;------START SOFT AP-----&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    start hostapd</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    media_state=$(cat /proc/mwlan/adapter0/wlan0/info  | grep -i media_state | cut -b 14-22)</span><br><span class=\"line\">    echo &quot;$media_state&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    </span><br><span class=\"line\">    NUM_CONNECT=0</span><br><span class=\"line\">    ##Connect remote ap specified by ssid</span><br><span class=\"line\">    while true</span><br><span class=\"line\">    do</span><br><span class=\"line\">        #wpa_cli -i wlan0 remove_net all</span><br><span class=\"line\">        #wpa_cli -i wlan0 flush</span><br><span class=\"line\">        #wpa_cli -i wlan0 add_network</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 ssid &#x27;&quot;SSID&quot;&#x27;</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 key_mgmt NONE</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 proto WPA2</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 pairwise GCMP-256 CCMP TKIP</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 group GCMP-256 CCMP TKIP</span><br><span class=\"line\">        #wpa_cli -i wlan0 set_network 0 psk &#x27;&quot;password&quot;&#x27;</span><br><span class=\"line\">        wpa_cli -i wlan0 select_network 0</span><br><span class=\"line\">    \t</span><br><span class=\"line\">        sleep 5</span><br><span class=\"line\">        media_state=$(cat /proc/mwlan/adapter0/wlan0/info  | grep -i media_state | cut -b 14-22)</span><br><span class=\"line\">        if [ &quot;$media_state&quot; == &quot;Disconnec&quot; ]; then</span><br><span class=\"line\">            let NUM_CONNECT+=1</span><br><span class=\"line\">            echo &quot;Try to connect again.NUM_CONNECT is $NUM_CONNECT&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        else</span><br><span class=\"line\">            echo &quot;-----Connect success.-----&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    \t    break</span><br><span class=\"line\">        fi</span><br><span class=\"line\">    </span><br><span class=\"line\">        if [ $NUM_CONNECT -gt 4 ]; then</span><br><span class=\"line\">            echo &quot;Stop connect NUM_CONNECT is $NUM_CONNECT&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">            break</span><br><span class=\"line\">        else</span><br><span class=\"line\">            echo &quot;Continue connect&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        fi</span><br><span class=\"line\"></span><br><span class=\"line\">        sleep 8</span><br><span class=\"line\">    done</span><br><span class=\"line\">    </span><br><span class=\"line\">    ##DHCP</span><br><span class=\"line\">    </span><br><span class=\"line\">    #dhclient -i wlan0</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"meta\">\t#</span><span class=\"bash\">Add some traffic</span></span><br><span class=\"line\">\tiperf -c &lt;IP&gt; -i 1 -t 10</span><br><span class=\"line\">\t</span><br><span class=\"line\">    sleep 5</span><br><span class=\"line\"></span><br><span class=\"line\">    ##Stop AP</span><br><span class=\"line\">    echo &quot;-----STOP AP-----&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">    stop hostapd</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">\t#</span><span class=\"bash\">Add some traffic</span></span><br><span class=\"line\">\tiperf -c &lt;IP&gt; -i 1 -t 10</span><br><span class=\"line\"></span><br><span class=\"line\">    i=1</span><br><span class=\"line\">    while(($i&lt;6))</span><br><span class=\"line\">    do</span><br><span class=\"line\">\tmlanutl wlan0 verext 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        echo &quot;get verext info&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        #echo &quot;get verext info&quot; </span><br><span class=\"line\">\tsleep 2</span><br><span class=\"line\">        i=$(($i+1))</span><br><span class=\"line\">    done</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    dmesg &gt; kernel_log/kernel_log.txt</span><br><span class=\"line\"> </span><br><span class=\"line\">    driver_state=$(cat /proc/mwlan/adapter0/wlan0/debug | grep -i driver_state | cut -b 14)</span><br><span class=\"line\">    echo &quot;$driver_state&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\"></span><br><span class=\"line\">    ##Dump FW log</span><br><span class=\"line\">    if [ -e /data/dump_*/file_sdio_DUMP ]; then</span><br><span class=\"line\">        echo &quot;DUMP success&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        killall cycle_scan.sh</span><br><span class=\"line\">        break</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    if [ $driver_state != 0 ]; then</span><br><span class=\"line\">        echo &quot;debug_dump&quot; &gt; /proc/mwlan/adapter0/wlan0/config</span><br><span class=\"line\">\t\tkillall cycle_scan.sh</span><br><span class=\"line\">        break</span><br><span class=\"line\">    else</span><br><span class=\"line\">        killall cycle_scan.sh</span><br><span class=\"line\">        #rm -rf /data/test/kernel_log/kernel_log_$NUM.txt</span><br><span class=\"line\">        rm -rf /data/test/kernel_log/script_log_$NUM.txt</span><br><span class=\"line\">        let NUM+=1</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    echo &quot;Continue utimost circle.&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>\n<p>被上面的script调用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/sh</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">This script is used to trigger cycle scan</span></span><br><span class=\"line\">ERR_NUM=0</span><br><span class=\"line\">NUM=0</span><br><span class=\"line\">LOGNUM=$1</span><br><span class=\"line\"></span><br><span class=\"line\">while true</span><br><span class=\"line\">do</span><br><span class=\"line\">    scan_result=$(wpa_cli -i wlan0 scan)</span><br><span class=\"line\">    if [ &quot;$scan_result&quot; != &quot;OK&quot; ]; then</span><br><span class=\"line\">\t\techo &quot;scan FAIL&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$LOGNUM.txt</span><br><span class=\"line\">        ERR_NUM=$[$ERR_NUM + 1]</span><br><span class=\"line\">    else</span><br><span class=\"line\">        echo &quot;scan OK&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$LOGNUM.txt</span><br><span class=\"line\">        ERR_NUM=0</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    if [ $ERR_NUM -gt 10 ]; then</span><br><span class=\"line\">        echo &quot;Continuos scan ERR_NUM is $ERR_NUM&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$LOGNUM.txt</span><br><span class=\"line\">        break</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    echo &quot;scan NUM is $NUM&quot; 2&gt;&amp;1 &gt;&gt; /data/test/kernel_log/script_log_$LOGNUM.txt</span><br><span class=\"line\">    let NUM+=1</span><br><span class=\"line\">    sleep 8</span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>"},{"title":"SVN服务仓库搭建记录","date":"2021-12-16T15:41:15.000Z","_content":"## 目标\n在ubuntu上搭建SVN仓库，通过windows访问仓库以记录和管理文档。\n\n## 步骤\n1.检查ubuntu是否已经安装SVN工具\n``` bash\n$ svn --version\n```\n2.如果没有SVN则安装SVN工具\n``` bash\n$ sudo apt install subversion\n```\n3.再次检查SVN\n``` bash\n$ svn --version\nsvn, version 1.9.7 (r1800392)\n   compiled Mar 28 2018, 08:49:13 on x86_64-pc-linux-gnu\n   ......\n```\n4.创建SVN仓库测试目录\n``` bash\n$ mkdir test\n$ cd test/\n$ mkdir svn\n$ cd svn/\n```\n5.创建第一个SVN仓库，取名为repo1\n``` bash\n$ svnadmin create ~/work/test/svn/repo1\n$ ls\nrepo1\n$ cd repo1/\n$ ls\nconf  db  format  hooks  locks  README.txt\n```\n\n6.进入仓库配置目录\n``` bash\n$ cd conf/\n$ ls\nauthz  hooks-env.tmpl  passwd  svnserve.conf\n```\n\n7.配置仓库\n> $ 修改文件svnserve.conf以设置以下选项 \n  anon-access = none\n  auth-access = write\n  password-db = passwd\n  authz-db = authz\n  realm = My First Repository\n\n8.修改文件passwod,以配置访问密码\n> //配置用户名为admin,等号右边为admin密码\n  [users]\n  admin = admin\n\n9.修改文件authz,以配置访问权限和路径\n> [groups]\n  g_admin = admin\n>  \n  [/]\n  @g_admin = rw\n> \\* = r\n\n10.启动SVN服务,即可通过 svn://192.168.0.110/repo1使用仓库\n``` bash\n$ pwd\n~/work/test/svn\n$ ifconfig获取IP地址为: 192.168.0.110\n```\n\n11.在windows上安装TortoiseSVN\n12.通过安装的TortoiseSVN工具访问SVN仓库\n> 首次使用示例\n  1)创建test文件夹\n  2)鼠标右键->TortoiseSVN->Repo-broswer\n  3)输入仓库地址 svn://192.168.0.110/repo1\n  4)输入账号登陆即可浏览仓库\n  5)也可以鼠标右键->SVN checkout...到本地文件夹\n  6)更新仓库到最新，修改文件，提交文件到远程仓库\n\n\n## 后记\n今天状态不好，错误的修改了文档，发现不好恢复到原始模样，所以记录一下SVN版本控制工具。\n","source":"_posts/SVN服务仓库搭建记录.md","raw":"---\ntitle: SVN服务仓库搭建记录\ndate: 2021-12-16 23:41:15\ntags:\n---\n## 目标\n在ubuntu上搭建SVN仓库，通过windows访问仓库以记录和管理文档。\n\n## 步骤\n1.检查ubuntu是否已经安装SVN工具\n``` bash\n$ svn --version\n```\n2.如果没有SVN则安装SVN工具\n``` bash\n$ sudo apt install subversion\n```\n3.再次检查SVN\n``` bash\n$ svn --version\nsvn, version 1.9.7 (r1800392)\n   compiled Mar 28 2018, 08:49:13 on x86_64-pc-linux-gnu\n   ......\n```\n4.创建SVN仓库测试目录\n``` bash\n$ mkdir test\n$ cd test/\n$ mkdir svn\n$ cd svn/\n```\n5.创建第一个SVN仓库，取名为repo1\n``` bash\n$ svnadmin create ~/work/test/svn/repo1\n$ ls\nrepo1\n$ cd repo1/\n$ ls\nconf  db  format  hooks  locks  README.txt\n```\n\n6.进入仓库配置目录\n``` bash\n$ cd conf/\n$ ls\nauthz  hooks-env.tmpl  passwd  svnserve.conf\n```\n\n7.配置仓库\n> $ 修改文件svnserve.conf以设置以下选项 \n  anon-access = none\n  auth-access = write\n  password-db = passwd\n  authz-db = authz\n  realm = My First Repository\n\n8.修改文件passwod,以配置访问密码\n> //配置用户名为admin,等号右边为admin密码\n  [users]\n  admin = admin\n\n9.修改文件authz,以配置访问权限和路径\n> [groups]\n  g_admin = admin\n>  \n  [/]\n  @g_admin = rw\n> \\* = r\n\n10.启动SVN服务,即可通过 svn://192.168.0.110/repo1使用仓库\n``` bash\n$ pwd\n~/work/test/svn\n$ ifconfig获取IP地址为: 192.168.0.110\n```\n\n11.在windows上安装TortoiseSVN\n12.通过安装的TortoiseSVN工具访问SVN仓库\n> 首次使用示例\n  1)创建test文件夹\n  2)鼠标右键->TortoiseSVN->Repo-broswer\n  3)输入仓库地址 svn://192.168.0.110/repo1\n  4)输入账号登陆即可浏览仓库\n  5)也可以鼠标右键->SVN checkout...到本地文件夹\n  6)更新仓库到最新，修改文件，提交文件到远程仓库\n\n\n## 后记\n今天状态不好，错误的修改了文档，发现不好恢复到原始模样，所以记录一下SVN版本控制工具。\n","slug":"SVN服务仓库搭建记录","published":1,"updated":"2021-12-17T07:16:12.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud4b002j18jx2hmob0s8","content":"<h2 id=\"目标\"><a href=\"#目标\" class=\"headerlink\" title=\"目标\"></a>目标</h2><p>在ubuntu上搭建SVN仓库，通过windows访问仓库以记录和管理文档。</p>\n<h2 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h2><p>1.检查ubuntu是否已经安装SVN工具<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ svn --version</span><br></pre></td></tr></table></figure><br>2.如果没有SVN则安装SVN工具<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt install subversion</span><br></pre></td></tr></table></figure><br>3.再次检查SVN<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ svn --version</span><br><span class=\"line\">svn, version 1.9.7 (r1800392)</span><br><span class=\"line\">   compiled Mar 28 2018, 08:49:13 on x86_64-pc-linux-gnu</span><br><span class=\"line\">   ......</span><br></pre></td></tr></table></figure><br>4.创建SVN仓库测试目录<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir <span class=\"built_in\">test</span></span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> <span class=\"built_in\">test</span>/</span><br><span class=\"line\">$ mkdir svn</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> svn/</span><br></pre></td></tr></table></figure><br>5.创建第一个SVN仓库，取名为repo1<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ svnadmin create ~/work/<span class=\"built_in\">test</span>/svn/repo1</span><br><span class=\"line\">$ ls</span><br><span class=\"line\">repo1</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> repo1/</span><br><span class=\"line\">$ ls</span><br><span class=\"line\">conf  db  format  hooks  locks  README.txt</span><br></pre></td></tr></table></figure></p>\n<p>6.进入仓库配置目录<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">cd</span> conf/</span><br><span class=\"line\">$ ls</span><br><span class=\"line\">authz  hooks-env.tmpl  passwd  svnserve.conf</span><br></pre></td></tr></table></figure></p>\n<p>7.配置仓库</p>\n<blockquote>\n<p>$ 修改文件svnserve.conf以设置以下选项<br>  anon-access = none<br>  auth-access = write<br>  password-db = passwd<br>  authz-db = authz<br>  realm = My First Repository</p>\n</blockquote>\n<p>8.修改文件passwod,以配置访问密码</p>\n<blockquote>\n<p>//配置用户名为admin,等号右边为admin密码<br>  [users]<br>  admin = admin</p>\n</blockquote>\n<p>9.修改文件authz,以配置访问权限和路径</p>\n<blockquote>\n<p>[groups]<br>  g_admin = admin</p>\n<p>  [/]<br>  @g_admin = rw<br>* = r</p>\n</blockquote>\n<p>10.启动SVN服务,即可通过 svn://192.168.0.110/repo1使用仓库<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">pwd</span></span><br><span class=\"line\">~/work/<span class=\"built_in\">test</span>/svn</span><br><span class=\"line\">$ ifconfig获取IP地址为: 192.168.0.110</span><br></pre></td></tr></table></figure></p>\n<p>11.在windows上安装TortoiseSVN<br>12.通过安装的TortoiseSVN工具访问SVN仓库</p>\n<blockquote>\n<p>首次使用示例<br>  1)创建test文件夹<br>  2)鼠标右键-&gt;TortoiseSVN-&gt;Repo-broswer<br>  3)输入仓库地址 svn://192.168.0.110/repo1<br>  4)输入账号登陆即可浏览仓库<br>  5)也可以鼠标右键-&gt;SVN checkout…到本地文件夹<br>  6)更新仓库到最新，修改文件，提交文件到远程仓库</p>\n</blockquote>\n<h2 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h2><p>今天状态不好，错误的修改了文档，发现不好恢复到原始模样，所以记录一下SVN版本控制工具。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"目标\"><a href=\"#目标\" class=\"headerlink\" title=\"目标\"></a>目标</h2><p>在ubuntu上搭建SVN仓库，通过windows访问仓库以记录和管理文档。</p>\n<h2 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h2><p>1.检查ubuntu是否已经安装SVN工具<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ svn --version</span><br></pre></td></tr></table></figure><br>2.如果没有SVN则安装SVN工具<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt install subversion</span><br></pre></td></tr></table></figure><br>3.再次检查SVN<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ svn --version</span><br><span class=\"line\">svn, version 1.9.7 (r1800392)</span><br><span class=\"line\">   compiled Mar 28 2018, 08:49:13 on x86_64-pc-linux-gnu</span><br><span class=\"line\">   ......</span><br></pre></td></tr></table></figure><br>4.创建SVN仓库测试目录<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir <span class=\"built_in\">test</span></span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> <span class=\"built_in\">test</span>/</span><br><span class=\"line\">$ mkdir svn</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> svn/</span><br></pre></td></tr></table></figure><br>5.创建第一个SVN仓库，取名为repo1<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ svnadmin create ~/work/<span class=\"built_in\">test</span>/svn/repo1</span><br><span class=\"line\">$ ls</span><br><span class=\"line\">repo1</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> repo1/</span><br><span class=\"line\">$ ls</span><br><span class=\"line\">conf  db  format  hooks  locks  README.txt</span><br></pre></td></tr></table></figure></p>\n<p>6.进入仓库配置目录<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">cd</span> conf/</span><br><span class=\"line\">$ ls</span><br><span class=\"line\">authz  hooks-env.tmpl  passwd  svnserve.conf</span><br></pre></td></tr></table></figure></p>\n<p>7.配置仓库</p>\n<blockquote>\n<p>$ 修改文件svnserve.conf以设置以下选项<br>  anon-access = none<br>  auth-access = write<br>  password-db = passwd<br>  authz-db = authz<br>  realm = My First Repository</p>\n</blockquote>\n<p>8.修改文件passwod,以配置访问密码</p>\n<blockquote>\n<p>//配置用户名为admin,等号右边为admin密码<br>  [users]<br>  admin = admin</p>\n</blockquote>\n<p>9.修改文件authz,以配置访问权限和路径</p>\n<blockquote>\n<p>[groups]<br>  g_admin = admin</p>\n<p>  [/]<br>  @g_admin = rw<br>* = r</p>\n</blockquote>\n<p>10.启动SVN服务,即可通过 svn://192.168.0.110/repo1使用仓库<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">pwd</span></span><br><span class=\"line\">~/work/<span class=\"built_in\">test</span>/svn</span><br><span class=\"line\">$ ifconfig获取IP地址为: 192.168.0.110</span><br></pre></td></tr></table></figure></p>\n<p>11.在windows上安装TortoiseSVN<br>12.通过安装的TortoiseSVN工具访问SVN仓库</p>\n<blockquote>\n<p>首次使用示例<br>  1)创建test文件夹<br>  2)鼠标右键-&gt;TortoiseSVN-&gt;Repo-broswer<br>  3)输入仓库地址 svn://192.168.0.110/repo1<br>  4)输入账号登陆即可浏览仓库<br>  5)也可以鼠标右键-&gt;SVN checkout…到本地文件夹<br>  6)更新仓库到最新，修改文件，提交文件到远程仓库</p>\n</blockquote>\n<h2 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h2><p>今天状态不好，错误的修改了文档，发现不好恢复到原始模样，所以记录一下SVN版本控制工具。</p>\n"},{"title":"Step by step to build personal blog.","date":"2021-12-08T15:48:18.000Z","_content":"## OS:ubuntu\n1.https://nodejs.org/en/ 下载nodejs\n2.解压下载的nodejs\n``` bash\n$ tar -xvf node-v16.13.1-linux-x64.tar.xz\n```\n3.配置nodejs\n``` bash\n$ cp node-v16.13.1-linux-x64 ~/nodejs\n$ sudo ln -s ~/nodejs/bin/npm /usr/bin/\n$ sudo ln -s ~/nodejs/bin/npm /usr/bin/\n```\n4.安装cnpm\n``` bash\n$ sudo npm install -g cnpm --registry=https://registry.npm.taobao.org\n$ sudo ln -s ~/nodejs/bin/cnpm /usr/bin/\n```\n\n5.安装hexo\n``` bash\n$ cnpm install -g hexo-cli\n$ sudo ln -s ~/nodejs/bin/hexo /usr/bin/\n```\n\n6.创建目录\n``` bash\n$ mkdir blog\n$ cd blog\n```\n\n7.生成博客\n``` bash\n$ hexo init\n```\n\n8.启动博客\n``` bash\n$ hexo s\n```\n\n9.浏览器打开本地预览\n> http://localhost:4000\n\n10.清理\n``` bash\n$ hexo clean\n```\n\n11.生成博客\n``` bash\n$ hexo g\n$ hexo s\n```\n\n12.浏览器打开\n> http://localhost:4000 \n\n13.安装部署工具\n``` bash\n$ cnpm install --save hexo-deployer-git\n```\n\n14.修改配置用于部署\n> 在__config.yml最后添加：\n    deploy:\n    type: git\n    repo: https://github.com/nld2019/nld2019.github.io.git\n    branch: master\n\n15.部署博客\n``` bash\n$ hexo d\n```\n\n16.根据仓库名称访问博客\n> https://nld2019.github.io/\n","source":"_posts/Step-by-step-to-build-personal-blog.md","raw":"---\ntitle: Step by step to build personal blog.\ndate: 2021-12-08 23:48:18\ntags:\n---\n## OS:ubuntu\n1.https://nodejs.org/en/ 下载nodejs\n2.解压下载的nodejs\n``` bash\n$ tar -xvf node-v16.13.1-linux-x64.tar.xz\n```\n3.配置nodejs\n``` bash\n$ cp node-v16.13.1-linux-x64 ~/nodejs\n$ sudo ln -s ~/nodejs/bin/npm /usr/bin/\n$ sudo ln -s ~/nodejs/bin/npm /usr/bin/\n```\n4.安装cnpm\n``` bash\n$ sudo npm install -g cnpm --registry=https://registry.npm.taobao.org\n$ sudo ln -s ~/nodejs/bin/cnpm /usr/bin/\n```\n\n5.安装hexo\n``` bash\n$ cnpm install -g hexo-cli\n$ sudo ln -s ~/nodejs/bin/hexo /usr/bin/\n```\n\n6.创建目录\n``` bash\n$ mkdir blog\n$ cd blog\n```\n\n7.生成博客\n``` bash\n$ hexo init\n```\n\n8.启动博客\n``` bash\n$ hexo s\n```\n\n9.浏览器打开本地预览\n> http://localhost:4000\n\n10.清理\n``` bash\n$ hexo clean\n```\n\n11.生成博客\n``` bash\n$ hexo g\n$ hexo s\n```\n\n12.浏览器打开\n> http://localhost:4000 \n\n13.安装部署工具\n``` bash\n$ cnpm install --save hexo-deployer-git\n```\n\n14.修改配置用于部署\n> 在__config.yml最后添加：\n    deploy:\n    type: git\n    repo: https://github.com/nld2019/nld2019.github.io.git\n    branch: master\n\n15.部署博客\n``` bash\n$ hexo d\n```\n\n16.根据仓库名称访问博客\n> https://nld2019.github.io/\n","slug":"Step-by-step-to-build-personal-blog","published":1,"updated":"2021-12-11T14:58:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud4c002l18jx8i2rdt0z","content":"<h2 id=\"OS-ubuntu\"><a href=\"#OS-ubuntu\" class=\"headerlink\" title=\"OS:ubuntu\"></a>OS:ubuntu</h2><p>1.<a href=\"https://nodejs.org/en/\">https://nodejs.org/en/</a> 下载nodejs<br>2.解压下载的nodejs<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tar -xvf node-v16.13.1-linux-x64.tar.xz</span><br></pre></td></tr></table></figure><br>3.配置nodejs<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cp node-v16.13.1-linux-x64 ~/nodejs</span><br><span class=\"line\">$ sudo ln -s ~/nodejs/bin/npm /usr/bin/</span><br><span class=\"line\">$ sudo ln -s ~/nodejs/bin/npm /usr/bin/</span><br></pre></td></tr></table></figure><br>4.安装cnpm<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class=\"line\">$ sudo ln -s ~/nodejs/bin/cnpm /usr/bin/</span><br></pre></td></tr></table></figure></p>\n<p>5.安装hexo<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cnpm install -g hexo-cli</span><br><span class=\"line\">$ sudo ln -s ~/nodejs/bin/hexo /usr/bin/</span><br></pre></td></tr></table></figure></p>\n<p>6.创建目录<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir blog</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> blog</span><br></pre></td></tr></table></figure></p>\n<p>7.生成博客<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo init</span><br></pre></td></tr></table></figure></p>\n<p>8.启动博客<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo s</span><br></pre></td></tr></table></figure></p>\n<p>9.浏览器打开本地预览</p>\n<blockquote>\n<p><a href=\"http://localhost:4000\">http://localhost:4000</a></p>\n</blockquote>\n<p>10.清理<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo clean</span><br></pre></td></tr></table></figure></p>\n<p>11.生成博客<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo g</span><br><span class=\"line\">$ hexo s</span><br></pre></td></tr></table></figure></p>\n<p>12.浏览器打开</p>\n<blockquote>\n<p><a href=\"http://localhost:4000\">http://localhost:4000</a> </p>\n</blockquote>\n<p>13.安装部署工具<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cnpm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure></p>\n<p>14.修改配置用于部署</p>\n<blockquote>\n<p>在__config.yml最后添加：<br>    deploy:<br>    type: git<br>    repo: <a href=\"https://github.com/nld2019/nld2019.github.io.git\">https://github.com/nld2019/nld2019.github.io.git</a><br>    branch: master</p>\n</blockquote>\n<p>15.部署博客<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo d</span><br></pre></td></tr></table></figure></p>\n<p>16.根据仓库名称访问博客</p>\n<blockquote>\n<p><a href=\"https://nld2019.github.io/\">https://nld2019.github.io/</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"OS-ubuntu\"><a href=\"#OS-ubuntu\" class=\"headerlink\" title=\"OS:ubuntu\"></a>OS:ubuntu</h2><p>1.<a href=\"https://nodejs.org/en/\">https://nodejs.org/en/</a> 下载nodejs<br>2.解压下载的nodejs<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tar -xvf node-v16.13.1-linux-x64.tar.xz</span><br></pre></td></tr></table></figure><br>3.配置nodejs<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cp node-v16.13.1-linux-x64 ~/nodejs</span><br><span class=\"line\">$ sudo ln -s ~/nodejs/bin/npm /usr/bin/</span><br><span class=\"line\">$ sudo ln -s ~/nodejs/bin/npm /usr/bin/</span><br></pre></td></tr></table></figure><br>4.安装cnpm<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class=\"line\">$ sudo ln -s ~/nodejs/bin/cnpm /usr/bin/</span><br></pre></td></tr></table></figure></p>\n<p>5.安装hexo<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cnpm install -g hexo-cli</span><br><span class=\"line\">$ sudo ln -s ~/nodejs/bin/hexo /usr/bin/</span><br></pre></td></tr></table></figure></p>\n<p>6.创建目录<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir blog</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> blog</span><br></pre></td></tr></table></figure></p>\n<p>7.生成博客<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo init</span><br></pre></td></tr></table></figure></p>\n<p>8.启动博客<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo s</span><br></pre></td></tr></table></figure></p>\n<p>9.浏览器打开本地预览</p>\n<blockquote>\n<p><a href=\"http://localhost:4000\">http://localhost:4000</a></p>\n</blockquote>\n<p>10.清理<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo clean</span><br></pre></td></tr></table></figure></p>\n<p>11.生成博客<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo g</span><br><span class=\"line\">$ hexo s</span><br></pre></td></tr></table></figure></p>\n<p>12.浏览器打开</p>\n<blockquote>\n<p><a href=\"http://localhost:4000\">http://localhost:4000</a> </p>\n</blockquote>\n<p>13.安装部署工具<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cnpm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure></p>\n<p>14.修改配置用于部署</p>\n<blockquote>\n<p>在__config.yml最后添加：<br>    deploy:<br>    type: git<br>    repo: <a href=\"https://github.com/nld2019/nld2019.github.io.git\">https://github.com/nld2019/nld2019.github.io.git</a><br>    branch: master</p>\n</blockquote>\n<p>15.部署博客<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo d</span><br></pre></td></tr></table></figure></p>\n<p>16.根据仓库名称访问博客</p>\n<blockquote>\n<p><a href=\"https://nld2019.github.io/\">https://nld2019.github.io/</a></p>\n</blockquote>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2022-03-25T15:10:28.731Z","updated":"2021-12-11T14:58:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud4d002n18jx8zl283uu","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"tmux.conf","date":"2022-06-12T07:07:59.000Z","_content":"\n// # ~/.tmux.conf\n// \n// # unbind default prefix and set it to ctrl-a\n// unbind C-b\n// set -g prefix C-a\n// bind C-a send-prefix\n// \n// # make delay shorter\n// set -sg escape-time 0\n// \n// \n// \n// #### key bindings ####\n// \n// # reload config file\n// bind r source-file ~/.tmux.conf \\; display \".tmux.conf reloaded!\"\n// \n// # quickly open a new window\n// bind N new-window\n// \n// # synchronize all panes in a window\n// bind y setw synchronize-panes\n// \n// # pane movement shortcuts (same as vim)\n// bind h select-pane -L\n// bind j select-pane -D\n// bind k select-pane -U\n// bind l select-pane -R\n// \n// #### copy mode : vim ####\n// \n// # set vi mode for copy mode\n// setw -g mode-keys vi\n// \n// # copy mode using 'Esc'\n// unbind [\n// bind Escape copy-mode\n// \n// # select and copy\n// bind-key -T copy-mode-vi v send-keys -X begin-selection\n// bind-key -T copy-mode-vi y send-keys -X rectangle-toggle\n// \n// # paste using 'p'\n// unbind p\n// bind p paste-buffer\n","source":"_posts/tmux-conf.md","raw":"---\ntitle: tmux.conf\ndate: 2022-06-12 15:07:59\ntags: Misc\n---\n\n// # ~/.tmux.conf\n// \n// # unbind default prefix and set it to ctrl-a\n// unbind C-b\n// set -g prefix C-a\n// bind C-a send-prefix\n// \n// # make delay shorter\n// set -sg escape-time 0\n// \n// \n// \n// #### key bindings ####\n// \n// # reload config file\n// bind r source-file ~/.tmux.conf \\; display \".tmux.conf reloaded!\"\n// \n// # quickly open a new window\n// bind N new-window\n// \n// # synchronize all panes in a window\n// bind y setw synchronize-panes\n// \n// # pane movement shortcuts (same as vim)\n// bind h select-pane -L\n// bind j select-pane -D\n// bind k select-pane -U\n// bind l select-pane -R\n// \n// #### copy mode : vim ####\n// \n// # set vi mode for copy mode\n// setw -g mode-keys vi\n// \n// # copy mode using 'Esc'\n// unbind [\n// bind Escape copy-mode\n// \n// # select and copy\n// bind-key -T copy-mode-vi v send-keys -X begin-selection\n// bind-key -T copy-mode-vi y send-keys -X rectangle-toggle\n// \n// # paste using 'p'\n// unbind p\n// bind p paste-buffer\n","slug":"tmux-conf","published":1,"updated":"2022-06-12T07:09:14.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud4e002q18jx6yyl5hye","content":"<p>// # ~/.tmux.conf<br>//<br>// # unbind default prefix and set it to ctrl-a<br>// unbind C-b<br>// set -g prefix C-a<br>// bind C-a send-prefix<br>//<br>// # make delay shorter<br>// set -sg escape-time 0<br>//<br>//<br>//<br>// #### key bindings ####<br>//<br>// # reload config file<br>// bind r source-file ~/.tmux.conf \\; display “.tmux.conf reloaded!”<br>//<br>// # quickly open a new window<br>// bind N new-window<br>//<br>// # synchronize all panes in a window<br>// bind y setw synchronize-panes<br>//<br>// # pane movement shortcuts (same as vim)<br>// bind h select-pane -L<br>// bind j select-pane -D<br>// bind k select-pane -U<br>// bind l select-pane -R<br>//<br>// #### copy mode : vim ####<br>//<br>// # set vi mode for copy mode<br>// setw -g mode-keys vi<br>//<br>// # copy mode using ‘Esc’<br>// unbind [<br>// bind Escape copy-mode<br>//<br>// # select and copy<br>// bind-key -T copy-mode-vi v send-keys -X begin-selection<br>// bind-key -T copy-mode-vi y send-keys -X rectangle-toggle<br>//<br>// # paste using ‘p’<br>// unbind p<br>// bind p paste-buffer</p>\n","site":{"data":{}},"excerpt":"","more":"<p>// # ~/.tmux.conf<br>//<br>// # unbind default prefix and set it to ctrl-a<br>// unbind C-b<br>// set -g prefix C-a<br>// bind C-a send-prefix<br>//<br>// # make delay shorter<br>// set -sg escape-time 0<br>//<br>//<br>//<br>// #### key bindings ####<br>//<br>// # reload config file<br>// bind r source-file ~/.tmux.conf \\; display “.tmux.conf reloaded!”<br>//<br>// # quickly open a new window<br>// bind N new-window<br>//<br>// # synchronize all panes in a window<br>// bind y setw synchronize-panes<br>//<br>// # pane movement shortcuts (same as vim)<br>// bind h select-pane -L<br>// bind j select-pane -D<br>// bind k select-pane -U<br>// bind l select-pane -R<br>//<br>// #### copy mode : vim ####<br>//<br>// # set vi mode for copy mode<br>// setw -g mode-keys vi<br>//<br>// # copy mode using ‘Esc’<br>// unbind [<br>// bind Escape copy-mode<br>//<br>// # select and copy<br>// bind-key -T copy-mode-vi v send-keys -X begin-selection<br>// bind-key -T copy-mode-vi y send-keys -X rectangle-toggle<br>//<br>// # paste using ‘p’<br>// unbind p<br>// bind p paste-buffer</p>\n"},{"title":"vim+cscope+ctags阅读源码","date":"2021-12-22T06:20:21.000Z","_content":"使用vim + cscope/ctags，就能够实现Source Insight的功能，可以很方便地查看分析源代码。\n\n关键词: vim, cscope, ctags, tags\n\n\n1.查看vim是否支持cscope\n> $ vim --version | grep cscope\n\n2.查看帮助\n> $ man cscope\n  $ man ctags\n  :help cscope (vim command)\n\n3.使用cscope[2]\n    当前目录有main.c，其中调用了cstest.c中的print()，此函数在cstest.h中进行了声明。\n    使用下面的命令生成代码的符号索引文件：\n    $ cscope -Rbkq\n    这个命令会生成三个文件：cscope.out, cscope.in.out, cscope.po.out。\n\n    其中cscope.out是基本的符号索引，后两个文件是使用\"-q\"选项生成的，可以加快cscope的索引速度。上面命令的参数含义如下：\n    -R: 在生成索引文件时，搜索子目录树中的代码\n    -b: 只生成索引文件，不进入cscope的界面\n    -k: 在生成索引文件时，不搜索/usr/include目录\n    -q: 生成cscope.in.out和cscope.po.out文件，加快cscope的索引速度\n    -i: 如果保存文件列表的文件名不是cscope.files时，需要加此选项告诉cscope到哪儿去找源文件列表。可以使用\"-\"，表示由标准输入获得文件列表。\n    -I dir: 在-I选项指出的目录中查找头文件\n    -u: 扫描所有文件，重新生成交叉索引文件\n    -C: 在搜索时忽略大小写\n    -P path: 在以相对路径表示的文件前加上的path，这样，你不用切换到你数据库文件所在的目录也可以使用它了。\n\n    在缺省情况下，cscope在生成数据库后就会进入它自己的查询界面，一般不用这个界面，所以使用了\"-b\"选项。如果已经进入了这个界面，按CTRL-D退出。\n\n\t查看阅读c++代码[3]\n    cscope缺省只解析C文件(.c和.h)、lex文件(.l)和yacc文件(.y)，虽然它也可以支持C++以及Java，但它在扫描目录时会跳过C++及Java后缀的文件。\n\t如果希望cscope解析C++或Java文件，需要把这些文件的名字和路径保存在一个名为cscope.files的文件。\n\t当cscope发现在当前目录中存在cscope.files时，就会为cscope.files中列出的所有文件生成索引数据库。\n    下面的命令会查找当前目录及子目录中所有后缀名为\".h\", \".c\", \"cc\"和\".cpp\"的文件，并把查找结果重定向到文件cscope.files中。\n\t然后cscope根据cscope.files中的所有文件，生成符号索引文件。最后一条命令使用ctags命令，\n\t生成一个tags文件，在vim中执行\":help tags\"命令查询它的用法。它可以和cscope一起使用。\n\n    $ find . -name \"*.h\" -o -name \"*.c\" -o -name \"*.cc\" -o \"*.cpp\" > cscope.files\n    $ cscope -bkq -i cscope.files\n    $ ctags -R\n\n    接下来可以在vim里浏览代码了\n    $ vim main.c\n    在vim里命令状态下添加符号索引库\n    : cscope add cscope.out\n    然后可以查看相应的函数定义或文件，ctrl+t返回。\n    : cscope find g print\n    : cscope find f cstest.h\n\n    #注意# 所生成的cscope.out和tags文件要在打开VIM所在的文件夹，否则VIM无法找到相关符号信息。\n\n\n4.创建相应的快捷键\n    将以下内容添加到~/.vimrc中，vim会自动加载当前目录下的符号索引cscope.out，可以使用ctrl+t、ctrl+]等。\n\n    \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n    function UpdateCtags()\n         let curdir=getcwd()\n         while !filereadable(\"./tags\")\n             cd ..\n             if getcwd() == \"/\"\n                 break\n             endif\n         endwhile\n         if filewritable(\"./tags\")\n             :!ctags -R\n         endif\n         execute \":cd \" . curdir\n     endfunction\n    \n     function UpdateCStags()\n         let curdir=getcwd()\n         while !filereadable(\"./cscope.out\")\n             cd ..\n             if getcwd() == \"/\"\n                 break\n             endif\n         endwhile\n         if filewritable(\"./cscope.out\")\n             :!cscope -Rbq\n             execute \":cscope kill 0\"\n             execute \":cscope add cscope.out\"\n         endif\n         execute \":cd \" . curdir\n     endfunction\n    \n     nmap <F8> :call UpdateCtags()<CR>\n     nmap <F9> :call UpdateCStags()<CR>\n    \n     \" 这样就可以在更新源代码文件后，随时使用<F8>及<F9>更新tags及cscope.out文件，\n     \" 不必关闭编辑文件，执行ctags -R/cscope -Rbq及重新打开文件。\n    \n     if has(\"cscope\")\n     set cscopetag   \" 使支持用 Ctrl+]  和 Ctrl+t 快捷键在代码间跳来跳去\n     \" check cscope for definition of a symbol before checking ctags:\n     \" set to 1 if you want the reverse search order.\n     set csto=1\n    \n     \" add any cscope database in current directory\n     if filereadable(\"cscope.out\")\n     cs add cscope.out\n     \" else add the database pointed to by environment variable\n     elseif $CSCOPE_DB !=\"\"\n     cs add $CSCOPE_DB\n     endif\n    \n     \" show msg when any other cscope db added\n     set cscopeverbose\n    \n     nmap <C-\\>s :cs find s <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>g :cs find g <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>c :cs find c <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>t :cs find t <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>e :cs find e <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>f :cs find f <C-R>=expand(\"<cfile>\")<CR><CR>\n     nmap <C-\\>i :cs find i <C-R>=expand(\"<cfile>\")<CR><CR>\n     nmap <C-\\>d :cs find d <C-R>=expand(\"<cword>\")<CR><CR>\n     endif\n    \n    \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\t其中<C-/>g是先同时按ctrl+\\键，之后再按一个g。功能就是查看当前光标所在符号的定义。\n\n5.vim阅读代码\n    添加cscope符号索引数据库后，可以调用\"cscope find\"命令进行查找，vim支持8种cscope的查询功能。\n\t如在代码中查找调用work()函数的函数，可以在vim命令状态下输入\":cs find c work\"，回车即可。还可以进行字符串查找，\n\t它会对双引号或单引号括起来的内容查找。还可以输入一个正则表达式，这类似于egrep程序的功能。\n    :cs help (vim command下查询)\n\n    s: 查找C语言符号，即查找函数名、宏、枚举值等出现的地方\n    g: 查找函数、宏、枚举等定义的位置，类似ctags所提供的功能\n    d: 查找本函数调用的函数\n    c: 查找调用本函数的函数\n    t: 查找指定的字符串\n    e: 查找egrep模式，相当于egrep功能，但查找速度快多了\n    f: 查找并打开文件，类似vim的find功能\n    i: 查找包含本文件的文件\n\n\n6.在vim中使用tags查找符号\n    查看ctags帮助\n    $ man ctags\n    :help ctags  (vim command)\n    :help tags   (vim command)\n\n    在源代码根目录下执行 ctags -R 命令用来为程序源代码生成标签文件，其-R选项表示递归操作，同时为子目录也生成标签文件。\n\tvim利用生成的标签文件，可以进行相应检索、并在不同的文件C语言元素之间来回切换。\n    $ ctags -R\n\n    A) vim中使用\":tag xxx\"跳到函数或数据结构xxx处。使用tag命令时，可以使用TAB键进行匹配查找，继续按TAB键向下切换。\n    某个函数有多个定义时\n\n    D) 运行vim的时候，必须在\"tags\"文件所在的目录下运行。否则，运行vim的时候还要用\":set tags=xxx\"命令设定\"tags\"文件的路径，\n\t这样vim才能找到\"tags\"文件（这儿我们已经设置过了\"set tags=tags;\"，在子目录中也可以使用）。\n\n    E) 在函数中移动光标的快捷键:\n    gd 转到当前光标所指的局部变量的定义\n    * 转到当前光标所指的单词下一次出现的地方\n    # 转到当前光标所指的单词上一次出现的地方\n\n\t:ta tagname 跳转到标签tagname定义的地方\n\t:stag tagname 在分割窗口中查看包含tagname的文件\n\t:tags 查看到达当前位置所经过的标签路径\n\t:ts tagname   :tselect\t列出匹配tagname的标签，如为空，则使用标签栈中最后的标签\n\t如果想跳到包含block的标识符\":tag /block\" 然后用TAB键来选择。这里'/'就是告诉vim 'block'是一个语句块标签。\n\n\t:tf 跳转至第一个匹配的标签\n\t:tlast   :tl 跳转至最后一个匹配的标签\n\t:tnext\t\t\t:tn  跳转到下一个匹配的标签\n\t:[count]tnext\n    :[count]tprevious   :[count] tp     跳到前count个\n\n\t跳转快捷键：\n\tctrl-] ：跳转至光标所在对象定义之处\n\tctrl-t：返回跳转前位置\n\n\n7.taglist插件使用[4]\n    该插件可以像Source Insight那样将当前文件中的宏、全局变量、函数等tag显示在Symbol窗口，用鼠标点上述tag，就跳到该tag定义的位置；\n\t可以按字母序、该tag所属的类或scope，以及该tag在文件中出现的位置进行排序；\n\t如果切换到另外一个文件，Symbol窗口更新显示这个文件中的tag。taglist依赖于ctags。\n\n    要使用taglist插件，必须满足：\n    1).打开VIM的文件类型自动检测功能；\n    2).系统中装了Exuberant ctags工具，并且taglist能够找到此工具（因为taglist需要调用它来生成tag文件）；\n    3).你的VIM支持system()调用；\n\n    安装taglist插件\n    # emerge -av app-vim/taglist\n\n    查看帮助\n    :help helptags\n    :help taglist\n    :help taglist-intro\n\n    打开tag窗口\n    :TlistToggle\n\n    .vimrc中配置如下\n    \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n    \" ctags setting\n    set tags=./tags,./../tags,./*/tags;\n    \n    \" Tag list (ctags)\n    \n    filetype on                            \"文件类型自动检测\n    \n    if MySys() == \"windows\"                \"设定windows系统中ctags程序的位置\n       let Tlist_Ctags_Cmd = 'ctags'\n    elseif MySys() == \"linux\"              \"设定linux系统中ctags程序的位置\n       let Tlist_Ctags_Cmd = '/usr/bin/ctags'\n    endif\n    \n    let Tlist_Show_One_File = 1            \"不同时显示多个文件的tag，只显示当前文件的\n    let Tlist_Exit_OnlyWindow = 1          \"如果taglist窗口是最后一个窗口，则退出vim\n    let Tlist_Use_Right_Window = 1         \"在右侧窗口中显示taglist窗口\n    \n    map <silent> <F8> :TlistToggle<cr>     \"在映射F8键打开tags窗口\n    \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\n","source":"_posts/vim-cscope-ctags阅读源码.md","raw":"---\ntitle: vim+cscope+ctags阅读源码\ndate: 2021-12-22 14:20:21\ntags:\n---\n使用vim + cscope/ctags，就能够实现Source Insight的功能，可以很方便地查看分析源代码。\n\n关键词: vim, cscope, ctags, tags\n\n\n1.查看vim是否支持cscope\n> $ vim --version | grep cscope\n\n2.查看帮助\n> $ man cscope\n  $ man ctags\n  :help cscope (vim command)\n\n3.使用cscope[2]\n    当前目录有main.c，其中调用了cstest.c中的print()，此函数在cstest.h中进行了声明。\n    使用下面的命令生成代码的符号索引文件：\n    $ cscope -Rbkq\n    这个命令会生成三个文件：cscope.out, cscope.in.out, cscope.po.out。\n\n    其中cscope.out是基本的符号索引，后两个文件是使用\"-q\"选项生成的，可以加快cscope的索引速度。上面命令的参数含义如下：\n    -R: 在生成索引文件时，搜索子目录树中的代码\n    -b: 只生成索引文件，不进入cscope的界面\n    -k: 在生成索引文件时，不搜索/usr/include目录\n    -q: 生成cscope.in.out和cscope.po.out文件，加快cscope的索引速度\n    -i: 如果保存文件列表的文件名不是cscope.files时，需要加此选项告诉cscope到哪儿去找源文件列表。可以使用\"-\"，表示由标准输入获得文件列表。\n    -I dir: 在-I选项指出的目录中查找头文件\n    -u: 扫描所有文件，重新生成交叉索引文件\n    -C: 在搜索时忽略大小写\n    -P path: 在以相对路径表示的文件前加上的path，这样，你不用切换到你数据库文件所在的目录也可以使用它了。\n\n    在缺省情况下，cscope在生成数据库后就会进入它自己的查询界面，一般不用这个界面，所以使用了\"-b\"选项。如果已经进入了这个界面，按CTRL-D退出。\n\n\t查看阅读c++代码[3]\n    cscope缺省只解析C文件(.c和.h)、lex文件(.l)和yacc文件(.y)，虽然它也可以支持C++以及Java，但它在扫描目录时会跳过C++及Java后缀的文件。\n\t如果希望cscope解析C++或Java文件，需要把这些文件的名字和路径保存在一个名为cscope.files的文件。\n\t当cscope发现在当前目录中存在cscope.files时，就会为cscope.files中列出的所有文件生成索引数据库。\n    下面的命令会查找当前目录及子目录中所有后缀名为\".h\", \".c\", \"cc\"和\".cpp\"的文件，并把查找结果重定向到文件cscope.files中。\n\t然后cscope根据cscope.files中的所有文件，生成符号索引文件。最后一条命令使用ctags命令，\n\t生成一个tags文件，在vim中执行\":help tags\"命令查询它的用法。它可以和cscope一起使用。\n\n    $ find . -name \"*.h\" -o -name \"*.c\" -o -name \"*.cc\" -o \"*.cpp\" > cscope.files\n    $ cscope -bkq -i cscope.files\n    $ ctags -R\n\n    接下来可以在vim里浏览代码了\n    $ vim main.c\n    在vim里命令状态下添加符号索引库\n    : cscope add cscope.out\n    然后可以查看相应的函数定义或文件，ctrl+t返回。\n    : cscope find g print\n    : cscope find f cstest.h\n\n    #注意# 所生成的cscope.out和tags文件要在打开VIM所在的文件夹，否则VIM无法找到相关符号信息。\n\n\n4.创建相应的快捷键\n    将以下内容添加到~/.vimrc中，vim会自动加载当前目录下的符号索引cscope.out，可以使用ctrl+t、ctrl+]等。\n\n    \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n    function UpdateCtags()\n         let curdir=getcwd()\n         while !filereadable(\"./tags\")\n             cd ..\n             if getcwd() == \"/\"\n                 break\n             endif\n         endwhile\n         if filewritable(\"./tags\")\n             :!ctags -R\n         endif\n         execute \":cd \" . curdir\n     endfunction\n    \n     function UpdateCStags()\n         let curdir=getcwd()\n         while !filereadable(\"./cscope.out\")\n             cd ..\n             if getcwd() == \"/\"\n                 break\n             endif\n         endwhile\n         if filewritable(\"./cscope.out\")\n             :!cscope -Rbq\n             execute \":cscope kill 0\"\n             execute \":cscope add cscope.out\"\n         endif\n         execute \":cd \" . curdir\n     endfunction\n    \n     nmap <F8> :call UpdateCtags()<CR>\n     nmap <F9> :call UpdateCStags()<CR>\n    \n     \" 这样就可以在更新源代码文件后，随时使用<F8>及<F9>更新tags及cscope.out文件，\n     \" 不必关闭编辑文件，执行ctags -R/cscope -Rbq及重新打开文件。\n    \n     if has(\"cscope\")\n     set cscopetag   \" 使支持用 Ctrl+]  和 Ctrl+t 快捷键在代码间跳来跳去\n     \" check cscope for definition of a symbol before checking ctags:\n     \" set to 1 if you want the reverse search order.\n     set csto=1\n    \n     \" add any cscope database in current directory\n     if filereadable(\"cscope.out\")\n     cs add cscope.out\n     \" else add the database pointed to by environment variable\n     elseif $CSCOPE_DB !=\"\"\n     cs add $CSCOPE_DB\n     endif\n    \n     \" show msg when any other cscope db added\n     set cscopeverbose\n    \n     nmap <C-\\>s :cs find s <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>g :cs find g <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>c :cs find c <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>t :cs find t <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>e :cs find e <C-R>=expand(\"<cword>\")<CR><CR>\n     nmap <C-\\>f :cs find f <C-R>=expand(\"<cfile>\")<CR><CR>\n     nmap <C-\\>i :cs find i <C-R>=expand(\"<cfile>\")<CR><CR>\n     nmap <C-\\>d :cs find d <C-R>=expand(\"<cword>\")<CR><CR>\n     endif\n    \n    \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\t其中<C-/>g是先同时按ctrl+\\键，之后再按一个g。功能就是查看当前光标所在符号的定义。\n\n5.vim阅读代码\n    添加cscope符号索引数据库后，可以调用\"cscope find\"命令进行查找，vim支持8种cscope的查询功能。\n\t如在代码中查找调用work()函数的函数，可以在vim命令状态下输入\":cs find c work\"，回车即可。还可以进行字符串查找，\n\t它会对双引号或单引号括起来的内容查找。还可以输入一个正则表达式，这类似于egrep程序的功能。\n    :cs help (vim command下查询)\n\n    s: 查找C语言符号，即查找函数名、宏、枚举值等出现的地方\n    g: 查找函数、宏、枚举等定义的位置，类似ctags所提供的功能\n    d: 查找本函数调用的函数\n    c: 查找调用本函数的函数\n    t: 查找指定的字符串\n    e: 查找egrep模式，相当于egrep功能，但查找速度快多了\n    f: 查找并打开文件，类似vim的find功能\n    i: 查找包含本文件的文件\n\n\n6.在vim中使用tags查找符号\n    查看ctags帮助\n    $ man ctags\n    :help ctags  (vim command)\n    :help tags   (vim command)\n\n    在源代码根目录下执行 ctags -R 命令用来为程序源代码生成标签文件，其-R选项表示递归操作，同时为子目录也生成标签文件。\n\tvim利用生成的标签文件，可以进行相应检索、并在不同的文件C语言元素之间来回切换。\n    $ ctags -R\n\n    A) vim中使用\":tag xxx\"跳到函数或数据结构xxx处。使用tag命令时，可以使用TAB键进行匹配查找，继续按TAB键向下切换。\n    某个函数有多个定义时\n\n    D) 运行vim的时候，必须在\"tags\"文件所在的目录下运行。否则，运行vim的时候还要用\":set tags=xxx\"命令设定\"tags\"文件的路径，\n\t这样vim才能找到\"tags\"文件（这儿我们已经设置过了\"set tags=tags;\"，在子目录中也可以使用）。\n\n    E) 在函数中移动光标的快捷键:\n    gd 转到当前光标所指的局部变量的定义\n    * 转到当前光标所指的单词下一次出现的地方\n    # 转到当前光标所指的单词上一次出现的地方\n\n\t:ta tagname 跳转到标签tagname定义的地方\n\t:stag tagname 在分割窗口中查看包含tagname的文件\n\t:tags 查看到达当前位置所经过的标签路径\n\t:ts tagname   :tselect\t列出匹配tagname的标签，如为空，则使用标签栈中最后的标签\n\t如果想跳到包含block的标识符\":tag /block\" 然后用TAB键来选择。这里'/'就是告诉vim 'block'是一个语句块标签。\n\n\t:tf 跳转至第一个匹配的标签\n\t:tlast   :tl 跳转至最后一个匹配的标签\n\t:tnext\t\t\t:tn  跳转到下一个匹配的标签\n\t:[count]tnext\n    :[count]tprevious   :[count] tp     跳到前count个\n\n\t跳转快捷键：\n\tctrl-] ：跳转至光标所在对象定义之处\n\tctrl-t：返回跳转前位置\n\n\n7.taglist插件使用[4]\n    该插件可以像Source Insight那样将当前文件中的宏、全局变量、函数等tag显示在Symbol窗口，用鼠标点上述tag，就跳到该tag定义的位置；\n\t可以按字母序、该tag所属的类或scope，以及该tag在文件中出现的位置进行排序；\n\t如果切换到另外一个文件，Symbol窗口更新显示这个文件中的tag。taglist依赖于ctags。\n\n    要使用taglist插件，必须满足：\n    1).打开VIM的文件类型自动检测功能；\n    2).系统中装了Exuberant ctags工具，并且taglist能够找到此工具（因为taglist需要调用它来生成tag文件）；\n    3).你的VIM支持system()调用；\n\n    安装taglist插件\n    # emerge -av app-vim/taglist\n\n    查看帮助\n    :help helptags\n    :help taglist\n    :help taglist-intro\n\n    打开tag窗口\n    :TlistToggle\n\n    .vimrc中配置如下\n    \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n    \" ctags setting\n    set tags=./tags,./../tags,./*/tags;\n    \n    \" Tag list (ctags)\n    \n    filetype on                            \"文件类型自动检测\n    \n    if MySys() == \"windows\"                \"设定windows系统中ctags程序的位置\n       let Tlist_Ctags_Cmd = 'ctags'\n    elseif MySys() == \"linux\"              \"设定linux系统中ctags程序的位置\n       let Tlist_Ctags_Cmd = '/usr/bin/ctags'\n    endif\n    \n    let Tlist_Show_One_File = 1            \"不同时显示多个文件的tag，只显示当前文件的\n    let Tlist_Exit_OnlyWindow = 1          \"如果taglist窗口是最后一个窗口，则退出vim\n    let Tlist_Use_Right_Window = 1         \"在右侧窗口中显示taglist窗口\n    \n    map <silent> <F8> :TlistToggle<cr>     \"在映射F8键打开tags窗口\n    \"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n\n","slug":"vim-cscope-ctags阅读源码","published":1,"updated":"2021-12-22T06:33:11.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud4f002r18jxhmsn9gwg","content":"<p>使用vim + cscope/ctags，就能够实现Source Insight的功能，可以很方便地查看分析源代码。</p>\n<p>关键词: vim, cscope, ctags, tags</p>\n<p>1.查看vim是否支持cscope</p>\n<blockquote>\n<p>$ vim —version | grep cscope</p>\n</blockquote>\n<p>2.查看帮助</p>\n<blockquote>\n<p>$ man cscope<br>  $ man ctags<br>  :help cscope (vim command)</p>\n</blockquote>\n<p>3.使用cscope[2]<br>    当前目录有main.c，其中调用了cstest.c中的print()，此函数在cstest.h中进行了声明。<br>    使用下面的命令生成代码的符号索引文件：<br>    $ cscope -Rbkq<br>    这个命令会生成三个文件：cscope.out, cscope.in.out, cscope.po.out。</p>\n<pre><code>其中cscope.out是基本的符号索引，后两个文件是使用&quot;-q&quot;选项生成的，可以加快cscope的索引速度。上面命令的参数含义如下：\n-R: 在生成索引文件时，搜索子目录树中的代码\n-b: 只生成索引文件，不进入cscope的界面\n-k: 在生成索引文件时，不搜索/usr/include目录\n-q: 生成cscope.in.out和cscope.po.out文件，加快cscope的索引速度\n-i: 如果保存文件列表的文件名不是cscope.files时，需要加此选项告诉cscope到哪儿去找源文件列表。可以使用&quot;-&quot;，表示由标准输入获得文件列表。\n-I dir: 在-I选项指出的目录中查找头文件\n-u: 扫描所有文件，重新生成交叉索引文件\n-C: 在搜索时忽略大小写\n-P path: 在以相对路径表示的文件前加上的path，这样，你不用切换到你数据库文件所在的目录也可以使用它了。\n\n在缺省情况下，cscope在生成数据库后就会进入它自己的查询界面，一般不用这个界面，所以使用了&quot;-b&quot;选项。如果已经进入了这个界面，按CTRL-D退出。\n\n查看阅读c++代码[3]\ncscope缺省只解析C文件(.c和.h)、lex文件(.l)和yacc文件(.y)，虽然它也可以支持C++以及Java，但它在扫描目录时会跳过C++及Java后缀的文件。\n如果希望cscope解析C++或Java文件，需要把这些文件的名字和路径保存在一个名为cscope.files的文件。\n当cscope发现在当前目录中存在cscope.files时，就会为cscope.files中列出的所有文件生成索引数据库。\n下面的命令会查找当前目录及子目录中所有后缀名为&quot;.h&quot;, &quot;.c&quot;, &quot;cc&quot;和&quot;.cpp&quot;的文件，并把查找结果重定向到文件cscope.files中。\n然后cscope根据cscope.files中的所有文件，生成符号索引文件。最后一条命令使用ctags命令，\n生成一个tags文件，在vim中执行&quot;:help tags&quot;命令查询它的用法。它可以和cscope一起使用。\n\n$ find . -name &quot;*.h&quot; -o -name &quot;*.c&quot; -o -name &quot;*.cc&quot; -o &quot;*.cpp&quot; &gt; cscope.files\n$ cscope -bkq -i cscope.files\n$ ctags -R\n\n接下来可以在vim里浏览代码了\n$ vim main.c\n在vim里命令状态下添加符号索引库\n: cscope add cscope.out\n然后可以查看相应的函数定义或文件，ctrl+t返回。\n: cscope find g print\n: cscope find f cstest.h\n\n#注意# 所生成的cscope.out和tags文件要在打开VIM所在的文件夹，否则VIM无法找到相关符号信息。\n</code></pre><p>4.创建相应的快捷键<br>    将以下内容添加到~/.vimrc中，vim会自动加载当前目录下的符号索引cscope.out，可以使用ctrl+t、ctrl+]等。</p>\n<pre><code>&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\nfunction UpdateCtags()\n     let curdir=getcwd()\n     while !filereadable(&quot;./tags&quot;)\n         cd ..\n         if getcwd() == &quot;/&quot;\n             break\n         endif\n     endwhile\n     if filewritable(&quot;./tags&quot;)\n         :!ctags -R\n     endif\n     execute &quot;:cd &quot; . curdir\n endfunction\n\n function UpdateCStags()\n     let curdir=getcwd()\n     while !filereadable(&quot;./cscope.out&quot;)\n         cd ..\n         if getcwd() == &quot;/&quot;\n             break\n         endif\n     endwhile\n     if filewritable(&quot;./cscope.out&quot;)\n         :!cscope -Rbq\n         execute &quot;:cscope kill 0&quot;\n         execute &quot;:cscope add cscope.out&quot;\n     endif\n     execute &quot;:cd &quot; . curdir\n endfunction\n\n nmap &lt;F8&gt; :call UpdateCtags()&lt;CR&gt;\n nmap &lt;F9&gt; :call UpdateCStags()&lt;CR&gt;\n\n &quot; 这样就可以在更新源代码文件后，随时使用&lt;F8&gt;及&lt;F9&gt;更新tags及cscope.out文件，\n &quot; 不必关闭编辑文件，执行ctags -R/cscope -Rbq及重新打开文件。\n\n if has(&quot;cscope&quot;)\n set cscopetag   &quot; 使支持用 Ctrl+]  和 Ctrl+t 快捷键在代码间跳来跳去\n &quot; check cscope for definition of a symbol before checking ctags:\n &quot; set to 1 if you want the reverse search order.\n set csto=1\n\n &quot; add any cscope database in current directory\n if filereadable(&quot;cscope.out&quot;)\n cs add cscope.out\n &quot; else add the database pointed to by environment variable\n elseif $CSCOPE_DB !=&quot;&quot;\n cs add $CSCOPE_DB\n endif\n\n &quot; show msg when any other cscope db added\n set cscopeverbose\n\n nmap &lt;C-\\&gt;s :cs find s &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;g :cs find g &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;c :cs find c &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;t :cs find t &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;e :cs find e &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;f :cs find f &lt;C-R&gt;=expand(&quot;&lt;cfile&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;i :cs find i &lt;C-R&gt;=expand(&quot;&lt;cfile&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;d :cs find d &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n endif\n\n&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\n其中&lt;C-/&gt;g是先同时按ctrl+\\键，之后再按一个g。功能就是查看当前光标所在符号的定义。\n</code></pre><p>5.vim阅读代码<br>    添加cscope符号索引数据库后，可以调用”cscope find”命令进行查找，vim支持8种cscope的查询功能。<br>    如在代码中查找调用work()函数的函数，可以在vim命令状态下输入”:cs find c work”，回车即可。还可以进行字符串查找，<br>    它会对双引号或单引号括起来的内容查找。还可以输入一个正则表达式，这类似于egrep程序的功能。<br>    :cs help (vim command下查询)</p>\n<pre><code>s: 查找C语言符号，即查找函数名、宏、枚举值等出现的地方\ng: 查找函数、宏、枚举等定义的位置，类似ctags所提供的功能\nd: 查找本函数调用的函数\nc: 查找调用本函数的函数\nt: 查找指定的字符串\ne: 查找egrep模式，相当于egrep功能，但查找速度快多了\nf: 查找并打开文件，类似vim的find功能\ni: 查找包含本文件的文件\n</code></pre><p>6.在vim中使用tags查找符号<br>    查看ctags帮助<br>    $ man ctags<br>    :help ctags  (vim command)<br>    :help tags   (vim command)</p>\n<pre><code>在源代码根目录下执行 ctags -R 命令用来为程序源代码生成标签文件，其-R选项表示递归操作，同时为子目录也生成标签文件。\nvim利用生成的标签文件，可以进行相应检索、并在不同的文件C语言元素之间来回切换。\n$ ctags -R\n\nA) vim中使用&quot;:tag xxx&quot;跳到函数或数据结构xxx处。使用tag命令时，可以使用TAB键进行匹配查找，继续按TAB键向下切换。\n某个函数有多个定义时\n\nD) 运行vim的时候，必须在&quot;tags&quot;文件所在的目录下运行。否则，运行vim的时候还要用&quot;:set tags=xxx&quot;命令设定&quot;tags&quot;文件的路径，\n这样vim才能找到&quot;tags&quot;文件（这儿我们已经设置过了&quot;set tags=tags;&quot;，在子目录中也可以使用）。\n\nE) 在函数中移动光标的快捷键:\ngd 转到当前光标所指的局部变量的定义\n* 转到当前光标所指的单词下一次出现的地方\n# 转到当前光标所指的单词上一次出现的地方\n\n:ta tagname 跳转到标签tagname定义的地方\n:stag tagname 在分割窗口中查看包含tagname的文件\n:tags 查看到达当前位置所经过的标签路径\n:ts tagname   :tselect    列出匹配tagname的标签，如为空，则使用标签栈中最后的标签\n如果想跳到包含block的标识符&quot;:tag /block&quot; 然后用TAB键来选择。这里&#39;/&#39;就是告诉vim &#39;block&#39;是一个语句块标签。\n\n:tf 跳转至第一个匹配的标签\n:tlast   :tl 跳转至最后一个匹配的标签\n:tnext            :tn  跳转到下一个匹配的标签\n:[count]tnext\n:[count]tprevious   :[count] tp     跳到前count个\n\n跳转快捷键：\nctrl-] ：跳转至光标所在对象定义之处\nctrl-t：返回跳转前位置\n</code></pre><p>7.taglist插件使用[4]<br>    该插件可以像Source Insight那样将当前文件中的宏、全局变量、函数等tag显示在Symbol窗口，用鼠标点上述tag，就跳到该tag定义的位置；<br>    可以按字母序、该tag所属的类或scope，以及该tag在文件中出现的位置进行排序；<br>    如果切换到另外一个文件，Symbol窗口更新显示这个文件中的tag。taglist依赖于ctags。</p>\n<pre><code>要使用taglist插件，必须满足：\n1).打开VIM的文件类型自动检测功能；\n2).系统中装了Exuberant ctags工具，并且taglist能够找到此工具（因为taglist需要调用它来生成tag文件）；\n3).你的VIM支持system()调用；\n\n安装taglist插件\n# emerge -av app-vim/taglist\n\n查看帮助\n:help helptags\n:help taglist\n:help taglist-intro\n\n打开tag窗口\n:TlistToggle\n\n.vimrc中配置如下\n&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\n&quot; ctags setting\nset tags=./tags,./../tags,./*/tags;\n\n&quot; Tag list (ctags)\n\nfiletype on                            &quot;文件类型自动检测\n\nif MySys() == &quot;windows&quot;                &quot;设定windows系统中ctags程序的位置\n   let Tlist_Ctags_Cmd = &#39;ctags&#39;\nelseif MySys() == &quot;linux&quot;              &quot;设定linux系统中ctags程序的位置\n   let Tlist_Ctags_Cmd = &#39;/usr/bin/ctags&#39;\nendif\n\nlet Tlist_Show_One_File = 1            &quot;不同时显示多个文件的tag，只显示当前文件的\nlet Tlist_Exit_OnlyWindow = 1          &quot;如果taglist窗口是最后一个窗口，则退出vim\nlet Tlist_Use_Right_Window = 1         &quot;在右侧窗口中显示taglist窗口\n\nmap &lt;silent&gt; &lt;F8&gt; :TlistToggle&lt;cr&gt;     &quot;在映射F8键打开tags窗口\n&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<p>使用vim + cscope/ctags，就能够实现Source Insight的功能，可以很方便地查看分析源代码。</p>\n<p>关键词: vim, cscope, ctags, tags</p>\n<p>1.查看vim是否支持cscope</p>\n<blockquote>\n<p>$ vim —version | grep cscope</p>\n</blockquote>\n<p>2.查看帮助</p>\n<blockquote>\n<p>$ man cscope<br>  $ man ctags<br>  :help cscope (vim command)</p>\n</blockquote>\n<p>3.使用cscope[2]<br>    当前目录有main.c，其中调用了cstest.c中的print()，此函数在cstest.h中进行了声明。<br>    使用下面的命令生成代码的符号索引文件：<br>    $ cscope -Rbkq<br>    这个命令会生成三个文件：cscope.out, cscope.in.out, cscope.po.out。</p>\n<pre><code>其中cscope.out是基本的符号索引，后两个文件是使用&quot;-q&quot;选项生成的，可以加快cscope的索引速度。上面命令的参数含义如下：\n-R: 在生成索引文件时，搜索子目录树中的代码\n-b: 只生成索引文件，不进入cscope的界面\n-k: 在生成索引文件时，不搜索/usr/include目录\n-q: 生成cscope.in.out和cscope.po.out文件，加快cscope的索引速度\n-i: 如果保存文件列表的文件名不是cscope.files时，需要加此选项告诉cscope到哪儿去找源文件列表。可以使用&quot;-&quot;，表示由标准输入获得文件列表。\n-I dir: 在-I选项指出的目录中查找头文件\n-u: 扫描所有文件，重新生成交叉索引文件\n-C: 在搜索时忽略大小写\n-P path: 在以相对路径表示的文件前加上的path，这样，你不用切换到你数据库文件所在的目录也可以使用它了。\n\n在缺省情况下，cscope在生成数据库后就会进入它自己的查询界面，一般不用这个界面，所以使用了&quot;-b&quot;选项。如果已经进入了这个界面，按CTRL-D退出。\n\n查看阅读c++代码[3]\ncscope缺省只解析C文件(.c和.h)、lex文件(.l)和yacc文件(.y)，虽然它也可以支持C++以及Java，但它在扫描目录时会跳过C++及Java后缀的文件。\n如果希望cscope解析C++或Java文件，需要把这些文件的名字和路径保存在一个名为cscope.files的文件。\n当cscope发现在当前目录中存在cscope.files时，就会为cscope.files中列出的所有文件生成索引数据库。\n下面的命令会查找当前目录及子目录中所有后缀名为&quot;.h&quot;, &quot;.c&quot;, &quot;cc&quot;和&quot;.cpp&quot;的文件，并把查找结果重定向到文件cscope.files中。\n然后cscope根据cscope.files中的所有文件，生成符号索引文件。最后一条命令使用ctags命令，\n生成一个tags文件，在vim中执行&quot;:help tags&quot;命令查询它的用法。它可以和cscope一起使用。\n\n$ find . -name &quot;*.h&quot; -o -name &quot;*.c&quot; -o -name &quot;*.cc&quot; -o &quot;*.cpp&quot; &gt; cscope.files\n$ cscope -bkq -i cscope.files\n$ ctags -R\n\n接下来可以在vim里浏览代码了\n$ vim main.c\n在vim里命令状态下添加符号索引库\n: cscope add cscope.out\n然后可以查看相应的函数定义或文件，ctrl+t返回。\n: cscope find g print\n: cscope find f cstest.h\n\n#注意# 所生成的cscope.out和tags文件要在打开VIM所在的文件夹，否则VIM无法找到相关符号信息。\n</code></pre><p>4.创建相应的快捷键<br>    将以下内容添加到~/.vimrc中，vim会自动加载当前目录下的符号索引cscope.out，可以使用ctrl+t、ctrl+]等。</p>\n<pre><code>&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\nfunction UpdateCtags()\n     let curdir=getcwd()\n     while !filereadable(&quot;./tags&quot;)\n         cd ..\n         if getcwd() == &quot;/&quot;\n             break\n         endif\n     endwhile\n     if filewritable(&quot;./tags&quot;)\n         :!ctags -R\n     endif\n     execute &quot;:cd &quot; . curdir\n endfunction\n\n function UpdateCStags()\n     let curdir=getcwd()\n     while !filereadable(&quot;./cscope.out&quot;)\n         cd ..\n         if getcwd() == &quot;/&quot;\n             break\n         endif\n     endwhile\n     if filewritable(&quot;./cscope.out&quot;)\n         :!cscope -Rbq\n         execute &quot;:cscope kill 0&quot;\n         execute &quot;:cscope add cscope.out&quot;\n     endif\n     execute &quot;:cd &quot; . curdir\n endfunction\n\n nmap &lt;F8&gt; :call UpdateCtags()&lt;CR&gt;\n nmap &lt;F9&gt; :call UpdateCStags()&lt;CR&gt;\n\n &quot; 这样就可以在更新源代码文件后，随时使用&lt;F8&gt;及&lt;F9&gt;更新tags及cscope.out文件，\n &quot; 不必关闭编辑文件，执行ctags -R/cscope -Rbq及重新打开文件。\n\n if has(&quot;cscope&quot;)\n set cscopetag   &quot; 使支持用 Ctrl+]  和 Ctrl+t 快捷键在代码间跳来跳去\n &quot; check cscope for definition of a symbol before checking ctags:\n &quot; set to 1 if you want the reverse search order.\n set csto=1\n\n &quot; add any cscope database in current directory\n if filereadable(&quot;cscope.out&quot;)\n cs add cscope.out\n &quot; else add the database pointed to by environment variable\n elseif $CSCOPE_DB !=&quot;&quot;\n cs add $CSCOPE_DB\n endif\n\n &quot; show msg when any other cscope db added\n set cscopeverbose\n\n nmap &lt;C-\\&gt;s :cs find s &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;g :cs find g &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;c :cs find c &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;t :cs find t &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;e :cs find e &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;f :cs find f &lt;C-R&gt;=expand(&quot;&lt;cfile&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;i :cs find i &lt;C-R&gt;=expand(&quot;&lt;cfile&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n nmap &lt;C-\\&gt;d :cs find d &lt;C-R&gt;=expand(&quot;&lt;cword&gt;&quot;)&lt;CR&gt;&lt;CR&gt;\n endif\n\n&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\n其中&lt;C-/&gt;g是先同时按ctrl+\\键，之后再按一个g。功能就是查看当前光标所在符号的定义。\n</code></pre><p>5.vim阅读代码<br>    添加cscope符号索引数据库后，可以调用”cscope find”命令进行查找，vim支持8种cscope的查询功能。<br>    如在代码中查找调用work()函数的函数，可以在vim命令状态下输入”:cs find c work”，回车即可。还可以进行字符串查找，<br>    它会对双引号或单引号括起来的内容查找。还可以输入一个正则表达式，这类似于egrep程序的功能。<br>    :cs help (vim command下查询)</p>\n<pre><code>s: 查找C语言符号，即查找函数名、宏、枚举值等出现的地方\ng: 查找函数、宏、枚举等定义的位置，类似ctags所提供的功能\nd: 查找本函数调用的函数\nc: 查找调用本函数的函数\nt: 查找指定的字符串\ne: 查找egrep模式，相当于egrep功能，但查找速度快多了\nf: 查找并打开文件，类似vim的find功能\ni: 查找包含本文件的文件\n</code></pre><p>6.在vim中使用tags查找符号<br>    查看ctags帮助<br>    $ man ctags<br>    :help ctags  (vim command)<br>    :help tags   (vim command)</p>\n<pre><code>在源代码根目录下执行 ctags -R 命令用来为程序源代码生成标签文件，其-R选项表示递归操作，同时为子目录也生成标签文件。\nvim利用生成的标签文件，可以进行相应检索、并在不同的文件C语言元素之间来回切换。\n$ ctags -R\n\nA) vim中使用&quot;:tag xxx&quot;跳到函数或数据结构xxx处。使用tag命令时，可以使用TAB键进行匹配查找，继续按TAB键向下切换。\n某个函数有多个定义时\n\nD) 运行vim的时候，必须在&quot;tags&quot;文件所在的目录下运行。否则，运行vim的时候还要用&quot;:set tags=xxx&quot;命令设定&quot;tags&quot;文件的路径，\n这样vim才能找到&quot;tags&quot;文件（这儿我们已经设置过了&quot;set tags=tags;&quot;，在子目录中也可以使用）。\n\nE) 在函数中移动光标的快捷键:\ngd 转到当前光标所指的局部变量的定义\n* 转到当前光标所指的单词下一次出现的地方\n# 转到当前光标所指的单词上一次出现的地方\n\n:ta tagname 跳转到标签tagname定义的地方\n:stag tagname 在分割窗口中查看包含tagname的文件\n:tags 查看到达当前位置所经过的标签路径\n:ts tagname   :tselect    列出匹配tagname的标签，如为空，则使用标签栈中最后的标签\n如果想跳到包含block的标识符&quot;:tag /block&quot; 然后用TAB键来选择。这里&#39;/&#39;就是告诉vim &#39;block&#39;是一个语句块标签。\n\n:tf 跳转至第一个匹配的标签\n:tlast   :tl 跳转至最后一个匹配的标签\n:tnext            :tn  跳转到下一个匹配的标签\n:[count]tnext\n:[count]tprevious   :[count] tp     跳到前count个\n\n跳转快捷键：\nctrl-] ：跳转至光标所在对象定义之处\nctrl-t：返回跳转前位置\n</code></pre><p>7.taglist插件使用[4]<br>    该插件可以像Source Insight那样将当前文件中的宏、全局变量、函数等tag显示在Symbol窗口，用鼠标点上述tag，就跳到该tag定义的位置；<br>    可以按字母序、该tag所属的类或scope，以及该tag在文件中出现的位置进行排序；<br>    如果切换到另外一个文件，Symbol窗口更新显示这个文件中的tag。taglist依赖于ctags。</p>\n<pre><code>要使用taglist插件，必须满足：\n1).打开VIM的文件类型自动检测功能；\n2).系统中装了Exuberant ctags工具，并且taglist能够找到此工具（因为taglist需要调用它来生成tag文件）；\n3).你的VIM支持system()调用；\n\n安装taglist插件\n# emerge -av app-vim/taglist\n\n查看帮助\n:help helptags\n:help taglist\n:help taglist-intro\n\n打开tag窗口\n:TlistToggle\n\n.vimrc中配置如下\n&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\n&quot; ctags setting\nset tags=./tags,./../tags,./*/tags;\n\n&quot; Tag list (ctags)\n\nfiletype on                            &quot;文件类型自动检测\n\nif MySys() == &quot;windows&quot;                &quot;设定windows系统中ctags程序的位置\n   let Tlist_Ctags_Cmd = &#39;ctags&#39;\nelseif MySys() == &quot;linux&quot;              &quot;设定linux系统中ctags程序的位置\n   let Tlist_Ctags_Cmd = &#39;/usr/bin/ctags&#39;\nendif\n\nlet Tlist_Show_One_File = 1            &quot;不同时显示多个文件的tag，只显示当前文件的\nlet Tlist_Exit_OnlyWindow = 1          &quot;如果taglist窗口是最后一个窗口，则退出vim\nlet Tlist_Use_Right_Window = 1         &quot;在右侧窗口中显示taglist窗口\n\nmap &lt;silent&gt; &lt;F8&gt; :TlistToggle&lt;cr&gt;     &quot;在映射F8键打开tags窗口\n&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\n</code></pre>"},{"title":"访问维基百科-wikipedia的方法","date":"2022-05-17T15:24:00.000Z","_content":"\nGoogle,Bing搜索概念时，出现维基百科的网址一般无法访问，即使是VPN也是如此。\n可以通过替换网址成功访问。例如：\n\n> https://en.wikipedia.org/wiki/A.out         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 提示无法访问此网站\n> https://en.wikipedia.iwiki.eu.org/wiki/A.out          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 可以成功访问\n\n\n","source":"_posts/访问维基百科-wikipedia的方法.md","raw":"---\ntitle: 访问维基百科-wikipedia的方法\ndate: 2022-05-17 23:24:00\ntags: Misc\n---\n\nGoogle,Bing搜索概念时，出现维基百科的网址一般无法访问，即使是VPN也是如此。\n可以通过替换网址成功访问。例如：\n\n> https://en.wikipedia.org/wiki/A.out         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 提示无法访问此网站\n> https://en.wikipedia.iwiki.eu.org/wiki/A.out          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 可以成功访问\n\n\n","slug":"访问维基百科-wikipedia的方法","published":1,"updated":"2022-05-17T15:43:08.289Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4ayud4m002t18jx31ce03z8","content":"<p>Google,Bing搜索概念时，出现维基百科的网址一般无法访问，即使是VPN也是如此。<br>可以通过替换网址成功访问。例如：</p>\n<blockquote>\n<p><a href=\"https://en.wikipedia.org/wiki/A.out\">https://en.wikipedia.org/wiki/A.out</a>         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 提示无法访问此网站<br><a href=\"https://en.wikipedia.iwiki.eu.org/wiki/A.out\">https://en.wikipedia.iwiki.eu.org/wiki/A.out</a>          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 可以成功访问</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>Google,Bing搜索概念时，出现维基百科的网址一般无法访问，即使是VPN也是如此。<br>可以通过替换网址成功访问。例如：</p>\n<blockquote>\n<p><a href=\"https://en.wikipedia.org/wiki/A.out\">https://en.wikipedia.org/wiki/A.out</a>         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 提示无法访问此网站<br><a href=\"https://en.wikipedia.iwiki.eu.org/wiki/A.out\">https://en.wikipedia.iwiki.eu.org/wiki/A.out</a>          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 可以成功访问</p>\n</blockquote>\n"},{"title":"vscode-compile_commands.json generate","date":"2022-06-15T14:33:32.000Z","_content":"\ncompile_commands.json can be used for vscode to prase the code and corresponding code branch.\n============================================================================================\n\n1. generate compile_commands.json directly by bear command.\n\n    make\n    bear make -nB\n\n\n2. generate compile_commands.json by compiledb\n\n    make\n    copiledb make -nB\n\n3. generate compile_commands.json by build log\n\n    compiledb < build-log.txt\n\n\nAfter generate the compile_commands.json successfully, move the file to source code path and add it to vscode settings.\nSometimes, vscode may not prase the file correctly. may need do minor changes for the file.\n\n## An example of compile_commands.json\n\n    {\n            \"directory\": \"/home/nield/scode/FW/fw_v17_dev/src/wlan/src/wifidirect\",\n            \"arguments\": [\n                    \"armcc\",\n            \"--thumb\",\n            \"-M\",\n            \"--no_depend_system_headers\",\n            \"--cpu\",\n            \"Cortex-R7.no_vfp\",\n            \"--dwarf3\",\n            \"-g\",\n            \"-O2\",\n            \"--c99\",\n            \"--split_sections\",\n            \"-DBUILD_WLAN\",\n            \"-DOSA_THREADX\",\n            \"-DEEPROM_ACCESS\",\n            \"-DBTCOEX_VER_2\",\n            \"-DBTCOEX_SPATIAL\",\n            \"-DRBC_SIMPLIFIED_BCA_TDM_COEX_MODE\",\n            \"-DIEEE_PSPOLL\",\n            \"-DDOT11H\",\n            \"-DDOT11H_TPC\",\n            \"-DDFS_RADAR_DETECT\",\n            \"-DJAPAN_W53_NEW_PATTERN\",\n            \"-DDOT11K\",\n            \"-DDOT11K_VE\",\n            \"-DCHANRPT\",\n            \"-DUNII_4_SUPPORT\",\n            \"-DDOT11W\",\n            \"-DENABLE_GCMP_SUPPORT\",\n            \"-DSSU_SUPPORT\",\n            \"-DDOT11P\",\n            \"-DASSOC_AGENT_MLME\",\n            \"-DSCAN_AGENT_MLME\",\n            \"-DENHANCED_POWER_SAVE\",\n            \"-DSEND_ASSOC_REQ_IE_TO_HOST\",\n            \"-I/home/nield/scode/FW/fw_v17_dev/src/build/../common/modules/OS/ThreadX\",\n            \"-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/bt/incl\",\n            \"-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/bt/btds/incl\",\n            \"-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/btble/incl\"\n            ],\n            \"file\": [\"wifiDirect_services.c\",\n                    \"wifiDirect_main.c\",\n                    \"SyncWifiDirect_srv.c\",\n                    \"wifiDirect_ps.c\"\n            ]\n    \n    },\n\n\n","source":"_posts/vscode-compile-commands-json-generate.md","raw":"---\ntitle: vscode-compile_commands.json generate\ndate: 2022-06-15 22:33:32\ntags: 'Misc'\n---\n\ncompile_commands.json can be used for vscode to prase the code and corresponding code branch.\n============================================================================================\n\n1. generate compile_commands.json directly by bear command.\n\n    make\n    bear make -nB\n\n\n2. generate compile_commands.json by compiledb\n\n    make\n    copiledb make -nB\n\n3. generate compile_commands.json by build log\n\n    compiledb < build-log.txt\n\n\nAfter generate the compile_commands.json successfully, move the file to source code path and add it to vscode settings.\nSometimes, vscode may not prase the file correctly. may need do minor changes for the file.\n\n## An example of compile_commands.json\n\n    {\n            \"directory\": \"/home/nield/scode/FW/fw_v17_dev/src/wlan/src/wifidirect\",\n            \"arguments\": [\n                    \"armcc\",\n            \"--thumb\",\n            \"-M\",\n            \"--no_depend_system_headers\",\n            \"--cpu\",\n            \"Cortex-R7.no_vfp\",\n            \"--dwarf3\",\n            \"-g\",\n            \"-O2\",\n            \"--c99\",\n            \"--split_sections\",\n            \"-DBUILD_WLAN\",\n            \"-DOSA_THREADX\",\n            \"-DEEPROM_ACCESS\",\n            \"-DBTCOEX_VER_2\",\n            \"-DBTCOEX_SPATIAL\",\n            \"-DRBC_SIMPLIFIED_BCA_TDM_COEX_MODE\",\n            \"-DIEEE_PSPOLL\",\n            \"-DDOT11H\",\n            \"-DDOT11H_TPC\",\n            \"-DDFS_RADAR_DETECT\",\n            \"-DJAPAN_W53_NEW_PATTERN\",\n            \"-DDOT11K\",\n            \"-DDOT11K_VE\",\n            \"-DCHANRPT\",\n            \"-DUNII_4_SUPPORT\",\n            \"-DDOT11W\",\n            \"-DENABLE_GCMP_SUPPORT\",\n            \"-DSSU_SUPPORT\",\n            \"-DDOT11P\",\n            \"-DASSOC_AGENT_MLME\",\n            \"-DSCAN_AGENT_MLME\",\n            \"-DENHANCED_POWER_SAVE\",\n            \"-DSEND_ASSOC_REQ_IE_TO_HOST\",\n            \"-I/home/nield/scode/FW/fw_v17_dev/src/build/../common/modules/OS/ThreadX\",\n            \"-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/bt/incl\",\n            \"-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/bt/btds/incl\",\n            \"-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/btble/incl\"\n            ],\n            \"file\": [\"wifiDirect_services.c\",\n                    \"wifiDirect_main.c\",\n                    \"SyncWifiDirect_srv.c\",\n                    \"wifiDirect_ps.c\"\n            ]\n    \n    },\n\n\n","slug":"vscode-compile-commands-json-generate","published":1,"updated":"2022-06-15T14:57:26.392Z","_id":"cl4fpsc2500001afdfrqjdfwu","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"compile-commands-json-can-be-used-for-vscode-to-prase-the-code-and-corresponding-code-branch\"><a href=\"#compile-commands-json-can-be-used-for-vscode-to-prase-the-code-and-corresponding-code-branch\" class=\"headerlink\" title=\"compile_commands.json can be used for vscode to prase the code and corresponding code branch.\"></a>compile_commands.json can be used for vscode to prase the code and corresponding code branch.</h1><ol>\n<li><p>generate compile_commands.json directly by bear command.</p>\n<p> make<br> bear make -nB</p>\n</li>\n</ol>\n<ol>\n<li><p>generate compile_commands.json by compiledb</p>\n<p> make<br> copiledb make -nB</p>\n</li>\n<li><p>generate compile_commands.json by build log</p>\n<p> compiledb &lt; build-log.txt</p>\n</li>\n</ol>\n<p>After generate the compile_commands.json successfully, move the file to source code path and add it to vscode settings.<br>Sometimes, vscode may not prase the file correctly. may need do minor changes for the file.</p>\n<h2 id=\"An-example-of-compile-commands-json\"><a href=\"#An-example-of-compile-commands-json\" class=\"headerlink\" title=\"An example of compile_commands.json\"></a>An example of compile_commands.json</h2><pre><code>&#123;\n        &quot;directory&quot;: &quot;/home/nield/scode/FW/fw_v17_dev/src/wlan/src/wifidirect&quot;,\n        &quot;arguments&quot;: [\n                &quot;armcc&quot;,\n        &quot;--thumb&quot;,\n        &quot;-M&quot;,\n        &quot;--no_depend_system_headers&quot;,\n        &quot;--cpu&quot;,\n        &quot;Cortex-R7.no_vfp&quot;,\n        &quot;--dwarf3&quot;,\n        &quot;-g&quot;,\n        &quot;-O2&quot;,\n        &quot;--c99&quot;,\n        &quot;--split_sections&quot;,\n        &quot;-DBUILD_WLAN&quot;,\n        &quot;-DOSA_THREADX&quot;,\n        &quot;-DEEPROM_ACCESS&quot;,\n        &quot;-DBTCOEX_VER_2&quot;,\n        &quot;-DBTCOEX_SPATIAL&quot;,\n        &quot;-DRBC_SIMPLIFIED_BCA_TDM_COEX_MODE&quot;,\n        &quot;-DIEEE_PSPOLL&quot;,\n        &quot;-DDOT11H&quot;,\n        &quot;-DDOT11H_TPC&quot;,\n        &quot;-DDFS_RADAR_DETECT&quot;,\n        &quot;-DJAPAN_W53_NEW_PATTERN&quot;,\n        &quot;-DDOT11K&quot;,\n        &quot;-DDOT11K_VE&quot;,\n        &quot;-DCHANRPT&quot;,\n        &quot;-DUNII_4_SUPPORT&quot;,\n        &quot;-DDOT11W&quot;,\n        &quot;-DENABLE_GCMP_SUPPORT&quot;,\n        &quot;-DSSU_SUPPORT&quot;,\n        &quot;-DDOT11P&quot;,\n        &quot;-DASSOC_AGENT_MLME&quot;,\n        &quot;-DSCAN_AGENT_MLME&quot;,\n        &quot;-DENHANCED_POWER_SAVE&quot;,\n        &quot;-DSEND_ASSOC_REQ_IE_TO_HOST&quot;,\n        &quot;-I/home/nield/scode/FW/fw_v17_dev/src/build/../common/modules/OS/ThreadX&quot;,\n        &quot;-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/bt/incl&quot;,\n        &quot;-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/bt/btds/incl&quot;,\n        &quot;-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/btble/incl&quot;\n        ],\n        &quot;file&quot;: [&quot;wifiDirect_services.c&quot;,\n                &quot;wifiDirect_main.c&quot;,\n                &quot;SyncWifiDirect_srv.c&quot;,\n                &quot;wifiDirect_ps.c&quot;\n        ]\n\n&#125;,\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"compile-commands-json-can-be-used-for-vscode-to-prase-the-code-and-corresponding-code-branch\"><a href=\"#compile-commands-json-can-be-used-for-vscode-to-prase-the-code-and-corresponding-code-branch\" class=\"headerlink\" title=\"compile_commands.json can be used for vscode to prase the code and corresponding code branch.\"></a>compile_commands.json can be used for vscode to prase the code and corresponding code branch.</h1><ol>\n<li><p>generate compile_commands.json directly by bear command.</p>\n<p> make<br> bear make -nB</p>\n</li>\n</ol>\n<ol>\n<li><p>generate compile_commands.json by compiledb</p>\n<p> make<br> copiledb make -nB</p>\n</li>\n<li><p>generate compile_commands.json by build log</p>\n<p> compiledb &lt; build-log.txt</p>\n</li>\n</ol>\n<p>After generate the compile_commands.json successfully, move the file to source code path and add it to vscode settings.<br>Sometimes, vscode may not prase the file correctly. may need do minor changes for the file.</p>\n<h2 id=\"An-example-of-compile-commands-json\"><a href=\"#An-example-of-compile-commands-json\" class=\"headerlink\" title=\"An example of compile_commands.json\"></a>An example of compile_commands.json</h2><pre><code>&#123;\n        &quot;directory&quot;: &quot;/home/nield/scode/FW/fw_v17_dev/src/wlan/src/wifidirect&quot;,\n        &quot;arguments&quot;: [\n                &quot;armcc&quot;,\n        &quot;--thumb&quot;,\n        &quot;-M&quot;,\n        &quot;--no_depend_system_headers&quot;,\n        &quot;--cpu&quot;,\n        &quot;Cortex-R7.no_vfp&quot;,\n        &quot;--dwarf3&quot;,\n        &quot;-g&quot;,\n        &quot;-O2&quot;,\n        &quot;--c99&quot;,\n        &quot;--split_sections&quot;,\n        &quot;-DBUILD_WLAN&quot;,\n        &quot;-DOSA_THREADX&quot;,\n        &quot;-DEEPROM_ACCESS&quot;,\n        &quot;-DBTCOEX_VER_2&quot;,\n        &quot;-DBTCOEX_SPATIAL&quot;,\n        &quot;-DRBC_SIMPLIFIED_BCA_TDM_COEX_MODE&quot;,\n        &quot;-DIEEE_PSPOLL&quot;,\n        &quot;-DDOT11H&quot;,\n        &quot;-DDOT11H_TPC&quot;,\n        &quot;-DDFS_RADAR_DETECT&quot;,\n        &quot;-DJAPAN_W53_NEW_PATTERN&quot;,\n        &quot;-DDOT11K&quot;,\n        &quot;-DDOT11K_VE&quot;,\n        &quot;-DCHANRPT&quot;,\n        &quot;-DUNII_4_SUPPORT&quot;,\n        &quot;-DDOT11W&quot;,\n        &quot;-DENABLE_GCMP_SUPPORT&quot;,\n        &quot;-DSSU_SUPPORT&quot;,\n        &quot;-DDOT11P&quot;,\n        &quot;-DASSOC_AGENT_MLME&quot;,\n        &quot;-DSCAN_AGENT_MLME&quot;,\n        &quot;-DENHANCED_POWER_SAVE&quot;,\n        &quot;-DSEND_ASSOC_REQ_IE_TO_HOST&quot;,\n        &quot;-I/home/nield/scode/FW/fw_v17_dev/src/build/../common/modules/OS/ThreadX&quot;,\n        &quot;-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/bt/incl&quot;,\n        &quot;-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/bt/btds/incl&quot;,\n        &quot;-I/home/nield/scode/FW/fw_v17_dev/src/build/../btu2/rom/modules/btble/incl&quot;\n        ],\n        &quot;file&quot;: [&quot;wifiDirect_services.c&quot;,\n                &quot;wifiDirect_main.c&quot;,\n                &quot;SyncWifiDirect_srv.c&quot;,\n                &quot;wifiDirect_ps.c&quot;\n        ]\n\n&#125;,\n</code></pre>"},{"title":"adb error 常用解决方法","date":"2022-06-17T05:34:25.000Z","_content":"## 1，adb shell 提示：error: insufficient permissions\n> user@HP:~/work/tcumtk2731\\$ adb shell\n> error: insufficient permissions for device\n> user@HP:~/work/tcumtk2731\\$\n> \n> 1) adb devices 确认设备情况\n> user@HP:~/work/tcumtk2731\\$ adb devices\n> * daemon not running. starting it now on port 5037 *\n> * daemon started successfully *\n> List of devices attached\n> ????????????\tno permissions\n> \n> 2) 找到adb 的所在路径\n> user@HP:~/work/tcumtk2731\\$ which adb\n> /usr/bin/adb\n> user@HP:~/work/tcumtk2731\\$ cd /usr/bin/\n> \n> 3) 查看adb的权限\n> user@HP:/usr/bin\\$ ls -l adb\n> -rwxr-xr-x 1 root root 160912 4月   1  2016 adb\n> user@HP:/usr/bin\\$\n> \n> 4)添加设置用户ID权限位\n> root@HP:/usr/bin# chmod u+s adb\n> root@HP:/usr/bin# ls -l adb\n> -rwsr-xr-x 1 root root 160912 4月   1  2016 adb\n> root@HP:/usr/bin#\n> \n> 5）重启 adb server\n> user@HP:/usr/bin\\$ adb kill-server\n> user@HP:/usr/bin\\$\n> user@HP:/usr/bin\\$ adb start-server\n> * daemon not running. starting it now on port 5037 *\n> * daemon started successfully *\n> user@HP:/usr/bin\\$\n> \n> 6)查看adb设备情况\n> user@HP:/usr/bin\\$ adb devices\n> List of devices attached\n> B6FAEFAC\tdevice\n> \n> user@HP:/usr/bin\\$\n\n## 2，遇到问题no permissions (verify udev rules)\n> user@HP:/usr/bin\\$ adb devices\n> List of devices attached\n> B6FAEFAC\tno permissions (verify udev rules); see [http://developer.android.com/tools/device.html]\n> \n> 1）查看当前设备的 vendor ID 和 product ID\n> user@HP:/etc/udev/rules.d\\$ lsusb\n> Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\n> Bus 001 Device 006: ID 18d1:4ee7 Google Inc.\n> Bus 001 Device 003: ID 413c:2105 Dell Computer Corp. Model L100 Keyboard\n> Bus 001 Device 002: ID 03f0:1f4a Hewlett-Packard\n> Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n> user@HP:/etc/udev/rules.d\\$\n> user@HP:/etc/udev/rules.d\\$\n> \n> 2） 将上面的两个ID添加到51-android.rules文件中\n> user@HP:/etc/udev/rules.d\\$ cat 51-android.rules\n> SUBSYSTEM==\"usb\", ATTR{idVendor}==\"18d1\", ATTR{idProduct}==\"4ee7\", MODE=\"0666\",GROUP=\"plugdev\"\n> user@HP:/etc/udev/rules.d\\$\n\n\n\n## 3，执行adb shell 时报错 error: device not found.\n> 1）使用lsusb 查看usb设备\n> Bus 002 Device 002: ID 8087:8000 Intel Corp. \n> Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n> Bus 001 Device 002: ID 8087:8008 Intel Corp. \n> Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n> Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\n> Bus 003 Device 002: ID 0461:4e04 Primax Electronics, Ltd \n> Bus 003 Device 011: ID 2717:9039  //我的设备\n> Bus 003 Device 003: ID 17ef:6019 Lenovo \n> Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n> \n> 若不知道哪个是你的设备,可以拔掉后lsusb,然后对比即可.\n> \n> 2）创建adb_usb.ini文件，写入id\n> \n> 在home下寻找.android目录,在此目录下新建一个文件adb_usb.ini.\n> \n> echo 0x2717> ~/.android/adb_usb.ini\n> \n> 3）添加权限\n> sudo vim /etc/udev/rules.d/70-android.rules\n> \n> 加入设备的相关ID\n> SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"2717\", ATTRS{idProduct}==\"9039\",MODE=\"0666\"\n> \n> 4）重启USB服务\n> \\$sudo chmod a+rx /etc/udev/rules.d/70-android.rules\n> \\$sudo service udev restart\n> \n> 5）重启adb服务，adb devices有设备说明adb安装成功\n> \\$adb kill-server\n> \n> \\$sudo adb start-server\n> \n> \\$adb devices\n> List of devices attached\n> 5cb00b6 device\n\n","source":"_posts/adb-error-常用解决方法.md","raw":"---\ntitle: adb error 常用解决方法\ndate: 2022-06-17 13:34:25\ntags: Misc\n---\n## 1，adb shell 提示：error: insufficient permissions\n> user@HP:~/work/tcumtk2731\\$ adb shell\n> error: insufficient permissions for device\n> user@HP:~/work/tcumtk2731\\$\n> \n> 1) adb devices 确认设备情况\n> user@HP:~/work/tcumtk2731\\$ adb devices\n> * daemon not running. starting it now on port 5037 *\n> * daemon started successfully *\n> List of devices attached\n> ????????????\tno permissions\n> \n> 2) 找到adb 的所在路径\n> user@HP:~/work/tcumtk2731\\$ which adb\n> /usr/bin/adb\n> user@HP:~/work/tcumtk2731\\$ cd /usr/bin/\n> \n> 3) 查看adb的权限\n> user@HP:/usr/bin\\$ ls -l adb\n> -rwxr-xr-x 1 root root 160912 4月   1  2016 adb\n> user@HP:/usr/bin\\$\n> \n> 4)添加设置用户ID权限位\n> root@HP:/usr/bin# chmod u+s adb\n> root@HP:/usr/bin# ls -l adb\n> -rwsr-xr-x 1 root root 160912 4月   1  2016 adb\n> root@HP:/usr/bin#\n> \n> 5）重启 adb server\n> user@HP:/usr/bin\\$ adb kill-server\n> user@HP:/usr/bin\\$\n> user@HP:/usr/bin\\$ adb start-server\n> * daemon not running. starting it now on port 5037 *\n> * daemon started successfully *\n> user@HP:/usr/bin\\$\n> \n> 6)查看adb设备情况\n> user@HP:/usr/bin\\$ adb devices\n> List of devices attached\n> B6FAEFAC\tdevice\n> \n> user@HP:/usr/bin\\$\n\n## 2，遇到问题no permissions (verify udev rules)\n> user@HP:/usr/bin\\$ adb devices\n> List of devices attached\n> B6FAEFAC\tno permissions (verify udev rules); see [http://developer.android.com/tools/device.html]\n> \n> 1）查看当前设备的 vendor ID 和 product ID\n> user@HP:/etc/udev/rules.d\\$ lsusb\n> Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\n> Bus 001 Device 006: ID 18d1:4ee7 Google Inc.\n> Bus 001 Device 003: ID 413c:2105 Dell Computer Corp. Model L100 Keyboard\n> Bus 001 Device 002: ID 03f0:1f4a Hewlett-Packard\n> Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n> user@HP:/etc/udev/rules.d\\$\n> user@HP:/etc/udev/rules.d\\$\n> \n> 2） 将上面的两个ID添加到51-android.rules文件中\n> user@HP:/etc/udev/rules.d\\$ cat 51-android.rules\n> SUBSYSTEM==\"usb\", ATTR{idVendor}==\"18d1\", ATTR{idProduct}==\"4ee7\", MODE=\"0666\",GROUP=\"plugdev\"\n> user@HP:/etc/udev/rules.d\\$\n\n\n\n## 3，执行adb shell 时报错 error: device not found.\n> 1）使用lsusb 查看usb设备\n> Bus 002 Device 002: ID 8087:8000 Intel Corp. \n> Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n> Bus 001 Device 002: ID 8087:8008 Intel Corp. \n> Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n> Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\n> Bus 003 Device 002: ID 0461:4e04 Primax Electronics, Ltd \n> Bus 003 Device 011: ID 2717:9039  //我的设备\n> Bus 003 Device 003: ID 17ef:6019 Lenovo \n> Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n> \n> 若不知道哪个是你的设备,可以拔掉后lsusb,然后对比即可.\n> \n> 2）创建adb_usb.ini文件，写入id\n> \n> 在home下寻找.android目录,在此目录下新建一个文件adb_usb.ini.\n> \n> echo 0x2717> ~/.android/adb_usb.ini\n> \n> 3）添加权限\n> sudo vim /etc/udev/rules.d/70-android.rules\n> \n> 加入设备的相关ID\n> SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"2717\", ATTRS{idProduct}==\"9039\",MODE=\"0666\"\n> \n> 4）重启USB服务\n> \\$sudo chmod a+rx /etc/udev/rules.d/70-android.rules\n> \\$sudo service udev restart\n> \n> 5）重启adb服务，adb devices有设备说明adb安装成功\n> \\$adb kill-server\n> \n> \\$sudo adb start-server\n> \n> \\$adb devices\n> List of devices attached\n> 5cb00b6 device\n\n","slug":"adb-error-常用解决方法","published":1,"updated":"2022-06-17T05:42:17.246Z","_id":"cl4i0oud300004jfdbdr1e0f0","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1，adb-shell-提示：error-insufficient-permissions\"><a href=\"#1，adb-shell-提示：error-insufficient-permissions\" class=\"headerlink\" title=\"1，adb shell 提示：error: insufficient permissions\"></a>1，adb shell 提示：error: insufficient permissions</h2><blockquote>\n<p>user@HP:~/work/tcumtk2731\\$ adb shell<br>error: insufficient permissions for device<br>user@HP:~/work/tcumtk2731\\$</p>\n<p>1) adb devices 确认设备情况<br>user@HP:~/work/tcumtk2731\\$ adb devices</p>\n<ul>\n<li>daemon not running. starting it now on port 5037 *</li>\n<li>daemon started successfully *<br>List of devices attached<br>????????????    no permissions</li>\n</ul>\n<p>2) 找到adb 的所在路径<br>user@HP:~/work/tcumtk2731\\$ which adb<br>/usr/bin/adb<br>user@HP:~/work/tcumtk2731\\$ cd /usr/bin/</p>\n<p>3) 查看adb的权限<br>user@HP:/usr/bin\\$ ls -l adb<br>-rwxr-xr-x 1 root root 160912 4月   1  2016 adb<br>user@HP:/usr/bin\\$</p>\n<p>4)添加设置用户ID权限位<br>root@HP:/usr/bin# chmod u+s adb<br>root@HP:/usr/bin# ls -l adb<br>-rwsr-xr-x 1 root root 160912 4月   1  2016 adb<br>root@HP:/usr/bin#</p>\n<p>5）重启 adb server<br>user@HP:/usr/bin\\$ adb kill-server<br>user@HP:/usr/bin\\$<br>user@HP:/usr/bin\\$ adb start-server</p>\n<ul>\n<li>daemon not running. starting it now on port 5037 *</li>\n<li>daemon started successfully *<br>user@HP:/usr/bin\\$</li>\n</ul>\n<p>6)查看adb设备情况<br>user@HP:/usr/bin\\$ adb devices<br>List of devices attached<br>B6FAEFAC    device</p>\n<p>user@HP:/usr/bin\\$</p>\n</blockquote>\n<h2 id=\"2，遇到问题no-permissions-verify-udev-rules\"><a href=\"#2，遇到问题no-permissions-verify-udev-rules\" class=\"headerlink\" title=\"2，遇到问题no permissions (verify udev rules)\"></a>2，遇到问题no permissions (verify udev rules)</h2><blockquote>\n<p>user@HP:/usr/bin\\$ adb devices<br>List of devices attached<br>B6FAEFAC    no permissions (verify udev rules); see [<a href=\"http://developer.android.com/tools/device.html\">http://developer.android.com/tools/device.html</a>]</p>\n<p>1）查看当前设备的 vendor ID 和 product ID<br>user@HP:/etc/udev/rules.d\\$ lsusb<br>Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub<br>Bus 001 Device 006: ID 18d1:4ee7 Google Inc.<br>Bus 001 Device 003: ID 413c:2105 Dell Computer Corp. Model L100 Keyboard<br>Bus 001 Device 002: ID 03f0:1f4a Hewlett-Packard<br>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br>user@HP:/etc/udev/rules.d\\$<br>user@HP:/etc/udev/rules.d\\$</p>\n<p>2） 将上面的两个ID添加到51-android.rules文件中<br>user@HP:/etc/udev/rules.d\\$ cat 51-android.rules<br>SUBSYSTEM==”usb”, ATTR{idVendor}==”18d1”, ATTR{idProduct}==”4ee7”, MODE=”0666”,GROUP=”plugdev”<br>user@HP:/etc/udev/rules.d\\$</p>\n</blockquote>\n<h2 id=\"3，执行adb-shell-时报错-error-device-not-found\"><a href=\"#3，执行adb-shell-时报错-error-device-not-found\" class=\"headerlink\" title=\"3，执行adb shell 时报错 error: device not found.\"></a>3，执行adb shell 时报错 error: device not found.</h2><blockquote>\n<p>1）使用lsusb 查看usb设备<br>Bus 002 Device 002: ID 8087:8000 Intel Corp.<br>Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br>Bus 001 Device 002: ID 8087:8008 Intel Corp.<br>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br>Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub<br>Bus 003 Device 002: ID 0461:4e04 Primax Electronics, Ltd<br>Bus 003 Device 011: ID 2717:9039  //我的设备<br>Bus 003 Device 003: ID 17ef:6019 Lenovo<br>Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</p>\n<p>若不知道哪个是你的设备,可以拔掉后lsusb,然后对比即可.</p>\n<p>2）创建adb_usb.ini文件，写入id</p>\n<p>在home下寻找.android目录,在此目录下新建一个文件adb_usb.ini.</p>\n<p>echo 0x2717&gt; ~/.android/adb_usb.ini</p>\n<p>3）添加权限<br>sudo vim /etc/udev/rules.d/70-android.rules</p>\n<p>加入设备的相关ID<br>SUBSYSTEM==”usb”, ATTRS{idVendor}==”2717”, ATTRS{idProduct}==”9039”,MODE=”0666”</p>\n<p>4）重启USB服务<br>\\$sudo chmod a+rx /etc/udev/rules.d/70-android.rules<br>\\$sudo service udev restart</p>\n<p>5）重启adb服务，adb devices有设备说明adb安装成功<br>\\$adb kill-server</p>\n<p>\\$sudo adb start-server</p>\n<p>\\$adb devices<br>List of devices attached<br>5cb00b6 device</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1，adb-shell-提示：error-insufficient-permissions\"><a href=\"#1，adb-shell-提示：error-insufficient-permissions\" class=\"headerlink\" title=\"1，adb shell 提示：error: insufficient permissions\"></a>1，adb shell 提示：error: insufficient permissions</h2><blockquote>\n<p>user@HP:~/work/tcumtk2731\\$ adb shell<br>error: insufficient permissions for device<br>user@HP:~/work/tcumtk2731\\$</p>\n<p>1) adb devices 确认设备情况<br>user@HP:~/work/tcumtk2731\\$ adb devices</p>\n<ul>\n<li>daemon not running. starting it now on port 5037 *</li>\n<li>daemon started successfully *<br>List of devices attached<br>????????????    no permissions</li>\n</ul>\n<p>2) 找到adb 的所在路径<br>user@HP:~/work/tcumtk2731\\$ which adb<br>/usr/bin/adb<br>user@HP:~/work/tcumtk2731\\$ cd /usr/bin/</p>\n<p>3) 查看adb的权限<br>user@HP:/usr/bin\\$ ls -l adb<br>-rwxr-xr-x 1 root root 160912 4月   1  2016 adb<br>user@HP:/usr/bin\\$</p>\n<p>4)添加设置用户ID权限位<br>root@HP:/usr/bin# chmod u+s adb<br>root@HP:/usr/bin# ls -l adb<br>-rwsr-xr-x 1 root root 160912 4月   1  2016 adb<br>root@HP:/usr/bin#</p>\n<p>5）重启 adb server<br>user@HP:/usr/bin\\$ adb kill-server<br>user@HP:/usr/bin\\$<br>user@HP:/usr/bin\\$ adb start-server</p>\n<ul>\n<li>daemon not running. starting it now on port 5037 *</li>\n<li>daemon started successfully *<br>user@HP:/usr/bin\\$</li>\n</ul>\n<p>6)查看adb设备情况<br>user@HP:/usr/bin\\$ adb devices<br>List of devices attached<br>B6FAEFAC    device</p>\n<p>user@HP:/usr/bin\\$</p>\n</blockquote>\n<h2 id=\"2，遇到问题no-permissions-verify-udev-rules\"><a href=\"#2，遇到问题no-permissions-verify-udev-rules\" class=\"headerlink\" title=\"2，遇到问题no permissions (verify udev rules)\"></a>2，遇到问题no permissions (verify udev rules)</h2><blockquote>\n<p>user@HP:/usr/bin\\$ adb devices<br>List of devices attached<br>B6FAEFAC    no permissions (verify udev rules); see [<a href=\"http://developer.android.com/tools/device.html\">http://developer.android.com/tools/device.html</a>]</p>\n<p>1）查看当前设备的 vendor ID 和 product ID<br>user@HP:/etc/udev/rules.d\\$ lsusb<br>Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub<br>Bus 001 Device 006: ID 18d1:4ee7 Google Inc.<br>Bus 001 Device 003: ID 413c:2105 Dell Computer Corp. Model L100 Keyboard<br>Bus 001 Device 002: ID 03f0:1f4a Hewlett-Packard<br>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br>user@HP:/etc/udev/rules.d\\$<br>user@HP:/etc/udev/rules.d\\$</p>\n<p>2） 将上面的两个ID添加到51-android.rules文件中<br>user@HP:/etc/udev/rules.d\\$ cat 51-android.rules<br>SUBSYSTEM==”usb”, ATTR{idVendor}==”18d1”, ATTR{idProduct}==”4ee7”, MODE=”0666”,GROUP=”plugdev”<br>user@HP:/etc/udev/rules.d\\$</p>\n</blockquote>\n<h2 id=\"3，执行adb-shell-时报错-error-device-not-found\"><a href=\"#3，执行adb-shell-时报错-error-device-not-found\" class=\"headerlink\" title=\"3，执行adb shell 时报错 error: device not found.\"></a>3，执行adb shell 时报错 error: device not found.</h2><blockquote>\n<p>1）使用lsusb 查看usb设备<br>Bus 002 Device 002: ID 8087:8000 Intel Corp.<br>Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br>Bus 001 Device 002: ID 8087:8008 Intel Corp.<br>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br>Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub<br>Bus 003 Device 002: ID 0461:4e04 Primax Electronics, Ltd<br>Bus 003 Device 011: ID 2717:9039  //我的设备<br>Bus 003 Device 003: ID 17ef:6019 Lenovo<br>Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</p>\n<p>若不知道哪个是你的设备,可以拔掉后lsusb,然后对比即可.</p>\n<p>2）创建adb_usb.ini文件，写入id</p>\n<p>在home下寻找.android目录,在此目录下新建一个文件adb_usb.ini.</p>\n<p>echo 0x2717&gt; ~/.android/adb_usb.ini</p>\n<p>3）添加权限<br>sudo vim /etc/udev/rules.d/70-android.rules</p>\n<p>加入设备的相关ID<br>SUBSYSTEM==”usb”, ATTRS{idVendor}==”2717”, ATTRS{idProduct}==”9039”,MODE=”0666”</p>\n<p>4）重启USB服务<br>\\$sudo chmod a+rx /etc/udev/rules.d/70-android.rules<br>\\$sudo service udev restart</p>\n<p>5）重启adb服务，adb devices有设备说明adb安装成功<br>\\$adb kill-server</p>\n<p>\\$sudo adb start-server</p>\n<p>\\$adb devices<br>List of devices attached<br>5cb00b6 device</p>\n</blockquote>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cl4ayud32000418jx52fj5v4l","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud35000718jx4xm12ocf"},{"post_id":"cl4ayud2s000018jx6rqu0sk3","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud36000918jx3ychbrdh"},{"post_id":"cl4ayud33000518jx8xif4qdb","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud38000c18jxasf2b80o"},{"post_id":"cl4ayud35000818jxbw7y8haz","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud39000e18jxea88hf0i"},{"post_id":"cl4ayud2x000118jx2co97t9s","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud3b000g18jxeyq35tdf"},{"post_id":"cl4ayud36000a18jx9hi79vb1","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud3c000i18jx2rt4bcbi"},{"post_id":"cl4ayud38000d18jx1wajfjf9","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud3e000k18jxg31jcrb2"},{"post_id":"cl4ayud31000318jx8gro8yro","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud3f000n18jx5obv5a5q"},{"post_id":"cl4ayud39000f18jx67g70sn5","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud3g000p18jxenpeaq6u"},{"post_id":"cl4ayud3b000h18jx7aow85mj","tag_id":"cl4ayud2z000218jx4lb84mo8","_id":"cl4ayud3h000r18jxbmee63nf"},{"post_id":"cl4ayud3g000q18jx91qdcrj5","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3i000u18jxbvcubohn"},{"post_id":"cl4ayud3c000j18jxe8al48xo","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3j000w18jx2fskhh8k"},{"post_id":"cl4ayud3h000s18jxhuqk8hfq","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3k000z18jx6zaigdek"},{"post_id":"cl4ayud3i000v18jxh49v4i9l","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3l001118jxdgrvgjit"},{"post_id":"cl4ayud3e000l18jxbiie81nq","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3m001318jxhoe6hc3o"},{"post_id":"cl4ayud3j000x18jxaa5s4es4","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3n001518jxdydrhg02"},{"post_id":"cl4ayud3k001018jx6gwrhhrf","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3o001718jx5lemfh7l"},{"post_id":"cl4ayud3f000o18jxc7ph9tth","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3o001918jxbufj57tg"},{"post_id":"cl4ayud3l001218jxa1g95uga","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3p001b18jxaxnw6du9"},{"post_id":"cl4ayud3m001418jx3b349q9t","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3q001d18jxg1nfakci"},{"post_id":"cl4ayud3n001618jxe3es4pil","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3r001f18jxc5i14r0n"},{"post_id":"cl4ayud3o001818jxb4i7c2ui","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3s001h18jxf64bg0it"},{"post_id":"cl4ayud3p001a18jxa3pp69oc","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3t001j18jx0owj7piy"},{"post_id":"cl4ayud3p001c18jx6s9b7bud","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3w001l18jx2oafa4l0"},{"post_id":"cl4ayud3q001e18jxc8dp7otf","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3x001n18jx1zgk52du"},{"post_id":"cl4ayud3r001g18jx5app0elw","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3y001p18jxb1vx4uof"},{"post_id":"cl4ayud3s001i18jxaqikatwa","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud3z001r18jx20pb6z95"},{"post_id":"cl4ayud3t001k18jx6xc3a87x","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud40001t18jx5kfxbcq1"},{"post_id":"cl4ayud3w001m18jxal0rgc72","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud41001v18jxge3g3we8"},{"post_id":"cl4ayud3x001o18jx7mgp6uhn","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud41001x18jx6jhwfxqz"},{"post_id":"cl4ayud3y001q18jxc9mi7677","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud42001z18jx01001p7q"},{"post_id":"cl4ayud3z001s18jx3rbt1d7l","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud43002118jx0o9se7yd"},{"post_id":"cl4ayud40001u18jxhxxr6gln","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud44002318jxde6a3gal"},{"post_id":"cl4ayud41001w18jx47c7fbq8","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud46002518jxazo70by7"},{"post_id":"cl4ayud42001y18jx7jmo5fik","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud47002718jxcrdnhwr0"},{"post_id":"cl4ayud42002018jx8qclhl8z","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud47002918jx3upohbzj"},{"post_id":"cl4ayud43002218jx49jwds9i","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud48002b18jx2pogdjnf"},{"post_id":"cl4ayud45002418jxd05a3h8p","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud49002d18jx50lk7h2a"},{"post_id":"cl4ayud46002618jx2wz263li","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud4a002f18jx0scwej8u"},{"post_id":"cl4ayud47002818jx7chtaika","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud4b002i18jx604h7bb0"},{"post_id":"cl4ayud48002a18jxe8jlffib","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud4c002k18jx5zxs5td6"},{"post_id":"cl4ayud48002c18jxfkniem0z","tag_id":"cl4ayud3f000m18jx01ak58dq","_id":"cl4ayud4d002m18jxhtd7hap8"},{"post_id":"cl4ayud49002e18jxd325fujl","tag_id":"cl4ayud4b002h18jx02syep7l","_id":"cl4ayud4e002p18jx34ebfsrb"},{"post_id":"cl4ayud4a002g18jxf0slc86g","tag_id":"cl4ayud4d002o18jxaewj98ys","_id":"cl4ayud4m002u18jx55ok8g2z"},{"post_id":"cl4ayud4e002q18jx6yyl5hye","tag_id":"cl4ayud4f002s18jx7g7l0gpq","_id":"cl4ayud4n002w18jx4oskgtif"},{"post_id":"cl4ayud4m002t18jx31ce03z8","tag_id":"cl4ayud4f002s18jx7g7l0gpq","_id":"cl4ayud4n002x18jx6yzj588m"},{"post_id":"cl4fpsc2500001afdfrqjdfwu","tag_id":"cl4ayud4f002s18jx7g7l0gpq","_id":"cl4fpsc2a00011afdbpg8026h"},{"post_id":"cl4i0oud300004jfdbdr1e0f0","tag_id":"cl4ayud4f002s18jx7g7l0gpq","_id":"cl4i0oud900014jfd9t4qag1b"}],"Tag":[{"name":"code analysis, Wi-Fi, Driver;","_id":"cl4ayud2z000218jx4lb84mo8"},{"name":"Wi-Fi","_id":"cl4ayud3f000m18jx01ak58dq"},{"name":"git skills","_id":"cl4ayud4b002h18jx02syep7l"},{"name":"Shell script","_id":"cl4ayud4d002o18jxaewj98ys"},{"name":"Misc","_id":"cl4ayud4f002s18jx7g7l0gpq"}]}}